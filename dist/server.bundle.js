/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/api/ContentController.js":
/*!**************************************!*\
  !*** ./src/api/ContentController.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _model_Article__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/model/Article */ \"./src/model/Article.js\");\n/* harmony import */ var _model_Links__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/model/Links */ \"./src/model/Links.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! qs */ \"qs\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/config */ \"./src/config/index.js\");\n/* harmony import */ var make_dir__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! make-dir */ \"make-dir\");\n/* harmony import */ var make_dir__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(make_dir__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n// import { hwUpload } from '@/common/HwUtils';\n// import dirExists from '@/common/Utils';\n\n\n// import { wxMsgCheck, wxImgCheck } from '@/common/WxUtils';\nclass ContentController {\n  // 获取文章列表\n  async getPostList(ctx) {\n    const body = qs__WEBPACK_IMPORTED_MODULE_3___default().parse(ctx.query);\n    const sort = body.sort ? body.sort : 'created';\n    const page = body.page ? parseInt(body.page) : 0;\n    const limit = body.limit ? parseInt(body.limit) : 20;\n    const options = {};\n\n    // const post = await Article({\n    //     title: '测试share',\n    //     content: '测试内容share',\n    //     catalog: 'share',\n    //     fav: 20,\n    //     isEnd: '0',\n    //     reads: '0',\n    //     answer: '0',\n    //     status: '0',\n    //     isTop: '0',\n    //     sort: '0',\n    //     tags: [{ name: '精华', class: '' }]\n    // });\n\n    // const tmp = await post.save();\n    // console.log(tmp);\n\n    if (body.title) {\n      options.title = {\n        $regex: body.title\n      };\n    }\n    if (body.catalog && body.catalog.length > 0) {\n      options.catalog = {\n        $in: body.catalog\n      };\n    }\n    if (body.isTop) {\n      options.isTop = body.isTop;\n    }\n    if (body.isEnd) {\n      options.isEnd = body.isEnd;\n    }\n    if (body.status) {\n      options.status = body.status;\n    }\n    if (typeof body.tag !== 'undefined' && body.tag !== '') {\n      options.tags = {\n        $elemMatch: {\n          name: body.tag\n        }\n      };\n    }\n    const result = await _model_Article__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getList(options, sort, page, limit);\n    // const total = await Article.countList(options);\n\n    ctx.body = {\n      code: 0,\n      data: result,\n      msg: '获取文章列表成功'\n      // total: total\n    };\n  }\n\n  // 查询友链\n  async getLinks(ctx) {\n    const result = await _model_Links__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find({\n      type: 'links'\n    });\n    // const post = await Links({\n    //     title: '个人网站',\n    //     link: 'https://zzf.net.cn',\n    //     type: 'tips',\n    //     isTop: '0',\n    //     sort: '0'\n    // });\n\n    // const tmp = await post.save();\n    // console.log(tmp);\n\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n\n  // 查询温馨提醒\n  async getTips(ctx) {\n    const result = await _model_Links__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find({\n      type: 'tips'\n    });\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n\n  // 本周热议\n  async getTopWeek(ctx) {\n    const result = await _model_Article__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getTopWeek();\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n\n  // 上传图片\n  async uploadImg(ctx) {\n    const file = ctx.request.files.file;\n    // 图片名称、图片格式、存储的位置，返回前台一可以读取的路径\n    // 本地上传\n    // const ext = file.name.split('.').pop();\n    const ext = file.newFilename.split('.').pop();\n    const dir = `${_config__WEBPACK_IMPORTED_MODULE_5__[\"default\"].uploadPath}/${dayjs__WEBPACK_IMPORTED_MODULE_4___default()().format('YYYYMMDD')}`;\n    // // 判断路径是否存在，不存在则创建\n    await make_dir__WEBPACK_IMPORTED_MODULE_6___default()(dir);\n    // // 存储文件到指定的路径\n    // // 给文件一个唯一的名称\n    const picname = (0,uuid__WEBPACK_IMPORTED_MODULE_7__.v4)();\n    const destPath = `${dir}/${picname}.${ext}`;\n    const reader = fs__WEBPACK_IMPORTED_MODULE_2___default().createReadStream(file.filepath);\n    const upStream = fs__WEBPACK_IMPORTED_MODULE_2___default().createWriteStream(destPath);\n    const filePath = `/${dayjs__WEBPACK_IMPORTED_MODULE_4___default()().format('YYYYMMDD')}/${picname}.${ext}`;\n    // // method 1\n    reader.pipe(upStream);\n\n    // const stat = fs.statSync(file.filepath);\n    // 获取上传文件大小\n    // console.log(stat.size);\n    // method 2\n    // 控制上传进度\n    // let totalLength = 0;\n    // reader.on('data', chunk => {\n    //     totalLength += chunk.length;\n    //     console.log(totalLength);\n    //     if (upStream.write(chunk) === false) {\n    //         reader.pause();\n    //     }\n    // });\n\n    // upStream.on('drain', () => {\n    //     reader.resume();\n    // });\n\n    // reader.on('end', () => {\n    //     upStream.end();\n    // });\n\n    ctx.body = {\n      code: 0,\n      msg: '图片上传成功',\n      data: filePath\n    };\n\n    // 接第三方服务上传\n    // const result = await wxImgCheck(file);\n    // if (result.errcode === 0) {\n    //     const uuid = uuidv4();\n    //     // 图片名称、图片格式、存储的位置，返回前台一可以读取的路径\n    //     const user = await User.findByID(ctx._id);\n    //     const fileName = `${user.username}/${moment().format('YYYY-MM-DD')}/${uuid}-${file.name}`;\n    //     try {\n    //         const result = await hwUpload(fileName, file.path);\n    //         ctx.body = {\n    //             code: 0,\n    //             msg: '图片上传成功',\n    //             data: result,\n    //         };\n    //     } catch (error) {\n    //         ctx.body = {\n    //             code: 500,\n    //             msg: '图片上传失败' + error.message,\n    //         };\n    //     }\n    // } else {\n    //     ctx.body = {\n    //         code: 0,\n    //         msg: result.errmsg,\n    //     };\n    // }\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new ContentController());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDO0lBQy9DLE1BQU1NLFFBQVEsR0FBRyxJQUFJeEQsNENBQU0sQ0FBQyxDQUFDLENBQUNnRCxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUlDLE9BQU8sSUFBSVAsR0FBRyxFQUFFO0lBQ3BFO0lBQ0FTLE1BQU0sQ0FBQ00sSUFBSSxDQUFDSCxRQUFRLENBQUM7O0lBRXJCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBOztJQUVBO0lBQ0E7SUFDQTs7SUFFQTtJQUNBO0lBQ0E7O0lBRUEvQyxHQUFHLENBQUNDLElBQUksR0FBRztNQUNQc0IsSUFBSSxFQUFFLENBQUM7TUFDUEUsR0FBRyxFQUFFLFFBQVE7TUFDYkQsSUFBSSxFQUFFeUI7SUFDVixDQUFDOztJQUVEO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7RUFDSjtBQUNKO0FBRUEsaUVBQWUsSUFBSW5ELGlCQUFpQixDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvYXBpL0NvbnRlbnRDb250cm9sbGVyLmpzPzI1NjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFydGljbGUgZnJvbSAnQC9tb2RlbC9BcnRpY2xlJztcbmltcG9ydCBMaW5rcyBmcm9tICdAL21vZGVsL0xpbmtzJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcXMgZnJvbSAncXMnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdkYXlqcyc7XG5pbXBvcnQgY29uZmlnIGZyb20gJ0AvY29uZmlnJztcbi8vIGltcG9ydCB7IGh3VXBsb2FkIH0gZnJvbSAnQC9jb21tb24vSHdVdGlscyc7XG4vLyBpbXBvcnQgZGlyRXhpc3RzIGZyb20gJ0AvY29tbW9uL1V0aWxzJztcbmltcG9ydCBtYWtlRGlyZWN0b3J5IGZyb20gJ21ha2UtZGlyJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuLy8gaW1wb3J0IHsgd3hNc2dDaGVjaywgd3hJbWdDaGVjayB9IGZyb20gJ0AvY29tbW9uL1d4VXRpbHMnO1xuY2xhc3MgQ29udGVudENvbnRyb2xsZXIge1xuICAgIC8vIOiOt+WPluaWh+eroOWIl+ihqFxuICAgIGFzeW5jIGdldFBvc3RMaXN0KGN0eCkge1xuICAgICAgICBjb25zdCBib2R5ID0gcXMucGFyc2UoY3R4LnF1ZXJ5KTtcblxuICAgICAgICBjb25zdCBzb3J0ID0gYm9keS5zb3J0ID8gYm9keS5zb3J0IDogJ2NyZWF0ZWQnO1xuICAgICAgICBjb25zdCBwYWdlID0gYm9keS5wYWdlID8gcGFyc2VJbnQoYm9keS5wYWdlKSA6IDA7XG4gICAgICAgIGNvbnN0IGxpbWl0ID0gYm9keS5saW1pdCA/IHBhcnNlSW50KGJvZHkubGltaXQpIDogMjA7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcblxuICAgICAgICAvLyBjb25zdCBwb3N0ID0gYXdhaXQgQXJ0aWNsZSh7XG4gICAgICAgIC8vICAgICB0aXRsZTogJ+a1i+ivlXNoYXJlJyxcbiAgICAgICAgLy8gICAgIGNvbnRlbnQ6ICfmtYvor5XlhoXlrrlzaGFyZScsXG4gICAgICAgIC8vICAgICBjYXRhbG9nOiAnc2hhcmUnLFxuICAgICAgICAvLyAgICAgZmF2OiAyMCxcbiAgICAgICAgLy8gICAgIGlzRW5kOiAnMCcsXG4gICAgICAgIC8vICAgICByZWFkczogJzAnLFxuICAgICAgICAvLyAgICAgYW5zd2VyOiAnMCcsXG4gICAgICAgIC8vICAgICBzdGF0dXM6ICcwJyxcbiAgICAgICAgLy8gICAgIGlzVG9wOiAnMCcsXG4gICAgICAgIC8vICAgICBzb3J0OiAnMCcsXG4gICAgICAgIC8vICAgICB0YWdzOiBbeyBuYW1lOiAn57K+5Y2OJywgY2xhc3M6ICcnIH1dXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIC8vIGNvbnN0IHRtcCA9IGF3YWl0IHBvc3Quc2F2ZSgpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0bXApO1xuXG4gICAgICAgIGlmIChib2R5LnRpdGxlKSB7XG4gICAgICAgICAgICBvcHRpb25zLnRpdGxlID0geyAkcmVnZXg6IGJvZHkudGl0bGUgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYm9keS5jYXRhbG9nICYmIGJvZHkuY2F0YWxvZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvcHRpb25zLmNhdGFsb2cgPSB7ICRpbjogYm9keS5jYXRhbG9nIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJvZHkuaXNUb3ApIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaXNUb3AgPSBib2R5LmlzVG9wO1xuICAgICAgICB9XG4gICAgICAgIGlmIChib2R5LmlzRW5kKSB7XG4gICAgICAgICAgICBvcHRpb25zLmlzRW5kID0gYm9keS5pc0VuZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYm9keS5zdGF0dXMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuc3RhdHVzID0gYm9keS5zdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBib2R5LnRhZyAhPT0gJ3VuZGVmaW5lZCcgJiYgYm9keS50YWcgIT09ICcnKSB7XG4gICAgICAgICAgICBvcHRpb25zLnRhZ3MgPSB7ICRlbGVtTWF0Y2g6IHsgbmFtZTogYm9keS50YWcgfSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFydGljbGUuZ2V0TGlzdChvcHRpb25zLCBzb3J0LCBwYWdlLCBsaW1pdCk7XG4gICAgICAgIC8vIGNvbnN0IHRvdGFsID0gYXdhaXQgQXJ0aWNsZS5jb3VudExpc3Qob3B0aW9ucyk7XG5cbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgbXNnOiAn6I635Y+W5paH56ug5YiX6KGo5oiQ5YqfJyxcbiAgICAgICAgICAgIC8vIHRvdGFsOiB0b3RhbFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOafpeivouWPi+mTvlxuICAgIGFzeW5jIGdldExpbmtzKGN0eCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBMaW5rcy5maW5kKHsgdHlwZTogJ2xpbmtzJyB9KTtcbiAgICAgICAgLy8gY29uc3QgcG9zdCA9IGF3YWl0IExpbmtzKHtcbiAgICAgICAgLy8gICAgIHRpdGxlOiAn5Liq5Lq6572R56uZJyxcbiAgICAgICAgLy8gICAgIGxpbms6ICdodHRwczovL3p6Zi5uZXQuY24nLFxuICAgICAgICAvLyAgICAgdHlwZTogJ3RpcHMnLFxuICAgICAgICAvLyAgICAgaXNUb3A6ICcwJyxcbiAgICAgICAgLy8gICAgIHNvcnQ6ICcwJ1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICAvLyBjb25zdCB0bXAgPSBhd2FpdCBwb3N0LnNhdmUoKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2codG1wKTtcblxuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g5p+l6K+i5rip6aao5o+Q6YaSXG4gICAgYXN5bmMgZ2V0VGlwcyhjdHgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTGlua3MuZmluZCh7IHR5cGU6ICd0aXBzJyB9KTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOacrOWRqOeDreiurlxuICAgIGFzeW5jIGdldFRvcFdlZWsoY3R4KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFydGljbGUuZ2V0VG9wV2VlaygpO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g5LiK5Lyg5Zu+54mHXG4gICAgYXN5bmMgdXBsb2FkSW1nKGN0eCkge1xuICAgICAgICBjb25zdCBmaWxlID0gY3R4LnJlcXVlc3QuZmlsZXMuZmlsZTtcbiAgICAgICAgLy8g5Zu+54mH5ZCN56ew44CB5Zu+54mH5qC85byP44CB5a2Y5YKo55qE5L2N572u77yM6L+U5Zue5YmN5Y+w5LiA5Y+v5Lul6K+75Y+W55qE6Lev5b6EXG4gICAgICAgIC8vIOacrOWcsOS4iuS8oFxuICAgICAgICAvLyBjb25zdCBleHQgPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKTtcbiAgICAgICAgY29uc3QgZXh0ID0gZmlsZS5uZXdGaWxlbmFtZS5zcGxpdCgnLicpLnBvcCgpO1xuICAgICAgICBjb25zdCBkaXIgPSBgJHtjb25maWcudXBsb2FkUGF0aH0vJHttb21lbnQoKS5mb3JtYXQoJ1lZWVlNTUREJyl9YDtcbiAgICAgICAgLy8gLy8g5Yik5pat6Lev5b6E5piv5ZCm5a2Y5Zyo77yM5LiN5a2Y5Zyo5YiZ5Yib5bu6XG4gICAgICAgIGF3YWl0IG1ha2VEaXJlY3RvcnkoZGlyKTtcbiAgICAgICAgLy8gLy8g5a2Y5YKo5paH5Lu25Yiw5oyH5a6a55qE6Lev5b6EXG4gICAgICAgIC8vIC8vIOe7meaWh+S7tuS4gOS4quWUr+S4gOeahOWQjeensFxuICAgICAgICBjb25zdCBwaWNuYW1lID0gdXVpZHY0KCk7XG4gICAgICAgIGNvbnN0IGRlc3RQYXRoID0gYCR7ZGlyfS8ke3BpY25hbWV9LiR7ZXh0fWA7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGZzLmNyZWF0ZVJlYWRTdHJlYW0oZmlsZS5maWxlcGF0aCk7XG4gICAgICAgIGNvbnN0IHVwU3RyZWFtID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0oZGVzdFBhdGgpO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAvJHttb21lbnQoKS5mb3JtYXQoJ1lZWVlNTUREJyl9LyR7cGljbmFtZX0uJHtleHR9YDtcbiAgICAgICAgLy8gLy8gbWV0aG9kIDFcbiAgICAgICAgcmVhZGVyLnBpcGUodXBTdHJlYW0pO1xuXG4gICAgICAgIC8vIGNvbnN0IHN0YXQgPSBmcy5zdGF0U3luYyhmaWxlLmZpbGVwYXRoKTtcbiAgICAgICAgLy8g6I635Y+W5LiK5Lyg5paH5Lu25aSn5bCPXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHN0YXQuc2l6ZSk7XG4gICAgICAgIC8vIG1ldGhvZCAyXG4gICAgICAgIC8vIOaOp+WItuS4iuS8oOi/m+W6plxuICAgICAgICAvLyBsZXQgdG90YWxMZW5ndGggPSAwO1xuICAgICAgICAvLyByZWFkZXIub24oJ2RhdGEnLCBjaHVuayA9PiB7XG4gICAgICAgIC8vICAgICB0b3RhbExlbmd0aCArPSBjaHVuay5sZW5ndGg7XG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyh0b3RhbExlbmd0aCk7XG4gICAgICAgIC8vICAgICBpZiAodXBTdHJlYW0ud3JpdGUoY2h1bmspID09PSBmYWxzZSkge1xuICAgICAgICAvLyAgICAgICAgIHJlYWRlci5wYXVzZSgpO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9KTtcblxuICAgICAgICAvLyB1cFN0cmVhbS5vbignZHJhaW4nLCAoKSA9PiB7XG4gICAgICAgIC8vICAgICByZWFkZXIucmVzdW1lKCk7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIC8vIHJlYWRlci5vbignZW5kJywgKCkgPT4ge1xuICAgICAgICAvLyAgICAgdXBTdHJlYW0uZW5kKCk7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgIG1zZzogJ+WbvueJh+S4iuS8oOaIkOWKnycsXG4gICAgICAgICAgICBkYXRhOiBmaWxlUGF0aCxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDmjqXnrKzkuInmlrnmnI3liqHkuIrkvKBcbiAgICAgICAgLy8gY29uc3QgcmVzdWx0ID0gYXdhaXQgd3hJbWdDaGVjayhmaWxlKTtcbiAgICAgICAgLy8gaWYgKHJlc3VsdC5lcnJjb2RlID09PSAwKSB7XG4gICAgICAgIC8vICAgICBjb25zdCB1dWlkID0gdXVpZHY0KCk7XG4gICAgICAgIC8vICAgICAvLyDlm77niYflkI3np7DjgIHlm77niYfmoLzlvI/jgIHlrZjlgqjnmoTkvY3nva7vvIzov5Tlm57liY3lj7DkuIDlj6/ku6Xor7vlj5bnmoTot6/lvoRcbiAgICAgICAgLy8gICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlEKGN0eC5faWQpO1xuICAgICAgICAvLyAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHt1c2VyLnVzZXJuYW1lfS8ke21vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpfS8ke3V1aWR9LSR7ZmlsZS5uYW1lfWA7XG4gICAgICAgIC8vICAgICB0cnkge1xuICAgICAgICAvLyAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGh3VXBsb2FkKGZpbGVOYW1lLCBmaWxlLnBhdGgpO1xuICAgICAgICAvLyAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAvLyAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAvLyAgICAgICAgICAgICBtc2c6ICflm77niYfkuIrkvKDmiJDlip8nLFxuICAgICAgICAvLyAgICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIC8vICAgICAgICAgfTtcbiAgICAgICAgLy8gICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgLy8gICAgICAgICAgICAgbXNnOiAn5Zu+54mH5LiK5Lyg5aSx6LSlJyArIGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIC8vICAgICAgICAgfTtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAvLyAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgIC8vICAgICAgICAgbXNnOiByZXN1bHQuZXJybXNnLFxuICAgICAgICAvLyAgICAgfTtcbiAgICAgICAgLy8gfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IENvbnRlbnRDb250cm9sbGVyKCk7XG4iXSwibmFtZXMiOlsiQXJ0aWNsZSIsIkxpbmtzIiwiZnMiLCJxcyIsIm1vbWVudCIsImNvbmZpZyIsIm1ha2VEaXJlY3RvcnkiLCJ2NCIsInV1aWR2NCIsIkNvbnRlbnRDb250cm9sbGVyIiwiZ2V0UG9zdExpc3QiLCJjdHgiLCJib2R5IiwicGFyc2UiLCJxdWVyeSIsInNvcnQiLCJwYWdlIiwicGFyc2VJbnQiLCJsaW1pdCIsIm9wdGlvbnMiLCJ0aXRsZSIsIiRyZWdleCIsImNhdGFsb2ciLCJsZW5ndGgiLCIkaW4iLCJpc1RvcCIsImlzRW5kIiwic3RhdHVzIiwidGFnIiwidGFncyIsIiRlbGVtTWF0Y2giLCJuYW1lIiwicmVzdWx0IiwiZ2V0TGlzdCIsImNvZGUiLCJkYXRhIiwibXNnIiwiZ2V0TGlua3MiLCJmaW5kIiwidHlwZSIsImdldFRpcHMiLCJnZXRUb3BXZWVrIiwidXBsb2FkSW1nIiwiZmlsZSIsInJlcXVlc3QiLCJmaWxlcyIsImV4dCIsIm5ld0ZpbGVuYW1lIiwic3BsaXQiLCJwb3AiLCJkaXIiLCJ1cGxvYWRQYXRoIiwiZm9ybWF0IiwicGljbmFtZSIsImRlc3RQYXRoIiwicmVhZGVyIiwiY3JlYXRlUmVhZFN0cmVhbSIsImZpbGVwYXRoIiwidXBTdHJlYW0iLCJjcmVhdGVXcml0ZVN0cmVhbSIsImZpbGVQYXRoIiwicGlwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/ContentController.js\n\n}");

/***/ }),

/***/ "./src/api/LoginController.js":
/*!************************************!*\
  !*** ./src/api/LoginController.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_MailConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/MailConfig */ \"./src/config/MailConfig.js\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/config */ \"./src/config/index.js\");\n/* harmony import */ var _common_Utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/common/Utils */ \"./src/common/Utils.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! md5 */ \"md5\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/model/User */ \"./src/model/User.js\");\n/* harmony import */ var _model_SignRecord__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/model/SignRecord */ \"./src/model/SignRecord.js\");\n/* harmony import */ var _config_RedisConfig__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/config/RedisConfig */ \"./src/config/RedisConfig.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_10__);\n\n\n\n\n\n\n\n\n\n\n\nclass LoginController {\n  // 忘记密码，发送邮件\n  async forget(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_7__[\"default\"].findOne({\n      username: body.username\n    });\n    if (!user) {\n      ctx.body = {\n        code: 404,\n        msg: '请检查账号！'\n      };\n      return;\n    }\n    try {\n      const key = (0,uuid__WEBPACK_IMPORTED_MODULE_10__.v4)();\n      (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_9__.setValue)(key, jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default().sign({\n        _id: user._id\n      }, md5__WEBPACK_IMPORTED_MODULE_6___default()(_config__WEBPACK_IMPORTED_MODULE_3__[\"default\"].JWT_SECRET), {\n        expiresIn: '30m'\n      }), 30 * 60);\n      // body.username -> database -> email\n      const result = await (0,_config_MailConfig__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n        type: 'reset',\n        data: {\n          key: key,\n          username: body.username\n        },\n        code: '',\n        expire: dayjs__WEBPACK_IMPORTED_MODULE_2___default()().add(30, 'minutes').format('YYYY-MM-DD HH:mm:ss'),\n        email: body.username,\n        user: user.name ? user.name : body.username\n      });\n      console.log('-----------------');\n      console.log(result);\n      ctx.body = {\n        code: 0,\n        data: result,\n        msg: '邮件发送成功'\n      };\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  // 登录\n  async login(ctx) {\n    // 接收用户的数据\n    // 返回token\n    const {\n      body\n    } = ctx.request;\n    const sid = body.sid;\n    const code = body.code;\n    // 验证图片验证码的时效性、正确性\n    const result = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_4__.checkCode)(sid, code);\n    if (result) {\n      // 验证用户账号密码是否正确\n      let checkUserPasswd = false;\n      const user = await _model_User__WEBPACK_IMPORTED_MODULE_7__[\"default\"].findOne({\n        username: body.username\n      });\n      if (user === null) {\n        ctx.body = {\n          code: 500,\n          msg: '用户名或者密码错误'\n        };\n        return;\n      }\n      if (await bcrypt__WEBPACK_IMPORTED_MODULE_1___default().compare(body.password, user.password)) {\n        checkUserPasswd = true;\n      }\n      if (checkUserPasswd) {\n        // 验证通过，返回Token数据\n        const userObj = user.toJSON();\n        const arr = ['password', 'username'];\n        arr.map(item => {\n          return delete userObj[item];\n        });\n        // 加入isSign属性\n        const signRecord = await _model_SignRecord__WEBPACK_IMPORTED_MODULE_8__[\"default\"].findByUid(userObj._id);\n        if (signRecord !== null) {\n          if (dayjs__WEBPACK_IMPORTED_MODULE_2___default()(signRecord.created).format('YYYY-MM-DD') === dayjs__WEBPACK_IMPORTED_MODULE_2___default()().format('YYYY-MM-DD')) {\n            userObj.isSign = true;\n          } else {\n            userObj.isSign = false;\n          }\n          userObj.lastSign = signRecord.created;\n        } else {\n          // 用户无签到记录\n          userObj.isSign = false;\n        }\n        const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default().sign({\n          _id: userObj._id\n        }, md5__WEBPACK_IMPORTED_MODULE_6___default()(process.env.JWT_SECRET), {\n          expiresIn: 60 * 60 * 24\n        });\n        ctx.body = {\n          code: 0,\n          data: userObj,\n          token,\n          msg: '登录成功'\n        };\n      } else {\n        // 用户名 密码验证失败，返回提示\n        ctx.body = {\n          code: 500,\n          msg: '用户名或者密码错误'\n        };\n      }\n    } else {\n      // 图片验证码校验失败\n      ctx.body = {\n        code: 401,\n        msg: '图片验证码不正确,请检查！'\n      };\n    }\n  }\n\n  // 注册接口\n  async reg(ctx) {\n    // 接收客户端的数据\n    const {\n      body\n    } = ctx.request;\n    // 校验验证码的内容（时效性、有效性）\n    const sid = body.sid;\n    const code = body.code;\n    let msg = {};\n    // 验证图片验证码的时效性、正确性\n    const result = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_4__.checkCode)(sid, code);\n    let check = true;\n    if (result) {\n      // 查库，看username是否被注册\n      const user1 = await _model_User__WEBPACK_IMPORTED_MODULE_7__[\"default\"].findOne({\n        username: body.username\n      });\n      if (user1 !== null && typeof user1.username !== 'undefined') {\n        msg.username = '此邮箱已经注册，可以通过邮箱找回密码';\n        check = false;\n      }\n      const user2 = await _model_User__WEBPACK_IMPORTED_MODULE_7__[\"default\"].findOne({\n        name: body.name\n      });\n      // 查库，看name是否被注册\n      if (user2 !== null && typeof user2.name !== 'undefined') {\n        msg.name = '此昵称已经被注册，请修改';\n        check = false;\n      }\n      // 写入数据到数据库\n      if (check) {\n        body.password = await bcrypt__WEBPACK_IMPORTED_MODULE_1___default().hash(body.password, 5);\n        const user = new _model_User__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n          username: body.username,\n          name: body.name,\n          password: body.password,\n          created: dayjs__WEBPACK_IMPORTED_MODULE_2___default()().format('YYYY-MM-DD HH:mm:ss')\n        });\n        const result = await user.save();\n        ctx.body = {\n          code: 0,\n          data: result,\n          msg: '注册成功'\n        };\n        return;\n      }\n    } else {\n      // veevalidate 显示的错误\n      msg.code = '验证码已经失效，请重新获取！';\n    }\n    ctx.body = {\n      code: 500,\n      msg: msg\n    };\n  }\n\n  // 密码重置\n  async reset(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const sid = body.sid;\n    const code = body.code;\n    let msg = {};\n    // 验证图片验证码的时效性、正确性\n    const result = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_4__.checkCode)(sid, code);\n    if (!body.key) {\n      ctx.body = {\n        code: 500,\n        msg: '请求参数异常，请重新获取链接'\n      };\n      return;\n    }\n    if (!result) {\n      msg.code = ['验证码已经失效，请重新获取！'];\n      ctx.body = {\n        code: 500,\n        msg: msg\n      };\n      return;\n    }\n    if (body.key) {\n      const token = await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_9__.getValue)(body.key);\n      const obj = (0,_common_Utils__WEBPACK_IMPORTED_MODULE_4__.getJWTPayload)('Bearer ' + token);\n      const newpasswd = await bcrypt__WEBPACK_IMPORTED_MODULE_1___default().hash(body.password, 5);\n      await _model_User__WEBPACK_IMPORTED_MODULE_7__[\"default\"].updateOne({\n        _id: obj._id\n      }, {\n        password: newpasswd\n      });\n      ctx.body = {\n        code: 200,\n        msg: '更新用户密码成功！'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '链接已经失效'\n      };\n    }\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new LoginController());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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USxFQUFFc0I7TUFDZCxDQUNKLENBQUM7TUFDRGxELEdBQUcsQ0FBQ0MsSUFBSSxHQUFHO1FBQ1BLLElBQUksRUFBRSxHQUFHO1FBQ1RDLEdBQUcsRUFBRTtNQUNULENBQUM7SUFDTCxDQUFDLE1BQU07TUFDSFAsR0FBRyxDQUFDQyxJQUFJLEdBQUc7UUFDUEssSUFBSSxFQUFFLEdBQUc7UUFDVEMsR0FBRyxFQUFFO01BQ1QsQ0FBQztJQUNMO0VBQ0o7QUFDSjtBQUVBLGlFQUFlLElBQUlULGVBQWUsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL2FwaS9Mb2dpbkNvbnRyb2xsZXIuanM/OTUwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc2VuZCBmcm9tICdAL2NvbmZpZy9NYWlsQ29uZmlnJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0JztcbmltcG9ydCBtb21lbnQgZnJvbSAnZGF5anMnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICdAL2NvbmZpZyc7XG5pbXBvcnQgeyBjaGVja0NvZGUsIGdldEpXVFBheWxvYWQsIGdlbmVyYXRlVG9rZW4sIGNoZWNrUmVkaXNBY2NvdW50Q29kZSwgZ2V0VGVtcE5hbWUgfSBmcm9tICdAL2NvbW1vbi9VdGlscyc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgbWQ1IGZyb20gJ21kNSc7XG5pbXBvcnQgVXNlciBmcm9tICdAL21vZGVsL1VzZXInO1xuaW1wb3J0IFNpZ25SZWNvcmQgZnJvbSAnQC9tb2RlbC9TaWduUmVjb3JkJztcbmltcG9ydCB7IGdldFZhbHVlLCBzZXRWYWx1ZSB9IGZyb20gJ0AvY29uZmlnL1JlZGlzQ29uZmlnJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG5jbGFzcyBMb2dpbkNvbnRyb2xsZXIge1xuICAgIC8vIOW/mOiusOWvhuegge+8jOWPkemAgemCruS7tlxuICAgIGFzeW5jIGZvcmdldChjdHgpIHtcbiAgICAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lIH0pO1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDQwNCxcbiAgICAgICAgICAgICAgICBtc2c6ICfor7fmo4Dmn6XotKblj7fvvIEnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gdXVpZHY0KCk7XG4gICAgICAgICAgICBzZXRWYWx1ZShcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgand0LnNpZ24oeyBfaWQ6IHVzZXIuX2lkIH0sIG1kNShjb25maWcuSldUX1NFQ1JFVCksIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0luOiAnMzBtJyxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAzMCAqIDYwXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgLy8gYm9keS51c2VybmFtZSAtPiBkYXRhYmFzZSAtPiBlbWFpbFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VuZCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc2V0JyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogYm9keS51c2VybmFtZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvZGU6ICcnLFxuICAgICAgICAgICAgICAgIGV4cGlyZTogbW9tZW50KCkuYWRkKDMwLCAnbWludXRlcycpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBib2R5LnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIubmFtZSA/IHVzZXIubmFtZSA6IGJvZHkudXNlcm5hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0tLScpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgICAgIG1zZzogJ+mCruS7tuWPkemAgeaIkOWKnycsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOeZu+W9lVxuICAgIGFzeW5jIGxvZ2luKGN0eCkge1xuICAgICAgICAvLyDmjqXmlLbnlKjmiLfnmoTmlbDmja5cbiAgICAgICAgLy8g6L+U5ZuedG9rZW5cbiAgICAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAgICAgY29uc3Qgc2lkID0gYm9keS5zaWQ7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBib2R5LmNvZGU7XG4gICAgICAgIC8vIOmqjOivgeWbvueJh+mqjOivgeeggeeahOaXtuaViOaAp+OAgeato+ehruaAp1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGVja0NvZGUoc2lkLCBjb2RlKTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgLy8g6aqM6K+B55So5oi36LSm5Y+35a+G56CB5piv5ZCm5q2j56GuXG4gICAgICAgICAgICBsZXQgY2hlY2tVc2VyUGFzc3dkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgdXNlcm5hbWU6IGJvZHkudXNlcm5hbWUgfSk7XG4gICAgICAgICAgICBpZiAodXNlciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgICAgIG1zZzogJ+eUqOaIt+WQjeaIluiAheWvhueggemUmeivrycsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXdhaXQgYmNyeXB0LmNvbXBhcmUoYm9keS5wYXNzd29yZCwgdXNlci5wYXNzd29yZCkpIHtcbiAgICAgICAgICAgICAgICBjaGVja1VzZXJQYXNzd2QgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoZWNrVXNlclBhc3N3ZCkge1xuICAgICAgICAgICAgICAgIC8vIOmqjOivgemAmui/h++8jOi/lOWbnlRva2Vu5pWw5o2uXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlck9iaiA9IHVzZXIudG9KU09OKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXJyID0gWydwYXNzd29yZCcsICd1c2VybmFtZSddO1xuICAgICAgICAgICAgICAgIGFyci5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGUgdXNlck9ialtpdGVtXTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyDliqDlhaVpc1NpZ27lsZ7mgKdcbiAgICAgICAgICAgICAgICBjb25zdCBzaWduUmVjb3JkID0gYXdhaXQgU2lnblJlY29yZC5maW5kQnlVaWQodXNlck9iai5faWQpO1xuICAgICAgICAgICAgICAgIGlmIChzaWduUmVjb3JkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtb21lbnQoc2lnblJlY29yZC5jcmVhdGVkKS5mb3JtYXQoJ1lZWVktTU0tREQnKSA9PT0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJPYmouaXNTaWduID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJPYmouaXNTaWduID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdXNlck9iai5sYXN0U2lnbiA9IHNpZ25SZWNvcmQuY3JlYXRlZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyDnlKjmiLfml6Dnrb7liLDorrDlvZVcbiAgICAgICAgICAgICAgICAgICAgdXNlck9iai5pc1NpZ24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBqd3Quc2lnbih7IF9pZDogdXNlck9iai5faWQgfSwgbWQ1KHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpLCB7IGV4cGlyZXNJbjogNjAgKiA2MCAqIDI0IH0pO1xuICAgICAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB1c2VyT2JqLFxuICAgICAgICAgICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgICAgICAgICAgbXNnOiAn55m75b2V5oiQ5YqfJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDnlKjmiLflkI0g5a+G56CB6aqM6K+B5aSx6LSl77yM6L+U5Zue5o+Q56S6XG4gICAgICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgbXNnOiAn55So5oi35ZCN5oiW6ICF5a+G56CB6ZSZ6K+vJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8g5Zu+54mH6aqM6K+B56CB5qCh6aqM5aSx6LSlXG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiA0MDEsXG4gICAgICAgICAgICAgICAgbXNnOiAn5Zu+54mH6aqM6K+B56CB5LiN5q2j56GuLOivt+ajgOafpe+8gScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g5rOo5YaM5o6l5Y+jXG4gICAgYXN5bmMgcmVnKGN0eCkge1xuICAgICAgICAvLyDmjqXmlLblrqLmiLfnq6/nmoTmlbDmja5cbiAgICAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAgICAgLy8g5qCh6aqM6aqM6K+B56CB55qE5YaF5a6577yI5pe25pWI5oCn44CB5pyJ5pWI5oCn77yJXG4gICAgICAgIGNvbnN0IHNpZCA9IGJvZHkuc2lkO1xuICAgICAgICBjb25zdCBjb2RlID0gYm9keS5jb2RlO1xuICAgICAgICBsZXQgbXNnID0ge307XG4gICAgICAgIC8vIOmqjOivgeWbvueJh+mqjOivgeeggeeahOaXtuaViOaAp+OAgeato+ehruaAp1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGVja0NvZGUoc2lkLCBjb2RlKTtcbiAgICAgICAgbGV0IGNoZWNrID0gdHJ1ZTtcbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgLy8g5p+l5bqT77yM55yLdXNlcm5hbWXmmK/lkKbooqvms6jlhoxcbiAgICAgICAgICAgIGNvbnN0IHVzZXIxID0gYXdhaXQgVXNlci5maW5kT25lKHsgdXNlcm5hbWU6IGJvZHkudXNlcm5hbWUgfSk7XG4gICAgICAgICAgICBpZiAodXNlcjEgIT09IG51bGwgJiYgdHlwZW9mIHVzZXIxLnVzZXJuYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIG1zZy51c2VybmFtZSA9ICfmraTpgq7nrrHlt7Lnu4/ms6jlhozvvIzlj6/ku6XpgJrov4fpgq7nrrHmib7lm57lr4bnoIEnO1xuICAgICAgICAgICAgICAgIGNoZWNrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1c2VyMiA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IG5hbWU6IGJvZHkubmFtZSB9KTtcbiAgICAgICAgICAgIC8vIOafpeW6k++8jOeci25hbWXmmK/lkKbooqvms6jlhoxcbiAgICAgICAgICAgIGlmICh1c2VyMiAhPT0gbnVsbCAmJiB0eXBlb2YgdXNlcjIubmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBtc2cubmFtZSA9ICfmraTmmLXnp7Dlt7Lnu4/ooqvms6jlhozvvIzor7fkv67mlLknO1xuICAgICAgICAgICAgICAgIGNoZWNrID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDlhpnlhaXmlbDmja7liLDmlbDmja7lupNcbiAgICAgICAgICAgIGlmIChjaGVjaykge1xuICAgICAgICAgICAgICAgIGJvZHkucGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChib2R5LnBhc3N3b3JkLCA1KTtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoe1xuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogYm9keS51c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogYm9keS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogYm9keS5wYXNzd29yZCxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZDogbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgbXNnOiAn5rOo5YaM5oiQ5YqfJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHZlZXZhbGlkYXRlIOaYvuekuueahOmUmeivr1xuICAgICAgICAgICAgbXNnLmNvZGUgPSAn6aqM6K+B56CB5bey57uP5aSx5pWI77yM6K+36YeN5paw6I635Y+W77yBJztcbiAgICAgICAgfVxuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgIG1zZzogbXNnLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOWvhueggemHjee9rlxuICAgIGFzeW5jIHJlc2V0KGN0eCkge1xuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICBjb25zdCBzaWQgPSBib2R5LnNpZDtcbiAgICAgICAgY29uc3QgY29kZSA9IGJvZHkuY29kZTtcbiAgICAgICAgbGV0IG1zZyA9IHt9O1xuICAgICAgICAvLyDpqozor4Hlm77niYfpqozor4HnoIHnmoTml7bmlYjmgKfjgIHmraPnoa7mgKdcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hlY2tDb2RlKHNpZCwgY29kZSk7XG4gICAgICAgIGlmICghYm9keS5rZXkpIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICBtc2c6ICfor7fmsYLlj4LmlbDlvILluLjvvIzor7fph43mlrDojrflj5bpk77mjqUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgbXNnLmNvZGUgPSBbJ+mqjOivgeeggeW3sue7j+WkseaViO+8jOivt+mHjeaWsOiOt+WPlu+8gSddO1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogbXNnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChib2R5LmtleSkge1xuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCBnZXRWYWx1ZShib2R5LmtleSk7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBnZXRKV1RQYXlsb2FkKCdCZWFyZXIgJyArIHRva2VuKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld3Bhc3N3ZCA9IGF3YWl0IGJjcnlwdC5oYXNoKGJvZHkucGFzc3dvcmQsIDUpO1xuICAgICAgICAgICAgYXdhaXQgVXNlci51cGRhdGVPbmUoXG4gICAgICAgICAgICAgICAgeyBfaWQ6IG9iai5faWQgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBuZXdwYXNzd2QsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgICAgICAgICBtc2c6ICfmm7TmlrDnlKjmiLflr4bnoIHmiJDlip/vvIEnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICBtc2c6ICfpk77mjqXlt7Lnu4/lpLHmlYgnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IExvZ2luQ29udHJvbGxlcigpO1xuIl0sIm5hbWVzIjpbInNlbmQiLCJiY3J5cHQiLCJtb21lbnQiLCJjb25maWciLCJjaGVja0NvZGUiLCJnZXRKV1RQYXlsb2FkIiwiZ2VuZXJhdGVUb2tlbiIsImNoZWNrUmVkaXNBY2NvdW50Q29kZSIsImdldFRlbXBOYW1lIiwiand0IiwibWQ1IiwiVXNlciIsIlNpZ25SZWNvcmQiLCJnZXRWYWx1ZSIsInNldFZhbHVlIiwidjQiLCJ1dWlkdjQiLCJMb2dpbkNvbnRyb2xsZXIiLCJmb3JnZXQiLCJjdHgiLCJib2R5IiwicmVxdWVzdCIsInVzZXIiLCJmaW5kT25lIiwidXNlcm5hbWUiLCJjb2RlIiwibXNnIiwia2V5Iiwic2lnbiIsIl9pZCIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJyZXN1bHQiLCJ0eXBlIiwiZGF0YSIsImV4cGlyZSIsImFkZCIsImZvcm1hdCIsImVtYWlsIiwibmFtZSIsImNvbnNvbGUiLCJsb2ciLCJlIiwibG9naW4iLCJzaWQiLCJjaGVja1VzZXJQYXNzd2QiLCJjb21wYXJlIiwicGFzc3dvcmQiLCJ1c2VyT2JqIiwidG9KU09OIiwiYXJyIiwibWFwIiwiaXRlbSIsInNpZ25SZWNvcmQiLCJmaW5kQnlVaWQiLCJjcmVhdGVkIiwiaXNTaWduIiwibGFzdFNpZ24iLCJ0b2tlbiIsInByb2Nlc3MiLCJlbnYiLCJyZWciLCJjaGVjayIsInVzZXIxIiwidXNlcjIiLCJoYXNoIiwic2F2ZSIsInJlc2V0Iiwib2JqIiwibmV3cGFzc3dkIiwidXBkYXRlT25lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/LoginController.js\n\n}");

/***/ }),

/***/ "./src/api/PublicController.js":
/*!*************************************!*\
  !*** ./src/api/PublicController.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_RedisConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/RedisConfig */ \"./src/config/RedisConfig.js\");\nconst svgCaptcha = __webpack_require__(/*! svg-captcha */ \"svg-captcha\");\n\nclass PublicController {\n  // 获取图片验证码\n  async getCaptcha(ctx) {\n    const body = ctx.query;\n    const newCaptca = svgCaptcha.create({\n      size: 4,\n      ignoreChars: '0oO1ilLI',\n      color: true,\n      noise: Math.floor(Math.random() * 5),\n      width: 150,\n      height: 38\n    });\n    if (typeof body.sid === 'undefined') {\n      ctx.body = {\n        code: 500,\n        msg: '参数不全！'\n      };\n      return;\n    }\n    // 保存图片验证码数据，设置超时时间，单位: s\n    // 设置图片验证码超时10分钟\n    await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_0__.setValue)(body.sid, newCaptca.text, 10 * 60);\n    ctx.body = {\n      code: 0,\n      data: newCaptca.data\n    };\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new PublicController());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL1B1YmxpY0NvbnRyb2xsZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxNQUFNQSxVQUFVLEdBQUdDLG1CQUFPLENBQUMsZ0NBQWEsQ0FBQztBQUNrQjtBQUMzRCxNQUFNRyxnQkFBZ0IsQ0FBQztFQUNuQjtFQUNBLE1BQU1DLFVBQVVBLENBQUNDLEdBQUcsRUFBRTtJQUNsQixNQUFNQyxJQUFJLEdBQUdELEdBQUcsQ0FBQ0UsS0FBSztJQUN0QixNQUFNQyxTQUFTLEdBQUdULFVBQVUsQ0FBQ1UsTUFBTSxDQUFDO01BQ2hDQyxJQUFJLEVBQUUsQ0FBQztNQUNQQyxXQUFXLEVBQUUsVUFBVTtNQUN2QkMsS0FBSyxFQUFFLElBQUk7TUFDWEMsS0FBSyxFQUFFQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztNQUNwQ0MsS0FBSyxFQUFFLEdBQUc7TUFDVkMsTUFBTSxFQUFFO0lBQ1osQ0FBQyxDQUFDO0lBQ0YsSUFBSSxPQUFPWixJQUFJLENBQUNhLEdBQUcsS0FBSyxXQUFXLEVBQUU7TUFDakNkLEdBQUcsQ0FBQ0MsSUFBSSxHQUFHO1FBQ1BjLElBQUksRUFBRSxHQUFHO1FBQ1RDLEdBQUcsRUFBRTtNQUNULENBQUM7TUFDRDtJQUNKO0lBQ0E7SUFDQTtJQUNBLE1BQU1wQiw2REFBUSxDQUFDSyxJQUFJLENBQUNhLEdBQUcsRUFBRVgsU0FBUyxDQUFDYyxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQztJQUNqRGpCLEdBQUcsQ0FBQ0MsSUFBSSxHQUFHO01BQ1BjLElBQUksRUFBRSxDQUFDO01BQ1BHLElBQUksRUFBRWYsU0FBUyxDQUFDZTtJQUNwQixDQUFDO0VBQ0w7QUFDSjtBQUVBLGlFQUFlLElBQUlwQixnQkFBZ0IsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL2FwaS9QdWJsaWNDb250cm9sbGVyLmpzPzY4YWUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc3ZnQ2FwdGNoYSA9IHJlcXVpcmUoJ3N2Zy1jYXB0Y2hhJyk7XG5pbXBvcnQgeyBzZXRWYWx1ZSwgZ2V0VmFsdWUgfSBmcm9tICcuLi9jb25maWcvUmVkaXNDb25maWcnO1xuY2xhc3MgUHVibGljQ29udHJvbGxlciB7XG4gICAgLy8g6I635Y+W5Zu+54mH6aqM6K+B56CBXG4gICAgYXN5bmMgZ2V0Q2FwdGNoYShjdHgpIHtcbiAgICAgICAgY29uc3QgYm9keSA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3QgbmV3Q2FwdGNhID0gc3ZnQ2FwdGNoYS5jcmVhdGUoe1xuICAgICAgICAgICAgc2l6ZTogNCxcbiAgICAgICAgICAgIGlnbm9yZUNoYXJzOiAnMG9PMWlsTEknLFxuICAgICAgICAgICAgY29sb3I6IHRydWUsXG4gICAgICAgICAgICBub2lzZTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNSksXG4gICAgICAgICAgICB3aWR0aDogMTUwLFxuICAgICAgICAgICAgaGVpZ2h0OiAzOFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBib2R5LnNpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICBtc2c6ICflj4LmlbDkuI3lhajvvIEnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIOS/neWtmOWbvueJh+mqjOivgeeggeaVsOaNru+8jOiuvue9rui2heaXtuaXtumXtO+8jOWNleS9jTogc1xuICAgICAgICAvLyDorr7nva7lm77niYfpqozor4HnoIHotoXml7YxMOWIhumSn1xuICAgICAgICBhd2FpdCBzZXRWYWx1ZShib2R5LnNpZCwgbmV3Q2FwdGNhLnRleHQsIDEwICogNjApO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBkYXRhOiBuZXdDYXB0Y2EuZGF0YVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IFB1YmxpY0NvbnRyb2xsZXIoKTtcbiJdLCJuYW1lcyI6WyJzdmdDYXB0Y2hhIiwicmVxdWlyZSIsInNldFZhbHVlIiwiZ2V0VmFsdWUiLCJQdWJsaWNDb250cm9sbGVyIiwiZ2V0Q2FwdGNoYSIsImN0eCIsImJvZHkiLCJxdWVyeSIsIm5ld0NhcHRjYSIsImNyZWF0ZSIsInNpemUiLCJpZ25vcmVDaGFycyIsImNvbG9yIiwibm9pc2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ3aWR0aCIsImhlaWdodCIsInNpZCIsImNvZGUiLCJtc2ciLCJ0ZXh0IiwiZGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/PublicController.js\n\n}");

/***/ }),

/***/ "./src/api/UserController.js":
/*!***********************************!*\
  !*** ./src/api/UserController.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/SignRecord */ \"./src/model/SignRecord.js\");\n/* harmony import */ var _common_Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Utils */ \"./src/common/Utils.js\");\n/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../model/User */ \"./src/model/User.js\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _config_MailConfig__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/config/MailConfig */ \"./src/config/MailConfig.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/config */ \"./src/config/index.js\");\n/* harmony import */ var _config_RedisConfig__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/config/RedisConfig */ \"./src/config/RedisConfig.js\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! qs */ \"qs\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! md5 */ \"md5\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_11__);\n\n\n\n// import UserCollect from '../model/UserCollect';\n\n\n\n\n\n\n\n// import Comments from '@/model/Comments';\n\n\n// import CommentsHands from '@/model/CommentsHands';\nclass UserController {\n  // 用户签到接口\n  async userSign(ctx) {\n    // 取用户的ID\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n\n    // 查询用户上一次签到记录\n    const record = await _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findByUid(obj._id);\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByID(obj._id);\n    let newRecord = {};\n    let result = '';\n    // 判断签到逻辑\n    if (record !== null) {\n      // 有历史的签到数据\n      // 判断用户上一次签到记录的created时间是否与今天相同\n      // 如果当前时间的日期与用户上一次的签到日期相同，说明用户已经签到\n      if (dayjs__WEBPACK_IMPORTED_MODULE_3___default()(record.created).format('YYYY-MM-DD') === dayjs__WEBPACK_IMPORTED_MODULE_3___default()().format('YYYY-MM-DD')) {\n        ctx.body = {\n          code: 500,\n          favs: user.favs,\n          count: user.count,\n          lastSign: record.created,\n          msg: '用户已经签到'\n        };\n        return;\n      } else {\n        // 有上一次的签到记录，并且不与今天相同，进行连续签到的判断\n        // 如果相同，代表用户是在连续签到\n        let count = user.count;\n        let fav = 0;\n        // 判断签到时间: 用户上一次的签到时间等于，当前时间的前一天，说明，用户在连续签到\n        // 第n+1天签到的时候，需要与第n的天created比较\n        if (dayjs__WEBPACK_IMPORTED_MODULE_3___default()(record.created).format('YYYY-MM-DD') === dayjs__WEBPACK_IMPORTED_MODULE_3___default()().subtract(1, 'days').format('YYYY-MM-DD')) {\n          // 连续签到的积分获得逻辑\n          count += 1;\n          if (count < 5) {\n            fav = 5;\n          } else if (count >= 5 && count < 15) {\n            fav = 10;\n          } else if (count >= 15 && count < 30) {\n            fav = 15;\n          } else if (count >= 30 && count < 100) {\n            fav = 20;\n          } else if (count >= 100 && count < 365) {\n            fav = 30;\n          } else if (count >= 365) {\n            fav = 50;\n          }\n          await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n            _id: obj._id\n          }, {\n            // user.favs += fav\n            // user.count += 1\n            $inc: {\n              favs: fav,\n              count: 1\n            }\n          });\n          result = {\n            favs: user.favs + fav,\n            count: user.count + 1\n          };\n        } else {\n          // 用户中断了一次签到\n          // 第n+1天签到的时候，需要与第n的天created比较，如果不相等，说明中断了签到。\n          fav = 5;\n          await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n            _id: obj._id\n          }, {\n            $set: {\n              count: 1\n            },\n            $inc: {\n              favs: fav\n            }\n          });\n          result = {\n            favs: user.favs + fav,\n            count: 1\n          };\n        }\n        // 更新签到记录\n        newRecord = new _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n          uid: obj._id,\n          favs: fav\n        });\n        await newRecord.save();\n      }\n    } else {\n      // 无签到数据 =》 第一次签到\n      // 保存用户的签到数据，签到记数 + 积分数据\n      await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n        _id: obj._id\n      }, {\n        $set: {\n          count: 1\n        },\n        $inc: {\n          favs: 5\n        }\n      });\n      // 保存用户的签到记录\n      newRecord = new _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n        uid: obj._id,\n        favs: 5\n      });\n      await newRecord.save();\n      result = {\n        favs: user.favs + 5,\n        count: 1\n      };\n    }\n    ctx.body = {\n      code: 0,\n      msg: '请求成功',\n      ...result,\n      lastSign: newRecord.created\n    };\n  }\n\n  // 更新用户基本信息接口\n  async updateUserInfo(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    // 判断用户是否修改了邮箱\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n      _id: obj._id\n    });\n    let msg = '';\n    if (body.username && body.username !== user.username) {\n      // 用户修改了邮箱\n      // 发送reset邮件\n      // 判断用户的新邮箱是否已经有人注册\n      const tmpUser = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n        username: body.username\n      });\n      if (tmpUser && tmpUser.password) {\n        ctx.body = {\n          code: 501,\n          msg: '邮箱已经注册'\n        };\n        return;\n      }\n      const key = (0,uuid__WEBPACK_IMPORTED_MODULE_5__.v4)();\n      (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_8__.setValue)(key, jsonwebtoken__WEBPACK_IMPORTED_MODULE_6___default().sign({\n        _id: obj._id\n      }, md5__WEBPACK_IMPORTED_MODULE_11___default()(_config__WEBPACK_IMPORTED_MODULE_7__[\"default\"].JWT_SECRET), {\n        expiresIn: '30m'\n      }));\n      await (0,_config_MailConfig__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n        type: 'email',\n        data: {\n          key: key,\n          username: body.username\n        },\n        code: '',\n        expire: dayjs__WEBPACK_IMPORTED_MODULE_3___default()().add(30, 'minutes').format('YYYY-MM-DD HH:mm:ss'),\n        email: user.username,\n        user: user.name\n      });\n      msg = '更新基本资料成功，账号修改需要邮件确认，请查收邮件！';\n    }\n    const arr = ['username', 'mobile', 'password'];\n    arr.map(item => {\n      return delete body[item];\n    });\n    const result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n      _id: obj._id\n    }, body);\n    if (result.modifiedCount > 0) {\n      ctx.body = {\n        code: 0,\n        msg: msg === '' ? '更新成功' : msg\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '更新失败'\n      };\n    }\n  }\n\n  // 更新用户名\n  async updateUsername(ctx) {\n    const body = ctx.query;\n    if (body.key) {\n      const token = await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_8__.getValue)(body.key);\n      const obj = (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)('Bearer ' + token);\n      await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n        _id: obj._id\n      }, {\n        username: body.username\n      });\n      ctx.body = {\n        code: 0,\n        msg: '更新用户名成功'\n      };\n    }\n  }\n\n  // 修改密码接口\n  async changePasswd(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n      _id: obj._id\n    });\n    if (await bcrypt__WEBPACK_IMPORTED_MODULE_9___default().compare(body.oldpwd, user.password)) {\n      const newpasswd = await bcrypt__WEBPACK_IMPORTED_MODULE_9___default().hash(body.newpwd, 5);\n      await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n        _id: obj._id\n      }, {\n        $set: {\n          password: newpasswd\n        }\n      });\n      ctx.body = {\n        code: 0,\n        msg: '更新密码成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '更新密码错误，请检查！'\n      };\n    }\n  }\n\n  // 设置收藏\n  async setCollect(ctx) {\n    const params = ctx.query;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    if (parseInt(params.isFav)) {\n      // 说明用户已经收藏了帖子\n      await UserCollect.deleteOne({\n        uid: obj._id,\n        tid: params.tid\n      });\n      ctx.body = {\n        code: 200,\n        msg: '取消收藏成功'\n      };\n    } else {\n      const newCollect = new UserCollect({\n        uid: obj._id,\n        tid: params.tid,\n        title: params.title\n      });\n      const result = await newCollect.save();\n      if (result.uid) {\n        ctx.body = {\n          code: 200,\n          data: result,\n          msg: '收藏成功'\n        };\n      }\n    }\n  }\n\n  // 获取收藏列表\n  async getCollectByUid(ctx) {\n    const params = ctx.query;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    const result = await UserCollect.getListByUid(obj._id, params.page, params.limit ? parseInt(params.limit) : 10);\n    const total = await UserCollect.countByUid(obj._id);\n    if (result.length > 0) {\n      ctx.body = {\n        code: 200,\n        data: result,\n        total,\n        msg: '查询列表成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '查询列表失败'\n      };\n    }\n  }\n\n  // 获取用户基本信息\n  async getBasicInfo(ctx) {\n    const params = ctx.query;\n    // const obj = await getJWTPayload(ctx.header.authorization)\n    const uid = params.uid || ctx._id;\n    let user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByID(uid);\n    // 取得用户的签到记录 有没有 > today 0:00:00\n    if (user) {\n      user = user.toJSON();\n      const date = dayjs__WEBPACK_IMPORTED_MODULE_3___default()().format('YYYY-MM-DD');\n      const result = await _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n        uid: uid,\n        created: {\n          $gte: date + ' 00:00:00'\n        }\n      });\n      if (result && result.uid) {\n        user.isSign = true;\n      } else {\n        user.isSign = false;\n      }\n    }\n    ctx.body = {\n      code: 200,\n      data: user,\n      msg: '查询成功！'\n    };\n  }\n\n  // 获取历史消息\n  // 记录评论之后，给作者发送消息\n  async getMsg(ctx) {\n    const params = ctx.query;\n    const page = params.page ? params.page : 0;\n    const limit = params.limit ? parseInt(params.limit) : 0;\n    // 方法一： 嵌套查询 -> aggregate\n    // 方法二： 通过冗余换时间\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    const num = await Comments.getTotal(obj._id);\n    const result = await Comments.getMsgList(obj._id, page, limit);\n    ctx.body = {\n      code: 200,\n      data: result,\n      total: num\n    };\n  }\n\n  // 设置已读消息\n  async setMsg(ctx) {\n    const params = ctx.query;\n    if (params.id) {\n      const result = await Comments.updateOne({\n        _id: params.id\n      }, {\n        isRead: '1'\n      });\n      if (result.ok === 1) {\n        ctx.body = {\n          code: 200\n        };\n      }\n    } else {\n      const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n      const result = await Comments.updateMany({\n        uid: obj._id\n      }, {\n        isRead: '1'\n      });\n      if (result.ok === 1) {\n        ctx.body = {\n          code: 200\n        };\n      }\n    }\n  }\n\n  // 获取历史消息\n  // 记录评论之后，给作者发送消息\n  async getHands(ctx) {\n    const params = ctx.query;\n    const page = params.page ? params.page : 0;\n    const limit = params.limit ? parseInt(params.limit) : 0;\n    // 方法一： 嵌套查询 -> aggregate\n    // 方法二： 通过冗余换时间\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    const result = await CommentsHands.getHandsByUid(obj._id, page, limit);\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  }\n\n  // 获取用户列表\n  async getUsers(ctx) {\n    let params = ctx.query;\n    params = qs__WEBPACK_IMPORTED_MODULE_10___default().parse(params);\n    const page = params.page ? params.page : 0;\n    const limit = params.limit ? parseInt(params.limit) : 0;\n    const sort = params.sort || 'created';\n    const option = params.option || {};\n    const result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getList(option, sort, page, limit);\n    const total = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].countList(option);\n    ctx.body = {\n      code: 200,\n      data: result,\n      total: total\n    };\n  }\n\n  // 管理员删除用户\n  async deleteUserById(ctx) {\n    const {\n      body\n    } = ctx.request;\n    // const user = await User.findOne({ _id: params.id })\n    // if (user) {\n    const result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].deleteMany({\n      _id: {\n        $in: body.ids\n      }\n    });\n    ctx.body = {\n      code: 200,\n      msg: '删除成功',\n      data: result\n    };\n    // } else {\n    //   ctx.body = {\n    //     code: 500,\n    //     msg: '用户不存在或者id信息错误！'\n    //   }\n    // }\n  }\n\n  // 管理员更新用户\n  async updateUserById(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n      _id: body._id\n    });\n    // 1.校验用户是否存在 -> 用户名是否冲突\n    if (!user) {\n      ctx.body = {\n        code: 500,\n        msg: '用户不存在或者id信息错误！'\n      };\n      return;\n    }\n    // if (body.username !== user.username) {\n    //   const userCheckName = await User.findOne({ username: body.username })\n    //   if (userCheckName) {\n    //     ctx.body = {\n    //       code: 501,\n    //       msg: '用户名已经存在，更新失败！'\n    //     }\n    //     return\n    //   }\n    // }\n\n    // 2.判断密码是否传递 -> 进行加密保存\n    if (body.password) {\n      body.password = await bcrypt__WEBPACK_IMPORTED_MODULE_9___default().hash(body.password, 5);\n    }\n    const result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n      _id: body._id\n    }, body);\n    if (result.ok === 1 && result.nModified === 1) {\n      ctx.body = {\n        code: 200,\n        msg: '更新成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '服务异常，更新失败'\n      };\n    }\n  }\n\n  // 批量设置用户属性\n  // 方法一：新增一个接口 方法二： options -> action 'one' 'many'\n  async updateUserBatch(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateMany({\n      _id: {\n        $in: body.ids\n      }\n    }, {\n      $set: {\n        ...body.settings\n      }\n    });\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  }\n  async checkUsername(ctx) {\n    const params = ctx.query;\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n      username: params.username\n    });\n    // 默认是 1 - 校验通过， 0 - 校验失败\n    let result = 1;\n    if (user && user.username) {\n      result = 0;\n    }\n    ctx.body = {\n      code: 200,\n      data: result,\n      msg: '用户名已经存在，更新失败！'\n    };\n  }\n  async addUser(ctx) {\n    const {\n      body\n    } = ctx.request;\n    body.password = await bcrypt__WEBPACK_IMPORTED_MODULE_9___default().hash(body.password, 5);\n    const user = new _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"](body);\n    const result = await user.save();\n    const userObj = result.toJSON();\n    const arr = ['password'];\n    arr.map(item => {\n      return delete userObj[item];\n    });\n    if (result) {\n      ctx.body = {\n        code: 200,\n        data: userObj,\n        msg: '添加用户成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '服务接口异常'\n      };\n    }\n  }\n\n  // 取得签到列表\n  async getSignList(ctx) {\n    const body = ctx.query;\n    try {\n      let result = '';\n      const type = parseInt(body.type);\n      if (type === 1) {\n        result = await _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findQuickestSign(); // 今日签到榜\n      } else if (type === 2) {\n        result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findTotalSign(); // 总签到榜\n      } else {\n        result = await _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findLastSign();\n      }\n      ctx.body = {\n        code: 200,\n        msg: '',\n        data: result\n      };\n    } catch (e) {\n      ctx.body = {\n        msg: '获取最新签到列表失败',\n        code: 500\n      };\n    }\n  }\n\n  // 检测用户是否存在\n  async isUserExist(ctx) {\n    const body = ctx.query;\n    const option = {};\n    body.phone && (option.mobile = body.phone);\n    body.email && (option.username = body.email);\n    const result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].queryCount(option);\n    ctx.body = {\n      result\n    };\n  }\n\n  // 绑定邮箱或者手机号\n  async accountUpdate(ctx) {\n    const body = ctx.query;\n    const phone = body.phone;\n    const email = body.email;\n    const isCorrect = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.checkRedisAccountCode)(phone || email, body.sms);\n    if (isCorrect) {\n      (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_8__.delValue)(phone || email); // 验证码使用后从 redis 中删除\n      const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n      if (phone) {\n        await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateMobile(obj._id, phone);\n      } else {\n        await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateEmail(obj._id, email);\n      }\n      ctx.body = {\n        code: 200,\n        msg: '资料修改成功！'\n      };\n      return;\n    }\n    ctx.body = {\n      code: 500,\n      msg: '验证码不正确！'\n    };\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new UserController());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUl4RSxLQUFLLENBQUMsQ0FBQyxDQUFDO01BQzFCLE1BQU12QyxHQUFHLEdBQUcsTUFBTWxCLDREQUFhLENBQUNpQixHQUFHLENBQUNFLE1BQU0sQ0FBQ0MsYUFBYSxDQUFDO01BQ3pELElBQUk2RyxLQUFLLEVBQUU7UUFDUCxNQUFNL0gsbURBQUksQ0FBQ3FJLFlBQVksQ0FBQ3JILEdBQUcsQ0FBQ0ssR0FBRyxFQUFFMEcsS0FBSyxDQUFDO01BQzNDLENBQUMsTUFBTTtRQUNILE1BQU0vSCxtREFBSSxDQUFDc0ksV0FBVyxDQUFDdEgsR0FBRyxDQUFDSyxHQUFHLEVBQUVrQyxLQUFLLENBQUM7TUFDMUM7TUFDQXhDLEdBQUcsQ0FBQ2EsSUFBSSxHQUFHO1FBQ1BDLElBQUksRUFBRSxHQUFHO1FBQ1RJLEdBQUcsRUFBRTtNQUNULENBQUM7TUFDRDtJQUNKO0lBQ0FsQixHQUFHLENBQUNhLElBQUksR0FBRztNQUNQQyxJQUFJLEVBQUUsR0FBRztNQUNUSSxHQUFHLEVBQUU7SUFDVCxDQUFDO0VBQ0w7QUFDSjtBQUVBLGlFQUFlLElBQUlwQixjQUFjLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9hcGkvVXNlckNvbnRyb2xsZXIuanM/YjlhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU2lnblJlY29yZCBmcm9tICcuLi9tb2RlbC9TaWduUmVjb3JkJztcbmltcG9ydCB7IGdldEpXVFBheWxvYWQsIGNoZWNrUmVkaXNBY2NvdW50Q29kZSB9IGZyb20gJy4uL2NvbW1vbi9VdGlscyc7XG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbC9Vc2VyJztcbi8vIGltcG9ydCBVc2VyQ29sbGVjdCBmcm9tICcuLi9tb2RlbC9Vc2VyQ29sbGVjdCc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ2RheWpzJztcbmltcG9ydCBzZW5kIGZyb20gJ0AvY29uZmlnL01haWxDb25maWcnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgY29uZmlnIGZyb20gJ0AvY29uZmlnJztcbmltcG9ydCB7IHNldFZhbHVlLCBnZXRWYWx1ZSwgZGVsVmFsdWUgfSBmcm9tICdAL2NvbmZpZy9SZWRpc0NvbmZpZyc7XG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdCc7XG4vLyBpbXBvcnQgQ29tbWVudHMgZnJvbSAnQC9tb2RlbC9Db21tZW50cyc7XG5pbXBvcnQgcXMgZnJvbSAncXMnO1xuaW1wb3J0IG1kNSBmcm9tICdtZDUnO1xuLy8gaW1wb3J0IENvbW1lbnRzSGFuZHMgZnJvbSAnQC9tb2RlbC9Db21tZW50c0hhbmRzJztcbmNsYXNzIFVzZXJDb250cm9sbGVyIHtcbiAgICAvLyDnlKjmiLfnrb7liLDmjqXlj6NcbiAgICBhc3luYyB1c2VyU2lnbihjdHgpIHtcbiAgICAgICAgLy8g5Y+W55So5oi355qESURcbiAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuXG4gICAgICAgIC8vIOafpeivoueUqOaIt+S4iuS4gOasoeetvuWIsOiusOW9lVxuICAgICAgICBjb25zdCByZWNvcmQgPSBhd2FpdCBTaWduUmVjb3JkLmZpbmRCeVVpZChvYmouX2lkKTtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SUQob2JqLl9pZCk7XG4gICAgICAgIGxldCBuZXdSZWNvcmQgPSB7fTtcbiAgICAgICAgbGV0IHJlc3VsdCA9ICcnO1xuICAgICAgICAvLyDliKTmlq3nrb7liLDpgLvovpFcbiAgICAgICAgaWYgKHJlY29yZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8g5pyJ5Y6G5Y+y55qE562+5Yiw5pWw5o2uXG4gICAgICAgICAgICAvLyDliKTmlq3nlKjmiLfkuIrkuIDmrKHnrb7liLDorrDlvZXnmoRjcmVhdGVk5pe26Ze05piv5ZCm5LiO5LuK5aSp55u45ZCMXG4gICAgICAgICAgICAvLyDlpoLmnpzlvZPliY3ml7bpl7TnmoTml6XmnJ/kuI7nlKjmiLfkuIrkuIDmrKHnmoTnrb7liLDml6XmnJ/nm7jlkIzvvIzor7TmmI7nlKjmiLflt7Lnu4/nrb7liLBcbiAgICAgICAgICAgIGlmIChtb21lbnQocmVjb3JkLmNyZWF0ZWQpLmZvcm1hdCgnWVlZWS1NTS1ERCcpID09PSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQnKSkge1xuICAgICAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgICAgIGZhdnM6IHVzZXIuZmF2cyxcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IHVzZXIuY291bnQsXG4gICAgICAgICAgICAgICAgICAgIGxhc3RTaWduOiByZWNvcmQuY3JlYXRlZCxcbiAgICAgICAgICAgICAgICAgICAgbXNnOiAn55So5oi35bey57uP562+5YiwJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8g5pyJ5LiK5LiA5qyh55qE562+5Yiw6K6w5b2V77yM5bm25LiU5LiN5LiO5LuK5aSp55u45ZCM77yM6L+b6KGM6L+e57ut562+5Yiw55qE5Yik5patXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c55u45ZCM77yM5Luj6KGo55So5oi35piv5Zyo6L+e57ut562+5YiwXG4gICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gdXNlci5jb3VudDtcbiAgICAgICAgICAgICAgICBsZXQgZmF2ID0gMDtcbiAgICAgICAgICAgICAgICAvLyDliKTmlq3nrb7liLDml7bpl7Q6IOeUqOaIt+S4iuS4gOasoeeahOetvuWIsOaXtumXtOetieS6ju+8jOW9k+WJjeaXtumXtOeahOWJjeS4gOWkqe+8jOivtOaYju+8jOeUqOaIt+WcqOi/nue7reetvuWIsFxuICAgICAgICAgICAgICAgIC8vIOesrG4rMeWkqeetvuWIsOeahOaXtuWAme+8jOmcgOimgeS4juesrG7nmoTlpKljcmVhdGVk5q+U6L6DXG4gICAgICAgICAgICAgICAgaWYgKG1vbWVudChyZWNvcmQuY3JlYXRlZCkuZm9ybWF0KCdZWVlZLU1NLUREJykgPT09IG1vbWVudCgpLnN1YnRyYWN0KDEsICdkYXlzJykuZm9ybWF0KCdZWVlZLU1NLUREJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g6L+e57ut562+5Yiw55qE56ev5YiG6I635b6X6YC76L6RXG4gICAgICAgICAgICAgICAgICAgIGNvdW50ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA8IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhdiA9IDU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPj0gNSAmJiBjb3VudCA8IDE1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYXYgPSAxMDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3VudCA+PSAxNSAmJiBjb3VudCA8IDMwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYXYgPSAxNTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3VudCA+PSAzMCAmJiBjb3VudCA8IDEwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmF2ID0gMjA7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPj0gMTAwICYmIGNvdW50IDwgMzY1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYXYgPSAzMDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3VudCA+PSAzNjUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhdiA9IDUwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFVzZXIudXBkYXRlT25lKFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBfaWQ6IG9iai5faWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1c2VyLmZhdnMgKz0gZmF2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlci5jb3VudCArPSAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGluYzogeyBmYXZzOiBmYXYsIGNvdW50OiAxIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhdnM6IHVzZXIuZmF2cyArIGZhdixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiB1c2VyLmNvdW50ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyDnlKjmiLfkuK3mlq3kuobkuIDmrKHnrb7liLBcbiAgICAgICAgICAgICAgICAgICAgLy8g56ysbisx5aSp562+5Yiw55qE5pe25YCZ77yM6ZyA6KaB5LiO56ysbueahOWkqWNyZWF0ZWTmr5TovoPvvIzlpoLmnpzkuI3nm7jnrYnvvIzor7TmmI7kuK3mlq3kuobnrb7liLDjgIJcbiAgICAgICAgICAgICAgICAgICAgZmF2ID0gNTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgVXNlci51cGRhdGVPbmUoXG4gICAgICAgICAgICAgICAgICAgICAgICB7IF9pZDogb2JqLl9pZCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzZXQ6IHsgY291bnQ6IDEgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW5jOiB7IGZhdnM6IGZhdiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYXZzOiB1c2VyLmZhdnMgKyBmYXYsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogMSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8g5pu05paw562+5Yiw6K6w5b2VXG4gICAgICAgICAgICAgICAgbmV3UmVjb3JkID0gbmV3IFNpZ25SZWNvcmQoe1xuICAgICAgICAgICAgICAgICAgICB1aWQ6IG9iai5faWQsXG4gICAgICAgICAgICAgICAgICAgIGZhdnM6IGZhdixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXdSZWNvcmQuc2F2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8g5peg562+5Yiw5pWw5o2uID3jgIsg56ys5LiA5qyh562+5YiwXG4gICAgICAgICAgICAvLyDkv53lrZjnlKjmiLfnmoTnrb7liLDmlbDmja7vvIznrb7liLDorrDmlbAgKyDnp6/liIbmlbDmja5cbiAgICAgICAgICAgIGF3YWl0IFVzZXIudXBkYXRlT25lKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgX2lkOiBvYmouX2lkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkc2V0OiB7IGNvdW50OiAxIH0sXG4gICAgICAgICAgICAgICAgICAgICRpbmM6IHsgZmF2czogNSB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAvLyDkv53lrZjnlKjmiLfnmoTnrb7liLDorrDlvZVcbiAgICAgICAgICAgIG5ld1JlY29yZCA9IG5ldyBTaWduUmVjb3JkKHtcbiAgICAgICAgICAgICAgICB1aWQ6IG9iai5faWQsXG4gICAgICAgICAgICAgICAgZmF2czogNSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYXdhaXQgbmV3UmVjb3JkLnNhdmUoKTtcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICBmYXZzOiB1c2VyLmZhdnMgKyA1LFxuICAgICAgICAgICAgICAgIGNvdW50OiAxLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBtc2c6ICfor7fmsYLmiJDlip8nLFxuICAgICAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICAgICAgbGFzdFNpZ246IG5ld1JlY29yZC5jcmVhdGVkLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOabtOaWsOeUqOaIt+WfuuacrOS/oeaBr+aOpeWPo1xuICAgIGFzeW5jIHVwZGF0ZVVzZXJJbmZvKGN0eCkge1xuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgICAgIC8vIOWIpOaWreeUqOaIt+aYr+WQpuS/ruaUueS6humCrueusVxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgX2lkOiBvYmouX2lkIH0pO1xuICAgICAgICBsZXQgbXNnID0gJyc7XG4gICAgICAgIGlmIChib2R5LnVzZXJuYW1lICYmIGJvZHkudXNlcm5hbWUgIT09IHVzZXIudXNlcm5hbWUpIHtcbiAgICAgICAgICAgIC8vIOeUqOaIt+S/ruaUueS6humCrueusVxuICAgICAgICAgICAgLy8g5Y+R6YCBcmVzZXTpgq7ku7ZcbiAgICAgICAgICAgIC8vIOWIpOaWreeUqOaIt+eahOaWsOmCrueuseaYr+WQpuW3sue7j+acieS6uuazqOWGjFxuICAgICAgICAgICAgY29uc3QgdG1wVXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lIH0pO1xuICAgICAgICAgICAgaWYgKHRtcFVzZXIgJiYgdG1wVXNlci5wYXNzd29yZCkge1xuICAgICAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiA1MDEsXG4gICAgICAgICAgICAgICAgICAgIG1zZzogJ+mCrueuseW3sue7j+azqOWGjCcsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBrZXkgPSB1dWlkdjQoKTtcbiAgICAgICAgICAgIHNldFZhbHVlKFxuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICBqd3Quc2lnbih7IF9pZDogb2JqLl9pZCB9LCBtZDUoY29uZmlnLkpXVF9TRUNSRVQpLCB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXNJbjogJzMwbScsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBhd2FpdCBzZW5kKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZW1haWwnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY29kZTogJycsXG4gICAgICAgICAgICAgICAgZXhwaXJlOiBtb21lbnQoKS5hZGQoMzAsICdtaW51dGVzJykuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyksXG4gICAgICAgICAgICAgICAgZW1haWw6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgdXNlcjogdXNlci5uYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtc2cgPSAn5pu05paw5Z+65pys6LWE5paZ5oiQ5Yqf77yM6LSm5Y+35L+u5pS56ZyA6KaB6YKu5Lu256Gu6K6k77yM6K+35p+l5pS26YKu5Lu277yBJztcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFyciA9IFsndXNlcm5hbWUnLCAnbW9iaWxlJywgJ3Bhc3N3b3JkJ107XG4gICAgICAgIGFyci5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGVsZXRlIGJvZHlbaXRlbV07XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyLnVwZGF0ZU9uZSh7IF9pZDogb2JqLl9pZCB9LCBib2R5KTtcbiAgICAgICAgaWYgKHJlc3VsdC5tb2RpZmllZENvdW50ID4gMCkge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICBtc2c6IG1zZyA9PT0gJycgPyAn5pu05paw5oiQ5YqfJyA6IG1zZyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn5pu05paw5aSx6LSlJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDmm7TmlrDnlKjmiLflkI1cbiAgICBhc3luYyB1cGRhdGVVc2VybmFtZShjdHgpIHtcbiAgICAgICAgY29uc3QgYm9keSA9IGN0eC5xdWVyeTtcbiAgICAgICAgaWYgKGJvZHkua2V5KSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldFZhbHVlKGJvZHkua2V5KTtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IGdldEpXVFBheWxvYWQoJ0JlYXJlciAnICsgdG9rZW4pO1xuICAgICAgICAgICAgYXdhaXQgVXNlci51cGRhdGVPbmUoXG4gICAgICAgICAgICAgICAgeyBfaWQ6IG9iai5faWQgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+abtOaWsOeUqOaIt+WQjeaIkOWKnycsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g5L+u5pS55a+G56CB5o6l5Y+jXG4gICAgYXN5bmMgY2hhbmdlUGFzc3dkKGN0eCkge1xuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IG9iai5faWQgfSk7XG4gICAgICAgIGlmIChhd2FpdCBiY3J5cHQuY29tcGFyZShib2R5Lm9sZHB3ZCwgdXNlci5wYXNzd29yZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld3Bhc3N3ZCA9IGF3YWl0IGJjcnlwdC5oYXNoKGJvZHkubmV3cHdkLCA1KTtcbiAgICAgICAgICAgIGF3YWl0IFVzZXIudXBkYXRlT25lKHsgX2lkOiBvYmouX2lkIH0sIHsgJHNldDogeyBwYXNzd29yZDogbmV3cGFzc3dkIH0gfSk7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+abtOaWsOWvhueggeaIkOWKnycsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+abtOaWsOWvhueggemUmeivr++8jOivt+ajgOafpe+8gScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g6K6+572u5pS26JePXG4gICAgYXN5bmMgc2V0Q29sbGVjdChjdHgpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gY3R4LnF1ZXJ5O1xuICAgICAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgICAgIGlmIChwYXJzZUludChwYXJhbXMuaXNGYXYpKSB7XG4gICAgICAgICAgICAvLyDor7TmmI7nlKjmiLflt7Lnu4/mlLbol4/kuobluJblrZBcbiAgICAgICAgICAgIGF3YWl0IFVzZXJDb2xsZWN0LmRlbGV0ZU9uZSh7IHVpZDogb2JqLl9pZCwgdGlkOiBwYXJhbXMudGlkIH0pO1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogMjAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+WPlua2iOaUtuiXj+aIkOWKnycsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbmV3Q29sbGVjdCA9IG5ldyBVc2VyQ29sbGVjdCh7XG4gICAgICAgICAgICAgICAgdWlkOiBvYmouX2lkLFxuICAgICAgICAgICAgICAgIHRpZDogcGFyYW1zLnRpZCxcbiAgICAgICAgICAgICAgICB0aXRsZTogcGFyYW1zLnRpdGxlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBuZXdDb2xsZWN0LnNhdmUoKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQudWlkKSB7XG4gICAgICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBtc2c6ICfmlLbol4/miJDlip8nLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDojrflj5bmlLbol4/liJfooahcbiAgICBhc3luYyBnZXRDb2xsZWN0QnlVaWQoY3R4KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyQ29sbGVjdC5nZXRMaXN0QnlVaWQob2JqLl9pZCwgcGFyYW1zLnBhZ2UsIHBhcmFtcy5saW1pdCA/IHBhcnNlSW50KHBhcmFtcy5saW1pdCkgOiAxMCk7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgVXNlckNvbGxlY3QuY291bnRCeVVpZChvYmouX2lkKTtcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgICAgICAgIG1zZzogJ+afpeivouWIl+ihqOaIkOWKnycsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+afpeivouWIl+ihqOWksei0pScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g6I635Y+W55So5oi35Z+65pys5L+h5oGvXG4gICAgYXN5bmMgZ2V0QmFzaWNJbmZvKGN0eCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIC8vIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKVxuICAgICAgICBjb25zdCB1aWQgPSBwYXJhbXMudWlkIHx8IGN0eC5faWQ7XG4gICAgICAgIGxldCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJRCh1aWQpO1xuICAgICAgICAvLyDlj5blvpfnlKjmiLfnmoTnrb7liLDorrDlvZUg5pyJ5rKh5pyJID4gdG9kYXkgMDowMDowMFxuICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgdXNlciA9IHVzZXIudG9KU09OKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFNpZ25SZWNvcmQuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgdWlkOiB1aWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlZDogeyAkZ3RlOiBkYXRlICsgJyAwMDowMDowMCcgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQudWlkKSB7XG4gICAgICAgICAgICAgICAgdXNlci5pc1NpZ24gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1c2VyLmlzU2lnbiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMjAwLFxuICAgICAgICAgICAgZGF0YTogdXNlcixcbiAgICAgICAgICAgIG1zZzogJ+afpeivouaIkOWKn++8gScsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g6I635Y+W5Y6G5Y+y5raI5oGvXG4gICAgLy8g6K6w5b2V6K+E6K665LmL5ZCO77yM57uZ5L2c6ICF5Y+R6YCB5raI5oGvXG4gICAgYXN5bmMgZ2V0TXNnKGN0eCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBwYXJhbXMucGFnZSA/IHBhcmFtcy5wYWdlIDogMDtcbiAgICAgICAgY29uc3QgbGltaXQgPSBwYXJhbXMubGltaXQgPyBwYXJzZUludChwYXJhbXMubGltaXQpIDogMDtcbiAgICAgICAgLy8g5pa55rOV5LiA77yaIOW1jOWll+afpeivoiAtPiBhZ2dyZWdhdGVcbiAgICAgICAgLy8g5pa55rOV5LqM77yaIOmAmui/h+WGl+S9meaNouaXtumXtFxuICAgICAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgICAgIGNvbnN0IG51bSA9IGF3YWl0IENvbW1lbnRzLmdldFRvdGFsKG9iai5faWQpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBDb21tZW50cy5nZXRNc2dMaXN0KG9iai5faWQsIHBhZ2UsIGxpbWl0KTtcblxuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgIHRvdGFsOiBudW0sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g6K6+572u5bey6K+75raI5oGvXG4gICAgYXN5bmMgc2V0TXNnKGN0eCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIGlmIChwYXJhbXMuaWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvbW1lbnRzLnVwZGF0ZU9uZSh7IF9pZDogcGFyYW1zLmlkIH0sIHsgaXNSZWFkOiAnMScgfSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0Lm9rID09PSAxKSB7XG4gICAgICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ29tbWVudHMudXBkYXRlTWFueSh7IHVpZDogb2JqLl9pZCB9LCB7IGlzUmVhZDogJzEnIH0pO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5vayA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOiOt+WPluWOhuWPsua2iOaBr1xuICAgIC8vIOiusOW9leivhOiuuuS5i+WQju+8jOe7meS9nOiAheWPkemAgea2iOaBr1xuICAgIGFzeW5jIGdldEhhbmRzKGN0eCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBwYXJhbXMucGFnZSA/IHBhcmFtcy5wYWdlIDogMDtcbiAgICAgICAgY29uc3QgbGltaXQgPSBwYXJhbXMubGltaXQgPyBwYXJzZUludChwYXJhbXMubGltaXQpIDogMDtcbiAgICAgICAgLy8g5pa55rOV5LiA77yaIOW1jOWll+afpeivoiAtPiBhZ2dyZWdhdGVcbiAgICAgICAgLy8g5pa55rOV5LqM77yaIOmAmui/h+WGl+S9meaNouaXtumXtFxuICAgICAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvbW1lbnRzSGFuZHMuZ2V0SGFuZHNCeVVpZChvYmouX2lkLCBwYWdlLCBsaW1pdCk7XG5cbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g6I635Y+W55So5oi35YiX6KGoXG4gICAgYXN5bmMgZ2V0VXNlcnMoY3R4KSB7XG4gICAgICAgIGxldCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIHBhcmFtcyA9IHFzLnBhcnNlKHBhcmFtcyk7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBwYXJhbXMucGFnZSA/IHBhcmFtcy5wYWdlIDogMDtcbiAgICAgICAgY29uc3QgbGltaXQgPSBwYXJhbXMubGltaXQgPyBwYXJzZUludChwYXJhbXMubGltaXQpIDogMDtcbiAgICAgICAgY29uc3Qgc29ydCA9IHBhcmFtcy5zb3J0IHx8ICdjcmVhdGVkJztcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gcGFyYW1zLm9wdGlvbiB8fCB7fTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlci5nZXRMaXN0KG9wdGlvbiwgc29ydCwgcGFnZSwgbGltaXQpO1xuICAgICAgICBjb25zdCB0b3RhbCA9IGF3YWl0IFVzZXIuY291bnRMaXN0KG9wdGlvbik7XG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMjAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgdG90YWw6IHRvdGFsLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOeuoeeQhuWRmOWIoOmZpOeUqOaIt1xuICAgIGFzeW5jIGRlbGV0ZVVzZXJCeUlkKGN0eCkge1xuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICAvLyBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgX2lkOiBwYXJhbXMuaWQgfSlcbiAgICAgICAgLy8gaWYgKHVzZXIpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlci5kZWxldGVNYW55KHsgX2lkOiB7ICRpbjogYm9keS5pZHMgfSB9KTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgICBtc2c6ICfliKDpmaTmiJDlip8nLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAvLyAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAvLyAgICAgY29kZTogNTAwLFxuICAgICAgICAvLyAgICAgbXNnOiAn55So5oi35LiN5a2Y5Zyo5oiW6ICFaWTkv6Hmga/plJnor6/vvIEnXG4gICAgICAgIC8vICAgfVxuICAgICAgICAvLyB9XG4gICAgfVxuXG4gICAgLy8g566h55CG5ZGY5pu05paw55So5oi3XG4gICAgYXN5bmMgdXBkYXRlVXNlckJ5SWQoY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG5cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogYm9keS5faWQgfSk7XG4gICAgICAgIC8vIDEu5qCh6aqM55So5oi35piv5ZCm5a2Y5ZyoIC0+IOeUqOaIt+WQjeaYr+WQpuWGsueqgVxuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICBtc2c6ICfnlKjmiLfkuI3lrZjlnKjmiJbogIVpZOS/oeaBr+mUmeivr++8gScsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIChib2R5LnVzZXJuYW1lICE9PSB1c2VyLnVzZXJuYW1lKSB7XG4gICAgICAgIC8vICAgY29uc3QgdXNlckNoZWNrTmFtZSA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lIH0pXG4gICAgICAgIC8vICAgaWYgKHVzZXJDaGVja05hbWUpIHtcbiAgICAgICAgLy8gICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAvLyAgICAgICBjb2RlOiA1MDEsXG4gICAgICAgIC8vICAgICAgIG1zZzogJ+eUqOaIt+WQjeW3sue7j+WtmOWcqO+8jOabtOaWsOWksei0pe+8gSdcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gICAgIHJldHVyblxuICAgICAgICAvLyAgIH1cbiAgICAgICAgLy8gfVxuXG4gICAgICAgIC8vIDIu5Yik5pat5a+G56CB5piv5ZCm5Lyg6YCSIC0+IOi/m+ihjOWKoOWvhuS/neWtmFxuICAgICAgICBpZiAoYm9keS5wYXNzd29yZCkge1xuICAgICAgICAgICAgYm9keS5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKGJvZHkucGFzc3dvcmQsIDUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXIudXBkYXRlT25lKHsgX2lkOiBib2R5Ll9pZCB9LCBib2R5KTtcbiAgICAgICAgaWYgKHJlc3VsdC5vayA9PT0gMSAmJiByZXN1bHQubk1vZGlmaWVkID09PSAxKSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn5pu05paw5oiQ5YqfJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn5pyN5Yqh5byC5bi477yM5pu05paw5aSx6LSlJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDmibnph4/orr7nva7nlKjmiLflsZ7mgKdcbiAgICAvLyDmlrnms5XkuIDvvJrmlrDlop7kuIDkuKrmjqXlj6Mg5pa55rOV5LqM77yaIG9wdGlvbnMgLT4gYWN0aW9uICdvbmUnICdtYW55J1xuICAgIGFzeW5jIHVwZGF0ZVVzZXJCYXRjaChjdHgpIHtcbiAgICAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlci51cGRhdGVNYW55KHsgX2lkOiB7ICRpbjogYm9keS5pZHMgfSB9LCB7ICRzZXQ6IHsgLi4uYm9keS5zZXR0aW5ncyB9IH0pO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBjaGVja1VzZXJuYW1lKGN0eCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB1c2VybmFtZTogcGFyYW1zLnVzZXJuYW1lIH0pO1xuICAgICAgICAvLyDpu5jorqTmmK8gMSAtIOagoemqjOmAmui/h++8jCAwIC0g5qCh6aqM5aSx6LSlXG4gICAgICAgIGxldCByZXN1bHQgPSAxO1xuICAgICAgICBpZiAodXNlciAmJiB1c2VyLnVzZXJuYW1lKSB7XG4gICAgICAgICAgICByZXN1bHQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMjAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgbXNnOiAn55So5oi35ZCN5bey57uP5a2Y5Zyo77yM5pu05paw5aSx6LSl77yBJyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBhZGRVc2VyKGN0eCkge1xuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICBib2R5LnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2goYm9keS5wYXNzd29yZCwgNSk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcihib2R5KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgICAgIGNvbnN0IHVzZXJPYmogPSByZXN1bHQudG9KU09OKCk7XG4gICAgICAgIGNvbnN0IGFyciA9IFsncGFzc3dvcmQnXTtcbiAgICAgICAgYXJyLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkZWxldGUgdXNlck9ialtpdGVtXTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgICAgICAgICBkYXRhOiB1c2VyT2JqLFxuICAgICAgICAgICAgICAgIG1zZzogJ+a3u+WKoOeUqOaIt+aIkOWKnycsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+acjeWKoeaOpeWPo+W8guW4uCcsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g5Y+W5b6X562+5Yiw5YiX6KGoXG4gICAgYXN5bmMgZ2V0U2lnbkxpc3QoY3R4KSB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBjdHgucXVlcnk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gcGFyc2VJbnQoYm9keS50eXBlKTtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgU2lnblJlY29yZC5maW5kUXVpY2tlc3RTaWduKCk7IC8vIOS7iuaXpeetvuWIsOamnFxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAyKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgVXNlci5maW5kVG90YWxTaWduKCk7IC8vIOaAu+etvuWIsOamnFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBTaWduUmVjb3JkLmZpbmRMYXN0U2lnbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogMjAwLFxuICAgICAgICAgICAgICAgIG1zZzogJycsXG4gICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgbXNnOiAn6I635Y+W5pyA5paw562+5Yiw5YiX6KGo5aSx6LSlJyxcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g5qOA5rWL55So5oi35piv5ZCm5a2Y5ZyoXG4gICAgYXN5bmMgaXNVc2VyRXhpc3QoY3R4KSB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBjdHgucXVlcnk7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHt9O1xuICAgICAgICBib2R5LnBob25lICYmIChvcHRpb24ubW9iaWxlID0gYm9keS5waG9uZSk7XG4gICAgICAgIGJvZHkuZW1haWwgJiYgKG9wdGlvbi51c2VybmFtZSA9IGJvZHkuZW1haWwpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyLnF1ZXJ5Q291bnQob3B0aW9uKTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICByZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g57uR5a6a6YKu566x5oiW6ICF5omL5py65Y+3XG4gICAgYXN5bmMgYWNjb3VudFVwZGF0ZShjdHgpIHtcbiAgICAgICAgY29uc3QgYm9keSA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3QgcGhvbmUgPSBib2R5LnBob25lO1xuICAgICAgICBjb25zdCBlbWFpbCA9IGJvZHkuZW1haWw7XG4gICAgICAgIGNvbnN0IGlzQ29ycmVjdCA9IGF3YWl0IGNoZWNrUmVkaXNBY2NvdW50Q29kZShwaG9uZSB8fCBlbWFpbCwgYm9keS5zbXMpO1xuICAgICAgICBpZiAoaXNDb3JyZWN0KSB7XG4gICAgICAgICAgICBkZWxWYWx1ZShwaG9uZSB8fCBlbWFpbCk7IC8vIOmqjOivgeeggeS9v+eUqOWQjuS7jiByZWRpcyDkuK3liKDpmaRcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKTtcbiAgICAgICAgICAgIGlmIChwaG9uZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IFVzZXIudXBkYXRlTW9iaWxlKG9iai5faWQsIHBob25lKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgVXNlci51cGRhdGVFbWFpbChvYmouX2lkLCBlbWFpbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn6LWE5paZ5L+u5pS55oiQ5Yqf77yBJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICBtc2c6ICfpqozor4HnoIHkuI3mraPnoa7vvIEnLFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IFVzZXJDb250cm9sbGVyKCk7XG4iXSwibmFtZXMiOlsiU2lnblJlY29yZCIsImdldEpXVFBheWxvYWQiLCJjaGVja1JlZGlzQWNjb3VudENvZGUiLCJVc2VyIiwibW9tZW50Iiwic2VuZCIsInY0IiwidXVpZHY0Iiwiand0IiwiY29uZmlnIiwic2V0VmFsdWUiLCJnZXRWYWx1ZSIsImRlbFZhbHVlIiwiYmNyeXB0IiwicXMiLCJtZDUiLCJVc2VyQ29udHJvbGxlciIsInVzZXJTaWduIiwiY3R4Iiwib2JqIiwiaGVhZGVyIiwiYXV0aG9yaXphdGlvbiIsInJlY29yZCIsImZpbmRCeVVpZCIsIl9pZCIsInVzZXIiLCJmaW5kQnlJRCIsIm5ld1JlY29yZCIsInJlc3VsdCIsImNyZWF0ZWQiLCJmb3JtYXQiLCJib2R5IiwiY29kZSIsImZhdnMiLCJjb3VudCIsImxhc3RTaWduIiwibXNnIiwiZmF2Iiwic3VidHJhY3QiLCJ1cGRhdGVPbmUiLCIkaW5jIiwiJHNldCIsInVpZCIsInNhdmUiLCJ1cGRhdGVVc2VySW5mbyIsInJlcXVlc3QiLCJmaW5kT25lIiwidXNlcm5hbWUiLCJ0bXBVc2VyIiwicGFzc3dvcmQiLCJrZXkiLCJzaWduIiwiSldUX1NFQ1JFVCIsImV4cGlyZXNJbiIsInR5cGUiLCJkYXRhIiwiZXhwaXJlIiwiYWRkIiwiZW1haWwiLCJuYW1lIiwiYXJyIiwibWFwIiwiaXRlbSIsIm1vZGlmaWVkQ291bnQiLCJ1cGRhdGVVc2VybmFtZSIsInF1ZXJ5IiwidG9rZW4iLCJjaGFuZ2VQYXNzd2QiLCJjb21wYXJlIiwib2xkcHdkIiwibmV3cGFzc3dkIiwiaGFzaCIsIm5ld3B3ZCIsInNldENvbGxlY3QiLCJwYXJhbXMiLCJwYXJzZUludCIsImlzRmF2IiwiVXNlckNvbGxlY3QiLCJkZWxldGVPbmUiLCJ0aWQiLCJuZXdDb2xsZWN0IiwidGl0bGUiLCJnZXRDb2xsZWN0QnlVaWQiLCJnZXRMaXN0QnlVaWQiLCJwYWdlIiwibGltaXQiLCJ0b3RhbCIsImNvdW50QnlVaWQiLCJsZW5ndGgiLCJnZXRCYXNpY0luZm8iLCJ0b0pTT04iLCJkYXRlIiwiJGd0ZSIsImlzU2lnbiIsImdldE1zZyIsIm51bSIsIkNvbW1lbnRzIiwiZ2V0VG90YWwiLCJnZXRNc2dMaXN0Iiwic2V0TXNnIiwiaWQiLCJpc1JlYWQiLCJvayIsInVwZGF0ZU1hbnkiLCJnZXRIYW5kcyIsIkNvbW1lbnRzSGFuZHMiLCJnZXRIYW5kc0J5VWlkIiwiZ2V0VXNlcnMiLCJwYXJzZSIsInNvcnQiLCJvcHRpb24iLCJnZXRMaXN0IiwiY291bnRMaXN0IiwiZGVsZXRlVXNlckJ5SWQiLCJkZWxldGVNYW55IiwiJGluIiwiaWRzIiwidXBkYXRlVXNlckJ5SWQiLCJuTW9kaWZpZWQiLCJ1cGRhdGVVc2VyQmF0Y2giLCJzZXR0aW5ncyIsImNoZWNrVXNlcm5hbWUiLCJhZGRVc2VyIiwidXNlck9iaiIsImdldFNpZ25MaXN0IiwiZmluZFF1aWNrZXN0U2lnbiIsImZpbmRUb3RhbFNpZ24iLCJmaW5kTGFzdFNpZ24iLCJlIiwiaXNVc2VyRXhpc3QiLCJwaG9uZSIsIm1vYmlsZSIsInF1ZXJ5Q291bnQiLCJhY2NvdW50VXBkYXRlIiwiaXNDb3JyZWN0Iiwic21zIiwidXBkYXRlTW9iaWxlIiwidXBkYXRlRW1haWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/UserController.js\n\n}");

/***/ }),

/***/ "./src/common/ErrorHandle.js":
/*!***********************************!*\
  !*** ./src/common/ErrorHandle.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (ctx, next) => {\n  return next().catch(err => {\n    if (401 == err.status) {\n      ctx.status = 401;\n      ctx.body = {\n        code: 401,\n        message: 'Protected resource, use Authorization header to get access\\n'\n      };\n    } else {\n      ctx.status = err.status || 500;\n      ctx.body = Object.assign({\n        code: err.code || 500,\n        msg: err.message\n      },  true ? {\n        stack: err.stack\n      } : 0);\n      // console.log(err.stack);\n    }\n  });\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL0Vycm9ySGFuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxPQUFPQSxHQUFHLEVBQUVDLElBQUksS0FBSztFQUNoQyxPQUFPQSxJQUFJLENBQUMsQ0FBQyxDQUFDQyxLQUFLLENBQUNDLEdBQUcsSUFBSTtJQUN2QixJQUFJLEdBQUcsSUFBSUEsR0FBRyxDQUFDQyxNQUFNLEVBQUU7TUFDbkJKLEdBQUcsQ0FBQ0ksTUFBTSxHQUFHLEdBQUc7TUFDaEJKLEdBQUcsQ0FBQ0ssSUFBSSxHQUFHO1FBQ1BDLElBQUksRUFBRSxHQUFHO1FBQ1RDLE9BQU8sRUFBRTtNQUNiLENBQUM7SUFDTCxDQUFDLE1BQU07TUFDSFAsR0FBRyxDQUFDSSxNQUFNLEdBQUdELEdBQUcsQ0FBQ0MsTUFBTSxJQUFJLEdBQUc7TUFDOUJKLEdBQUcsQ0FBQ0ssSUFBSSxHQUFHRyxNQUFNLENBQUNDLE1BQU0sQ0FDcEI7UUFDSUgsSUFBSSxFQUFFSCxHQUFHLENBQUNHLElBQUksSUFBSSxHQUFHO1FBQ3JCSSxHQUFHLEVBQUVQLEdBQUcsQ0FBQ0k7TUFDYixDQUFDLEVBQ0RJLEtBQXNDLEdBQUc7UUFBRUcsS0FBSyxFQUFFWCxHQUFHLENBQUNXO01BQU0sQ0FBQyxHQUFHLENBQ3BFLENBQUM7TUFDRDtJQUNKO0VBQ0osQ0FBQyxDQUFDO0FBQ04sQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9jb21tb24vRXJyb3JIYW5kbGUuanM/NDFlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG4gICAgcmV0dXJuIG5leHQoKS5jYXRjaChlcnIgPT4ge1xuICAgICAgICBpZiAoNDAxID09IGVyci5zdGF0dXMpIHtcbiAgICAgICAgICAgIGN0eC5zdGF0dXMgPSA0MDE7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiA0MDEsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Byb3RlY3RlZCByZXNvdXJjZSwgdXNlIEF1dGhvcml6YXRpb24gaGVhZGVyIHRvIGdldCBhY2Nlc3NcXG4nXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LnN0YXR1cyA9IGVyci5zdGF0dXMgfHwgNTAwO1xuICAgICAgICAgICAgY3R4LmJvZHkgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogZXJyLmNvZGUgfHwgNTAwLFxuICAgICAgICAgICAgICAgICAgICBtc2c6IGVyci5tZXNzYWdlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IHsgc3RhY2s6IGVyci5zdGFjayB9IDoge31cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlcnIuc3RhY2spO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuIl0sIm5hbWVzIjpbImN0eCIsIm5leHQiLCJjYXRjaCIsImVyciIsInN0YXR1cyIsImJvZHkiLCJjb2RlIiwibWVzc2FnZSIsIk9iamVjdCIsImFzc2lnbiIsIm1zZyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsInN0YWNrIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/common/ErrorHandle.js\n\n}");

/***/ }),

/***/ "./src/common/Utils.js":
/*!*****************************!*\
  !*** ./src/common/Utils.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkCode: () => (/* binding */ checkCode),\n/* harmony export */   checkRedisAccountCode: () => (/* binding */ checkRedisAccountCode),\n/* harmony export */   dirExists: () => (/* binding */ dirExists),\n/* harmony export */   flatten: () => (/* binding */ flatten),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getJWTPayload: () => (/* binding */ getJWTPayload),\n/* harmony export */   getMenuData: () => (/* binding */ getMenuData),\n/* harmony export */   getRights: () => (/* binding */ getRights),\n/* harmony export */   getTempName: () => (/* binding */ getTempName),\n/* harmony export */   isToday: () => (/* binding */ isToday),\n/* harmony export */   rand: () => (/* binding */ rand),\n/* harmony export */   rename: () => (/* binding */ rename),\n/* harmony export */   sortMenus: () => (/* binding */ sortMenus)\n/* harmony export */ });\n/* harmony import */ var _config_RedisConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/RedisConfig */ \"./src/config/RedisConfig.js\");\n/* harmony import */ var _config_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config/index */ \"./src/config/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! md5 */ \"md5\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\nconst getJWTPayload = token => {\n  return jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().verify(token.split(' ')[1], md5__WEBPACK_IMPORTED_MODULE_6___default()(_config_index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].JWT_SECRET));\n};\n\n// 生成 token 返回给客户端\nconst generateToken = (payload, expire = '1h') => {\n  if (payload) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().sign({\n      ...payload\n    }, md5__WEBPACK_IMPORTED_MODULE_6___default()(_config_index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].JWT_SECRET), {\n      expiresIn: expire\n    });\n  } else {\n    throw new Error('生成token失败！');\n  }\n};\n\n// 判断一个日期是否是今天\nconst isToday = _date => {\n  if (_date) {\n    return dayjs__WEBPACK_IMPORTED_MODULE_5___default()(_date).format('YYYY-MM-DD') === dayjs__WEBPACK_IMPORTED_MODULE_5___default()().format('YYYY-MM-DD');\n  }\n  return false;\n};\nconst checkCode = async (key, value) => {\n  const redisData = await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_0__.getValue)(key);\n  if (redisData != null) {\n    if (redisData.toLowerCase() === value.toLowerCase()) {\n      return true;\n    } else {\n      return false;\n    }\n  } else {\n    return false;\n  }\n};\n\n// 验证短信或者邮箱验证码\nconst checkRedisAccountCode = async (accout, sms) => {\n  const redisData = await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_0__.getValue)(accout);\n  if (redisData) {\n    const data = JSON.parse(redisData);\n    return dayjs__WEBPACK_IMPORTED_MODULE_5___default()().isBefore(dayjs__WEBPACK_IMPORTED_MODULE_5___default()(data.expire)) && sms === data.sms;\n  }\n  return false;\n};\nconst getStats = path => {\n  return new Promise(resolve => {\n    // fs.stats(path, (err, stats) => {\n    //   if (err) {\n    //     resolve(false)\n    //   } else {\n    //     resolve(stats)\n    //   }\n    // })\n    fs__WEBPACK_IMPORTED_MODULE_3___default().stat(path, (err, stats) => err ? resolve(false) : resolve(stats));\n  });\n};\nconst mkdir = dir => {\n  return new Promise(resolve => {\n    fs__WEBPACK_IMPORTED_MODULE_3___default().mkdir(dir, err => err ? resolve(false) : resolve(true));\n  });\n};\nconst dirExists = async dir => {\n  const isExists = await getStats(dir);\n  // 如果该路径存在且不是文件，返回 true\n  if (isExists && isExists.isDirectory()) {\n    return true;\n  } else if (isExists) {\n    // 路径存在，但是是文件，返回 false\n    return false;\n  }\n  // 如果该路径不存在\n  const tempDir = path__WEBPACK_IMPORTED_MODULE_4___default().parse(dir).dir;\n  // 循环遍历，递归判断如果上级目录不存在，则产生上级目录\n  const status = await dirExists(tempDir);\n  if (status) {\n    const result = await mkdir(dir);\n    console.log('TCL: dirExists -> result', result);\n    return result;\n  } else {\n    return false;\n  }\n};\nconst rename = (obj, key, newKey) => {\n  if (Object.keys(obj).indexOf(key) !== -1) {\n    obj[newKey] = obj[key];\n    delete obj[key];\n  }\n  return obj;\n};\nconst sortObj = (arr, property) => {\n  return arr.sort((m, n) => m[property] - n[property]);\n};\nconst sortMenus = tree => {\n  tree = sortObj(tree, 'sort');\n  if (tree.children && tree.children.length > 0) {\n    tree.children = sortMenus(tree.children, 'sort');\n  }\n  if (tree.operations && tree.operations.length > 0) {\n    tree.operations = sortMenus(tree.operations, 'sort');\n  }\n  return tree;\n};\nconst getMenuData = (tree, rights, flag) => {\n  const arr = [];\n  for (let i = 0; i < tree.length; i++) {\n    const item = tree[i];\n    // _id 包含在menus中\n    // 结构进行改造，删除opertaions\n    if (rights.includes(item._id + '') || flag) {\n      if (item.type === 'menu') {\n        arr.push({\n          _id: item._id,\n          path: item.path,\n          meta: {\n            title: item.title,\n            hideInBread: item.hideInBread,\n            hideInMenu: item.hideInMenu,\n            notCache: item.notCache,\n            icon: item.icon\n          },\n          component: item.component,\n          children: getMenuData(item.children, rights)\n        });\n      } else if (item.type === 'link') {\n        arr.push({\n          _id: item._id,\n          path: item.path,\n          meta: {\n            title: item.title,\n            icon: item.icon,\n            href: item.link\n          }\n        });\n      }\n    }\n  }\n  return sortObj(arr, 'sort');\n};\nconst flatten = arr => {\n  while (arr.some(item => Array.isArray(item))) {\n    arr = [].concat(...arr);\n  }\n  return arr;\n};\nconst getRights = (tree, menus) => {\n  let arr = [];\n  for (let item of tree) {\n    if (item.operations && item.operations.length > 0) {\n      for (let op of item.operations) {\n        if (menus.includes(op._id + '')) {\n          arr.push(op.path);\n        }\n      }\n    } else if (item.children && item.children.length > 0) {\n      arr.push(getRights(item.children, menus));\n    }\n  }\n  return flatten(arr);\n};\nconst rand = (len = 8) => {\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let text = '';\n  for (let i = 0; i < len; i += 1) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n  return text;\n};\nconst getTempName = () => {\n  return 'toimc_' + rand() + '@toimc.com';\n};\n\n// 生成一个随机的用户名\n// const getTempName = () => {\n//   return 'toimc_' + Math.random().toString(36).slice(2) + Math.floor(Math.random() * 10000)\n// }\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxNQUFNLENBQUMsQ0FBQyxHQUFHTCxRQUFRLENBQUM5QixNQUFNLENBQUMsQ0FBQztFQUN4RTtFQUNBLE9BQU8rQixJQUFJO0FBQ2YsQ0FBQztBQUVELE1BQU1LLFdBQVcsR0FBR0EsQ0FBQSxLQUFNO0VBQ3RCLE9BQU8sUUFBUSxHQUFHUixJQUFJLENBQUMsQ0FBQyxHQUFHLFlBQVk7QUFDM0MsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9jb21tb24vVXRpbHMuanM/YjRkZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRWYWx1ZSB9IGZyb20gJ0AvY29uZmlnL1JlZGlzQ29uZmlnJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnL2luZGV4JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBtb21lbnQgZnJvbSAnZGF5anMnO1xuaW1wb3J0IG1kNSBmcm9tICdtZDUnO1xuXG5jb25zdCBnZXRKV1RQYXlsb2FkID0gdG9rZW4gPT4ge1xuICAgIHJldHVybiBqd3QudmVyaWZ5KHRva2VuLnNwbGl0KCcgJylbMV0sIG1kNShjb25maWcuSldUX1NFQ1JFVCkpO1xufTtcblxuLy8g55Sf5oiQIHRva2VuIOi/lOWbnue7meWuouaIt+err1xuY29uc3QgZ2VuZXJhdGVUb2tlbiA9IChwYXlsb2FkLCBleHBpcmUgPSAnMWgnKSA9PiB7XG4gICAgaWYgKHBheWxvYWQpIHtcbiAgICAgICAgcmV0dXJuIGp3dC5zaWduKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLnBheWxvYWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZDUoY29uZmlnLkpXVF9TRUNSRVQpLFxuICAgICAgICAgICAgeyBleHBpcmVzSW46IGV4cGlyZSB9XG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfnlJ/miJB0b2tlbuWksei0pe+8gScpO1xuICAgIH1cbn07XG5cbi8vIOWIpOaWreS4gOS4quaXpeacn+aYr+WQpuaYr+S7iuWkqVxuZXhwb3J0IGNvbnN0IGlzVG9kYXkgPSBfZGF0ZSA9PiB7XG4gICAgaWYgKF9kYXRlKSB7XG4gICAgICAgIHJldHVybiBtb21lbnQoX2RhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpID09PSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgY2hlY2tDb2RlID0gYXN5bmMgKGtleSwgdmFsdWUpID0+IHtcbiAgICBjb25zdCByZWRpc0RhdGEgPSBhd2FpdCBnZXRWYWx1ZShrZXkpO1xuICAgIGlmIChyZWRpc0RhdGEgIT0gbnVsbCkge1xuICAgICAgICBpZiAocmVkaXNEYXRhLnRvTG93ZXJDYXNlKCkgPT09IHZhbHVlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cbi8vIOmqjOivgeefreS/oeaIluiAhemCrueusemqjOivgeeggVxuZXhwb3J0IGNvbnN0IGNoZWNrUmVkaXNBY2NvdW50Q29kZSA9IGFzeW5jIChhY2NvdXQsIHNtcykgPT4ge1xuICAgIGNvbnN0IHJlZGlzRGF0YSA9IGF3YWl0IGdldFZhbHVlKGFjY291dCk7XG4gICAgaWYgKHJlZGlzRGF0YSkge1xuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyZWRpc0RhdGEpO1xuICAgICAgICByZXR1cm4gbW9tZW50KCkuaXNCZWZvcmUobW9tZW50KGRhdGEuZXhwaXJlKSkgJiYgc21zID09PSBkYXRhLnNtcztcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgZ2V0U3RhdHMgPSBwYXRoID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIC8vIGZzLnN0YXRzKHBhdGgsIChlcnIsIHN0YXRzKSA9PiB7XG4gICAgICAgIC8vICAgaWYgKGVycikge1xuICAgICAgICAvLyAgICAgcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgLy8gICB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgcmVzb2x2ZShzdGF0cylcbiAgICAgICAgLy8gICB9XG4gICAgICAgIC8vIH0pXG4gICAgICAgIGZzLnN0YXQocGF0aCwgKGVyciwgc3RhdHMpID0+IChlcnIgPyByZXNvbHZlKGZhbHNlKSA6IHJlc29sdmUoc3RhdHMpKSk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBta2RpciA9IGRpciA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBmcy5ta2RpcihkaXIsIGVyciA9PiAoZXJyID8gcmVzb2x2ZShmYWxzZSkgOiByZXNvbHZlKHRydWUpKSk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBkaXJFeGlzdHMgPSBhc3luYyBkaXIgPT4ge1xuICAgIGNvbnN0IGlzRXhpc3RzID0gYXdhaXQgZ2V0U3RhdHMoZGlyKTtcbiAgICAvLyDlpoLmnpzor6Xot6/lvoTlrZjlnKjkuJTkuI3mmK/mlofku7bvvIzov5Tlm54gdHJ1ZVxuICAgIGlmIChpc0V4aXN0cyAmJiBpc0V4aXN0cy5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoaXNFeGlzdHMpIHtcbiAgICAgICAgLy8g6Lev5b6E5a2Y5Zyo77yM5L2G5piv5piv5paH5Lu277yM6L+U5ZueIGZhbHNlXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8g5aaC5p6c6K+l6Lev5b6E5LiN5a2Y5ZyoXG4gICAgY29uc3QgdGVtcERpciA9IHBhdGgucGFyc2UoZGlyKS5kaXI7XG4gICAgLy8g5b6q546v6YGN5Y6G77yM6YCS5b2S5Yik5pat5aaC5p6c5LiK57qn55uu5b2V5LiN5a2Y5Zyo77yM5YiZ5Lqn55Sf5LiK57qn55uu5b2VXG4gICAgY29uc3Qgc3RhdHVzID0gYXdhaXQgZGlyRXhpc3RzKHRlbXBEaXIpO1xuICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWtkaXIoZGlyKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1RDTDogZGlyRXhpc3RzIC0+IHJlc3VsdCcsIHJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cbmNvbnN0IHJlbmFtZSA9IChvYmosIGtleSwgbmV3S2V5KSA9PiB7XG4gICAgaWYgKE9iamVjdC5rZXlzKG9iaikuaW5kZXhPZihrZXkpICE9PSAtMSkge1xuICAgICAgICBvYmpbbmV3S2V5XSA9IG9ialtrZXldO1xuICAgICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59O1xuXG5jb25zdCBzb3J0T2JqID0gKGFyciwgcHJvcGVydHkpID0+IHtcbiAgICByZXR1cm4gYXJyLnNvcnQoKG0sIG4pID0+IG1bcHJvcGVydHldIC0gbltwcm9wZXJ0eV0pO1xufTtcblxuY29uc3Qgc29ydE1lbnVzID0gdHJlZSA9PiB7XG4gICAgdHJlZSA9IHNvcnRPYmoodHJlZSwgJ3NvcnQnKTtcbiAgICBpZiAodHJlZS5jaGlsZHJlbiAmJiB0cmVlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdHJlZS5jaGlsZHJlbiA9IHNvcnRNZW51cyh0cmVlLmNoaWxkcmVuLCAnc29ydCcpO1xuICAgIH1cbiAgICBpZiAodHJlZS5vcGVyYXRpb25zICYmIHRyZWUub3BlcmF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRyZWUub3BlcmF0aW9ucyA9IHNvcnRNZW51cyh0cmVlLm9wZXJhdGlvbnMsICdzb3J0Jyk7XG4gICAgfVxuICAgIHJldHVybiB0cmVlO1xufTtcblxuY29uc3QgZ2V0TWVudURhdGEgPSAodHJlZSwgcmlnaHRzLCBmbGFnKSA9PiB7XG4gICAgY29uc3QgYXJyID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0cmVlW2ldO1xuICAgICAgICAvLyBfaWQg5YyF5ZCr5ZyobWVudXPkuK1cbiAgICAgICAgLy8g57uT5p6E6L+b6KGM5pS56YCg77yM5Yig6Zmkb3BlcnRhaW9uc1xuICAgICAgICBpZiAocmlnaHRzLmluY2x1ZGVzKGl0ZW0uX2lkICsgJycpIHx8IGZsYWcpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZW51Jykge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgX2lkOiBpdGVtLl9pZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogaXRlbS5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVJbkJyZWFkOiBpdGVtLmhpZGVJbkJyZWFkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUluTWVudTogaXRlbS5oaWRlSW5NZW51LFxuICAgICAgICAgICAgICAgICAgICAgICAgbm90Q2FjaGU6IGl0ZW0ubm90Q2FjaGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpdGVtLmljb25cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiBpdGVtLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IGdldE1lbnVEYXRhKGl0ZW0uY2hpbGRyZW4sIHJpZ2h0cylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnbGluaycpIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIF9pZDogaXRlbS5faWQsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGl0ZW0ucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgbWV0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpdGVtLmljb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiBpdGVtLmxpbmtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNvcnRPYmooYXJyLCAnc29ydCcpO1xufTtcblxuY29uc3QgZmxhdHRlbiA9IGFyciA9PiB7XG4gICAgd2hpbGUgKGFyci5zb21lKGl0ZW0gPT4gQXJyYXkuaXNBcnJheShpdGVtKSkpIHtcbiAgICAgICAgYXJyID0gW10uY29uY2F0KC4uLmFycik7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG59O1xuXG5jb25zdCBnZXRSaWdodHMgPSAodHJlZSwgbWVudXMpID0+IHtcbiAgICBsZXQgYXJyID0gW107XG4gICAgZm9yIChsZXQgaXRlbSBvZiB0cmVlKSB7XG4gICAgICAgIGlmIChpdGVtLm9wZXJhdGlvbnMgJiYgaXRlbS5vcGVyYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IG9wIG9mIGl0ZW0ub3BlcmF0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmIChtZW51cy5pbmNsdWRlcyhvcC5faWQgKyAnJykpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2gob3AucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBhcnIucHVzaChnZXRSaWdodHMoaXRlbS5jaGlsZHJlbiwgbWVudXMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmxhdHRlbihhcnIpO1xufTtcblxuY29uc3QgcmFuZCA9IChsZW4gPSA4KSA9PiB7XG4gICAgY29uc3QgcG9zc2libGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xuICAgIGxldCB0ZXh0ID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRleHQ7XG59O1xuXG5jb25zdCBnZXRUZW1wTmFtZSA9ICgpID0+IHtcbiAgICByZXR1cm4gJ3RvaW1jXycgKyByYW5kKCkgKyAnQHRvaW1jLmNvbSc7XG59O1xuXG4vLyDnlJ/miJDkuIDkuKrpmo/mnLrnmoTnlKjmiLflkI1cbi8vIGNvbnN0IGdldFRlbXBOYW1lID0gKCkgPT4ge1xuLy8gICByZXR1cm4gJ3RvaW1jXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwKVxuLy8gfVxuXG5leHBvcnQgeyBjaGVja0NvZGUsIGdldEpXVFBheWxvYWQsIGdlbmVyYXRlVG9rZW4sIGdldFRlbXBOYW1lLCBkaXJFeGlzdHMsIHJlbmFtZSwgZ2V0TWVudURhdGEsIHNvcnRNZW51cywgZmxhdHRlbiwgZ2V0UmlnaHRzLCByYW5kIH07XG4iXSwibmFtZXMiOlsiZ2V0VmFsdWUiLCJjb25maWciLCJqd3QiLCJmcyIsInBhdGgiLCJtb21lbnQiLCJtZDUiLCJnZXRKV1RQYXlsb2FkIiwidG9rZW4iLCJ2ZXJpZnkiLCJzcGxpdCIsIkpXVF9TRUNSRVQiLCJnZW5lcmF0ZVRva2VuIiwicGF5bG9hZCIsImV4cGlyZSIsInNpZ24iLCJleHBpcmVzSW4iLCJFcnJvciIsImlzVG9kYXkiLCJfZGF0ZSIsImZvcm1hdCIsImNoZWNrQ29kZSIsImtleSIsInZhbHVlIiwicmVkaXNEYXRhIiwidG9Mb3dlckNhc2UiLCJjaGVja1JlZGlzQWNjb3VudENvZGUiLCJhY2NvdXQiLCJzbXMiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwiaXNCZWZvcmUiLCJnZXRTdGF0cyIsIlByb21pc2UiLCJyZXNvbHZlIiwic3RhdCIsImVyciIsInN0YXRzIiwibWtkaXIiLCJkaXIiLCJkaXJFeGlzdHMiLCJpc0V4aXN0cyIsImlzRGlyZWN0b3J5IiwidGVtcERpciIsInN0YXR1cyIsInJlc3VsdCIsImNvbnNvbGUiLCJsb2ciLCJyZW5hbWUiLCJvYmoiLCJuZXdLZXkiLCJPYmplY3QiLCJrZXlzIiwiaW5kZXhPZiIsInNvcnRPYmoiLCJhcnIiLCJwcm9wZXJ0eSIsInNvcnQiLCJtIiwibiIsInNvcnRNZW51cyIsInRyZWUiLCJjaGlsZHJlbiIsImxlbmd0aCIsIm9wZXJhdGlvbnMiLCJnZXRNZW51RGF0YSIsInJpZ2h0cyIsImZsYWciLCJpIiwiaXRlbSIsImluY2x1ZGVzIiwiX2lkIiwidHlwZSIsInB1c2giLCJtZXRhIiwidGl0bGUiLCJoaWRlSW5CcmVhZCIsImhpZGVJbk1lbnUiLCJub3RDYWNoZSIsImljb24iLCJjb21wb25lbnQiLCJocmVmIiwibGluayIsImZsYXR0ZW4iLCJzb21lIiwiQXJyYXkiLCJpc0FycmF5IiwiY29uY2F0IiwiZ2V0UmlnaHRzIiwibWVudXMiLCJvcCIsInJhbmQiLCJsZW4iLCJwb3NzaWJsZSIsInRleHQiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnZXRUZW1wTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/Utils.js\n\n}");

/***/ }),

/***/ "./src/config/DBHelpler.js":
/*!*********************************!*\
  !*** ./src/config/DBHelpler.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/config/index.js\");\n\n\n\n// mongoose.set('useCreateIndex', true);\n// mongoose.set('debug', true)\n\n// 创建连接\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(_index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].DB_URL, {\n  useNewUrlParser: true\n});\n\n// 连接成功\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('connected', () => {\n  console.log(`MongoDB: ${_index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].DB_NAME}, DB_HOST: ${_index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].MONGO_HOSTNAME} connection opened! `);\n});\n\n// 连接异常\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('error', err => {\n  console.log('Mongoose connection error: ' + err);\n});\n\n// 断开连接\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('disconnected', () => {\n  console.log('Mongoose connection disconnected');\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default()));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29uZmlnL0RCSGVscGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWdDO0FBQ0g7O0FBRTdCO0FBQ0E7O0FBRUE7QUFDQUEsdURBQWdCLENBQUNDLDhDQUFNLENBQUNFLE1BQU0sRUFBRTtFQUM1QkMsZUFBZSxFQUFFO0FBQ3JCLENBQUMsQ0FBQzs7QUFFRjtBQUNBSiwwREFBbUIsQ0FBQ00sRUFBRSxDQUFDLFdBQVcsRUFBRSxNQUFNO0VBQ3RDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxZQUFZUCw4Q0FBTSxDQUFDUSxPQUFPLGNBQWNSLDhDQUFNLENBQUNTLGNBQWMsc0JBQXNCLENBQUM7QUFDcEcsQ0FBQyxDQUFDOztBQUVGO0FBQ0FWLDBEQUFtQixDQUFDTSxFQUFFLENBQUMsT0FBTyxFQUFFSyxHQUFHLElBQUk7RUFDbkNKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDZCQUE2QixHQUFHRyxHQUFHLENBQUM7QUFDcEQsQ0FBQyxDQUFDOztBQUVGO0FBQ0FYLDBEQUFtQixDQUFDTSxFQUFFLENBQUMsY0FBYyxFQUFFLE1BQU07RUFDekNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtDQUFrQyxDQUFDO0FBQ25ELENBQUMsQ0FBQztBQUVGLGlFQUFlUixpREFBUSIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9jb25maWcvREJIZWxwbGVyLmpzP2U2ODQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi9pbmRleCc7XG5cbi8vIG1vbmdvb3NlLnNldCgndXNlQ3JlYXRlSW5kZXgnLCB0cnVlKTtcbi8vIG1vbmdvb3NlLnNldCgnZGVidWcnLCB0cnVlKVxuXG4vLyDliJvlu7rov57mjqVcbm1vbmdvb3NlLmNvbm5lY3QoY29uZmlnLkRCX1VSTCwge1xuICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZVxufSk7XG5cbi8vIOi/nuaOpeaIkOWKn1xubW9uZ29vc2UuY29ubmVjdGlvbi5vbignY29ubmVjdGVkJywgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGBNb25nb0RCOiAke2NvbmZpZy5EQl9OQU1FfSwgREJfSE9TVDogJHtjb25maWcuTU9OR09fSE9TVE5BTUV9IGNvbm5lY3Rpb24gb3BlbmVkISBgKTtcbn0pO1xuXG4vLyDov57mjqXlvILluLhcbm1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Vycm9yJywgZXJyID0+IHtcbiAgICBjb25zb2xlLmxvZygnTW9uZ29vc2UgY29ubmVjdGlvbiBlcnJvcjogJyArIGVycik7XG59KTtcblxuLy8g5pat5byA6L+e5o6lXG5tb25nb29zZS5jb25uZWN0aW9uLm9uKCdkaXNjb25uZWN0ZWQnLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ01vbmdvb3NlIGNvbm5lY3Rpb24gZGlzY29ubmVjdGVkJyk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2U7XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJjb25maWciLCJjb25uZWN0IiwiREJfVVJMIiwidXNlTmV3VXJsUGFyc2VyIiwiY29ubmVjdGlvbiIsIm9uIiwiY29uc29sZSIsImxvZyIsIkRCX05BTUUiLCJNT05HT19IT1NUTkFNRSIsImVyciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/config/DBHelpler.js\n\n}");

/***/ }),

/***/ "./src/config/MailConfig.js":
/*!**********************************!*\
  !*** ./src/config/MailConfig.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/config */ \"./src/config/index.js\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! qs */ \"qs\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst toSendSms = (option, sendInfo) => {\n  option.subject = '你好，你的验证码';\n  option.text = `您正在绑定您的邮箱，验证码为：${sendInfo.code}，验证码过期时间：${sendInfo.expire}。`;\n  option.html = '';\n};\n\n// async..await is not allowed in global scope, must use a wrapper\nasync function send(sendInfo, isSendSms) {\n  console.log('sendInfo', sendInfo);\n  // Generate test SMTP service account from ethereal.email\n  // Only needed if you don't have a real mail account for testing\n  // let testAccount = await nodemailer.createTestAccount()\n\n  // create reusable transporter object using the default SMTP transport\n  const transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0___default().createTransport({\n    host: 'smtp.qq.com',\n    port: 587,\n    secure: false,\n    // true for 465, false for other ports\n    auth: {\n      user: '285273676@qq.com',\n      // generated ethereal user\n      pass: 'pkblqdtiadnsbhdf' // generated ethereal password\n    }\n  });\n\n  // let sendInfo = {\n  //   code: '1234',\n  //   expire: '2019-10-01',\n  //   email: 'imoocbrian@qq.com',\n  //   user: 'Brian',\n  // }\n  const baseUrl = _config__WEBPACK_IMPORTED_MODULE_1__[\"default\"].baseUrl;\n  console.log('config', _config__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n  const route = sendInfo.type === 'email' ? '/confirm' : '/reset';\n  const url = `${baseUrl}/#${route}?` + qs__WEBPACK_IMPORTED_MODULE_2___default().stringify(sendInfo.data);\n  const mailOptions = {\n    from: '\"认证邮件\" <285273676@qq.com>',\n    // sender address\n    to: sendInfo.email,\n    // list of receivers\n    subject: sendInfo.user !== '' && sendInfo.type !== 'email' ? `你好开发者，${sendInfo.user}！《慕课网前端全栈实践》${sendInfo.type === 'reset' ? '重置密码链接！' : '注册码！'}` : '《慕课网前端全栈实践》确认修改邮件链接',\n    // Subject line\n    text: `您在《慕课网前端全栈实践》课程中注册，您的邀请码是${sendInfo.code},邀请码的过期时间: ${sendInfo.expire}`,\n    // plain text body\n    html: `\n        <div style=\"border: 1px solid #dcdcdc;color: #676767;width: 600px; margin: 0 auto; padding-bottom: 50px;position: relative;\">\n        <div style=\"height: 60px; background: #393d49; line-height: 60px; color: #58a36f; font-size: 18px;padding-left: 10px;\">Imooc社区——欢迎来到官方社区</div>\n        <div style=\"padding: 25px\">\n          <div>您好，${sendInfo.user}童鞋，重置链接有效时间30分钟，请在${sendInfo.expire}之前${sendInfo.code ? '重置您的密码' : '修改您的邮箱为：' + sendInfo.data.username}：</div>\n          <a href=\"${url}\" style=\"padding: 10px 20px; color: #fff; background: #009e94; display: inline-block;margin: 15px 0;\">${sendInfo.code ? '立即重置密码' : '确认设置邮箱'}</a>\n          <div style=\"padding: 5px; background: #f2f2f2;\">如果该邮件不是由你本人操作，请勿进行激活！否则你的邮箱将会被他人绑定。</div>\n        </div>\n        <div style=\"background: #fafafa; color: #b4b4b4;text-align: center; line-height: 45px; height: 45px; position: absolute; left: 0; bottom: 0;width: 100%;\">系统邮件，请勿直接回复</div>\n    </div>\n    ` // html body\n  };\n  if (isSendSms) {\n    // 发送短信验证码\n    toSendSms(mailOptions, sendInfo);\n  }\n\n  // send mail with defined transport object\n  const info = await transporter.sendMail(mailOptions);\n  return `Message sent: %s, ${info.messageId}`;\n  // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n\n  // Preview only available when sending through an Ethereal account\n  // console.log('Preview URL: %s', nodemailer.getTestMessageUrl(info))\n  // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n}\n\n// main().catch(console.error)\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (send);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29uZmlnL01haWxDb25maWcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9DO0FBQ047QUFDVjtBQUVwQixNQUFNRyxTQUFTLEdBQUdBLENBQUNDLE1BQU0sRUFBRUMsUUFBUSxLQUFLO0VBQ3BDRCxNQUFNLENBQUNFLE9BQU8sR0FBRyxVQUFVO0VBQzNCRixNQUFNLENBQUNHLElBQUksR0FBRyxrQkFBa0JGLFFBQVEsQ0FBQ0csSUFBSSxZQUFZSCxRQUFRLENBQUNJLE1BQU0sR0FBRztFQUMzRUwsTUFBTSxDQUFDTSxJQUFJLEdBQUcsRUFBRTtBQUNwQixDQUFDOztBQUVEO0FBQ0EsZUFBZUMsSUFBSUEsQ0FBQ04sUUFBUSxFQUFFTyxTQUFTLEVBQUU7RUFDckNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFVBQVUsRUFBRVQsUUFBUSxDQUFDO0VBQ2pDO0VBQ0E7RUFDQTs7RUFFQTtFQUNBLE1BQU1VLFdBQVcsR0FBR2YsaUVBQTBCLENBQUM7SUFDM0NpQixJQUFJLEVBQUUsYUFBYTtJQUNuQkMsSUFBSSxFQUFFLEdBQUc7SUFDVEMsTUFBTSxFQUFFLEtBQUs7SUFBRTtJQUNmQyxJQUFJLEVBQUU7TUFDRkMsSUFBSSxFQUFFLGtCQUFrQjtNQUFFO01BQzFCQyxJQUFJLEVBQUUsa0JBQWtCLENBQUM7SUFDN0I7RUFDSixDQUFDLENBQUM7O0VBRUY7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0EsTUFBTUMsT0FBTyxHQUFHdEIsK0NBQU0sQ0FBQ3NCLE9BQU87RUFDOUJWLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLFFBQVEsRUFBRWIsK0NBQU0sQ0FBQztFQUM3QixNQUFNdUIsS0FBSyxHQUFHbkIsUUFBUSxDQUFDb0IsSUFBSSxLQUFLLE9BQU8sR0FBRyxVQUFVLEdBQUcsUUFBUTtFQUMvRCxNQUFNQyxHQUFHLEdBQUcsR0FBR0gsT0FBTyxLQUFLQyxLQUFLLEdBQUcsR0FBR3RCLG1EQUFZLENBQUNHLFFBQVEsQ0FBQ3VCLElBQUksQ0FBQztFQUVqRSxNQUFNQyxXQUFXLEdBQUc7SUFDaEJDLElBQUksRUFBRSwyQkFBMkI7SUFBRTtJQUNuQ0MsRUFBRSxFQUFFMUIsUUFBUSxDQUFDMkIsS0FBSztJQUFFO0lBQ3BCMUIsT0FBTyxFQUNIRCxRQUFRLENBQUNnQixJQUFJLEtBQUssRUFBRSxJQUFJaEIsUUFBUSxDQUFDb0IsSUFBSSxLQUFLLE9BQU8sR0FDM0MsU0FBU3BCLFFBQVEsQ0FBQ2dCLElBQUksZUFBZWhCLFFBQVEsQ0FBQ29CLElBQUksS0FBSyxPQUFPLEdBQUcsU0FBUyxHQUFHLE1BQU0sRUFBRSxHQUNyRixxQkFBcUI7SUFBRTtJQUNqQ2xCLElBQUksRUFBRSw0QkFBNEJGLFFBQVEsQ0FBQ0csSUFBSSxjQUFjSCxRQUFRLENBQUNJLE1BQU0sRUFBRTtJQUFFO0lBQ2hGQyxJQUFJLEVBQUU7QUFDZDtBQUNBO0FBQ0E7QUFDQSxvQkFBb0JMLFFBQVEsQ0FBQ2dCLElBQUkscUJBQXFCaEIsUUFBUSxDQUFDSSxNQUFNLEtBQ3pESixRQUFRLENBQUNHLElBQUksR0FBRyxRQUFRLEdBQUcsVUFBVSxHQUFHSCxRQUFRLENBQUN1QixJQUFJLENBQUNLLFFBQVE7QUFDMUUscUJBQ3FCUCxHQUFHLHlHQUNackIsUUFBUSxDQUFDRyxJQUFJLEdBQUcsUUFBUSxHQUFHLFFBQVE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUNLLENBQUM7RUFDRixDQUFDO0VBRUQsSUFBSUksU0FBUyxFQUFFO0lBQ1g7SUFDQVQsU0FBUyxDQUFDMEIsV0FBVyxFQUFFeEIsUUFBUSxDQUFDO0VBQ3BDOztFQUVBO0VBQ0EsTUFBTTZCLElBQUksR0FBRyxNQUFNbkIsV0FBVyxDQUFDb0IsUUFBUSxDQUFDTixXQUFXLENBQUM7RUFFcEQsT0FBTyxxQkFBcUJLLElBQUksQ0FBQ0UsU0FBUyxFQUFFO0VBQzVDOztFQUVBO0VBQ0E7RUFDQTtBQUNKOztBQUVBOztBQUVBLGlFQUFlekIsSUFBSSIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9jb25maWcvTWFpbENvbmZpZy5qcz8yZGIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBub2RlbWFpbGVyIGZyb20gJ25vZGVtYWlsZXInO1xuaW1wb3J0IGNvbmZpZyBmcm9tICdAL2NvbmZpZyc7XG5pbXBvcnQgcXMgZnJvbSAncXMnO1xuXG5jb25zdCB0b1NlbmRTbXMgPSAob3B0aW9uLCBzZW5kSW5mbykgPT4ge1xuICAgIG9wdGlvbi5zdWJqZWN0ID0gJ+S9oOWlve+8jOS9oOeahOmqjOivgeeggSc7XG4gICAgb3B0aW9uLnRleHQgPSBg5oKo5q2j5Zyo57uR5a6a5oKo55qE6YKu566x77yM6aqM6K+B56CB5Li677yaJHtzZW5kSW5mby5jb2Rlfe+8jOmqjOivgeeggei/h+acn+aXtumXtO+8miR7c2VuZEluZm8uZXhwaXJlfeOAgmA7XG4gICAgb3B0aW9uLmh0bWwgPSAnJztcbn07XG5cbi8vIGFzeW5jLi5hd2FpdCBpcyBub3QgYWxsb3dlZCBpbiBnbG9iYWwgc2NvcGUsIG11c3QgdXNlIGEgd3JhcHBlclxuYXN5bmMgZnVuY3Rpb24gc2VuZChzZW5kSW5mbywgaXNTZW5kU21zKSB7XG4gICAgY29uc29sZS5sb2coJ3NlbmRJbmZvJywgc2VuZEluZm8pO1xuICAgIC8vIEdlbmVyYXRlIHRlc3QgU01UUCBzZXJ2aWNlIGFjY291bnQgZnJvbSBldGhlcmVhbC5lbWFpbFxuICAgIC8vIE9ubHkgbmVlZGVkIGlmIHlvdSBkb24ndCBoYXZlIGEgcmVhbCBtYWlsIGFjY291bnQgZm9yIHRlc3RpbmdcbiAgICAvLyBsZXQgdGVzdEFjY291bnQgPSBhd2FpdCBub2RlbWFpbGVyLmNyZWF0ZVRlc3RBY2NvdW50KClcblxuICAgIC8vIGNyZWF0ZSByZXVzYWJsZSB0cmFuc3BvcnRlciBvYmplY3QgdXNpbmcgdGhlIGRlZmF1bHQgU01UUCB0cmFuc3BvcnRcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcbiAgICAgICAgaG9zdDogJ3NtdHAucXEuY29tJyxcbiAgICAgICAgcG9ydDogNTg3LFxuICAgICAgICBzZWN1cmU6IGZhbHNlLCAvLyB0cnVlIGZvciA0NjUsIGZhbHNlIGZvciBvdGhlciBwb3J0c1xuICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgICB1c2VyOiAnMjg1MjczNjc2QHFxLmNvbScsIC8vIGdlbmVyYXRlZCBldGhlcmVhbCB1c2VyXG4gICAgICAgICAgICBwYXNzOiAncGtibHFkdGlhZG5zYmhkZicgLy8gZ2VuZXJhdGVkIGV0aGVyZWFsIHBhc3N3b3JkXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGxldCBzZW5kSW5mbyA9IHtcbiAgICAvLyAgIGNvZGU6ICcxMjM0JyxcbiAgICAvLyAgIGV4cGlyZTogJzIwMTktMTAtMDEnLFxuICAgIC8vICAgZW1haWw6ICdpbW9vY2JyaWFuQHFxLmNvbScsXG4gICAgLy8gICB1c2VyOiAnQnJpYW4nLFxuICAgIC8vIH1cbiAgICBjb25zdCBiYXNlVXJsID0gY29uZmlnLmJhc2VVcmw7XG4gICAgY29uc29sZS5sb2coJ2NvbmZpZycsIGNvbmZpZyk7XG4gICAgY29uc3Qgcm91dGUgPSBzZW5kSW5mby50eXBlID09PSAnZW1haWwnID8gJy9jb25maXJtJyA6ICcvcmVzZXQnO1xuICAgIGNvbnN0IHVybCA9IGAke2Jhc2VVcmx9LyMke3JvdXRlfT9gICsgcXMuc3RyaW5naWZ5KHNlbmRJbmZvLmRhdGEpO1xuXG4gICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XG4gICAgICAgIGZyb206ICdcIuiupOivgemCruS7tlwiIDwyODUyNzM2NzZAcXEuY29tPicsIC8vIHNlbmRlciBhZGRyZXNzXG4gICAgICAgIHRvOiBzZW5kSW5mby5lbWFpbCwgLy8gbGlzdCBvZiByZWNlaXZlcnNcbiAgICAgICAgc3ViamVjdDpcbiAgICAgICAgICAgIHNlbmRJbmZvLnVzZXIgIT09ICcnICYmIHNlbmRJbmZvLnR5cGUgIT09ICdlbWFpbCdcbiAgICAgICAgICAgICAgICA/IGDkvaDlpb3lvIDlj5HogIXvvIwke3NlbmRJbmZvLnVzZXJ977yB44CK5oWV6K++572R5YmN56uv5YWo5qCI5a6e6Le144CLJHtzZW5kSW5mby50eXBlID09PSAncmVzZXQnID8gJ+mHjee9ruWvhueggemTvuaOpe+8gScgOiAn5rOo5YaM56CB77yBJ31gXG4gICAgICAgICAgICAgICAgOiAn44CK5oWV6K++572R5YmN56uv5YWo5qCI5a6e6Le144CL56Gu6K6k5L+u5pS56YKu5Lu26ZO+5o6lJywgLy8gU3ViamVjdCBsaW5lXG4gICAgICAgIHRleHQ6IGDmgqjlnKjjgIrmhZXor77nvZHliY3nq6/lhajmoIjlrp7ot7XjgIvor77nqIvkuK3ms6jlhozvvIzmgqjnmoTpgoDor7fnoIHmmK8ke3NlbmRJbmZvLmNvZGV9LOmCgOivt+eggeeahOi/h+acn+aXtumXtDogJHtzZW5kSW5mby5leHBpcmV9YCwgLy8gcGxhaW4gdGV4dCBib2R5XG4gICAgICAgIGh0bWw6IGBcbiAgICAgICAgPGRpdiBzdHlsZT1cImJvcmRlcjogMXB4IHNvbGlkICNkY2RjZGM7Y29sb3I6ICM2NzY3Njc7d2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bzsgcGFkZGluZy1ib3R0b206IDUwcHg7cG9zaXRpb246IHJlbGF0aXZlO1wiPlxuICAgICAgICA8ZGl2IHN0eWxlPVwiaGVpZ2h0OiA2MHB4OyBiYWNrZ3JvdW5kOiAjMzkzZDQ5OyBsaW5lLWhlaWdodDogNjBweDsgY29sb3I6ICM1OGEzNmY7IGZvbnQtc2l6ZTogMThweDtwYWRkaW5nLWxlZnQ6IDEwcHg7XCI+SW1vb2PnpL7ljLrigJTigJTmrKLov47mnaXliLDlrpjmlrnnpL7ljLo8L2Rpdj5cbiAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDI1cHhcIj5cbiAgICAgICAgICA8ZGl2PuaCqOWlve+8jCR7c2VuZEluZm8udXNlcn3nq6XpnovvvIzph43nva7pk77mjqXmnInmlYjml7bpl7QzMOWIhumSn++8jOivt+WcqCR7c2VuZEluZm8uZXhwaXJlfeS5i+WJjSR7XG4gICAgICAgICAgICBzZW5kSW5mby5jb2RlID8gJ+mHjee9ruaCqOeahOWvhueggScgOiAn5L+u5pS55oKo55qE6YKu566x5Li677yaJyArIHNlbmRJbmZvLmRhdGEudXNlcm5hbWVcbiAgICAgICAgfe+8mjwvZGl2PlxuICAgICAgICAgIDxhIGhyZWY9XCIke3VybH1cIiBzdHlsZT1cInBhZGRpbmc6IDEwcHggMjBweDsgY29sb3I6ICNmZmY7IGJhY2tncm91bmQ6ICMwMDllOTQ7IGRpc3BsYXk6IGlubGluZS1ibG9jazttYXJnaW46IDE1cHggMDtcIj4ke1xuICAgICAgICAgICAgc2VuZEluZm8uY29kZSA/ICfnq4vljbPph43nva7lr4bnoIEnIDogJ+ehruiupOiuvue9rumCrueusSdcbiAgICAgICAgfTwvYT5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogNXB4OyBiYWNrZ3JvdW5kOiAjZjJmMmYyO1wiPuWmguaenOivpemCruS7tuS4jeaYr+eUseS9oOacrOS6uuaTjeS9nO+8jOivt+WLv+i/m+ihjOa/gOa0u++8geWQpuWImeS9oOeahOmCrueuseWwhuS8muiiq+S7luS6uue7keWumuOAgjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6ICNmYWZhZmE7IGNvbG9yOiAjYjRiNGI0O3RleHQtYWxpZ246IGNlbnRlcjsgbGluZS1oZWlnaHQ6IDQ1cHg7IGhlaWdodDogNDVweDsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwOyBib3R0b206IDA7d2lkdGg6IDEwMCU7XCI+57O757uf6YKu5Lu277yM6K+35Yu/55u05o6l5Zue5aSNPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgYCAvLyBodG1sIGJvZHlcbiAgICB9O1xuXG4gICAgaWYgKGlzU2VuZFNtcykge1xuICAgICAgICAvLyDlj5HpgIHnn63kv6Hpqozor4HnoIFcbiAgICAgICAgdG9TZW5kU21zKG1haWxPcHRpb25zLCBzZW5kSW5mbyk7XG4gICAgfVxuXG4gICAgLy8gc2VuZCBtYWlsIHdpdGggZGVmaW5lZCB0cmFuc3BvcnQgb2JqZWN0XG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcblxuICAgIHJldHVybiBgTWVzc2FnZSBzZW50OiAlcywgJHtpbmZvLm1lc3NhZ2VJZH1gO1xuICAgIC8vIE1lc3NhZ2Ugc2VudDogPGI2NThmOGNhLTYyOTYtY2NmNC04MzA2LTg3ZDU3YTBiNDMyMUBleGFtcGxlLmNvbT5cblxuICAgIC8vIFByZXZpZXcgb25seSBhdmFpbGFibGUgd2hlbiBzZW5kaW5nIHRocm91Z2ggYW4gRXRoZXJlYWwgYWNjb3VudFxuICAgIC8vIGNvbnNvbGUubG9nKCdQcmV2aWV3IFVSTDogJXMnLCBub2RlbWFpbGVyLmdldFRlc3RNZXNzYWdlVXJsKGluZm8pKVxuICAgIC8vIFByZXZpZXcgVVJMOiBodHRwczovL2V0aGVyZWFsLmVtYWlsL21lc3NhZ2UvV2FRS01nS2RkeFFEb291Li4uXG59XG5cbi8vIG1haW4oKS5jYXRjaChjb25zb2xlLmVycm9yKVxuXG5leHBvcnQgZGVmYXVsdCBzZW5kO1xuIl0sIm5hbWVzIjpbIm5vZGVtYWlsZXIiLCJjb25maWciLCJxcyIsInRvU2VuZFNtcyIsIm9wdGlvbiIsInNlbmRJbmZvIiwic3ViamVjdCIsInRleHQiLCJjb2RlIiwiZXhwaXJlIiwiaHRtbCIsInNlbmQiLCJpc1NlbmRTbXMiLCJjb25zb2xlIiwibG9nIiwidHJhbnNwb3J0ZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJob3N0IiwicG9ydCIsInNlY3VyZSIsImF1dGgiLCJ1c2VyIiwicGFzcyIsImJhc2VVcmwiLCJyb3V0ZSIsInR5cGUiLCJ1cmwiLCJzdHJpbmdpZnkiLCJkYXRhIiwibWFpbE9wdGlvbnMiLCJmcm9tIiwidG8iLCJlbWFpbCIsInVzZXJuYW1lIiwiaW5mbyIsInNlbmRNYWlsIiwibWVzc2FnZUlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/config/MailConfig.js\n\n}");

/***/ }),

/***/ "./src/config/RedisConfig.js":
/*!***********************************!*\
  !*** ./src/config/RedisConfig.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   client: () => (/* binding */ client),\n/* harmony export */   delValue: () => (/* binding */ delValue),\n/* harmony export */   getHValue: () => (/* binding */ getHValue),\n/* harmony export */   getValue: () => (/* binding */ getValue),\n/* harmony export */   setValue: () => (/* binding */ setValue)\n/* harmony export */ });\n/* harmony import */ var redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redis */ \"redis\");\n/* harmony import */ var redis__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(redis__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/config/index.js\");\n\n\nconst options = {\n  socket: {\n    host: _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].REDIS.host,\n    // 服务器地址\n    port: _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].REDIS.port // Redis 端口\n  },\n  password: _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].REDIS.password,\n  no_ready_check: true,\n  detect_buffers: true\n};\nlet client = (0,redis__WEBPACK_IMPORTED_MODULE_0__.createClient)(options);\n\n// 连接 Redis（只执行一次）\nconst initRedis = async () => {\n  if (!client.isOpen) {\n    await client.connect();\n  }\n  return client;\n};\nclient.on('error', err => {\n  console.error('❌ Redis Client Error:', err.message);\n  setTimeout(async () => {\n    await initRedis();\n  }, 2000);\n});\nclient.on('connect', () => {\n  console.log('✅ Redis connected successfully');\n});\nclient.on('end', () => {\n  console.log('redis connection has closed');\n});\nclient.on('reconnecting', o => {\n  console.log('redis client reconnecting', o.attempt, o.delay);\n});\nconst setValue = async (key, value, time) => {\n  await initRedis();\n  if (typeof value === 'undefined' || value == null || value === '') {\n    return;\n  }\n  if (typeof value === 'object') {\n    await client.hSet(key, value);\n  } else {\n    if (time) {\n      await client.setEx(key, time, value);\n    } else {\n      await client.set(key, value);\n    }\n  }\n};\nconst getValue = async key => {\n  await initRedis();\n  return client.get(key);\n};\nconst getHValue = async key => {\n  await initRedis();\n  return client.hGetAll(key);\n};\nconst delValue = async key => {\n  await initRedis();\n  const res = await client.del(key);\n  if (res === 1) {\n    console.log('delete successfully');\n  } else {\n    console.log(`⚠️ Failed to delete key \"${key}\"`);\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHLE1BQU1WLEdBQUcsSUFBSTtFQUMxQixNQUFNZCxTQUFTLENBQUMsQ0FBQztFQUNqQixNQUFNeUIsR0FBRyxHQUFHLE1BQU0xQixNQUFNLENBQUMyQixHQUFHLENBQUNaLEdBQUcsQ0FBQztFQUNqQyxJQUFJVyxHQUFHLEtBQUssQ0FBQyxFQUFFO0lBQ1hwQixPQUFPLENBQUNJLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztFQUN0QyxDQUFDLE1BQU07SUFDSEosT0FBTyxDQUFDSSxHQUFHLENBQUMsNEJBQTRCSyxHQUFHLEdBQUcsQ0FBQztFQUNuRDtBQUNKLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvY29uZmlnL1JlZGlzQ29uZmlnLmpzP2I3ODkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAncmVkaXMnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2luZGV4JztcblxuY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBzb2NrZXQ6IHtcbiAgICAgICAgaG9zdDogY29uZmlnLlJFRElTLmhvc3QsIC8vIOacjeWKoeWZqOWcsOWdgFxuICAgICAgICBwb3J0OiBjb25maWcuUkVESVMucG9ydCAvLyBSZWRpcyDnq6/lj6NcbiAgICB9LFxuICAgIHBhc3N3b3JkOiBjb25maWcuUkVESVMucGFzc3dvcmQsXG4gICAgbm9fcmVhZHlfY2hlY2s6IHRydWUsXG4gICAgZGV0ZWN0X2J1ZmZlcnM6IHRydWVcbn07XG5cbmxldCBjbGllbnQgPSBjcmVhdGVDbGllbnQob3B0aW9ucyk7XG5cbi8vIOi/nuaOpSBSZWRpc++8iOWPquaJp+ihjOS4gOasoe+8iVxuY29uc3QgaW5pdFJlZGlzID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghY2xpZW50LmlzT3Blbikge1xuICAgICAgICBhd2FpdCBjbGllbnQuY29ubmVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gY2xpZW50O1xufTtcblxuY2xpZW50Lm9uKCdlcnJvcicsIGVyciA9PiB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFJlZGlzIENsaWVudCBFcnJvcjonLCBlcnIubWVzc2FnZSk7XG4gICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGluaXRSZWRpcygpO1xuICAgIH0sIDIwMDApO1xufSk7XG5cbmNsaWVudC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygn4pyFIFJlZGlzIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHknKTtcbn0pO1xuXG5jbGllbnQub24oJ2VuZCcsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygncmVkaXMgY29ubmVjdGlvbiBoYXMgY2xvc2VkJyk7XG59KTtcblxuY2xpZW50Lm9uKCdyZWNvbm5lY3RpbmcnLCBvID0+IHtcbiAgICBjb25zb2xlLmxvZygncmVkaXMgY2xpZW50IHJlY29ubmVjdGluZycsIG8uYXR0ZW1wdCwgby5kZWxheSk7XG59KTtcblxuY29uc3Qgc2V0VmFsdWUgPSBhc3luYyAoa2V5LCB2YWx1ZSwgdGltZSkgPT4ge1xuICAgIGF3YWl0IGluaXRSZWRpcygpO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnIHx8IHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgYXdhaXQgY2xpZW50LmhTZXQoa2V5LCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRpbWUpIHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudC5zZXRFeChrZXksIHRpbWUsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCBnZXRWYWx1ZSA9IGFzeW5jIGtleSA9PiB7XG4gICAgYXdhaXQgaW5pdFJlZGlzKCk7XG4gICAgcmV0dXJuIGNsaWVudC5nZXQoa2V5KTtcbn07XG5cbmNvbnN0IGdldEhWYWx1ZSA9IGFzeW5jIGtleSA9PiB7XG4gICAgYXdhaXQgaW5pdFJlZGlzKCk7XG4gICAgcmV0dXJuIGNsaWVudC5oR2V0QWxsKGtleSk7XG59O1xuXG5jb25zdCBkZWxWYWx1ZSA9IGFzeW5jIGtleSA9PiB7XG4gICAgYXdhaXQgaW5pdFJlZGlzKCk7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LmRlbChrZXkpO1xuICAgIGlmIChyZXMgPT09IDEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZSBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhg4pqg77iPIEZhaWxlZCB0byBkZWxldGUga2V5IFwiJHtrZXl9XCJgKTtcbiAgICB9XG59O1xuXG5leHBvcnQgeyBjbGllbnQsIHNldFZhbHVlLCBnZXRWYWx1ZSwgZ2V0SFZhbHVlLCBkZWxWYWx1ZSB9O1xuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImNvbmZpZyIsIm9wdGlvbnMiLCJzb2NrZXQiLCJob3N0IiwiUkVESVMiLCJwb3J0IiwicGFzc3dvcmQiLCJub19yZWFkeV9jaGVjayIsImRldGVjdF9idWZmZXJzIiwiY2xpZW50IiwiaW5pdFJlZGlzIiwiaXNPcGVuIiwiY29ubmVjdCIsIm9uIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSIsInNldFRpbWVvdXQiLCJsb2ciLCJvIiwiYXR0ZW1wdCIsImRlbGF5Iiwic2V0VmFsdWUiLCJrZXkiLCJ2YWx1ZSIsInRpbWUiLCJoU2V0Iiwic2V0RXgiLCJzZXQiLCJnZXRWYWx1ZSIsImdldCIsImdldEhWYWx1ZSIsImhHZXRBbGwiLCJkZWxWYWx1ZSIsInJlcyIsImRlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/config/RedisConfig.js\n\n}");

/***/ }),

/***/ "./src/config/index.js":
/*!*****************************!*\
  !*** ./src/config/index.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{var __dirname = \"src/config\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGO_USERNAME = process.env.DB_USER || 'koa';\nconst MONGO_PASSWORD = process.env.DB_PASS || '925926';\nconst MONGO_HOSTNAME = process.env.DB_HOST || '47.95.36.160';\nconst MONGO_PORT = process.env.DB_PORT || '27018';\nconst DB_NAME = process.env.DB_NAME || 'koa';\nconst DB_URL = `mongodb://${MONGO_USERNAME}:${MONGO_PASSWORD}@${MONGO_HOSTNAME}:${MONGO_PORT}/${DB_NAME}`;\n\n// console.log('DB_URL', DB_URL)\n\nconst REDIS = {\n  host: process.env.REDIS_HOST || '47.95.36.160',\n  port: process.env.REDIS_PORT || 6379,\n  password: process.env.REDIS_PASS || '925926'\n};\nconst JWT_SECRET = 'zzf';\nconst baseUrl =  false ? 0 : 'http://localhost:8080';\nconst uploadPath =  false ? 0 : path__WEBPACK_IMPORTED_MODULE_0___default().join(path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname), '../../public');\nconst adminEmail = ['admin-email@qq.com'];\nconst publicPath = [/^\\/v1\\/public/, /^\\/v1\\/login/, /^\\/v1\\/content/, /^\\/v1\\/user/, /^\\/v1\\/comments/];\nconst isDevMode = \"development\" !== 'production';\nconst port = 3000;\nconst wsPort = 3001;\nconst AppID = 'wxc47d78881f2e620c';\nconst AppSecret = 'your-app-secret';\nconst SubIds = ['e1vWHQiTOW9_cP6l31RtO_SDc41hOfhcqhWFCb0cquk', '3icSr0YIBLcMSYXchHBTWgCiAAom4lrkJqZAf2pVc-4', '6q9Rrn0uekifZbdMuhfzmvexEnZh0Qcv2gfHUBsi1kk', 'xVA_zdzgM8zPtpDOO92rpK9kQumz4O84E7sTy9Ihfds', 'sG80CJj2GvArifGRCWOJhumIyY5mQnM94RWGQkdctGc'];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  DB_NAME,\n  MONGO_HOSTNAME,\n  DB_URL,\n  REDIS,\n  JWT_SECRET,\n  baseUrl,\n  uploadPath,\n  adminEmail,\n  publicPath,\n  isDevMode,\n  port,\n  wsPort,\n  AppID,\n  AppSecret,\n  SubIds\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29uZmlnL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0I7QUFFeEIsTUFBTUMsY0FBYyxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsT0FBTyxJQUFJLEtBQUs7QUFDbkQsTUFBTUMsY0FBYyxHQUFHSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csT0FBTyxJQUFJLFFBQVE7QUFDdEQsTUFBTUMsY0FBYyxHQUFHTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ssT0FBTyxJQUFJLGNBQWM7QUFDNUQsTUFBTUMsVUFBVSxHQUFHUCxPQUFPLENBQUNDLEdBQUcsQ0FBQ08sT0FBTyxJQUFJLE9BQU87QUFDakQsTUFBTUMsT0FBTyxHQUFHVCxPQUFPLENBQUNDLEdBQUcsQ0FBQ1EsT0FBTyxJQUFJLEtBQUs7QUFFNUMsTUFBTUMsTUFBTSxHQUFHLGFBQWFYLGNBQWMsSUFBSUksY0FBYyxJQUFJRSxjQUFjLElBQUlFLFVBQVUsSUFBSUUsT0FBTyxFQUFFOztBQUV6Rzs7QUFFQSxNQUFNRSxLQUFLLEdBQUc7RUFDVkMsSUFBSSxFQUFFWixPQUFPLENBQUNDLEdBQUcsQ0FBQ1ksVUFBVSxJQUFJLGNBQWM7RUFDOUNDLElBQUksRUFBRWQsT0FBTyxDQUFDQyxHQUFHLENBQUNjLFVBQVUsSUFBSSxJQUFJO0VBQ3BDQyxRQUFRLEVBQUVoQixPQUFPLENBQUNDLEdBQUcsQ0FBQ2dCLFVBQVUsSUFBSTtBQUN4QyxDQUFDO0FBRUQsTUFBTUMsVUFBVSxHQUFHLEtBQUs7QUFFeEIsTUFBTUMsT0FBTyxHQUFHbkIsTUFBcUMsR0FBRyxDQUF5QixHQUFHLHVCQUF1QjtBQUUzRyxNQUFNcUIsVUFBVSxHQUFHckIsTUFBcUMsR0FBRyxDQUFhLEdBQUdGLGdEQUFTLENBQUNBLG1EQUFZLENBQUMwQixTQUFTLENBQUMsRUFBRSxjQUFjLENBQUM7QUFFN0gsTUFBTUMsVUFBVSxHQUFHLENBQUMsb0JBQW9CLENBQUM7QUFFekMsTUFBTUMsVUFBVSxHQUFHLENBQUMsZUFBZSxFQUFFLGNBQWMsRUFBRSxnQkFBZ0IsRUFBRSxhQUFhLEVBQUUsaUJBQWlCLENBQUM7QUFFeEcsTUFBTUMsU0FBUyxHQUFHM0IsYUFBb0IsS0FBSyxZQUFZO0FBRXZELE1BQU1jLElBQUksR0FBRyxJQUFJO0FBQ2pCLE1BQU1jLE1BQU0sR0FBRyxJQUFJO0FBRW5CLE1BQU1DLEtBQUssR0FBRyxvQkFBb0I7QUFDbEMsTUFBTUMsU0FBUyxHQUFHLGlCQUFpQjtBQUVuQyxNQUFNQyxNQUFNLEdBQUcsQ0FDWCw2Q0FBNkMsRUFDN0MsNkNBQTZDLEVBQzdDLDZDQUE2QyxFQUM3Qyw2Q0FBNkMsRUFDN0MsNkNBQTZDLENBQ2hEO0FBRUQsaUVBQWU7RUFDWHRCLE9BQU87RUFDUEosY0FBYztFQUNkSyxNQUFNO0VBQ05DLEtBQUs7RUFDTE8sVUFBVTtFQUNWQyxPQUFPO0VBQ1BFLFVBQVU7RUFDVkksVUFBVTtFQUNWQyxVQUFVO0VBQ1ZDLFNBQVM7RUFDVGIsSUFBSTtFQUNKYyxNQUFNO0VBQ05DLEtBQUs7RUFDTEMsU0FBUztFQUNUQztBQUNKLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvY29uZmlnL2luZGV4LmpzP2YxMjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmNvbnN0IE1PTkdPX1VTRVJOQU1FID0gcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAna29hJztcbmNvbnN0IE1PTkdPX1BBU1NXT1JEID0gcHJvY2Vzcy5lbnYuREJfUEFTUyB8fCAnOTI1OTI2JztcbmNvbnN0IE1PTkdPX0hPU1ROQU1FID0gcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCAnNDcuOTUuMzYuMTYwJztcbmNvbnN0IE1PTkdPX1BPUlQgPSBwcm9jZXNzLmVudi5EQl9QT1JUIHx8ICcyNzAxOCc7XG5jb25zdCBEQl9OQU1FID0gcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCAna29hJztcblxuY29uc3QgREJfVVJMID0gYG1vbmdvZGI6Ly8ke01PTkdPX1VTRVJOQU1FfToke01PTkdPX1BBU1NXT1JEfUAke01PTkdPX0hPU1ROQU1FfToke01PTkdPX1BPUlR9LyR7REJfTkFNRX1gO1xuXG4vLyBjb25zb2xlLmxvZygnREJfVVJMJywgREJfVVJMKVxuXG5jb25zdCBSRURJUyA9IHtcbiAgICBob3N0OiBwcm9jZXNzLmVudi5SRURJU19IT1NUIHx8ICc0Ny45NS4zNi4xNjAnLFxuICAgIHBvcnQ6IHByb2Nlc3MuZW52LlJFRElTX1BPUlQgfHwgNjM3OSxcbiAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuUkVESVNfUEFTUyB8fCAnOTI1OTI2J1xufTtcblxuY29uc3QgSldUX1NFQ1JFVCA9ICd6emYnO1xuXG5jb25zdCBiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/ICdodHRwczovL3RlY2guenpmLm5ldC5jbicgOiAnaHR0cDovL2xvY2FsaG9zdDo4MDgwJztcblxuY29uc3QgdXBsb2FkUGF0aCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnL2FwcC9wdWJsaWMnIDogcGF0aC5qb2luKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUpLCAnLi4vLi4vcHVibGljJyk7XG5cbmNvbnN0IGFkbWluRW1haWwgPSBbJ2FkbWluLWVtYWlsQHFxLmNvbSddO1xuXG5jb25zdCBwdWJsaWNQYXRoID0gWy9eXFwvdjFcXC9wdWJsaWMvLCAvXlxcL3YxXFwvbG9naW4vLCAvXlxcL3YxXFwvY29udGVudC8sIC9eXFwvdjFcXC91c2VyLywgL15cXC92MVxcL2NvbW1lbnRzL107XG5cbmNvbnN0IGlzRGV2TW9kZSA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbic7XG5cbmNvbnN0IHBvcnQgPSAzMDAwO1xuY29uc3Qgd3NQb3J0ID0gMzAwMTtcblxuY29uc3QgQXBwSUQgPSAnd3hjNDdkNzg4ODFmMmU2MjBjJztcbmNvbnN0IEFwcFNlY3JldCA9ICd5b3VyLWFwcC1zZWNyZXQnO1xuXG5jb25zdCBTdWJJZHMgPSBbXG4gICAgJ2UxdldIUWlUT1c5X2NQNmwzMVJ0T19TRGM0MWhPZmhjcWhXRkNiMGNxdWsnLFxuICAgICczaWNTcjBZSUJMY01TWVhjaEhCVFdnQ2lBQW9tNGxya0pxWkFmMnBWYy00JyxcbiAgICAnNnE5UnJuMHVla2lmWmJkTXVoZnptdmV4RW5aaDBRY3YyZ2ZIVUJzaTFraycsXG4gICAgJ3hWQV96ZHpnTTh6UHRwRE9POTJycEs5a1F1bXo0Tzg0RTdzVHk5SWhmZHMnLFxuICAgICdzRzgwQ0pqMkd2QXJpZkdSQ1dPSmh1bUl5WTVtUW5NOTRSV0dRa2RjdEdjJ1xuXTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIERCX05BTUUsXG4gICAgTU9OR09fSE9TVE5BTUUsXG4gICAgREJfVVJMLFxuICAgIFJFRElTLFxuICAgIEpXVF9TRUNSRVQsXG4gICAgYmFzZVVybCxcbiAgICB1cGxvYWRQYXRoLFxuICAgIGFkbWluRW1haWwsXG4gICAgcHVibGljUGF0aCxcbiAgICBpc0Rldk1vZGUsXG4gICAgcG9ydCxcbiAgICB3c1BvcnQsXG4gICAgQXBwSUQsXG4gICAgQXBwU2VjcmV0LFxuICAgIFN1Yklkc1xufTtcbiJdLCJuYW1lcyI6WyJwYXRoIiwiTU9OR09fVVNFUk5BTUUiLCJwcm9jZXNzIiwiZW52IiwiREJfVVNFUiIsIk1PTkdPX1BBU1NXT1JEIiwiREJfUEFTUyIsIk1PTkdPX0hPU1ROQU1FIiwiREJfSE9TVCIsIk1PTkdPX1BPUlQiLCJEQl9QT1JUIiwiREJfTkFNRSIsIkRCX1VSTCIsIlJFRElTIiwiaG9zdCIsIlJFRElTX0hPU1QiLCJwb3J0IiwiUkVESVNfUE9SVCIsInBhc3N3b3JkIiwiUkVESVNfUEFTUyIsIkpXVF9TRUNSRVQiLCJiYXNlVXJsIiwiTk9ERV9FTlYiLCJ1cGxvYWRQYXRoIiwiam9pbiIsInJlc29sdmUiLCJfX2Rpcm5hbWUiLCJhZG1pbkVtYWlsIiwicHVibGljUGF0aCIsImlzRGV2TW9kZSIsIndzUG9ydCIsIkFwcElEIiwiQXBwU2VjcmV0IiwiU3ViSWRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/config/index.js\n\n}");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{var __dirname = \"src\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _config_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config/index */ \"./src/config/index.js\");\n/* harmony import */ var _common_ErrorHandle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common/ErrorHandle */ \"./src/common/ErrorHandle.js\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! md5 */ \"md5\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./model/User */ \"./src/model/User.js\");\n/* harmony import */ var _config_RedisConfig__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./config/RedisConfig */ \"./src/config/RedisConfig.js\");\n// 手动补全 Web Streams API\n__webpack_require__.g.ReadableStream = (__webpack_require__(/*! stream/web */ \"stream/web\").ReadableStream);\n__webpack_require__.g.WritableStream = (__webpack_require__(/*! stream/web */ \"stream/web\").WritableStream);\n__webpack_require__.g.TransformStream = (__webpack_require__(/*! stream/web */ \"stream/web\").TransformStream);\n__webpack_require__.g.Blob = (__webpack_require__(/*! buffer */ \"buffer\").Blob);\n__webpack_require__.g.File = (__webpack_require__(/*! buffer */ \"buffer\").File);\nconst Koa = __webpack_require__(/*! koa */ \"koa\");\nconst koaJWT = __webpack_require__(/*! koa-jwt */ \"koa-jwt\");\nconst app = new Koa();\nconst path = __webpack_require__(/*! path */ \"path\");\nconst Router = __webpack_require__(/*! koa-router */ \"koa-router\");\n// const router = new Router();\nconst router = __webpack_require__(/*! ./routes/index */ \"./src/routes/index.js\");\nconst cors = __webpack_require__(/*! @koa/cors */ \"@koa/cors\");\nconst {\n  koaBody\n} = __webpack_require__(/*! koa-body */ \"koa-body\");\nconst json = __webpack_require__(/*! koa-json */ \"koa-json\");\nconst helmet = __webpack_require__(/*! koa-helmet */ \"koa-helmet\");\nconst statics = __webpack_require__(/*! koa-static */ \"koa-static\");\nconst compose = __webpack_require__(/*! koa-compose */ \"koa-compose\");\nconst compress = __webpack_require__(/*! koa-compress */ \"koa-compress\");\n\n\n\n\ndotenv__WEBPACK_IMPORTED_MODULE_3___default().config();\n\n\n\n// setValue('express', '5.0.0');\n// const val = await getValue('express');\n// console.log(val);\n\nasync function testRedis() {\n  // await setValue('imoocObj12', { name: 'node', age: 18 });\n  // const val = await getHValue('imoocObj');\n  // console.log(val);\n  await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_5__.delValue)('name1');\n}\n// testRedis();\n\n// const mongoose = require('mongoose');\n\n// main()\n//     .then(() => {\n//         console.log('✅ MongoDB connected');\n//     })\n//     .catch(err => console.log(err));\n// async function main() {\n//     await mongoose.connect('mongodb://koa:925926@47.95.36.160:27018/koa');\n// }\n\n// const UserSchema = new mongoose.Schema({\n//     name: String,\n//     age: Number\n// });\n\n// const User = mongoose.model('users', UserSchema);\n\nasync function test() {\n  // let u = await User.findOne({ name: 'Node' });\n  // 创建\n  // const u = new User({ name: '李四', age: 28 });\n  // await u.save();\n\n  // 更新一个\n  // await User.updateOne({ name: '李四' }, { age: 26 });\n  // 通过ID更新\n  // await User.findByIdAndUpdate('68f5cf8223e1c36ef8c7d8f2', { name: '王五' });\n\n  // 删除一个\n  // await User.deleteOne({ name: 'Node' });\n\n  // 查询所有\n  const users = await _model_User__WEBPACK_IMPORTED_MODULE_4__[\"default\"].find();\n  console.log(users);\n}\n\n// test();\n\nconst isDevMode =  false ? 0 : true;\n\n// router.prefix('/api');\n\n// router.get('/', async (ctx, next) => {\n//     ctx.body = 'Hello World';\n// });\n\n// router.get('/msg', async (ctx, next) => {\n//     let params = ctx.request.query;\n//     console.log(params);\n//     ctx.body = `\n//     {\n//         code: 0,\n//         data: ${JSON.stringify(params)},\n//         message: '请求成功'\n//     }\n//     `;\n// });\n\n// router.post('/post', async (ctx, next) => {\n//     let { body } = ctx.request;\n//     console.log(ctx.request);\n\n//     ctx.body = `{\n//         code: 0,\n//         data: ${JSON.stringify(body)},\n//         message: '请求成功'\n//     }`;\n// });\n\n// 定义公共路径，不需要jwt鉴权\nconst jwt = koaJWT({\n  secret: md5__WEBPACK_IMPORTED_MODULE_2___default()(process.env.JWT_SECRET)\n}).unless({\n  path: [/^\\/v1\\/public/, /^\\/v1\\/login/]\n});\n\n/**\n * 使用koa-compose 集成中间件\n */\nconst middleware = compose([koaBody({\n  multipart: true,\n  formidable: {\n    keepExtensions: true,\n    maxFieldsSize: 5 * 1024 * 1024\n  },\n  onError: err => {\n    console.log('koabody TCL: err', err);\n  }\n}), cors(), json({\n  pretty: false,\n  param: 'pretty'\n}), helmet(), statics(path.join(__dirname, '../public')),\n// 用来展示静态资源\n_common_ErrorHandle__WEBPACK_IMPORTED_MODULE_1__[\"default\"], jwt]);\nif (!isDevMode) {\n  app.use(compress());\n}\napp.use(middleware);\n\n// app.use(router.routes()).use(router.allowedMethods());\n\napp.use(router());\napp.listen(3002);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzlCLENBQUM7RUFDREMsT0FBTyxFQUFFQyxHQUFHLElBQUk7SUFDWmhCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtCQUFrQixFQUFFZSxHQUFHLENBQUM7RUFDeEM7QUFDSixDQUFDLENBQUMsRUFDRnBDLElBQUksQ0FBQyxDQUFDLEVBQ05FLElBQUksQ0FBQztFQUFFbUMsTUFBTSxFQUFFLEtBQUs7RUFBRUMsS0FBSyxFQUFFO0FBQVMsQ0FBQyxDQUFDLEVBQ3hDbkMsTUFBTSxDQUFDLENBQUMsRUFDUkMsT0FBTyxDQUFDUCxJQUFJLENBQUMwQyxJQUFJLENBQUNDLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUFFO0FBQzVDaEMsMkRBQVcsRUFDWGtCLEdBQUcsQ0FDTixDQUFDO0FBRUYsSUFBSSxDQUFDSixTQUFTLEVBQUU7RUFDWjFCLEdBQUcsQ0FBQzZDLEdBQUcsQ0FBQ25DLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDdkI7QUFFQVYsR0FBRyxDQUFDNkMsR0FBRyxDQUFDWCxVQUFVLENBQUM7O0FBRW5COztBQUVBbEMsR0FBRyxDQUFDNkMsR0FBRyxDQUFDMUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUVqQkgsR0FBRyxDQUFDOEMsTUFBTSxDQUFDLElBQUksQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9pbmRleC5qcz9iNjM1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIOaJi+WKqOihpeWFqCBXZWIgU3RyZWFtcyBBUElcbmdsb2JhbC5SZWFkYWJsZVN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbS93ZWInKS5SZWFkYWJsZVN0cmVhbTtcbmdsb2JhbC5Xcml0YWJsZVN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbS93ZWInKS5Xcml0YWJsZVN0cmVhbTtcbmdsb2JhbC5UcmFuc2Zvcm1TdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0vd2ViJykuVHJhbnNmb3JtU3RyZWFtO1xuZ2xvYmFsLkJsb2IgPSByZXF1aXJlKCdidWZmZXInKS5CbG9iO1xuZ2xvYmFsLkZpbGUgPSByZXF1aXJlKCdidWZmZXInKS5GaWxlO1xuXG5jb25zdCBLb2EgPSByZXF1aXJlKCdrb2EnKTtcbmNvbnN0IGtvYUpXVCA9IHJlcXVpcmUoJ2tvYS1qd3QnKTtcbmNvbnN0IGFwcCA9IG5ldyBLb2EoKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5jb25zdCBSb3V0ZXIgPSByZXF1aXJlKCdrb2Etcm91dGVyJyk7XG4vLyBjb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKCk7XG5jb25zdCByb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcy9pbmRleCcpO1xuY29uc3QgY29ycyA9IHJlcXVpcmUoJ0Brb2EvY29ycycpO1xuY29uc3QgeyBrb2FCb2R5IH0gPSByZXF1aXJlKCdrb2EtYm9keScpO1xuY29uc3QganNvbiA9IHJlcXVpcmUoJ2tvYS1qc29uJyk7XG5jb25zdCBoZWxtZXQgPSByZXF1aXJlKCdrb2EtaGVsbWV0Jyk7XG5jb25zdCBzdGF0aWNzID0gcmVxdWlyZSgna29hLXN0YXRpYycpO1xuY29uc3QgY29tcG9zZSA9IHJlcXVpcmUoJ2tvYS1jb21wb3NlJyk7XG5jb25zdCBjb21wcmVzcyA9IHJlcXVpcmUoJ2tvYS1jb21wcmVzcycpO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZy9pbmRleCc7XG5pbXBvcnQgZXJyb3JIYW5kbGUgZnJvbSAnLi9jb21tb24vRXJyb3JIYW5kbGUnO1xuaW1wb3J0IG1kNSBmcm9tICdtZDUnO1xuXG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5kb3RlbnYuY29uZmlnKCk7XG5cbmltcG9ydCBVc2VyIGZyb20gJy4vbW9kZWwvVXNlcic7XG5pbXBvcnQgeyBzZXRWYWx1ZSwgZ2V0VmFsdWUsIGRlbFZhbHVlLCBnZXRIVmFsdWUgfSBmcm9tICcuL2NvbmZpZy9SZWRpc0NvbmZpZyc7XG5cbi8vIHNldFZhbHVlKCdleHByZXNzJywgJzUuMC4wJyk7XG4vLyBjb25zdCB2YWwgPSBhd2FpdCBnZXRWYWx1ZSgnZXhwcmVzcycpO1xuLy8gY29uc29sZS5sb2codmFsKTtcblxuYXN5bmMgZnVuY3Rpb24gdGVzdFJlZGlzKCkge1xuICAgIC8vIGF3YWl0IHNldFZhbHVlKCdpbW9vY09iajEyJywgeyBuYW1lOiAnbm9kZScsIGFnZTogMTggfSk7XG4gICAgLy8gY29uc3QgdmFsID0gYXdhaXQgZ2V0SFZhbHVlKCdpbW9vY09iaicpO1xuICAgIC8vIGNvbnNvbGUubG9nKHZhbCk7XG4gICAgYXdhaXQgZGVsVmFsdWUoJ25hbWUxJyk7XG59XG4vLyB0ZXN0UmVkaXMoKTtcblxuLy8gY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuXG4vLyBtYWluKClcbi8vICAgICAudGhlbigoKSA9PiB7XG4vLyAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgTW9uZ29EQiBjb25uZWN0ZWQnKTtcbi8vICAgICB9KVxuLy8gICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4vLyBhc3luYyBmdW5jdGlvbiBtYWluKCkge1xuLy8gICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QoJ21vbmdvZGI6Ly9rb2E6OTI1OTI2QDQ3Ljk1LjM2LjE2MDoyNzAxOC9rb2EnKTtcbi8vIH1cblxuLy8gY29uc3QgVXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuLy8gICAgIG5hbWU6IFN0cmluZyxcbi8vICAgICBhZ2U6IE51bWJlclxuLy8gfSk7XG5cbi8vIGNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgndXNlcnMnLCBVc2VyU2NoZW1hKTtcblxuYXN5bmMgZnVuY3Rpb24gdGVzdCgpIHtcbiAgICAvLyBsZXQgdSA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IG5hbWU6ICdOb2RlJyB9KTtcbiAgICAvLyDliJvlu7pcbiAgICAvLyBjb25zdCB1ID0gbmV3IFVzZXIoeyBuYW1lOiAn5p2O5ZubJywgYWdlOiAyOCB9KTtcbiAgICAvLyBhd2FpdCB1LnNhdmUoKTtcblxuICAgIC8vIOabtOaWsOS4gOS4qlxuICAgIC8vIGF3YWl0IFVzZXIudXBkYXRlT25lKHsgbmFtZTogJ+adjuWbmycgfSwgeyBhZ2U6IDI2IH0pO1xuICAgIC8vIOmAmui/h0lE5pu05pawXG4gICAgLy8gYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZSgnNjhmNWNmODIyM2UxYzM2ZWY4YzdkOGYyJywgeyBuYW1lOiAn546L5LqUJyB9KTtcblxuICAgIC8vIOWIoOmZpOS4gOS4qlxuICAgIC8vIGF3YWl0IFVzZXIuZGVsZXRlT25lKHsgbmFtZTogJ05vZGUnIH0pO1xuXG4gICAgLy8g5p+l6K+i5omA5pyJXG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoKTtcbiAgICBjb25zb2xlLmxvZyh1c2Vycyk7XG59XG5cbi8vIHRlc3QoKTtcblxuY29uc3QgaXNEZXZNb2RlID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/IGZhbHNlIDogdHJ1ZTtcblxuLy8gcm91dGVyLnByZWZpeCgnL2FwaScpO1xuXG4vLyByb3V0ZXIuZ2V0KCcvJywgYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuLy8gICAgIGN0eC5ib2R5ID0gJ0hlbGxvIFdvcmxkJztcbi8vIH0pO1xuXG4vLyByb3V0ZXIuZ2V0KCcvbXNnJywgYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuLy8gICAgIGxldCBwYXJhbXMgPSBjdHgucmVxdWVzdC5xdWVyeTtcbi8vICAgICBjb25zb2xlLmxvZyhwYXJhbXMpO1xuLy8gICAgIGN0eC5ib2R5ID0gYFxuLy8gICAgIHtcbi8vICAgICAgICAgY29kZTogMCxcbi8vICAgICAgICAgZGF0YTogJHtKU09OLnN0cmluZ2lmeShwYXJhbXMpfSxcbi8vICAgICAgICAgbWVzc2FnZTogJ+ivt+axguaIkOWKnydcbi8vICAgICB9XG4vLyAgICAgYDtcbi8vIH0pO1xuXG4vLyByb3V0ZXIucG9zdCgnL3Bvc3QnLCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG4vLyAgICAgbGV0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4vLyAgICAgY29uc29sZS5sb2coY3R4LnJlcXVlc3QpO1xuXG4vLyAgICAgY3R4LmJvZHkgPSBge1xuLy8gICAgICAgICBjb2RlOiAwLFxuLy8gICAgICAgICBkYXRhOiAke0pTT04uc3RyaW5naWZ5KGJvZHkpfSxcbi8vICAgICAgICAgbWVzc2FnZTogJ+ivt+axguaIkOWKnydcbi8vICAgICB9YDtcbi8vIH0pO1xuXG4vLyDlrprkuYnlhazlhbHot6/lvoTvvIzkuI3pnIDopoFqd3TpibTmnYNcbmNvbnN0IGp3dCA9IGtvYUpXVCh7IHNlY3JldDogbWQ1KHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpIH0pLnVubGVzcyh7XG4gICAgcGF0aDogWy9eXFwvdjFcXC9wdWJsaWMvLCAvXlxcL3YxXFwvbG9naW4vXSxcbn0pO1xuXG4vKipcbiAqIOS9v+eUqGtvYS1jb21wb3NlIOmbhuaIkOS4remXtOS7tlxuICovXG5jb25zdCBtaWRkbGV3YXJlID0gY29tcG9zZShbXG4gICAga29hQm9keSh7XG4gICAgICAgIG11bHRpcGFydDogdHJ1ZSxcbiAgICAgICAgZm9ybWlkYWJsZToge1xuICAgICAgICAgICAga2VlcEV4dGVuc2lvbnM6IHRydWUsXG4gICAgICAgICAgICBtYXhGaWVsZHNTaXplOiA1ICogMTAyNCAqIDEwMjQsXG4gICAgICAgIH0sXG4gICAgICAgIG9uRXJyb3I6IGVyciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygna29hYm9keSBUQ0w6IGVycicsIGVycik7XG4gICAgICAgIH0sXG4gICAgfSksXG4gICAgY29ycygpLFxuICAgIGpzb24oeyBwcmV0dHk6IGZhbHNlLCBwYXJhbTogJ3ByZXR0eScgfSksXG4gICAgaGVsbWV0KCksXG4gICAgc3RhdGljcyhwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vcHVibGljJykpLCAvLyDnlKjmnaXlsZXnpLrpnZnmgIHotYTmupBcbiAgICBlcnJvckhhbmRsZSxcbiAgICBqd3QsXG5dKTtcblxuaWYgKCFpc0Rldk1vZGUpIHtcbiAgICBhcHAudXNlKGNvbXByZXNzKCkpO1xufVxuXG5hcHAudXNlKG1pZGRsZXdhcmUpO1xuXG4vLyBhcHAudXNlKHJvdXRlci5yb3V0ZXMoKSkudXNlKHJvdXRlci5hbGxvd2VkTWV0aG9kcygpKTtcblxuYXBwLnVzZShyb3V0ZXIoKSk7XG5cbmFwcC5saXN0ZW4oMzAwMik7XG4iXSwibmFtZXMiOlsiZ2xvYmFsIiwiUmVhZGFibGVTdHJlYW0iLCJyZXF1aXJlIiwiV3JpdGFibGVTdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJCbG9iIiwiRmlsZSIsIktvYSIsImtvYUpXVCIsImFwcCIsInBhdGgiLCJSb3V0ZXIiLCJyb3V0ZXIiLCJjb3JzIiwia29hQm9keSIsImpzb24iLCJoZWxtZXQiLCJzdGF0aWNzIiwiY29tcG9zZSIsImNvbXByZXNzIiwiY29uZmlnIiwiZXJyb3JIYW5kbGUiLCJtZDUiLCJkb3RlbnYiLCJVc2VyIiwic2V0VmFsdWUiLCJnZXRWYWx1ZSIsImRlbFZhbHVlIiwiZ2V0SFZhbHVlIiwidGVzdFJlZGlzIiwidGVzdCIsInVzZXJzIiwiZmluZCIsImNvbnNvbGUiLCJsb2ciLCJpc0Rldk1vZGUiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJqd3QiLCJzZWNyZXQiLCJKV1RfU0VDUkVUIiwidW5sZXNzIiwibWlkZGxld2FyZSIsIm11bHRpcGFydCIsImZvcm1pZGFibGUiLCJrZWVwRXh0ZW5zaW9ucyIsIm1heEZpZWxkc1NpemUiLCJvbkVycm9yIiwiZXJyIiwicHJldHR5IiwicGFyYW0iLCJqb2luIiwiX19kaXJuYW1lIiwidXNlIiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.js\n\n}");

/***/ }),

/***/ "./src/model/Article.js":
/*!******************************!*\
  !*** ./src/model/Article.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/DBHelpler */ \"./src/config/DBHelpler.js\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst ArticleSchema = new _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema({\n  uid: {\n    type: String,\n    ref: 'users'\n  },\n  title: {\n    type: String\n  },\n  content: {\n    type: String\n  },\n  catalog: {\n    type: String\n  },\n  fav: {\n    type: String\n  },\n  isEnd: {\n    type: String,\n    default: '0'\n  },\n  reads: {\n    type: Number,\n    default: 0\n  },\n  answer: {\n    type: Number,\n    default: 0\n  },\n  status: {\n    type: String,\n    default: '0'\n  },\n  isTop: {\n    type: String,\n    default: '0'\n  },\n  sort: {\n    type: String,\n    default: 100\n  },\n  tags: {\n    type: Array,\n    default: [\n      // {\n      //   name: '',\n      //   class: ''\n      // }\n    ]\n  }\n}, {\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nArticleSchema.statics = {\n  /**\n   * 获取文章列表数据\n   * @param {Object} options 筛选条件\n   * @param {String} sort 排序方式\n   * @param {Number} page 分页页数\n   * @param {Number} limit 分页条数\n   */\n  getList: function (options, sort, page, limit) {\n    return this.find(options).sort({\n      [sort]: -1\n    }).skip(page * limit).limit(limit).populate({\n      path: 'uid',\n      // 通过uid字段关联users表查询字段\n      select: 'name isVip pic'\n    });\n  },\n  getTopWeek: function () {\n    return this.find({\n      created: {\n        $gte: dayjs__WEBPACK_IMPORTED_MODULE_1___default()().subtract(7, 'days') // $gte表示大于这些时间的\n      }\n    }, {\n      answer: 1,\n      // 显示哪些字段，1为显示\n      title: 1\n    }).sort({\n      answer: -1\n    }) // 排序方式，倒叙\n    .limit(15);\n  }\n};\nconst ArticleModel = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('article', ArticleSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ArticleModel);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICcuLi9jb25maWcvREJIZWxwbGVyJztcbmltcG9ydCBtb21lbnQgZnJvbSAnZGF5anMnO1xuXG5jb25zdCBBcnRpY2xlU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAgICB7XG4gICAgICAgIHVpZDogeyB0eXBlOiBTdHJpbmcsIHJlZjogJ3VzZXJzJyB9LFxuICAgICAgICB0aXRsZTogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICAgICAgY29udGVudDogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICAgICAgY2F0YWxvZzogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICAgICAgZmF2OiB7IHR5cGU6IFN0cmluZyB9LFxuICAgICAgICBpc0VuZDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcwJyB9LFxuICAgICAgICByZWFkczogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgICAgICAgYW5zd2VyOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICAgICAgICBzdGF0dXM6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnMCcgfSxcbiAgICAgICAgaXNUb3A6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnMCcgfSxcbiAgICAgICAgc29ydDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IDEwMCB9LFxuICAgICAgICB0YWdzOiB7XG4gICAgICAgICAgICB0eXBlOiBBcnJheSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtcbiAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgLy8gICBuYW1lOiAnJyxcbiAgICAgICAgICAgICAgICAvLyAgIGNsYXNzOiAnJ1xuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgeyB0aW1lc3RhbXBzOiB7IGNyZWF0ZWRBdDogJ2NyZWF0ZWQnLCB1cGRhdGVkQXQ6ICd1cGRhdGVkJyB9IH1cbik7XG5cbkFydGljbGVTY2hlbWEuc3RhdGljcyA9IHtcbiAgICAvKipcbiAgICAgKiDojrflj5bmlofnq6DliJfooajmlbDmja5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyDnrZvpgInmnaHku7ZcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc29ydCDmjpLluo/mlrnlvI9cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcGFnZSDliIbpobXpobXmlbBcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbGltaXQg5YiG6aG15p2h5pWwXG4gICAgICovXG4gICAgZ2V0TGlzdDogZnVuY3Rpb24gKG9wdGlvbnMsIHNvcnQsIHBhZ2UsIGxpbWl0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQob3B0aW9ucylcbiAgICAgICAgICAgIC5zb3J0KHsgW3NvcnRdOiAtMSB9KVxuICAgICAgICAgICAgLnNraXAocGFnZSAqIGxpbWl0KVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KVxuICAgICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICBwYXRoOiAndWlkJywgLy8g6YCa6L+HdWlk5a2X5q615YWz6IGUdXNlcnPooajmn6Xor6LlrZfmrrVcbiAgICAgICAgICAgICAgICBzZWxlY3Q6ICduYW1lIGlzVmlwIHBpYydcbiAgICAgICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRUb3BXZWVrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY3JlYXRlZDoge1xuICAgICAgICAgICAgICAgICAgICAkZ3RlOiBtb21lbnQoKS5zdWJ0cmFjdCg3LCAnZGF5cycpIC8vICRndGXooajnpLrlpKfkuo7ov5nkupvml7bpl7TnmoRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGFuc3dlcjogMSwgLy8g5pi+56S65ZOq5Lqb5a2X5q6177yMMeS4uuaYvuekulxuICAgICAgICAgICAgICAgIHRpdGxlOiAxXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgICAgIC5zb3J0KHsgYW5zd2VyOiAtMSB9KSAvLyDmjpLluo/mlrnlvI/vvIzlgJLlj5lcbiAgICAgICAgICAgIC5saW1pdCgxNSk7XG4gICAgfVxufTtcblxuY29uc3QgQXJ0aWNsZU1vZGVsID0gbW9uZ29vc2UubW9kZWwoJ2FydGljbGUnLCBBcnRpY2xlU2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgQXJ0aWNsZU1vZGVsO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwibW9tZW50IiwiQXJ0aWNsZVNjaGVtYSIsIlNjaGVtYSIsInVpZCIsInR5cGUiLCJTdHJpbmciLCJyZWYiLCJ0aXRsZSIsImNvbnRlbnQiLCJjYXRhbG9nIiwiZmF2IiwiaXNFbmQiLCJkZWZhdWx0IiwicmVhZHMiLCJOdW1iZXIiLCJhbnN3ZXIiLCJzdGF0dXMiLCJpc1RvcCIsInNvcnQiLCJ0YWdzIiwiQXJyYXkiLCJ0aW1lc3RhbXBzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwic3RhdGljcyIsImdldExpc3QiLCJvcHRpb25zIiwicGFnZSIsImxpbWl0IiwiZmluZCIsInNraXAiLCJwb3B1bGF0ZSIsInBhdGgiLCJzZWxlY3QiLCJnZXRUb3BXZWVrIiwiY3JlYXRlZCIsIiRndGUiLCJzdWJ0cmFjdCIsIkFydGljbGVNb2RlbCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/model/Article.js\n\n}");

/***/ }),

/***/ "./src/model/Links.js":
/*!****************************!*\
  !*** ./src/model/Links.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/DBHelpler */ \"./src/config/DBHelpler.js\");\n\nconst LinksSchema = new _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema({\n  title: {\n    type: String,\n    default: ''\n  },\n  link: {\n    type: String,\n    default: ''\n  },\n  type: {\n    type: String,\n    default: 'link'\n  },\n  isTop: {\n    type: String,\n    default: ''\n  },\n  sort: {\n    type: String,\n    default: ''\n  }\n}, {\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nconst Links = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('links', LinksSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Links);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kZWwvTGlua3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7QUFFMUMsTUFBTUMsV0FBVyxHQUFHLElBQUlELHlEQUFRLENBQUNFLE1BQU0sQ0FDbkM7RUFDSUMsS0FBSyxFQUFFO0lBQUVDLElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBQ3BDQyxJQUFJLEVBQUU7SUFBRUgsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLE9BQU8sRUFBRTtFQUFHLENBQUM7RUFDbkNGLElBQUksRUFBRTtJQUFFQSxJQUFJLEVBQUVDLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQU8sQ0FBQztFQUN2Q0UsS0FBSyxFQUFFO0lBQUVKLElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBQ3BDRyxJQUFJLEVBQUU7SUFBRUwsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLE9BQU8sRUFBRTtFQUFHO0FBQ3RDLENBQUMsRUFDRDtFQUFFSSxVQUFVLEVBQUU7SUFBRUMsU0FBUyxFQUFFLFNBQVM7SUFBRUMsU0FBUyxFQUFFO0VBQVU7QUFBRSxDQUNqRSxDQUFDO0FBRUQsTUFBTUMsS0FBSyxHQUFHYix5REFBUSxDQUFDYyxLQUFLLENBQUMsT0FBTyxFQUFFYixXQUFXLENBQUM7QUFFbEQsaUVBQWVZLEtBQUsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvbW9kZWwvTGlua3MuanM/ZTMxMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnQC9jb25maWcvREJIZWxwbGVyJztcblxuY29uc3QgTGlua3NTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICAgIHtcbiAgICAgICAgdGl0bGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgICAgICBsaW5rOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcbiAgICAgICAgdHlwZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdsaW5rJyB9LFxuICAgICAgICBpc1RvcDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXG4gICAgICAgIHNvcnQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9XG4gICAgfSxcbiAgICB7IHRpbWVzdGFtcHM6IHsgY3JlYXRlZEF0OiAnY3JlYXRlZCcsIHVwZGF0ZWRBdDogJ3VwZGF0ZWQnIH0gfVxuKTtcblxuY29uc3QgTGlua3MgPSBtb25nb29zZS5tb2RlbCgnbGlua3MnLCBMaW5rc1NjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IExpbmtzO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiTGlua3NTY2hlbWEiLCJTY2hlbWEiLCJ0aXRsZSIsInR5cGUiLCJTdHJpbmciLCJkZWZhdWx0IiwibGluayIsImlzVG9wIiwic29ydCIsInRpbWVzdGFtcHMiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJMaW5rcyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/model/Links.js\n\n}");

/***/ }),

/***/ "./src/model/SignRecord.js":
/*!*********************************!*\
  !*** ./src/model/SignRecord.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/DBHelpler */ \"./src/config/DBHelpler.js\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _common_Utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Utils */ \"./src/common/Utils.js\");\n\n\n\nconst SignRecordSchema = new _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema({\n  uid: {\n    type: String,\n    ref: 'users'\n  },\n  favs: {\n    type: Number\n  }\n}, {\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nSignRecordSchema.statics = {\n  findByUid: function (uid) {\n    return this.findOne({\n      uid: uid\n    }).sort({\n      created: -1\n    });\n  },\n  getLatestSign: function (page, limit) {\n    return this.find({}).populate({\n      path: 'uid',\n      select: '_id name pic'\n    }).skip(page * limit).limit(limit).sort({\n      created: -1\n    });\n  },\n  getTopSign: function (page, limit) {\n    return this.find({\n      created: {\n        $gte: dayjs__WEBPACK_IMPORTED_MODULE_1___default()().format('YYYY-MM-DD 00:00:00')\n      }\n    }).populate({\n      path: 'uid',\n      select: '_id name pic'\n    }).skip(page * limit).limit(limit).sort({\n      created: 1\n    });\n  },\n  getSignCount: function () {\n    return this.find({}).countDocuments();\n  },\n  getTopSignCount: function () {\n    return this.find({\n      created: {\n        $gte: dayjs__WEBPACK_IMPORTED_MODULE_1___default()().format('YYYY-MM-DD 00:00:00')\n      }\n    }).countDocuments();\n  },\n  isSign: function (uid) {\n    // 判断用户是否签到\n    return this.findOne({\n      uid: uid\n    }, {\n      openid: 0\n    }).sort({\n      created: -1\n    }).then(doc => {\n      return doc && (0,_common_Utils__WEBPACK_IMPORTED_MODULE_2__.isToday)(doc.created) ? 1 : 0;\n    });\n  },\n  // 取得最快签到\n  findQuickestSign: function () {\n    return this.find({\n      created: {\n        $gte: new Date(dayjs__WEBPACK_IMPORTED_MODULE_1___default()().format('YYYY-MM-DD 00:00:00'))\n      }\n    }).sort({\n      created: 1\n    }).limit(20).populate({\n      path: 'uid',\n      select: 'name pic isVip _id'\n    });\n  },\n  // 取得最新签到\n  findLastSign: function () {\n    return this.find({}).sort({\n      created: -1\n    }).limit(20).populate({\n      path: 'uid',\n      select: 'name pic isVip _id'\n    });\n  }\n};\nconst SignRecord = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('sign_record', SignRecordSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SignRecord);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7RUFDVixDQUFDO0VBQ0Q7RUFDQW1CLGdCQUFnQixFQUFFLFNBQUFBLENBQUEsRUFBWTtJQUMxQixPQUFPLElBQUksQ0FBQ2YsSUFBSSxDQUFDO01BQ2JKLE9BQU8sRUFBRTtRQUFFVSxJQUFJLEVBQUUsSUFBSVUsSUFBSSxDQUFDckMsNENBQU0sQ0FBQyxDQUFDLENBQUM0QixNQUFNLENBQUMscUJBQXFCLENBQUM7TUFBRTtJQUN0RSxDQUFDLENBQUMsQ0FDR1osSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUFFLENBQUMsQ0FBQyxDQUNwQkcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUNURSxRQUFRLENBQUM7TUFDTkMsSUFBSSxFQUFFLEtBQUs7TUFDWEMsTUFBTSxFQUFFO0lBQ1osQ0FBQyxDQUFDO0VBQ1YsQ0FBQztFQUNEO0VBQ0FjLFlBQVksRUFBRSxTQUFBQSxDQUFBLEVBQVk7SUFDdEIsT0FBTyxJQUFJLENBQUNqQixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQ0wsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRSxDQUFDO0lBQUUsQ0FBQyxDQUFDLENBQUNHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQ0UsUUFBUSxDQUFDO01BQzFEQyxJQUFJLEVBQUUsS0FBSztNQUNYQyxNQUFNLEVBQUU7SUFDWixDQUFDLENBQUM7RUFDTjtBQUNKLENBQUM7QUFFRCxNQUFNZSxVQUFVLEdBQUd4Qyx5REFBUSxDQUFDeUMsS0FBSyxDQUFDLGFBQWEsRUFBRXRDLGdCQUFnQixDQUFDO0FBRWxFLGlFQUFlcUMsVUFBVSIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9tb2RlbC9TaWduUmVjb3JkLmpzPzdjOWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJy4uL2NvbmZpZy9EQkhlbHBsZXInO1xuaW1wb3J0IG1vbWVudCBmcm9tICdkYXlqcyc7XG5pbXBvcnQgeyBpc1RvZGF5IH0gZnJvbSAnLi4vY29tbW9uL1V0aWxzJztcblxuY29uc3QgU2lnblJlY29yZFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gICAge1xuICAgICAgICB1aWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6ICd1c2VycycgfSxcbiAgICAgICAgZmF2czogeyB0eXBlOiBOdW1iZXIgfVxuICAgIH0sXG4gICAgeyB0aW1lc3RhbXBzOiB7IGNyZWF0ZWRBdDogJ2NyZWF0ZWQnLCB1cGRhdGVkQXQ6ICd1cGRhdGVkJyB9IH1cbik7XG5cblNpZ25SZWNvcmRTY2hlbWEuc3RhdGljcyA9IHtcbiAgICBmaW5kQnlVaWQ6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZE9uZSh7IHVpZDogdWlkIH0pLnNvcnQoeyBjcmVhdGVkOiAtMSB9KTtcbiAgICB9LFxuICAgIGdldExhdGVzdFNpZ246IGZ1bmN0aW9uIChwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHt9KVxuICAgICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICBwYXRoOiAndWlkJyxcbiAgICAgICAgICAgICAgICBzZWxlY3Q6ICdfaWQgbmFtZSBwaWMnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNraXAocGFnZSAqIGxpbWl0KVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KVxuICAgICAgICAgICAgLnNvcnQoeyBjcmVhdGVkOiAtMSB9KTtcbiAgICB9LFxuICAgIGdldFRvcFNpZ246IGZ1bmN0aW9uIChwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHtcbiAgICAgICAgICAgIGNyZWF0ZWQ6IHsgJGd0ZTogbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREIDAwOjAwOjAwJykgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICBwYXRoOiAndWlkJyxcbiAgICAgICAgICAgICAgICBzZWxlY3Q6ICdfaWQgbmFtZSBwaWMnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNraXAocGFnZSAqIGxpbWl0KVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KVxuICAgICAgICAgICAgLnNvcnQoeyBjcmVhdGVkOiAxIH0pO1xuICAgIH0sXG4gICAgZ2V0U2lnbkNvdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQoe30pLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgfSxcbiAgICBnZXRUb3BTaWduQ291bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZCh7XG4gICAgICAgICAgICBjcmVhdGVkOiB7ICRndGU6IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCAwMDowMDowMCcpIH1cbiAgICAgICAgfSkuY291bnREb2N1bWVudHMoKTtcbiAgICB9LFxuICAgIGlzU2lnbjogZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAvLyDliKTmlq3nlKjmiLfmmK/lkKbnrb7liLBcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZE9uZSh7IHVpZDogdWlkIH0sIHsgb3BlbmlkOiAwIH0pXG4gICAgICAgICAgICAuc29ydCh7IGNyZWF0ZWQ6IC0xIH0pXG4gICAgICAgICAgICAudGhlbihkb2MgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2MgJiYgaXNUb2RheShkb2MuY3JlYXRlZCkgPyAxIDogMDtcbiAgICAgICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8g5Y+W5b6X5pyA5b+r562+5YiwXG4gICAgZmluZFF1aWNrZXN0U2lnbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHtcbiAgICAgICAgICAgIGNyZWF0ZWQ6IHsgJGd0ZTogbmV3IERhdGUobW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREIDAwOjAwOjAwJykpIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5zb3J0KHsgY3JlYXRlZDogMSB9KVxuICAgICAgICAgICAgLmxpbWl0KDIwKVxuICAgICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICBwYXRoOiAndWlkJyxcbiAgICAgICAgICAgICAgICBzZWxlY3Q6ICduYW1lIHBpYyBpc1ZpcCBfaWQnXG4gICAgICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIOWPluW+l+acgOaWsOetvuWIsFxuICAgIGZpbmRMYXN0U2lnbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHt9KS5zb3J0KHsgY3JlYXRlZDogLTEgfSkubGltaXQoMjApLnBvcHVsYXRlKHtcbiAgICAgICAgICAgIHBhdGg6ICd1aWQnLFxuICAgICAgICAgICAgc2VsZWN0OiAnbmFtZSBwaWMgaXNWaXAgX2lkJ1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5jb25zdCBTaWduUmVjb3JkID0gbW9uZ29vc2UubW9kZWwoJ3NpZ25fcmVjb3JkJywgU2lnblJlY29yZFNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFNpZ25SZWNvcmQ7XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJtb21lbnQiLCJpc1RvZGF5IiwiU2lnblJlY29yZFNjaGVtYSIsIlNjaGVtYSIsInVpZCIsInR5cGUiLCJTdHJpbmciLCJyZWYiLCJmYXZzIiwiTnVtYmVyIiwidGltZXN0YW1wcyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInN0YXRpY3MiLCJmaW5kQnlVaWQiLCJmaW5kT25lIiwic29ydCIsImNyZWF0ZWQiLCJnZXRMYXRlc3RTaWduIiwicGFnZSIsImxpbWl0IiwiZmluZCIsInBvcHVsYXRlIiwicGF0aCIsInNlbGVjdCIsInNraXAiLCJnZXRUb3BTaWduIiwiJGd0ZSIsImZvcm1hdCIsImdldFNpZ25Db3VudCIsImNvdW50RG9jdW1lbnRzIiwiZ2V0VG9wU2lnbkNvdW50IiwiaXNTaWduIiwib3BlbmlkIiwidGhlbiIsImRvYyIsImZpbmRRdWlja2VzdFNpZ24iLCJEYXRlIiwiZmluZExhc3RTaWduIiwiU2lnblJlY29yZCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/model/SignRecord.js\n\n}");

/***/ }),

/***/ "./src/model/User.js":
/*!***************************!*\
  !*** ./src/model/User.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/DBHelpler */ \"./src/config/DBHelpler.js\");\n\nconst UserSchema = new _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema({\n  username: {\n    type: String,\n    index: {\n      unique: true\n    },\n    sparse: true\n  },\n  // index 用来添加索引，保证数据的唯一性\n  password: {\n    type: String\n  },\n  name: {\n    type: String\n  },\n  // created: { type: Date },\n  // updated: { type: Date },\n  favs: {\n    type: Number,\n    default: 100\n  },\n  gender: {\n    type: String,\n    default: ''\n  },\n  roles: {\n    type: Array,\n    default: ['user']\n  },\n  pic: {\n    type: String,\n    default: '/img/logo.jpg'\n  },\n  mobile: {\n    type: String,\n    match: /^1[3-9](\\d{9})$/,\n    default: ''\n  },\n  status: {\n    type: String,\n    default: '0'\n  },\n  regmark: {\n    type: String,\n    default: ''\n  },\n  location: {\n    type: String,\n    default: ''\n  },\n  isVip: {\n    type: String,\n    default: '0'\n  },\n  count: {\n    type: Number,\n    default: 0\n  },\n  openid: {\n    type: String,\n    default: ''\n  },\n  unionid: {\n    type: String,\n    default: ''\n  } // 对于开放平台的\n}, {\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nUserSchema.post('save', function (error, doc, next) {\n  if (error.name === 'MongoError' && error.code === 11000) {\n    next(new Error('Error: Monngoose has a duplicate key.'));\n  } else {\n    next(error);\n  }\n});\nUserSchema.statics = {\n  findByID: function (id) {\n    return this.findOne({\n      _id: id\n    }, {\n      password: 0\n    });\n  },\n  getList: function (options, sort, page, limit) {\n    // 1. datepicker -> item: string, search -> array  startitme,endtime\n    // 2. radio -> key-value $in\n    // 3. select -> key-array $in\n    let query = {};\n    if (typeof options.search !== 'undefined') {\n      if (typeof options.search === 'string' && options.search.trim() !== '') {\n        if (['name', 'username'].includes(options.item)) {\n          // 模糊匹配\n          query[options.item] = {\n            $regex: new RegExp(options.search)\n          };\n          // =》 { name: { $regex: /admin/ } } => mysql like %admin%\n        } else {\n          // radio\n          query[options.item] = options.search;\n        }\n      }\n      if (options.item === 'roles') {\n        query = {\n          roles: {\n            $in: options.search\n          }\n        };\n      }\n      if (options.item === 'created') {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = {\n          created: {\n            $gte: new Date(start),\n            $lt: new Date(end)\n          }\n        };\n      }\n    }\n    return this.find(query, {\n      password: 0,\n      mobile: 0\n    }).sort({\n      [sort]: -1\n    }).skip(page * limit).limit(limit);\n  },\n  countList: function (options) {\n    let query = {};\n    if (typeof options.search !== 'undefined') {\n      if (typeof options.search === 'string' && options.search.trim() !== '') {\n        if (['name', 'username'].includes(options.item)) {\n          // 模糊匹配\n          query[options.item] = {\n            $regex: new RegExp(options.search)\n          };\n          // =》 { name: { $regex: /admin/ } } => mysql like %admin%\n        } else {\n          // radio\n          query[options.item] = options.search;\n        }\n      }\n      if (options.item === 'roles') {\n        query = {\n          roles: {\n            $in: options.search\n          }\n        };\n      }\n      if (options.item === 'created') {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = {\n          created: {\n            $gte: new Date(start),\n            $lt: new Date(end)\n          }\n        };\n      }\n    }\n    return this.find(query).countDocuments();\n  },\n  getTotalSign: function (page, limit) {\n    return this.find({\n      count: {\n        $gt: 0\n      }\n    }).skip(page * limit).limit(limit).sort({\n      count: -1\n    });\n  },\n  getTotalSignCount: function (page, limit) {\n    return this.find({\n      count: {\n        $gt: 0\n      }\n    }).countDocuments();\n  },\n  getFavs: function (uid) {\n    // 查询用户积分\n    return this.findOne({\n      _id: uid\n    }, {\n      favs: 1\n    }).then(res => {\n      return res.favs;\n    });\n  },\n  // 通过 unionid 查找用户，如果没有找到就创建一个\n  findOrCreateByUnionid: function (wxUserInfo) {\n    return this.findOne({\n      unionid: wxUserInfo.unionId\n    }, {\n      unionid: 0,\n      password: 0\n    }).then(user => {\n      return user || this.create({\n        openid: wxUserInfo.openId,\n        unionid: wxUserInfo.unionId,\n        username: getTempName() + '@toimc.com',\n        name: wxUserInfo.nickName,\n        roles: ['user'],\n        gender: wxUserInfo.gender,\n        pic: wxUserInfo.avatarUrl,\n        location: wxUserInfo.city\n      });\n    });\n  },\n  // 取得签到次数最多的用户\n  findTotalSign: function () {\n    return this.find({\n      count: {\n        $gte: 1\n      }\n    }, {\n      password: 0,\n      organs: 0,\n      roles: 0,\n      location: 0,\n      gender: 0,\n      regmark: 0\n    }).sort({\n      count: -1\n    }).limit(20);\n  },\n  queryCount: function (options) {\n    return this.find(options).countDocuments();\n  },\n  updateMobile: function (uid, phone) {\n    return this.updateOne({\n      _id: uid\n    }, {\n      mobile: phone\n    });\n  },\n  updateEmail: function (uid, email) {\n    return this.updateOne({\n      _id: uid\n    }, {\n      username: email\n    });\n  }\n};\nconst UserModel = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('users', UserSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserModel);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RW5CLEtBQUssRUFBRSxDQUFDO0lBQUUsQ0FBQyxDQUFDLENBQ25CcUIsS0FBSyxDQUFDLEVBQUUsQ0FBQztFQUNsQixDQUFDO0VBQ0RzQyxVQUFVLEVBQUUsU0FBQUEsQ0FBVXpDLE9BQU8sRUFBRTtJQUMzQixPQUFPLElBQUksQ0FBQ2tCLElBQUksQ0FBQ2xCLE9BQU8sQ0FBQyxDQUFDcUIsY0FBYyxDQUFDLENBQUM7RUFDOUMsQ0FBQztFQUNEcUIsWUFBWSxFQUFFLFNBQUFBLENBQVVoQixHQUFHLEVBQUVpQixLQUFLLEVBQUU7SUFDaEMsT0FBTyxJQUFJLENBQUNDLFNBQVMsQ0FBQztNQUFFOUMsR0FBRyxFQUFFNEI7SUFBSSxDQUFDLEVBQUU7TUFBRWxELE1BQU0sRUFBRW1FO0lBQU0sQ0FBQyxDQUFDO0VBQzFELENBQUM7RUFDREUsV0FBVyxFQUFFLFNBQUFBLENBQVVuQixHQUFHLEVBQUVvQixLQUFLLEVBQUU7SUFDL0IsT0FBTyxJQUFJLENBQUNGLFNBQVMsQ0FBQztNQUFFOUMsR0FBRyxFQUFFNEI7SUFBSSxDQUFDLEVBQUU7TUFBRWpFLFFBQVEsRUFBRXFGO0lBQU0sQ0FBQyxDQUFDO0VBQzVEO0FBQ0osQ0FBQztBQUVELE1BQU1DLFNBQVMsR0FBR3pGLHlEQUFRLENBQUMwRixLQUFLLENBQUMsT0FBTyxFQUFFekYsVUFBVSxDQUFDO0FBRXJELGlFQUFld0YsU0FBUyIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9tb2RlbC9Vc2VyLmpzPzc2ZmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJy4uL2NvbmZpZy9EQkhlbHBsZXInO1xuXG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAgICB7XG4gICAgICAgIHVzZXJuYW1lOiB7IHR5cGU6IFN0cmluZywgaW5kZXg6IHsgdW5pcXVlOiB0cnVlIH0sIHNwYXJzZTogdHJ1ZSB9LCAvLyBpbmRleCDnlKjmnaXmt7vliqDntKLlvJXvvIzkv53or4HmlbDmja7nmoTllK/kuIDmgKdcbiAgICAgICAgcGFzc3dvcmQ6IHsgdHlwZTogU3RyaW5nIH0sXG4gICAgICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nIH0sXG4gICAgICAgIC8vIGNyZWF0ZWQ6IHsgdHlwZTogRGF0ZSB9LFxuICAgICAgICAvLyB1cGRhdGVkOiB7IHR5cGU6IERhdGUgfSxcbiAgICAgICAgZmF2czogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDEwMCB9LFxuICAgICAgICBnZW5kZXI6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgICAgICByb2xlczogeyB0eXBlOiBBcnJheSwgZGVmYXVsdDogWyd1c2VyJ10gfSxcbiAgICAgICAgcGljOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJy9pbWcvbG9nby5qcGcnIH0sXG4gICAgICAgIG1vYmlsZTogeyB0eXBlOiBTdHJpbmcsIG1hdGNoOiAvXjFbMy05XShcXGR7OX0pJC8sIGRlZmF1bHQ6ICcnIH0sXG4gICAgICAgIHN0YXR1czogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcwJyB9LFxuICAgICAgICByZWdtYXJrOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcbiAgICAgICAgbG9jYXRpb246IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgICAgICBpc1ZpcDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcwJyB9LFxuICAgICAgICBjb3VudDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgICAgICAgb3BlbmlkOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcbiAgICAgICAgdW5pb25pZDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0gLy8g5a+55LqO5byA5pS+5bmz5Y+w55qEXG4gICAgfSxcbiAgICB7IHRpbWVzdGFtcHM6IHsgY3JlYXRlZEF0OiAnY3JlYXRlZCcsIHVwZGF0ZWRBdDogJ3VwZGF0ZWQnIH0gfVxuKTtcblxuVXNlclNjaGVtYS5wb3N0KCdzYXZlJywgZnVuY3Rpb24gKGVycm9yLCBkb2MsIG5leHQpIHtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ01vbmdvRXJyb3InICYmIGVycm9yLmNvZGUgPT09IDExMDAwKSB7XG4gICAgICAgIG5leHQobmV3IEVycm9yKCdFcnJvcjogTW9ubmdvb3NlIGhhcyBhIGR1cGxpY2F0ZSBrZXkuJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn0pO1xuXG5Vc2VyU2NoZW1hLnN0YXRpY3MgPSB7XG4gICAgZmluZEJ5SUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kT25lKFxuICAgICAgICAgICAgeyBfaWQ6IGlkIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9LFxuICAgIGdldExpc3Q6IGZ1bmN0aW9uIChvcHRpb25zLCBzb3J0LCBwYWdlLCBsaW1pdCkge1xuICAgICAgICAvLyAxLiBkYXRlcGlja2VyIC0+IGl0ZW06IHN0cmluZywgc2VhcmNoIC0+IGFycmF5ICBzdGFydGl0bWUsZW5kdGltZVxuICAgICAgICAvLyAyLiByYWRpbyAtPiBrZXktdmFsdWUgJGluXG4gICAgICAgIC8vIDMuIHNlbGVjdCAtPiBrZXktYXJyYXkgJGluXG4gICAgICAgIGxldCBxdWVyeSA9IHt9O1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2VhcmNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNlYXJjaCA9PT0gJ3N0cmluZycgJiYgb3B0aW9ucy5zZWFyY2gudHJpbSgpICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGlmIChbJ25hbWUnLCAndXNlcm5hbWUnXS5pbmNsdWRlcyhvcHRpb25zLml0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOaooeeziuWMuemFjVxuICAgICAgICAgICAgICAgICAgICBxdWVyeVtvcHRpb25zLml0ZW1dID0geyAkcmVnZXg6IG5ldyBSZWdFeHAob3B0aW9ucy5zZWFyY2gpIH07XG4gICAgICAgICAgICAgICAgICAgIC8vID3jgIsgeyBuYW1lOiB7ICRyZWdleDogL2FkbWluLyB9IH0gPT4gbXlzcWwgbGlrZSAlYWRtaW4lXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmFkaW9cbiAgICAgICAgICAgICAgICAgICAgcXVlcnlbb3B0aW9ucy5pdGVtXSA9IG9wdGlvbnMuc2VhcmNoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLml0ZW0gPT09ICdyb2xlcycpIHtcbiAgICAgICAgICAgICAgICBxdWVyeSA9IHsgcm9sZXM6IHsgJGluOiBvcHRpb25zLnNlYXJjaCB9IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pdGVtID09PSAnY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IG9wdGlvbnMuc2VhcmNoWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IG9wdGlvbnMuc2VhcmNoWzFdO1xuICAgICAgICAgICAgICAgIHF1ZXJ5ID0geyBjcmVhdGVkOiB7ICRndGU6IG5ldyBEYXRlKHN0YXJ0KSwgJGx0OiBuZXcgRGF0ZShlbmQpIH0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHF1ZXJ5LCB7IHBhc3N3b3JkOiAwLCBtb2JpbGU6IDAgfSlcbiAgICAgICAgICAgIC5zb3J0KHsgW3NvcnRdOiAtMSB9KVxuICAgICAgICAgICAgLnNraXAocGFnZSAqIGxpbWl0KVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KTtcbiAgICB9LFxuICAgIGNvdW50TGlzdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IHF1ZXJ5ID0ge307XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zZWFyY2ggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2VhcmNoID09PSAnc3RyaW5nJyAmJiBvcHRpb25zLnNlYXJjaC50cmltKCkgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKFsnbmFtZScsICd1c2VybmFtZSddLmluY2x1ZGVzKG9wdGlvbnMuaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5qih57OK5Yy56YWNXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5W29wdGlvbnMuaXRlbV0gPSB7ICRyZWdleDogbmV3IFJlZ0V4cChvcHRpb25zLnNlYXJjaCkgfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gPeOAiyB7IG5hbWU6IHsgJHJlZ2V4OiAvYWRtaW4vIH0gfSA9PiBteXNxbCBsaWtlICVhZG1pbiVcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyByYWRpb1xuICAgICAgICAgICAgICAgICAgICBxdWVyeVtvcHRpb25zLml0ZW1dID0gb3B0aW9ucy5zZWFyY2g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaXRlbSA9PT0gJ3JvbGVzJykge1xuICAgICAgICAgICAgICAgIHF1ZXJ5ID0geyByb2xlczogeyAkaW46IG9wdGlvbnMuc2VhcmNoIH0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLml0ZW0gPT09ICdjcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gb3B0aW9ucy5zZWFyY2hbMF07XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kID0gb3B0aW9ucy5zZWFyY2hbMV07XG4gICAgICAgICAgICAgICAgcXVlcnkgPSB7IGNyZWF0ZWQ6IHsgJGd0ZTogbmV3IERhdGUoc3RhcnQpLCAkbHQ6IG5ldyBEYXRlKGVuZCkgfSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQocXVlcnkpLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgfSxcbiAgICBnZXRUb3RhbFNpZ246IGZ1bmN0aW9uIChwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHsgY291bnQ6IHsgJGd0OiAwIH0gfSlcbiAgICAgICAgICAgIC5za2lwKHBhZ2UgKiBsaW1pdClcbiAgICAgICAgICAgIC5saW1pdChsaW1pdClcbiAgICAgICAgICAgIC5zb3J0KHsgY291bnQ6IC0xIH0pO1xuICAgIH0sXG4gICAgZ2V0VG90YWxTaWduQ291bnQ6IGZ1bmN0aW9uIChwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHsgY291bnQ6IHsgJGd0OiAwIH0gfSkuY291bnREb2N1bWVudHMoKTtcbiAgICB9LFxuICAgIGdldEZhdnM6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgLy8g5p+l6K+i55So5oi356ev5YiGXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRPbmUoeyBfaWQ6IHVpZCB9LCB7IGZhdnM6IDEgfSkudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5mYXZzO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIOmAmui/hyB1bmlvbmlkIOafpeaJvueUqOaIt++8jOWmguaenOayoeacieaJvuWIsOWwseWIm+W7uuS4gOS4qlxuICAgIGZpbmRPckNyZWF0ZUJ5VW5pb25pZDogZnVuY3Rpb24gKHd4VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZE9uZSh7IHVuaW9uaWQ6IHd4VXNlckluZm8udW5pb25JZCB9LCB7IHVuaW9uaWQ6IDAsIHBhc3N3b3JkOiAwIH0pLnRoZW4odXNlciA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIHVzZXIgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5pZDogd3hVc2VySW5mby5vcGVuSWQsXG4gICAgICAgICAgICAgICAgICAgIHVuaW9uaWQ6IHd4VXNlckluZm8udW5pb25JZCxcbiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IGdldFRlbXBOYW1lKCkgKyAnQHRvaW1jLmNvbScsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHd4VXNlckluZm8ubmlja05hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGVzOiBbJ3VzZXInXSxcbiAgICAgICAgICAgICAgICAgICAgZ2VuZGVyOiB3eFVzZXJJbmZvLmdlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgcGljOiB3eFVzZXJJbmZvLmF2YXRhclVybCxcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IHd4VXNlckluZm8uY2l0eVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIOWPluW+l+etvuWIsOasoeaVsOacgOWkmueahOeUqOaIt1xuICAgIGZpbmRUb3RhbFNpZ246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZChcbiAgICAgICAgICAgIHsgY291bnQ6IHsgJGd0ZTogMSB9IH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IDAsXG4gICAgICAgICAgICAgICAgb3JnYW5zOiAwLFxuICAgICAgICAgICAgICAgIHJvbGVzOiAwLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiAwLFxuICAgICAgICAgICAgICAgIGdlbmRlcjogMCxcbiAgICAgICAgICAgICAgICByZWdtYXJrOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgICAgIC5zb3J0KHsgY291bnQ6IC0xIH0pXG4gICAgICAgICAgICAubGltaXQoMjApO1xuICAgIH0sXG4gICAgcXVlcnlDb3VudDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZChvcHRpb25zKS5jb3VudERvY3VtZW50cygpO1xuICAgIH0sXG4gICAgdXBkYXRlTW9iaWxlOiBmdW5jdGlvbiAodWlkLCBwaG9uZSkge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVPbmUoeyBfaWQ6IHVpZCB9LCB7IG1vYmlsZTogcGhvbmUgfSk7XG4gICAgfSxcbiAgICB1cGRhdGVFbWFpbDogZnVuY3Rpb24gKHVpZCwgZW1haWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlT25lKHsgX2lkOiB1aWQgfSwgeyB1c2VybmFtZTogZW1haWwgfSk7XG4gICAgfVxufTtcblxuY29uc3QgVXNlck1vZGVsID0gbW9uZ29vc2UubW9kZWwoJ3VzZXJzJywgVXNlclNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJNb2RlbDtcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlVzZXJTY2hlbWEiLCJTY2hlbWEiLCJ1c2VybmFtZSIsInR5cGUiLCJTdHJpbmciLCJpbmRleCIsInVuaXF1ZSIsInNwYXJzZSIsInBhc3N3b3JkIiwibmFtZSIsImZhdnMiLCJOdW1iZXIiLCJkZWZhdWx0IiwiZ2VuZGVyIiwicm9sZXMiLCJBcnJheSIsInBpYyIsIm1vYmlsZSIsIm1hdGNoIiwic3RhdHVzIiwicmVnbWFyayIsImxvY2F0aW9uIiwiaXNWaXAiLCJjb3VudCIsIm9wZW5pZCIsInVuaW9uaWQiLCJ0aW1lc3RhbXBzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwicG9zdCIsImVycm9yIiwiZG9jIiwibmV4dCIsImNvZGUiLCJFcnJvciIsInN0YXRpY3MiLCJmaW5kQnlJRCIsImlkIiwiZmluZE9uZSIsIl9pZCIsImdldExpc3QiLCJvcHRpb25zIiwic29ydCIsInBhZ2UiLCJsaW1pdCIsInF1ZXJ5Iiwic2VhcmNoIiwidHJpbSIsImluY2x1ZGVzIiwiaXRlbSIsIiRyZWdleCIsIlJlZ0V4cCIsIiRpbiIsInN0YXJ0IiwiZW5kIiwiY3JlYXRlZCIsIiRndGUiLCJEYXRlIiwiJGx0IiwiZmluZCIsInNraXAiLCJjb3VudExpc3QiLCJjb3VudERvY3VtZW50cyIsImdldFRvdGFsU2lnbiIsIiRndCIsImdldFRvdGFsU2lnbkNvdW50IiwiZ2V0RmF2cyIsInVpZCIsInRoZW4iLCJyZXMiLCJmaW5kT3JDcmVhdGVCeVVuaW9uaWQiLCJ3eFVzZXJJbmZvIiwidW5pb25JZCIsInVzZXIiLCJjcmVhdGUiLCJvcGVuSWQiLCJnZXRUZW1wTmFtZSIsIm5pY2tOYW1lIiwiYXZhdGFyVXJsIiwiY2l0eSIsImZpbmRUb3RhbFNpZ24iLCJvcmdhbnMiLCJxdWVyeUNvdW50IiwidXBkYXRlTW9iaWxlIiwicGhvbmUiLCJ1cGRhdGVPbmUiLCJ1cGRhdGVFbWFpbCIsImVtYWlsIiwiVXNlck1vZGVsIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/model/User.js\n\n}");

/***/ }),

/***/ "./src/routes/index.js":
/*!*****************************!*\
  !*** ./src/routes/index.js ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("{const combineRoutes = __webpack_require__(/*! koa-combine-routers */ \"koa-combine-routers\");\n\n// 加载目录中的Router中间件\nconst moduleFiles = __webpack_require__(\"./src/routes/modules sync recursive \\\\.js$\");\n\n// reduce方法去拼接 koa-combine-router所需的数据结构 Object[]\nconst modules = moduleFiles.keys().reduce((items, path) => {\n  const value = moduleFiles(path);\n  items.push(value.default);\n  return items;\n}, []);\nmodule.exports = combineRoutes(modules);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm91dGVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLGFBQWEsR0FBR0MsbUJBQU8sQ0FBQyxnREFBcUIsQ0FBQzs7QUFFcEQ7QUFDQSxNQUFNQyxXQUFXLEdBQUdELGlFQUEyQzs7QUFFL0Q7QUFDQSxNQUFNRyxPQUFPLEdBQUdGLFdBQVcsQ0FBQ0csSUFBSSxDQUFDLENBQUMsQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLEtBQUssRUFBRUMsSUFBSSxLQUFLO0VBQ3ZELE1BQU1DLEtBQUssR0FBR1AsV0FBVyxDQUFDTSxJQUFJLENBQUM7RUFDL0JELEtBQUssQ0FBQ0csSUFBSSxDQUFDRCxLQUFLLENBQUNFLE9BQU8sQ0FBQztFQUN6QixPQUFPSixLQUFLO0FBQ2hCLENBQUMsRUFBRSxFQUFFLENBQUM7QUFFTkssTUFBTSxDQUFDQyxPQUFPLEdBQUdiLGFBQWEsQ0FBQ0ksT0FBTyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL3JvdXRlcy9pbmRleC5qcz9lMjZjIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbWJpbmVSb3V0ZXMgPSByZXF1aXJlKCdrb2EtY29tYmluZS1yb3V0ZXJzJyk7XG5cbi8vIOWKoOi9veebruW9leS4reeahFJvdXRlcuS4remXtOS7tlxuY29uc3QgbW9kdWxlRmlsZXMgPSByZXF1aXJlLmNvbnRleHQoJy4vbW9kdWxlcycsIHRydWUsIC9cXC5qcyQvKTtcblxuLy8gcmVkdWNl5pa55rOV5Y675ou85o6lIGtvYS1jb21iaW5lLXJvdXRlcuaJgOmcgOeahOaVsOaNrue7k+aehCBPYmplY3RbXVxuY29uc3QgbW9kdWxlcyA9IG1vZHVsZUZpbGVzLmtleXMoKS5yZWR1Y2UoKGl0ZW1zLCBwYXRoKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBtb2R1bGVGaWxlcyhwYXRoKTtcbiAgICBpdGVtcy5wdXNoKHZhbHVlLmRlZmF1bHQpO1xuICAgIHJldHVybiBpdGVtcztcbn0sIFtdKTtcblxubW9kdWxlLmV4cG9ydHMgPSBjb21iaW5lUm91dGVzKG1vZHVsZXMpO1xuIl0sIm5hbWVzIjpbImNvbWJpbmVSb3V0ZXMiLCJyZXF1aXJlIiwibW9kdWxlRmlsZXMiLCJjb250ZXh0IiwibW9kdWxlcyIsImtleXMiLCJyZWR1Y2UiLCJpdGVtcyIsInBhdGgiLCJ2YWx1ZSIsInB1c2giLCJkZWZhdWx0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/routes/index.js\n\n}");

/***/ }),

/***/ "./src/routes/modules sync recursive \\.js$":
/*!****************************************!*\
  !*** ./src/routes/modules/ sync \.js$ ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var map = {
	"./contentRouter.js": "./src/routes/modules/contentRouter.js",
	"./loginRouter.js": "./src/routes/modules/loginRouter.js",
	"./publicRouter.js": "./src/routes/modules/publicRouter.js",
	"./userRouter.js": "./src/routes/modules/userRouter.js",
	"routes/modules/contentRouter.js": "./src/routes/modules/contentRouter.js",
	"routes/modules/loginRouter.js": "./src/routes/modules/loginRouter.js",
	"routes/modules/publicRouter.js": "./src/routes/modules/publicRouter.js",
	"routes/modules/userRouter.js": "./src/routes/modules/userRouter.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./src/routes/modules sync recursive \\.js$";

/***/ }),

/***/ "./src/routes/modules/contentRouter.js":
/*!*********************************************!*\
  !*** ./src/routes/modules/contentRouter.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! koa-router */ \"koa-router\");\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(koa_router__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api_ContentController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api/ContentController */ \"./src/api/ContentController.js\");\n\nconst router = new (koa_router__WEBPACK_IMPORTED_MODULE_0___default())();\n\nrouter.prefix('/v1/content');\n\n// 上传图片\nrouter.post('/upload', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].uploadImg);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm91dGVzL21vZHVsZXMvY29udGVudFJvdXRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWdDO0FBQ2hDLE1BQU1DLE1BQU0sR0FBRyxJQUFJRCxtREFBTSxDQUFDLENBQUM7QUFFNkI7QUFFeERDLE1BQU0sQ0FBQ0UsTUFBTSxDQUFDLGFBQWEsQ0FBQzs7QUFFNUI7QUFDQUYsTUFBTSxDQUFDRyxJQUFJLENBQUMsU0FBUyxFQUFFRiw4REFBaUIsQ0FBQ0csU0FBUyxDQUFDO0FBRW5ELGlFQUFlSixNQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL3JvdXRlcy9tb2R1bGVzL2NvbnRlbnRSb3V0ZXIuanM/OGExMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUm91dGVyIGZyb20gJ2tvYS1yb3V0ZXInO1xuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpO1xuXG5pbXBvcnQgY29udGVudENvbnRyb2xsZXIgZnJvbSAnQC9hcGkvQ29udGVudENvbnRyb2xsZXInO1xuXG5yb3V0ZXIucHJlZml4KCcvdjEvY29udGVudCcpO1xuXG4vLyDkuIrkvKDlm77niYdcbnJvdXRlci5wb3N0KCcvdXBsb2FkJywgY29udGVudENvbnRyb2xsZXIudXBsb2FkSW1nKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl0sIm5hbWVzIjpbIlJvdXRlciIsInJvdXRlciIsImNvbnRlbnRDb250cm9sbGVyIiwicHJlZml4IiwicG9zdCIsInVwbG9hZEltZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/routes/modules/contentRouter.js\n\n}");

/***/ }),

/***/ "./src/routes/modules/loginRouter.js":
/*!*******************************************!*\
  !*** ./src/routes/modules/loginRouter.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! koa-router */ \"koa-router\");\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(koa_router__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api_LoginController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api/LoginController */ \"./src/api/LoginController.js\");\n\nconst router = new (koa_router__WEBPACK_IMPORTED_MODULE_0___default())();\n\nrouter.prefix('/v1/login');\n\n// 忘记密码\nrouter.post('/forget', _api_LoginController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].forget);\n\n// 登录接口\nrouter.post('/login', _api_LoginController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].login);\n\n// 注册用户\nrouter.post('/reg', _api_LoginController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reg);\n\n// 密码重置\nrouter.post('/reset', _api_LoginController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reset);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm91dGVzL21vZHVsZXMvbG9naW5Sb3V0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUNoQyxNQUFNQyxNQUFNLEdBQUcsSUFBSUQsbURBQU0sQ0FBQyxDQUFDO0FBRXlCO0FBRXBEQyxNQUFNLENBQUNFLE1BQU0sQ0FBQyxXQUFXLENBQUM7O0FBRTFCO0FBQ0FGLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLFNBQVMsRUFBRUYsNERBQWUsQ0FBQ0csTUFBTSxDQUFDOztBQUU5QztBQUNBSixNQUFNLENBQUNHLElBQUksQ0FBQyxRQUFRLEVBQUVGLDREQUFlLENBQUNJLEtBQUssQ0FBQzs7QUFFNUM7QUFDQUwsTUFBTSxDQUFDRyxJQUFJLENBQUMsTUFBTSxFQUFFRiw0REFBZSxDQUFDSyxHQUFHLENBQUM7O0FBRXhDO0FBQ0FOLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLFFBQVEsRUFBRUYsNERBQWUsQ0FBQ00sS0FBSyxDQUFDO0FBRTVDLGlFQUFlUCxNQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL3JvdXRlcy9tb2R1bGVzL2xvZ2luUm91dGVyLmpzPzJkZGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJvdXRlciBmcm9tICdrb2Etcm91dGVyJztcbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKTtcblxuaW1wb3J0IGxvZ2luQ29udHJvbGxlciBmcm9tICdAL2FwaS9Mb2dpbkNvbnRyb2xsZXInO1xuXG5yb3V0ZXIucHJlZml4KCcvdjEvbG9naW4nKTtcblxuLy8g5b+Y6K6w5a+G56CBXG5yb3V0ZXIucG9zdCgnL2ZvcmdldCcsIGxvZ2luQ29udHJvbGxlci5mb3JnZXQpO1xuXG4vLyDnmbvlvZXmjqXlj6NcbnJvdXRlci5wb3N0KCcvbG9naW4nLCBsb2dpbkNvbnRyb2xsZXIubG9naW4pO1xuXG4vLyDms6jlhoznlKjmiLdcbnJvdXRlci5wb3N0KCcvcmVnJywgbG9naW5Db250cm9sbGVyLnJlZyk7XG5cbi8vIOWvhueggemHjee9rlxucm91dGVyLnBvc3QoJy9yZXNldCcsIGxvZ2luQ29udHJvbGxlci5yZXNldCk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJuYW1lcyI6WyJSb3V0ZXIiLCJyb3V0ZXIiLCJsb2dpbkNvbnRyb2xsZXIiLCJwcmVmaXgiLCJwb3N0IiwiZm9yZ2V0IiwibG9naW4iLCJyZWciLCJyZXNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/routes/modules/loginRouter.js\n\n}");

/***/ }),

/***/ "./src/routes/modules/publicRouter.js":
/*!********************************************!*\
  !*** ./src/routes/modules/publicRouter.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! koa-router */ \"koa-router\");\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(koa_router__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api_PublicController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api/PublicController */ \"./src/api/PublicController.js\");\n/* harmony import */ var _api_ContentController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/api/ContentController */ \"./src/api/ContentController.js\");\n/* harmony import */ var _api_UserController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/api/UserController */ \"./src/api/UserController.js\");\n\nconst router = new (koa_router__WEBPACK_IMPORTED_MODULE_0___default())();\n\n\n\nrouter.prefix('/v1/public');\n\n// 获取图片验证码\nrouter.get('/getCaptcha', _api_PublicController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCaptcha);\n\n// 获取文章列表\nrouter.get('/list', _api_ContentController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getPostList);\n\n// 温馨提醒\nrouter.get('/tips', _api_ContentController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getTips);\n\n// 友情链接\nrouter.get('/links', _api_ContentController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLinks);\n\n// 回复周榜\nrouter.get('/topWeek', _api_ContentController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getTopWeek);\n\n// 确认修改邮件\nrouter.get('/resetEmail', _api_UserController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateUsername);\n\n// 获取文章详情\n// router.get('/content/detail', contentController.getPostDetail)\n\n// 获取评论列表\n// router.get('/comments', commentsController.getComments)\n\n// 获取热门评论\n// router.get('/getCommentsCount', commentsController.getCommentsCount)\n\n// 获取最新评论\n// router.get('/getNewComments', commentsController.getNewComments)\n\n// 获取用户基本信息\n// router.get('/info', userController.getBasicInfo)\n\n// 获取用户最近的发贴记录\n// router.get('/latestPost', contentController.getPostPublic)\n\n// 获取用户最近的评论记录\n// router.get('/latestComment', commentsController.getCommentPublic)\n\n// 获取用热门帖子\n// router.get('/hotPost', publicController.getHotPost)\n\n// 获取用热门评论\n// router.get('/hotComments', publicController.getHotComments)\n\n// 获取用签到排行\n// router.get('/hotSignRecord', publicController.getHotSignRecord)\n\n// wx获取模板消息id\n// router.get('/getSubIds', publicController.getSubIds)\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm91dGVzL21vZHVsZXMvcHVibGljUm91dGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFnQztBQUNoQyxNQUFNQyxNQUFNLEdBQUcsSUFBSUQsbURBQU0sQ0FBQyxDQUFDO0FBRTJCO0FBQ0U7QUFDTjtBQUVsREMsTUFBTSxDQUFDSSxNQUFNLENBQUMsWUFBWSxDQUFDOztBQUUzQjtBQUNBSixNQUFNLENBQUNLLEdBQUcsQ0FBQyxhQUFhLEVBQUVKLDZEQUFnQixDQUFDSyxVQUFVLENBQUM7O0FBRXREO0FBQ0FOLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLE9BQU8sRUFBRUgsOERBQWlCLENBQUNLLFdBQVcsQ0FBQzs7QUFFbEQ7QUFDQVAsTUFBTSxDQUFDSyxHQUFHLENBQUMsT0FBTyxFQUFFSCw4REFBaUIsQ0FBQ00sT0FBTyxDQUFDOztBQUU5QztBQUNBUixNQUFNLENBQUNLLEdBQUcsQ0FBQyxRQUFRLEVBQUVILDhEQUFpQixDQUFDTyxRQUFRLENBQUM7O0FBRWhEO0FBQ0FULE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLFVBQVUsRUFBRUgsOERBQWlCLENBQUNRLFVBQVUsQ0FBQzs7QUFFcEQ7QUFDQVYsTUFBTSxDQUFDSyxHQUFHLENBQUMsYUFBYSxFQUFFRiwyREFBYyxDQUFDUSxjQUFjLENBQUM7O0FBRXhEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxpRUFBZVgsTUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9yb3V0ZXMvbW9kdWxlcy9wdWJsaWNSb3V0ZXIuanM/Y2ZjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUm91dGVyIGZyb20gJ2tvYS1yb3V0ZXInO1xuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpO1xuXG5pbXBvcnQgcHVibGljQ29udHJvbGxlciBmcm9tICdAL2FwaS9QdWJsaWNDb250cm9sbGVyJztcbmltcG9ydCBjb250ZW50Q29udHJvbGxlciBmcm9tICdAL2FwaS9Db250ZW50Q29udHJvbGxlcic7XG5pbXBvcnQgdXNlckNvbnRyb2xsZXIgZnJvbSAnQC9hcGkvVXNlckNvbnRyb2xsZXInO1xuXG5yb3V0ZXIucHJlZml4KCcvdjEvcHVibGljJyk7XG5cbi8vIOiOt+WPluWbvueJh+mqjOivgeeggVxucm91dGVyLmdldCgnL2dldENhcHRjaGEnLCBwdWJsaWNDb250cm9sbGVyLmdldENhcHRjaGEpO1xuXG4vLyDojrflj5bmlofnq6DliJfooahcbnJvdXRlci5nZXQoJy9saXN0JywgY29udGVudENvbnRyb2xsZXIuZ2V0UG9zdExpc3QpO1xuXG4vLyDmuKnppqjmj5DphpJcbnJvdXRlci5nZXQoJy90aXBzJywgY29udGVudENvbnRyb2xsZXIuZ2V0VGlwcyk7XG5cbi8vIOWPi+aDhemTvuaOpVxucm91dGVyLmdldCgnL2xpbmtzJywgY29udGVudENvbnRyb2xsZXIuZ2V0TGlua3MpO1xuXG4vLyDlm57lpI3lkajmppxcbnJvdXRlci5nZXQoJy90b3BXZWVrJywgY29udGVudENvbnRyb2xsZXIuZ2V0VG9wV2Vlayk7XG5cbi8vIOehruiupOS/ruaUuemCruS7tlxucm91dGVyLmdldCgnL3Jlc2V0RW1haWwnLCB1c2VyQ29udHJvbGxlci51cGRhdGVVc2VybmFtZSk7XG5cbi8vIOiOt+WPluaWh+eroOivpuaDhVxuLy8gcm91dGVyLmdldCgnL2NvbnRlbnQvZGV0YWlsJywgY29udGVudENvbnRyb2xsZXIuZ2V0UG9zdERldGFpbClcblxuLy8g6I635Y+W6K+E6K665YiX6KGoXG4vLyByb3V0ZXIuZ2V0KCcvY29tbWVudHMnLCBjb21tZW50c0NvbnRyb2xsZXIuZ2V0Q29tbWVudHMpXG5cbi8vIOiOt+WPlueDremXqOivhOiuulxuLy8gcm91dGVyLmdldCgnL2dldENvbW1lbnRzQ291bnQnLCBjb21tZW50c0NvbnRyb2xsZXIuZ2V0Q29tbWVudHNDb3VudClcblxuLy8g6I635Y+W5pyA5paw6K+E6K66XG4vLyByb3V0ZXIuZ2V0KCcvZ2V0TmV3Q29tbWVudHMnLCBjb21tZW50c0NvbnRyb2xsZXIuZ2V0TmV3Q29tbWVudHMpXG5cbi8vIOiOt+WPlueUqOaIt+WfuuacrOS/oeaBr1xuLy8gcm91dGVyLmdldCgnL2luZm8nLCB1c2VyQ29udHJvbGxlci5nZXRCYXNpY0luZm8pXG5cbi8vIOiOt+WPlueUqOaIt+acgOi/keeahOWPkei0tOiusOW9lVxuLy8gcm91dGVyLmdldCgnL2xhdGVzdFBvc3QnLCBjb250ZW50Q29udHJvbGxlci5nZXRQb3N0UHVibGljKVxuXG4vLyDojrflj5bnlKjmiLfmnIDov5HnmoTor4TorrrorrDlvZVcbi8vIHJvdXRlci5nZXQoJy9sYXRlc3RDb21tZW50JywgY29tbWVudHNDb250cm9sbGVyLmdldENvbW1lbnRQdWJsaWMpXG5cbi8vIOiOt+WPlueUqOeDremXqOW4luWtkFxuLy8gcm91dGVyLmdldCgnL2hvdFBvc3QnLCBwdWJsaWNDb250cm9sbGVyLmdldEhvdFBvc3QpXG5cbi8vIOiOt+WPlueUqOeDremXqOivhOiuulxuLy8gcm91dGVyLmdldCgnL2hvdENvbW1lbnRzJywgcHVibGljQ29udHJvbGxlci5nZXRIb3RDb21tZW50cylcblxuLy8g6I635Y+W55So562+5Yiw5o6S6KGMXG4vLyByb3V0ZXIuZ2V0KCcvaG90U2lnblJlY29yZCcsIHB1YmxpY0NvbnRyb2xsZXIuZ2V0SG90U2lnblJlY29yZClcblxuLy8gd3jojrflj5bmqKHmnb/mtojmga9pZFxuLy8gcm91dGVyLmdldCgnL2dldFN1YklkcycsIHB1YmxpY0NvbnRyb2xsZXIuZ2V0U3ViSWRzKVxuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXSwibmFtZXMiOlsiUm91dGVyIiwicm91dGVyIiwicHVibGljQ29udHJvbGxlciIsImNvbnRlbnRDb250cm9sbGVyIiwidXNlckNvbnRyb2xsZXIiLCJwcmVmaXgiLCJnZXQiLCJnZXRDYXB0Y2hhIiwiZ2V0UG9zdExpc3QiLCJnZXRUaXBzIiwiZ2V0TGlua3MiLCJnZXRUb3BXZWVrIiwidXBkYXRlVXNlcm5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/routes/modules/publicRouter.js\n\n}");

/***/ }),

/***/ "./src/routes/modules/userRouter.js":
/*!******************************************!*\
  !*** ./src/routes/modules/userRouter.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! koa-router */ \"koa-router\");\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(koa_router__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api_UserController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api/UserController */ \"./src/api/UserController.js\");\n/* harmony import */ var _api_ContentController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/api/ContentController */ \"./src/api/ContentController.js\");\n\n\n\n// import errorController from '@/api/ErrorController';\n\nconst router = new (koa_router__WEBPACK_IMPORTED_MODULE_0___default())();\nrouter.prefix('/v1/user');\n\n// 用户签到\nrouter.get('/fav', _api_UserController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].userSign);\n\n// 更新用户的基本信息\nrouter.post('/basic', _api_UserController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateUserInfo);\n\n// 修改密码\nrouter.post('/changePassword', _api_UserController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].changePasswd);\n\n// 取消 设置收藏\n// router.get('/setCollect', userController.setCollect);\n\n// 获取收藏列表\n// router.get('/collect', userController.getCollectByUid);\n\n// 获取用户发贴记录\n// router.get('/post', contentController.getPostByUid);\n\n// 删除发贴记录\n// router.get('/deletePost', contentController.deletePostByUid);\n\n// 获取历史消息\n// router.get('/getmsg', userController.getMsg);\n\n// 获取点赞记录\n// router.get('/getHands', userController.getHands);\n\n// 设置消息状态\n// router.get('/setmsg', userController.setMsg);\n\n// 保存错误日志\n// router.post('/addError', errorController.addError);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm91dGVzL21vZHVsZXMvdXNlclJvdXRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFnQztBQUNrQjtBQUNNO0FBQ3hEOztBQUVBLE1BQU1HLE1BQU0sR0FBRyxJQUFJSCxtREFBTSxDQUFDLENBQUM7QUFFM0JHLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDLFVBQVUsQ0FBQzs7QUFFekI7QUFDQUQsTUFBTSxDQUFDRSxHQUFHLENBQUMsTUFBTSxFQUFFSiwyREFBYyxDQUFDSyxRQUFRLENBQUM7O0FBRTNDO0FBQ0FILE1BQU0sQ0FBQ0ksSUFBSSxDQUFDLFFBQVEsRUFBRU4sMkRBQWMsQ0FBQ08sY0FBYyxDQUFDOztBQUVwRDtBQUNBTCxNQUFNLENBQUNJLElBQUksQ0FBQyxpQkFBaUIsRUFBRU4sMkRBQWMsQ0FBQ1EsWUFBWSxDQUFDOztBQUUzRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaUVBQWVOLE1BQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvcm91dGVzL21vZHVsZXMvdXNlclJvdXRlci5qcz8xZjNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb3V0ZXIgZnJvbSAna29hLXJvdXRlcic7XG5pbXBvcnQgdXNlckNvbnRyb2xsZXIgZnJvbSAnQC9hcGkvVXNlckNvbnRyb2xsZXInO1xuaW1wb3J0IGNvbnRlbnRDb250cm9sbGVyIGZyb20gJ0AvYXBpL0NvbnRlbnRDb250cm9sbGVyJztcbi8vIGltcG9ydCBlcnJvckNvbnRyb2xsZXIgZnJvbSAnQC9hcGkvRXJyb3JDb250cm9sbGVyJztcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpO1xuXG5yb3V0ZXIucHJlZml4KCcvdjEvdXNlcicpO1xuXG4vLyDnlKjmiLfnrb7liLBcbnJvdXRlci5nZXQoJy9mYXYnLCB1c2VyQ29udHJvbGxlci51c2VyU2lnbik7XG5cbi8vIOabtOaWsOeUqOaIt+eahOWfuuacrOS/oeaBr1xucm91dGVyLnBvc3QoJy9iYXNpYycsIHVzZXJDb250cm9sbGVyLnVwZGF0ZVVzZXJJbmZvKTtcblxuLy8g5L+u5pS55a+G56CBXG5yb3V0ZXIucG9zdCgnL2NoYW5nZVBhc3N3b3JkJywgdXNlckNvbnRyb2xsZXIuY2hhbmdlUGFzc3dkKTtcblxuLy8g5Y+W5raIIOiuvue9ruaUtuiXj1xuLy8gcm91dGVyLmdldCgnL3NldENvbGxlY3QnLCB1c2VyQ29udHJvbGxlci5zZXRDb2xsZWN0KTtcblxuLy8g6I635Y+W5pS26JeP5YiX6KGoXG4vLyByb3V0ZXIuZ2V0KCcvY29sbGVjdCcsIHVzZXJDb250cm9sbGVyLmdldENvbGxlY3RCeVVpZCk7XG5cbi8vIOiOt+WPlueUqOaIt+WPkei0tOiusOW9lVxuLy8gcm91dGVyLmdldCgnL3Bvc3QnLCBjb250ZW50Q29udHJvbGxlci5nZXRQb3N0QnlVaWQpO1xuXG4vLyDliKDpmaTlj5HotLTorrDlvZVcbi8vIHJvdXRlci5nZXQoJy9kZWxldGVQb3N0JywgY29udGVudENvbnRyb2xsZXIuZGVsZXRlUG9zdEJ5VWlkKTtcblxuLy8g6I635Y+W5Y6G5Y+y5raI5oGvXG4vLyByb3V0ZXIuZ2V0KCcvZ2V0bXNnJywgdXNlckNvbnRyb2xsZXIuZ2V0TXNnKTtcblxuLy8g6I635Y+W54K56LWe6K6w5b2VXG4vLyByb3V0ZXIuZ2V0KCcvZ2V0SGFuZHMnLCB1c2VyQ29udHJvbGxlci5nZXRIYW5kcyk7XG5cbi8vIOiuvue9rua2iOaBr+eKtuaAgVxuLy8gcm91dGVyLmdldCgnL3NldG1zZycsIHVzZXJDb250cm9sbGVyLnNldE1zZyk7XG5cbi8vIOS/neWtmOmUmeivr+aXpeW/l1xuLy8gcm91dGVyLnBvc3QoJy9hZGRFcnJvcicsIGVycm9yQ29udHJvbGxlci5hZGRFcnJvcik7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJuYW1lcyI6WyJSb3V0ZXIiLCJ1c2VyQ29udHJvbGxlciIsImNvbnRlbnRDb250cm9sbGVyIiwicm91dGVyIiwicHJlZml4IiwiZ2V0IiwidXNlclNpZ24iLCJwb3N0IiwidXBkYXRlVXNlckluZm8iLCJjaGFuZ2VQYXNzd2QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/routes/modules/userRouter.js\n\n}");

/***/ }),

/***/ "@koa/cors":
/*!****************************!*\
  !*** external "@koa/cors" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("@koa/cors");

/***/ }),

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("bcrypt");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "dayjs":
/*!************************!*\
  !*** external "dayjs" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("dayjs");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("dotenv");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("jsonwebtoken");

/***/ }),

/***/ "koa":
/*!**********************!*\
  !*** external "koa" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("koa");

/***/ }),

/***/ "koa-body":
/*!***************************!*\
  !*** external "koa-body" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-body");

/***/ }),

/***/ "koa-combine-routers":
/*!**************************************!*\
  !*** external "koa-combine-routers" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-combine-routers");

/***/ }),

/***/ "koa-compose":
/*!******************************!*\
  !*** external "koa-compose" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-compose");

/***/ }),

/***/ "koa-compress":
/*!*******************************!*\
  !*** external "koa-compress" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-compress");

/***/ }),

/***/ "koa-helmet":
/*!*****************************!*\
  !*** external "koa-helmet" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-helmet");

/***/ }),

/***/ "koa-json":
/*!***************************!*\
  !*** external "koa-json" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-json");

/***/ }),

/***/ "koa-jwt":
/*!**************************!*\
  !*** external "koa-jwt" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-jwt");

/***/ }),

/***/ "koa-router":
/*!*****************************!*\
  !*** external "koa-router" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-router");

/***/ }),

/***/ "koa-static":
/*!*****************************!*\
  !*** external "koa-static" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-static");

/***/ }),

/***/ "make-dir":
/*!***************************!*\
  !*** external "make-dir" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("make-dir");

/***/ }),

/***/ "md5":
/*!**********************!*\
  !*** external "md5" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("md5");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("nodemailer");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "qs":
/*!*********************!*\
  !*** external "qs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("qs");

/***/ }),

/***/ "redis":
/*!************************!*\
  !*** external "redis" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("redis");

/***/ }),

/***/ "stream/web":
/*!*****************************!*\
  !*** external "stream/web" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream/web");

/***/ }),

/***/ "svg-captcha":
/*!******************************!*\
  !*** external "svg-captcha" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("svg-captcha");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("uuid");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;