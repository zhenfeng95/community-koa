/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/api/AdminController.js":
/*!************************************!*\
  !*** ./src/api/AdminController.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _model_Menus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/model/Menus */ \"./src/model/Menus.js\");\n/* harmony import */ var _model_Post__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/model/Post */ \"./src/model/Post.js\");\n/* harmony import */ var _model_Roles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/model/Roles */ \"./src/model/Roles.js\");\n/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/model/User */ \"./src/model/User.js\");\n/* harmony import */ var _model_Comments__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/model/Comments */ \"./src/model/Comments.js\");\n/* harmony import */ var _model_SignRecord__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/model/SignRecord */ \"./src/model/SignRecord.js\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _common_Utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/common/Utils */ \"./src/common/Utils.js\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! qs */ \"qs\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_8__);\n\n\n\n\n\n\n\n\n\n// import CommentsUsers from '../model/CommentsUsers'\n\nconst weekday = __webpack_require__(/*! dayjs/plugin/weekday */ \"dayjs/plugin/weekday\");\ndayjs__WEBPACK_IMPORTED_MODULE_6___default().extend(weekday);\nclass AdminController {\n  async getMenu(ctx) {\n    const result = await _model_Menus__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find({});\n    ctx.body = {\n      code: 0,\n      data: (0,_common_Utils__WEBPACK_IMPORTED_MODULE_7__.sortMenus)(result)\n    };\n  }\n  async addMenu(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const menu = new _model_Menus__WEBPACK_IMPORTED_MODULE_0__[\"default\"](body);\n    const result = await menu.save();\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n  async updateMenu(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const data = {\n      ...body\n    };\n    delete data._id;\n    const result = await _model_Menus__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateOne({\n      _id: body._id\n    }, {\n      ...data\n    });\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n  async deleteMenu(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const result = await _model_Menus__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deleteOne({\n      _id: body._id\n    });\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n  async getRoles(ctx) {\n    const result = await _model_Roles__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find({});\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n  async addRole(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const role = new _model_Roles__WEBPACK_IMPORTED_MODULE_2__[\"default\"](body);\n    const result = await role.save();\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n  async updateRole(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const data = {\n      ...body\n    };\n    delete data._id;\n    const result = await _model_Roles__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n      _id: body._id\n    }, {\n      ...data\n    });\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n  async deleteRole(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const result = await _model_Roles__WEBPACK_IMPORTED_MODULE_2__[\"default\"].deleteOne({\n      _id: body._id\n    });\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n  async getRoleNames(ctx) {\n    const result = await _model_Roles__WEBPACK_IMPORTED_MODULE_2__[\"default\"].find({}, {\n      menu: 0,\n      desc: 0\n    });\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n\n  // 获取用户的菜单权限，菜单数据\n  async getRoutes(ctx) {\n    // 1. obj -> _id -> roles\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n      _id: ctx._id\n    }, {\n      roles: 1\n    });\n    const {\n      roles\n    } = user;\n    // 2. 通过角色 -> menus\n    // 用户的角色可能有多个\n    // 角色 menus -> 去重\n    let menus = [];\n    for (let i = 0; i < roles.length; i++) {\n      const role = roles[i];\n      const rights = await _model_Roles__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n        role\n      }, {\n        menu: 1\n      });\n      menus = menus.concat(rights.menu);\n    }\n    menus = Array.from(new Set(menus));\n    // 3. menus -> 可以访问的菜单数据\n    const treeData = await _model_Menus__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find({});\n    // 递归查询 type = 'menu' && _id 包含在menus中\n    // 结构进行改造\n    const routes = (0,_common_Utils__WEBPACK_IMPORTED_MODULE_7__.getMenuData)(treeData, menus, ctx.isAdmin);\n    ctx.body = {\n      code: 0,\n      data: routes\n    };\n  }\n  async getOperations(ctx) {\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n      _id: ctx._id\n    }, {\n      roles: 1\n    });\n    const {\n      roles\n    } = user;\n    let menus = [];\n    for (let i = 0; i < roles.length; i++) {\n      const role = roles[i];\n      const rights = await _model_Roles__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n        role\n      }, {\n        menu: 1\n      });\n      menus = menus.concat(rights.menu);\n    }\n    menus = Array.from(new Set(menus));\n    // 3. menus -> 可以访问的菜单数据\n    const treeData = await _model_Menus__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find({});\n    const operations = (0,_common_Utils__WEBPACK_IMPORTED_MODULE_7__.getRights)(treeData, menus);\n    return operations;\n  }\n  async getStats(ctx) {\n    let result = {};\n    const nowZero = new Date().setHours(0, 0, 0, 0);\n    // 1. 顶部的card\n    const inforCardData = [];\n    const time = dayjs__WEBPACK_IMPORTED_MODULE_6___default()().format('YYYY-MM-DD 00:00:00');\n    const userNewCount = await _model_User__WEBPACK_IMPORTED_MODULE_3__[\"default\"].find({\n      created: {\n        $gte: time\n      }\n    }).countDocuments();\n    const postsCount = await _model_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find({}).countDocuments();\n    const commentsNewCount = await _model_Comments__WEBPACK_IMPORTED_MODULE_4__[\"default\"].find({\n      created: {\n        $gte: time\n      }\n    }).countDocuments();\n    const starttime = dayjs__WEBPACK_IMPORTED_MODULE_6___default()(nowZero).weekday(1).format();\n    const endtime = dayjs__WEBPACK_IMPORTED_MODULE_6___default()(nowZero).weekday(8).format();\n    const weekEndCount = await _model_Comments__WEBPACK_IMPORTED_MODULE_4__[\"default\"].find({\n      created: {\n        $gte: starttime,\n        $lte: endtime\n      },\n      isBest: '1'\n    }).countDocuments();\n    const signWeekCount = await _model_SignRecord__WEBPACK_IMPORTED_MODULE_5__[\"default\"].find({\n      created: {\n        $gte: starttime,\n        $lte: endtime\n      }\n    }).countDocuments();\n    const postWeekCount = await _model_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find({\n      created: {\n        $gte: starttime,\n        $lte: endtime\n      }\n    }).countDocuments();\n    inforCardData.push(userNewCount);\n    inforCardData.push(postsCount);\n    inforCardData.push(commentsNewCount);\n    inforCardData.push(weekEndCount);\n    inforCardData.push(signWeekCount);\n    inforCardData.push(postWeekCount);\n    // 2. 左侧的饼图数据\n    const postsCatalogCount = await _model_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].aggregate([{\n      $group: {\n        _id: '$catalog',\n        count: {\n          $sum: 1\n        }\n      }\n    }]);\n    const pieData = {};\n    postsCatalogCount.forEach(item => {\n      pieData[item._id] = item.count;\n    });\n    // 3. 本周的右侧统计数据\n    // 3.1 计算6个月前的时间： 1号 00:00:00\n    // 3.2 查询数据库中对应时间内的数据 $gte\n    // 3.3 group组合 -> sum -> sort排序\n    const startMonth = dayjs__WEBPACK_IMPORTED_MODULE_6___default()(nowZero).subtract(5, 'M').date(1).format();\n    const endMonth = dayjs__WEBPACK_IMPORTED_MODULE_6___default()(nowZero).add(1, 'M').date(1).format();\n    let monthData = await _model_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].aggregate([{\n      $match: {\n        created: {\n          $gte: new Date(startMonth),\n          $lt: new Date(endMonth)\n        }\n      }\n    }, {\n      $project: {\n        month: {\n          $dateToString: {\n            format: '%Y-%m',\n            date: '$created'\n          }\n        }\n      }\n    }, {\n      $group: {\n        _id: '$month',\n        count: {\n          $sum: 1\n        }\n      }\n    }, {\n      $sort: {\n        _id: 1\n      }\n    }]);\n    monthData = monthData.reduce((obj, item) => {\n      return {\n        ...obj,\n        [item._id]: item.count\n      };\n    }, {});\n    // 4. 底部的数据\n    const startDay = dayjs__WEBPACK_IMPORTED_MODULE_6___default()().subtract(7, 'day').format();\n    const _aggregate = async model => {\n      let result = await model.aggregate([{\n        $match: {\n          created: {\n            $gte: new Date(startDay)\n          }\n        }\n      }, {\n        $project: {\n          month: {\n            $dateToString: {\n              format: '%Y-%m-%d',\n              date: '$created'\n            }\n          }\n        }\n      }, {\n        $group: {\n          _id: '$month',\n          count: {\n            $sum: 1\n          }\n        }\n      }, {\n        $sort: {\n          _id: 1\n        }\n      }]);\n      result = result.reduce((obj, item) => {\n        return {\n          ...obj,\n          [item._id]: item.count\n        };\n      }, {});\n      return result;\n    };\n    const userWeekData = await _aggregate(_model_User__WEBPACK_IMPORTED_MODULE_3__[\"default\"]); // -> { 2019-10-01: 1}\n    const signWeekData = await _aggregate(_model_SignRecord__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\n    const postWeekData = await _aggregate(_model_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n    const commentsWeekData = await _aggregate(_model_Comments__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\n    // {user: [1,2,3,4,0,0,0]}\n    const dataArr = [];\n    for (let i = 0; i <= 6; i++) {\n      dataArr.push(dayjs__WEBPACK_IMPORTED_MODULE_6___default()().subtract(6 - i, 'day').format('YYYY-MM-DD'));\n    }\n    const addData = obj => {\n      const arr = [];\n      dataArr.forEach(item => {\n        if (obj[item]) {\n          arr.push(obj[item]);\n        } else {\n          arr.push(0);\n        }\n      });\n      return arr;\n    };\n    const weekData = {\n      user: addData(userWeekData),\n      sign: addData(signWeekData),\n      post: addData(postWeekData),\n      comments: addData(commentsWeekData)\n    };\n    result = {\n      inforCardData,\n      pieData,\n      monthData,\n      weekData\n    };\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n  async getCommentsAll(ctx) {\n    const params = qs__WEBPACK_IMPORTED_MODULE_8___default().parse(ctx.query);\n    let options = {};\n    if (params.options) {\n      options = params.options;\n    }\n    const page = params.page ? parseInt(params.page) : 0;\n    const limit = params.limit ? parseInt(params.limit) : 20;\n    // 使用MongoDB中的视图，效率提升1倍\n    // const test = await CommentsUsers.find({ 'uid.name': { $regex: 'admin1', $options: 'i' } })\n    const result = await _model_Comments__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getCommentsOptions(options, page, limit);\n    let total = await _model_Comments__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getCommentsOptionsCount(options);\n    if (typeof total === 'object') {\n      if (total.length > 0) {\n        total = total[0].count;\n      } else {\n        total = 0;\n      }\n    }\n    ctx.body = {\n      code: 0,\n      data: result,\n      total\n    };\n  }\n  async updateCommentsBatch(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const result = await _model_Comments__WEBPACK_IMPORTED_MODULE_4__[\"default\"].updateMany({\n      _id: {\n        $in: body.ids\n      }\n    }, {\n      $set: {\n        ...body.settings\n      }\n    });\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n  async deleteCommentsBatch(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const result = await _model_Comments__WEBPACK_IMPORTED_MODULE_4__[\"default\"].deleteMany({\n      _id: {\n        $in: body.ids\n      }\n    });\n    ctx.body = {\n      code: 0,\n      msg: '删除成功',\n      data: result\n    };\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new AdminController());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFO1FBQUUsR0FBRzVHLElBQUksQ0FBQzZHO01BQVM7SUFBRSxDQUFDLENBQUM7SUFDcEdoSCxHQUFHLENBQUNHLElBQUksR0FBRztNQUNQQyxJQUFJLEVBQUUsQ0FBQztNQUNQQyxJQUFJLEVBQUVKO0lBQ1YsQ0FBQztFQUNMO0VBRUEsTUFBTWdILG1CQUFtQkEsQ0FBQ2pILEdBQUcsRUFBRTtJQUMzQixNQUFNO01BQUVHO0lBQUssQ0FBQyxHQUFHSCxHQUFHLENBQUNPLE9BQU87SUFDNUIsTUFBTU4sTUFBTSxHQUFHLE1BQU1iLHVEQUFRLENBQUM4SCxVQUFVLENBQUM7TUFBRXZHLEdBQUcsRUFBRTtRQUFFa0csR0FBRyxFQUFFMUcsSUFBSSxDQUFDMkc7TUFBSTtJQUFFLENBQUMsQ0FBQztJQUNwRTlHLEdBQUcsQ0FBQ0csSUFBSSxHQUFHO01BQ1BDLElBQUksRUFBRSxDQUFDO01BQ1ArRyxHQUFHLEVBQUUsTUFBTTtNQUNYOUcsSUFBSSxFQUFFSjtJQUNWLENBQUM7RUFDTDtBQUNKO0FBRUEsaUVBQWUsSUFBSUgsZUFBZSxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvYXBpL0FkbWluQ29udHJvbGxlci5qcz80YTBkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNZW51IGZyb20gJ0AvbW9kZWwvTWVudXMnO1xuaW1wb3J0IFBvc3QgZnJvbSAnQC9tb2RlbC9Qb3N0JztcbmltcG9ydCBSb2xlcyBmcm9tICdAL21vZGVsL1JvbGVzJztcbmltcG9ydCBVc2VyIGZyb20gJ0AvbW9kZWwvVXNlcic7XG5pbXBvcnQgQ29tbWVudHMgZnJvbSAnQC9tb2RlbC9Db21tZW50cyc7XG5pbXBvcnQgU2lnblJlY29yZCBmcm9tICdAL21vZGVsL1NpZ25SZWNvcmQnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdkYXlqcyc7XG5pbXBvcnQgeyBnZXRNZW51RGF0YSwgc29ydE1lbnVzLCBnZXRSaWdodHMgfSBmcm9tICdAL2NvbW1vbi9VdGlscyc7XG5pbXBvcnQgcXMgZnJvbSAncXMnO1xuLy8gaW1wb3J0IENvbW1lbnRzVXNlcnMgZnJvbSAnLi4vbW9kZWwvQ29tbWVudHNVc2VycydcblxuY29uc3Qgd2Vla2RheSA9IHJlcXVpcmUoJ2RheWpzL3BsdWdpbi93ZWVrZGF5Jyk7XG5tb21lbnQuZXh0ZW5kKHdlZWtkYXkpO1xuXG5jbGFzcyBBZG1pbkNvbnRyb2xsZXIge1xuICAgIGFzeW5jIGdldE1lbnUoY3R4KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IE1lbnUuZmluZCh7fSk7XG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgIGRhdGE6IHNvcnRNZW51cyhyZXN1bHQpLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGFkZE1lbnUoY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudShib2R5KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWVudS5zYXZlKCk7XG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVNZW51KGN0eCkge1xuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICBjb25zdCBkYXRhID0geyAuLi5ib2R5IH07XG4gICAgICAgIGRlbGV0ZSBkYXRhLl9pZDtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTWVudS51cGRhdGVPbmUoeyBfaWQ6IGJvZHkuX2lkIH0sIHsgLi4uZGF0YSB9KTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZU1lbnUoY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IE1lbnUuZGVsZXRlT25lKHsgX2lkOiBib2R5Ll9pZCB9KTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGdldFJvbGVzKGN0eCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSb2xlcy5maW5kKHt9KTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGFkZFJvbGUoY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHJvbGUgPSBuZXcgUm9sZXMoYm9keSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJvbGUuc2F2ZSgpO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlUm9sZShjdHgpIHtcbiAgICAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAgICAgY29uc3QgZGF0YSA9IHsgLi4uYm9keSB9O1xuICAgICAgICBkZWxldGUgZGF0YS5faWQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFJvbGVzLnVwZGF0ZU9uZSh7IF9pZDogYm9keS5faWQgfSwgeyAuLi5kYXRhIH0pO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlUm9sZShjdHgpIHtcbiAgICAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUm9sZXMuZGVsZXRlT25lKHsgX2lkOiBib2R5Ll9pZCB9KTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGdldFJvbGVOYW1lcyhjdHgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUm9sZXMuZmluZCh7fSwgeyBtZW51OiAwLCBkZXNjOiAwIH0pO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g6I635Y+W55So5oi355qE6I+c5Y2V5p2D6ZmQ77yM6I+c5Y2V5pWw5o2uXG4gICAgYXN5bmMgZ2V0Um91dGVzKGN0eCkge1xuICAgICAgICAvLyAxLiBvYmogLT4gX2lkIC0+IHJvbGVzXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IGN0eC5faWQgfSwgeyByb2xlczogMSB9KTtcbiAgICAgICAgY29uc3QgeyByb2xlcyB9ID0gdXNlcjtcbiAgICAgICAgLy8gMi4g6YCa6L+H6KeS6ImyIC0+IG1lbnVzXG4gICAgICAgIC8vIOeUqOaIt+eahOinkuiJsuWPr+iDveacieWkmuS4qlxuICAgICAgICAvLyDop5LoibIgbWVudXMgLT4g5Y676YeNXG4gICAgICAgIGxldCBtZW51cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCByb2xlID0gcm9sZXNbaV07XG4gICAgICAgICAgICBjb25zdCByaWdodHMgPSBhd2FpdCBSb2xlcy5maW5kT25lKHsgcm9sZSB9LCB7IG1lbnU6IDEgfSk7XG4gICAgICAgICAgICBtZW51cyA9IG1lbnVzLmNvbmNhdChyaWdodHMubWVudSk7XG4gICAgICAgIH1cbiAgICAgICAgbWVudXMgPSBBcnJheS5mcm9tKG5ldyBTZXQobWVudXMpKTtcbiAgICAgICAgLy8gMy4gbWVudXMgLT4g5Y+v5Lul6K6/6Zeu55qE6I+c5Y2V5pWw5o2uXG4gICAgICAgIGNvbnN0IHRyZWVEYXRhID0gYXdhaXQgTWVudS5maW5kKHt9KTtcbiAgICAgICAgLy8g6YCS5b2S5p+l6K+iIHR5cGUgPSAnbWVudScgJiYgX2lkIOWMheWQq+WcqG1lbnVz5LitXG4gICAgICAgIC8vIOe7k+aehOi/m+ihjOaUuemAoFxuICAgICAgICBjb25zdCByb3V0ZXMgPSBnZXRNZW51RGF0YSh0cmVlRGF0YSwgbWVudXMsIGN0eC5pc0FkbWluKTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcm91dGVzLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGdldE9wZXJhdGlvbnMoY3R4KSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IGN0eC5faWQgfSwgeyByb2xlczogMSB9KTtcbiAgICAgICAgY29uc3QgeyByb2xlcyB9ID0gdXNlcjtcbiAgICAgICAgbGV0IG1lbnVzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm9sZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJvbGUgPSByb2xlc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0cyA9IGF3YWl0IFJvbGVzLmZpbmRPbmUoeyByb2xlIH0sIHsgbWVudTogMSB9KTtcbiAgICAgICAgICAgIG1lbnVzID0gbWVudXMuY29uY2F0KHJpZ2h0cy5tZW51KTtcbiAgICAgICAgfVxuICAgICAgICBtZW51cyA9IEFycmF5LmZyb20obmV3IFNldChtZW51cykpO1xuICAgICAgICAvLyAzLiBtZW51cyAtPiDlj6/ku6Xorr/pl67nmoToj5zljZXmlbDmja5cbiAgICAgICAgY29uc3QgdHJlZURhdGEgPSBhd2FpdCBNZW51LmZpbmQoe30pO1xuICAgICAgICBjb25zdCBvcGVyYXRpb25zID0gZ2V0UmlnaHRzKHRyZWVEYXRhLCBtZW51cyk7XG4gICAgICAgIHJldHVybiBvcGVyYXRpb25zO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFN0YXRzKGN0eCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0ge307XG4gICAgICAgIGNvbnN0IG5vd1plcm8gPSBuZXcgRGF0ZSgpLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICAvLyAxLiDpobbpg6jnmoRjYXJkXG4gICAgICAgIGNvbnN0IGluZm9yQ2FyZERhdGEgPSBbXTtcbiAgICAgICAgY29uc3QgdGltZSA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCAwMDowMDowMCcpO1xuICAgICAgICBjb25zdCB1c2VyTmV3Q291bnQgPSBhd2FpdCBVc2VyLmZpbmQoeyBjcmVhdGVkOiB7ICRndGU6IHRpbWUgfSB9KS5jb3VudERvY3VtZW50cygpO1xuICAgICAgICBjb25zdCBwb3N0c0NvdW50ID0gYXdhaXQgUG9zdC5maW5kKHt9KS5jb3VudERvY3VtZW50cygpO1xuICAgICAgICBjb25zdCBjb21tZW50c05ld0NvdW50ID0gYXdhaXQgQ29tbWVudHMuZmluZCh7IGNyZWF0ZWQ6IHsgJGd0ZTogdGltZSB9IH0pLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0dGltZSA9IG1vbWVudChub3daZXJvKS53ZWVrZGF5KDEpLmZvcm1hdCgpO1xuICAgICAgICBjb25zdCBlbmR0aW1lID0gbW9tZW50KG5vd1plcm8pLndlZWtkYXkoOCkuZm9ybWF0KCk7XG4gICAgICAgIGNvbnN0IHdlZWtFbmRDb3VudCA9IGF3YWl0IENvbW1lbnRzLmZpbmQoeyBjcmVhdGVkOiB7ICRndGU6IHN0YXJ0dGltZSwgJGx0ZTogZW5kdGltZSB9LCBpc0Jlc3Q6ICcxJyB9KS5jb3VudERvY3VtZW50cygpO1xuICAgICAgICBjb25zdCBzaWduV2Vla0NvdW50ID0gYXdhaXQgU2lnblJlY29yZC5maW5kKHsgY3JlYXRlZDogeyAkZ3RlOiBzdGFydHRpbWUsICRsdGU6IGVuZHRpbWUgfSB9KS5jb3VudERvY3VtZW50cygpO1xuICAgICAgICBjb25zdCBwb3N0V2Vla0NvdW50ID0gYXdhaXQgUG9zdC5maW5kKHsgY3JlYXRlZDogeyAkZ3RlOiBzdGFydHRpbWUsICRsdGU6IGVuZHRpbWUgfSB9KS5jb3VudERvY3VtZW50cygpO1xuICAgICAgICBpbmZvckNhcmREYXRhLnB1c2godXNlck5ld0NvdW50KTtcbiAgICAgICAgaW5mb3JDYXJkRGF0YS5wdXNoKHBvc3RzQ291bnQpO1xuICAgICAgICBpbmZvckNhcmREYXRhLnB1c2goY29tbWVudHNOZXdDb3VudCk7XG4gICAgICAgIGluZm9yQ2FyZERhdGEucHVzaCh3ZWVrRW5kQ291bnQpO1xuICAgICAgICBpbmZvckNhcmREYXRhLnB1c2goc2lnbldlZWtDb3VudCk7XG4gICAgICAgIGluZm9yQ2FyZERhdGEucHVzaChwb3N0V2Vla0NvdW50KTtcbiAgICAgICAgLy8gMi4g5bem5L6n55qE6aW85Zu+5pWw5o2uXG4gICAgICAgIGNvbnN0IHBvc3RzQ2F0YWxvZ0NvdW50ID0gYXdhaXQgUG9zdC5hZ2dyZWdhdGUoW3sgJGdyb3VwOiB7IF9pZDogJyRjYXRhbG9nJywgY291bnQ6IHsgJHN1bTogMSB9IH0gfV0pO1xuICAgICAgICBjb25zdCBwaWVEYXRhID0ge307XG4gICAgICAgIHBvc3RzQ2F0YWxvZ0NvdW50LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBwaWVEYXRhW2l0ZW0uX2lkXSA9IGl0ZW0uY291bnQ7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyAzLiDmnKzlkajnmoTlj7Pkvqfnu5/orqHmlbDmja5cbiAgICAgICAgLy8gMy4xIOiuoeeulzbkuKrmnIjliY3nmoTml7bpl7TvvJogMeWPtyAwMDowMDowMFxuICAgICAgICAvLyAzLjIg5p+l6K+i5pWw5o2u5bqT5Lit5a+55bqU5pe26Ze05YaF55qE5pWw5o2uICRndGVcbiAgICAgICAgLy8gMy4zIGdyb3Vw57uE5ZCIIC0+IHN1bSAtPiBzb3J05o6S5bqPXG4gICAgICAgIGNvbnN0IHN0YXJ0TW9udGggPSBtb21lbnQobm93WmVybykuc3VidHJhY3QoNSwgJ00nKS5kYXRlKDEpLmZvcm1hdCgpO1xuICAgICAgICBjb25zdCBlbmRNb250aCA9IG1vbWVudChub3daZXJvKS5hZGQoMSwgJ00nKS5kYXRlKDEpLmZvcm1hdCgpO1xuICAgICAgICBsZXQgbW9udGhEYXRhID0gYXdhaXQgUG9zdC5hZ2dyZWdhdGUoW1xuICAgICAgICAgICAgeyAkbWF0Y2g6IHsgY3JlYXRlZDogeyAkZ3RlOiBuZXcgRGF0ZShzdGFydE1vbnRoKSwgJGx0OiBuZXcgRGF0ZShlbmRNb250aCkgfSB9IH0sXG4gICAgICAgICAgICB7ICRwcm9qZWN0OiB7IG1vbnRoOiB7ICRkYXRlVG9TdHJpbmc6IHsgZm9ybWF0OiAnJVktJW0nLCBkYXRlOiAnJGNyZWF0ZWQnIH0gfSB9IH0sXG4gICAgICAgICAgICB7ICRncm91cDogeyBfaWQ6ICckbW9udGgnLCBjb3VudDogeyAkc3VtOiAxIH0gfSB9LFxuICAgICAgICAgICAgeyAkc29ydDogeyBfaWQ6IDEgfSB9LFxuICAgICAgICBdKTtcbiAgICAgICAgbW9udGhEYXRhID0gbW9udGhEYXRhLnJlZHVjZSgob2JqLCBpdGVtKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLm9iaixcbiAgICAgICAgICAgICAgICBbaXRlbS5faWRdOiBpdGVtLmNvdW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSwge30pO1xuICAgICAgICAvLyA0LiDlupXpg6jnmoTmlbDmja5cbiAgICAgICAgY29uc3Qgc3RhcnREYXkgPSBtb21lbnQoKS5zdWJ0cmFjdCg3LCAnZGF5JykuZm9ybWF0KCk7XG4gICAgICAgIGNvbnN0IF9hZ2dyZWdhdGUgPSBhc3luYyBtb2RlbCA9PiB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgbW9kZWwuYWdncmVnYXRlKFtcbiAgICAgICAgICAgICAgICB7ICRtYXRjaDogeyBjcmVhdGVkOiB7ICRndGU6IG5ldyBEYXRlKHN0YXJ0RGF5KSB9IH0gfSxcbiAgICAgICAgICAgICAgICB7ICRwcm9qZWN0OiB7IG1vbnRoOiB7ICRkYXRlVG9TdHJpbmc6IHsgZm9ybWF0OiAnJVktJW0tJWQnLCBkYXRlOiAnJGNyZWF0ZWQnIH0gfSB9IH0sXG4gICAgICAgICAgICAgICAgeyAkZ3JvdXA6IHsgX2lkOiAnJG1vbnRoJywgY291bnQ6IHsgJHN1bTogMSB9IH0gfSxcbiAgICAgICAgICAgICAgICB7ICRzb3J0OiB7IF9pZDogMSB9IH0sXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZWR1Y2UoKG9iaiwgaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9iaixcbiAgICAgICAgICAgICAgICAgICAgW2l0ZW0uX2lkXTogaXRlbS5jb3VudCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSwge30pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdXNlcldlZWtEYXRhID0gYXdhaXQgX2FnZ3JlZ2F0ZShVc2VyKTsgLy8gLT4geyAyMDE5LTEwLTAxOiAxfVxuICAgICAgICBjb25zdCBzaWduV2Vla0RhdGEgPSBhd2FpdCBfYWdncmVnYXRlKFNpZ25SZWNvcmQpO1xuICAgICAgICBjb25zdCBwb3N0V2Vla0RhdGEgPSBhd2FpdCBfYWdncmVnYXRlKFBvc3QpO1xuICAgICAgICBjb25zdCBjb21tZW50c1dlZWtEYXRhID0gYXdhaXQgX2FnZ3JlZ2F0ZShDb21tZW50cyk7XG4gICAgICAgIC8vIHt1c2VyOiBbMSwyLDMsNCwwLDAsMF19XG4gICAgICAgIGNvbnN0IGRhdGFBcnIgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gNjsgaSsrKSB7XG4gICAgICAgICAgICBkYXRhQXJyLnB1c2goXG4gICAgICAgICAgICAgICAgbW9tZW50KClcbiAgICAgICAgICAgICAgICAgICAgLnN1YnRyYWN0KDYgLSBpLCAnZGF5JylcbiAgICAgICAgICAgICAgICAgICAgLmZvcm1hdCgnWVlZWS1NTS1ERCcpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFkZERhdGEgPSBvYmogPT4ge1xuICAgICAgICAgICAgY29uc3QgYXJyID0gW107XG4gICAgICAgICAgICBkYXRhQXJyLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9ialtpdGVtXSkge1xuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChvYmpbaXRlbV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGFycjtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgd2Vla0RhdGEgPSB7XG4gICAgICAgICAgICB1c2VyOiBhZGREYXRhKHVzZXJXZWVrRGF0YSksXG4gICAgICAgICAgICBzaWduOiBhZGREYXRhKHNpZ25XZWVrRGF0YSksXG4gICAgICAgICAgICBwb3N0OiBhZGREYXRhKHBvc3RXZWVrRGF0YSksXG4gICAgICAgICAgICBjb21tZW50czogYWRkRGF0YShjb21tZW50c1dlZWtEYXRhKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgaW5mb3JDYXJkRGF0YSxcbiAgICAgICAgICAgIHBpZURhdGEsXG4gICAgICAgICAgICBtb250aERhdGEsXG4gICAgICAgICAgICB3ZWVrRGF0YSxcbiAgICAgICAgfTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGdldENvbW1lbnRzQWxsKGN0eCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBxcy5wYXJzZShjdHgucXVlcnkpO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHt9O1xuICAgICAgICBpZiAocGFyYW1zLm9wdGlvbnMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBwYXJhbXMub3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWdlID0gcGFyYW1zLnBhZ2UgPyBwYXJzZUludChwYXJhbXMucGFnZSkgOiAwO1xuICAgICAgICBjb25zdCBsaW1pdCA9IHBhcmFtcy5saW1pdCA/IHBhcnNlSW50KHBhcmFtcy5saW1pdCkgOiAyMDtcbiAgICAgICAgLy8g5L2/55SoTW9uZ29EQuS4reeahOinhuWbvu+8jOaViOeOh+aPkOWNhzHlgI1cbiAgICAgICAgLy8gY29uc3QgdGVzdCA9IGF3YWl0IENvbW1lbnRzVXNlcnMuZmluZCh7ICd1aWQubmFtZSc6IHsgJHJlZ2V4OiAnYWRtaW4xJywgJG9wdGlvbnM6ICdpJyB9IH0pXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvbW1lbnRzLmdldENvbW1lbnRzT3B0aW9ucyhvcHRpb25zLCBwYWdlLCBsaW1pdCk7XG4gICAgICAgIGxldCB0b3RhbCA9IGF3YWl0IENvbW1lbnRzLmdldENvbW1lbnRzT3B0aW9uc0NvdW50KG9wdGlvbnMpO1xuICAgICAgICBpZiAodHlwZW9mIHRvdGFsID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgaWYgKHRvdGFsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0b3RhbCA9IHRvdGFsWzBdLmNvdW50O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0b3RhbCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgdG90YWwsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlQ29tbWVudHNCYXRjaChjdHgpIHtcbiAgICAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ29tbWVudHMudXBkYXRlTWFueSh7IF9pZDogeyAkaW46IGJvZHkuaWRzIH0gfSwgeyAkc2V0OiB7IC4uLmJvZHkuc2V0dGluZ3MgfSB9KTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZUNvbW1lbnRzQmF0Y2goY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvbW1lbnRzLmRlbGV0ZU1hbnkoeyBfaWQ6IHsgJGluOiBib2R5LmlkcyB9IH0pO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBtc2c6ICfliKDpmaTmiJDlip8nLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IEFkbWluQ29udHJvbGxlcigpO1xuIl0sIm5hbWVzIjpbIk1lbnUiLCJQb3N0IiwiUm9sZXMiLCJVc2VyIiwiQ29tbWVudHMiLCJTaWduUmVjb3JkIiwibW9tZW50IiwiZ2V0TWVudURhdGEiLCJzb3J0TWVudXMiLCJnZXRSaWdodHMiLCJxcyIsIndlZWtkYXkiLCJyZXF1aXJlIiwiZXh0ZW5kIiwiQWRtaW5Db250cm9sbGVyIiwiZ2V0TWVudSIsImN0eCIsInJlc3VsdCIsImZpbmQiLCJib2R5IiwiY29kZSIsImRhdGEiLCJhZGRNZW51IiwicmVxdWVzdCIsIm1lbnUiLCJzYXZlIiwidXBkYXRlTWVudSIsIl9pZCIsInVwZGF0ZU9uZSIsImRlbGV0ZU1lbnUiLCJkZWxldGVPbmUiLCJnZXRSb2xlcyIsImFkZFJvbGUiLCJyb2xlIiwidXBkYXRlUm9sZSIsImRlbGV0ZVJvbGUiLCJnZXRSb2xlTmFtZXMiLCJkZXNjIiwiZ2V0Um91dGVzIiwidXNlciIsImZpbmRPbmUiLCJyb2xlcyIsIm1lbnVzIiwiaSIsImxlbmd0aCIsInJpZ2h0cyIsImNvbmNhdCIsIkFycmF5IiwiZnJvbSIsIlNldCIsInRyZWVEYXRhIiwicm91dGVzIiwiaXNBZG1pbiIsImdldE9wZXJhdGlvbnMiLCJvcGVyYXRpb25zIiwiZ2V0U3RhdHMiLCJub3daZXJvIiwiRGF0ZSIsInNldEhvdXJzIiwiaW5mb3JDYXJkRGF0YSIsInRpbWUiLCJmb3JtYXQiLCJ1c2VyTmV3Q291bnQiLCJjcmVhdGVkIiwiJGd0ZSIsImNvdW50RG9jdW1lbnRzIiwicG9zdHNDb3VudCIsImNvbW1lbnRzTmV3Q291bnQiLCJzdGFydHRpbWUiLCJlbmR0aW1lIiwid2Vla0VuZENvdW50IiwiJGx0ZSIsImlzQmVzdCIsInNpZ25XZWVrQ291bnQiLCJwb3N0V2Vla0NvdW50IiwicHVzaCIsInBvc3RzQ2F0YWxvZ0NvdW50IiwiYWdncmVnYXRlIiwiJGdyb3VwIiwiY291bnQiLCIkc3VtIiwicGllRGF0YSIsImZvckVhY2giLCJpdGVtIiwic3RhcnRNb250aCIsInN1YnRyYWN0IiwiZGF0ZSIsImVuZE1vbnRoIiwiYWRkIiwibW9udGhEYXRhIiwiJG1hdGNoIiwiJGx0IiwiJHByb2plY3QiLCJtb250aCIsIiRkYXRlVG9TdHJpbmciLCIkc29ydCIsInJlZHVjZSIsIm9iaiIsInN0YXJ0RGF5IiwiX2FnZ3JlZ2F0ZSIsIm1vZGVsIiwidXNlcldlZWtEYXRhIiwic2lnbldlZWtEYXRhIiwicG9zdFdlZWtEYXRhIiwiY29tbWVudHNXZWVrRGF0YSIsImRhdGFBcnIiLCJhZGREYXRhIiwiYXJyIiwid2Vla0RhdGEiLCJzaWduIiwicG9zdCIsImNvbW1lbnRzIiwiZ2V0Q29tbWVudHNBbGwiLCJwYXJhbXMiLCJwYXJzZSIsInF1ZXJ5Iiwib3B0aW9ucyIsInBhZ2UiLCJwYXJzZUludCIsImxpbWl0IiwiZ2V0Q29tbWVudHNPcHRpb25zIiwidG90YWwiLCJnZXRDb21tZW50c09wdGlvbnNDb3VudCIsInVwZGF0ZUNvbW1lbnRzQmF0Y2giLCJ1cGRhdGVNYW55IiwiJGluIiwiaWRzIiwiJHNldCIsInNldHRpbmdzIiwiZGVsZXRlQ29tbWVudHNCYXRjaCIsImRlbGV0ZU1hbnkiLCJtc2ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/AdminController.js\n\n}");

/***/ }),

/***/ "./src/api/CommentsController.js":
/*!***************************************!*\
  !*** ./src/api/CommentsController.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _model_Comments__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/Comments */ \"./src/model/Comments.js\");\n/* harmony import */ var _model_Post__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../model/Post */ \"./src/model/Post.js\");\n/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../model/User */ \"./src/model/User.js\");\n/* harmony import */ var _common_Utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/Utils */ \"./src/common/Utils.js\");\n/* harmony import */ var _model_CommentsHands__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../model/CommentsHands */ \"./src/model/CommentsHands.js\");\n\n\n\n\n\n\n// import { wxSendMessage } from '@/common/WxUtils';\n\nconst canReply = async ctx => {\n  let result = false;\n  const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_3__.getJWTPayload)(ctx.header.authorization);\n  if (typeof obj._id === 'undefined') {\n    return result;\n  } else {\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByID(obj._id);\n    if (user.status === '0') {\n      result = true;\n    }\n    return result;\n  }\n};\nclass CommentsController {\n  // 获取评论列表\n  async getComments(ctx) {\n    const params = ctx.query;\n    const tid = params.tid;\n    const page = params.page ? params.page : 0;\n    const limit = params.limit ? parseInt(params.limit) : 10;\n    let result = await _model_Comments__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCommentsList(tid, page, limit);\n    // 判断用户是否登录，已登录的用户才去判断点赞信息\n    const auth = ctx.header.authorization;\n    const obj = auth ? await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_3__.getJWTPayload)(auth) : {};\n    if (obj._id) {\n      result = result.map(item => item.toJSON());\n      for (let i = 0; i < result.length; i++) {\n        let item = result[i];\n        item.handed = '0';\n        const commentsHands = await _model_CommentsHands__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findOne({\n          cid: item._id,\n          uid: obj._id\n        });\n        if (commentsHands && commentsHands.cid) {\n          if (commentsHands.uid === obj._id) {\n            item.handed = '1';\n          }\n        }\n      }\n    }\n    const total = await _model_Comments__WEBPACK_IMPORTED_MODULE_0__[\"default\"].queryCount(tid);\n    ctx.body = {\n      code: 0,\n      total,\n      data: result,\n      msg: '查询成功'\n    };\n  }\n\n  // 获取用户最近的评论记录\n  async getCommentPublic(ctx) {\n    const params = ctx.query;\n    const result = await _model_Comments__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getCommetsPublic(params.uid, params.page, parseInt(params.limit));\n    if (result.length > 0) {\n      ctx.body = {\n        code: 0,\n        data: result,\n        msg: '查询最近的评论记录成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '查询评论记录失败！'\n      };\n    }\n  }\n\n  // 添加评论\n  async addComment(ctx) {\n    const check = await canReply(ctx);\n    if (!check) {\n      ctx.body = {\n        code: 500,\n        msg: '用户已被禁言！'\n      };\n      return;\n    }\n    const {\n      body\n    } = ctx.request;\n    const sid = body.sid;\n    const code = body.code;\n    // 验证图片验证码的时效性、正确性\n    const result = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_3__.checkCode)(sid, code);\n    if (!result) {\n      ctx.body = {\n        code: 500,\n        msg: '图片验证码不正确,请检查！'\n      };\n      return;\n    }\n    const newComment = new _model_Comments__WEBPACK_IMPORTED_MODULE_0__[\"default\"](body);\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_3__.getJWTPayload)(ctx.header.authorization);\n    newComment.cuid = obj._id;\n    // 查询帖子的作者，以便发送消息\n    const post = await _model_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n      _id: body.tid\n    });\n    newComment.uid = post.uid;\n    const comment = await newComment.save();\n    const num = await _model_Comments__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getTotal(post.uid);\n    __webpack_require__.g.ws.send(post.uid, JSON.stringify({\n      event: 'message',\n      message: num\n    }));\n    // 评论记数\n    const updatePostresult = await _model_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateOne({\n      _id: body.tid\n    }, {\n      $inc: {\n        answer: 1\n      }\n    });\n    if (comment._id && updatePostresult.modifiedCount === 1) {\n      ctx.body = {\n        code: 0,\n        data: comment,\n        msg: '评论成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '评论失败'\n      };\n    }\n  }\n\n  // 微信-添加评论\n  // async wxAddComment(ctx) {\n  //     const { body } = ctx.request;\n  //     const obj = await getJWTPayload(ctx.header.authorization);\n  //     const user = await User.findByID(obj._id);\n  //     const newComment = new Comments(body);\n  //     newComment.cuid = obj._id;\n  //     // 添加文章评论记数\n  //     await Post.updateOne({ _id: body.tid }, { $inc: { answer: 1 } });\n  //     const post = await Post.findByPostId(body.tid);\n  //     newComment.uid = post.uid._id; // 保存帖子作者的id\n  //     const comment = await newComment.save();\n\n  //     // 调用微信订阅消息api\n  //     // 1、发帖的作者必须是用微信登录的才可以接收订阅消息\n  //     // 2、自己不能给自己发订阅消息\n  //     if (obj._id !== post.uid._id.toString() && post.uid.openid) {\n  //         await wxSendMessage(body, post, user);\n  //     }\n\n  //     ctx.body = {\n  //         msg: '回帖成功',\n  //         code: 0,\n  //         data: comment,\n  //     };\n  // }\n  // 更新评论\n  async updateComment(ctx) {\n    const check = await canReply(ctx);\n    if (!check) {\n      ctx.body = {\n        code: 500,\n        msg: '用户已被禁言！'\n      };\n      return;\n    }\n    const {\n      body\n    } = ctx.request;\n    const result = await _model_Comments__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateOne({\n      _id: body.cid\n    }, {\n      $set: body\n    });\n    ctx.body = {\n      code: 0,\n      msg: '修改成功',\n      data: result\n    };\n  }\n  // 采纳最佳答案\n  async setBest(ctx) {\n    // 对用户权限的判断，post uid -> header id\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_3__.getJWTPayload)(ctx.header.authorization);\n    if (typeof obj === 'undefined' && obj._id !== '') {\n      ctx.body = {\n        code: '401',\n        msg: '用户未登录，或者用户未受权'\n      };\n      return;\n    }\n    const params = ctx.query;\n    const post = await _model_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n      _id: params.tid\n    });\n    if (post.uid === obj._id && post.isEnd === '0') {\n      // 说明这是作者本人，可以去设置isBest\n      const result = await _model_Post__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateOne({\n        _id: params.tid\n      }, {\n        $set: {\n          isEnd: '1'\n        }\n      });\n      const result1 = await _model_Comments__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateOne({\n        _id: params.cid\n      }, {\n        $set: {\n          isBest: '1'\n        }\n      });\n      if (result.modifiedCount === 1 && result1.modifiedCount === 1) {\n        // 把积分值给采纳的用户\n        const comment = await _model_Comments__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findByCid(params.cid);\n        const result2 = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n          _id: comment.cuid\n        }, {\n          $inc: {\n            favs: parseInt(post.fav)\n          }\n        });\n        if (result2.modifiedCount === 1) {\n          ctx.body = {\n            code: 0,\n            msg: '设置成功',\n            data: result2\n          };\n        } else {\n          ctx.body = {\n            code: 500,\n            msg: '设置最佳答案-更新用户失败'\n          };\n        }\n      } else {\n        ctx.body = {\n          code: 500,\n          msg: '设置失败',\n          data: {\n            ...result,\n            ...result1\n          }\n        };\n      }\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '帖子已结贴，无法重复设置'\n      };\n    }\n  }\n  async setHands(ctx) {\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_3__.getJWTPayload)(ctx.header.authorization);\n    const params = ctx.query;\n    // 判断用户是否已经点赞\n    const tmp = await _model_CommentsHands__WEBPACK_IMPORTED_MODULE_4__[\"default\"].find({\n      cid: params.cid,\n      uid: obj._id\n    });\n    if (tmp.length > 0) {\n      ctx.body = {\n        code: 0,\n        msg: '您已经点赞，请勿重复点赞'\n      };\n      return;\n    }\n    // 新增一条点赞记录\n    const comment = await _model_Comments__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findById(params.cid);\n    const newHands = new _model_CommentsHands__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n      cid: params.cid,\n      // 评论id\n      huid: comment.cuid,\n      // 被赞用户\n      uid: obj._id // 当前用户，即点赞用户\n    });\n    const data = await newHands.save();\n    // 更新comments表中对应的记录的hands信息 +1\n    const result = await _model_Comments__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateOne({\n      _id: params.cid\n    }, {\n      $inc: {\n        hands: 1\n      }\n    });\n    if (result.modifiedCount === 1) {\n      ctx.body = {\n        code: 0,\n        msg: '点赞成功',\n        data: data\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '保存点赞记录失败！'\n      };\n    }\n  }\n\n  // 获取别人对我的帖子的最新评论\n  // async getCommentsOnMe(ctx) {\n  //     const body = ctx.query;\n  //     const obj = await getJWTPayload(ctx.header.authorization);\n  //     const limit = body.limit || 10;\n  //     const page = body.page || 0;\n  //     const comments = await Comments.getCommentsOnMe(obj._id, page * limit, limit);\n  //     comments.forEach(item => {\n  //         item.tid.content = item.tid.content.slice(0, 155);\n  //     });\n\n  //     ctx.body = {\n  //         code: 0,\n  //         comments,\n  //     };\n  // }\n\n  // 获取对我点赞的用户\n  // async getHandUsersOnMe(ctx) {\n  //     const body = ctx.query;\n  //     const obj = await getJWTPayload(ctx.header.authorization);\n  //     const limit = body.limit || 10;\n  //     const page = body.page || 0;\n  //     const handUsers = await CommentsHands.getHandUsersOnMe(obj._id, page * limit, limit);\n\n  //     ctx.body = {\n  //         code: 0,\n  //         handUsers,\n  //     };\n  // }\n\n  // 取得热门评论\n  // async getCommentsCount(ctx) {\n  //     const body = ctx.query;\n  //     const comments = await Comments.getCommentsCount(body.page);\n  //     ctx.body = {\n  //         code: 0,\n  //         comments,\n  //     };\n  // }\n\n  // 取得最新评论\n  // async getNewComments(ctx) {\n  //     const body = ctx.query;\n  //     const comments = await Comments.getNewComments(body.page);\n  //     comments.forEach(item => {\n  //         item.content = item.content.substring(0, 30);\n  //     });\n  //     ctx.body = {\n  //         code: 0,\n  //         comments,\n  //     };\n  // }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new CommentsController());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0VBRUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7RUFFQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7QUFDSjtBQUVBLGlFQUFlLElBQUl6QixrQkFBa0IsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL2FwaS9Db21tZW50c0NvbnRyb2xsZXIuanM/ZDRiNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29tbWVudHMgZnJvbSAnLi4vbW9kZWwvQ29tbWVudHMnO1xuaW1wb3J0IFBvc3QgZnJvbSAnLi4vbW9kZWwvUG9zdCc7XG5pbXBvcnQgVXNlciBmcm9tICcuLi9tb2RlbC9Vc2VyJztcbmltcG9ydCB7IGNoZWNrQ29kZSB9IGZyb20gJ0AvY29tbW9uL1V0aWxzJztcbmltcG9ydCB7IGdldEpXVFBheWxvYWQgfSBmcm9tICcuLi9jb21tb24vVXRpbHMnO1xuaW1wb3J0IENvbW1lbnRzSGFuZHMgZnJvbSAnLi4vbW9kZWwvQ29tbWVudHNIYW5kcyc7XG4vLyBpbXBvcnQgeyB3eFNlbmRNZXNzYWdlIH0gZnJvbSAnQC9jb21tb24vV3hVdGlscyc7XG5cbmNvbnN0IGNhblJlcGx5ID0gYXN5bmMgY3R4ID0+IHtcbiAgICBsZXQgcmVzdWx0ID0gZmFsc2U7XG4gICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgIGlmICh0eXBlb2Ygb2JqLl9pZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJRChvYmouX2lkKTtcbiAgICAgICAgaWYgKHVzZXIuc3RhdHVzID09PSAnMCcpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59O1xuXG5jbGFzcyBDb21tZW50c0NvbnRyb2xsZXIge1xuICAgIC8vIOiOt+WPluivhOiuuuWIl+ihqFxuICAgIGFzeW5jIGdldENvbW1lbnRzKGN0eCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIGNvbnN0IHRpZCA9IHBhcmFtcy50aWQ7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBwYXJhbXMucGFnZSA/IHBhcmFtcy5wYWdlIDogMDtcbiAgICAgICAgY29uc3QgbGltaXQgPSBwYXJhbXMubGltaXQgPyBwYXJzZUludChwYXJhbXMubGltaXQpIDogMTA7XG4gICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBDb21tZW50cy5nZXRDb21tZW50c0xpc3QodGlkLCBwYWdlLCBsaW1pdCk7XG4gICAgICAgIC8vIOWIpOaWreeUqOaIt+aYr+WQpueZu+W9le+8jOW3sueZu+W9leeahOeUqOaIt+aJjeWOu+WIpOaWreeCuei1nuS/oeaBr1xuICAgICAgICBjb25zdCBhdXRoID0gY3R4LmhlYWRlci5hdXRob3JpemF0aW9uO1xuICAgICAgICBjb25zdCBvYmogPSBhdXRoID8gYXdhaXQgZ2V0SldUUGF5bG9hZChhdXRoKSA6IHt9O1xuXG4gICAgICAgIGlmIChvYmouX2lkKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQubWFwKGl0ZW0gPT4gaXRlbS50b0pTT04oKSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gcmVzdWx0W2ldO1xuICAgICAgICAgICAgICAgIGl0ZW0uaGFuZGVkID0gJzAnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1lbnRzSGFuZHMgPSBhd2FpdCBDb21tZW50c0hhbmRzLmZpbmRPbmUoeyBjaWQ6IGl0ZW0uX2lkLCB1aWQ6IG9iai5faWQgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbW1lbnRzSGFuZHMgJiYgY29tbWVudHNIYW5kcy5jaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbW1lbnRzSGFuZHMudWlkID09PSBvYmouX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmhhbmRlZCA9ICcxJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b3RhbCA9IGF3YWl0IENvbW1lbnRzLnF1ZXJ5Q291bnQodGlkKTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgdG90YWwsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICBtc2c6ICfmn6Xor6LmiJDlip8nLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOiOt+WPlueUqOaIt+acgOi/keeahOivhOiuuuiusOW9lVxuICAgIGFzeW5jIGdldENvbW1lbnRQdWJsaWMoY3R4KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ29tbWVudHMuZ2V0Q29tbWV0c1B1YmxpYyhwYXJhbXMudWlkLCBwYXJhbXMucGFnZSwgcGFyc2VJbnQocGFyYW1zLmxpbWl0KSk7XG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgbXNnOiAn5p+l6K+i5pyA6L+R55qE6K+E6K666K6w5b2V5oiQ5YqfJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn5p+l6K+i6K+E6K666K6w5b2V5aSx6LSl77yBJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDmt7vliqDor4TorrpcbiAgICBhc3luYyBhZGRDb21tZW50KGN0eCkge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IGNhblJlcGx5KGN0eCk7XG4gICAgICAgIGlmICghY2hlY2spIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICBtc2c6ICfnlKjmiLflt7LooqvnpoHoqIDvvIEnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICBjb25zdCBzaWQgPSBib2R5LnNpZDtcbiAgICAgICAgY29uc3QgY29kZSA9IGJvZHkuY29kZTtcbiAgICAgICAgLy8g6aqM6K+B5Zu+54mH6aqM6K+B56CB55qE5pe25pWI5oCn44CB5q2j56Gu5oCnXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoZWNrQ29kZShzaWQsIGNvZGUpO1xuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+WbvueJh+mqjOivgeeggeS4jeato+ehrizor7fmo4Dmn6XvvIEnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdDb21tZW50ID0gbmV3IENvbW1lbnRzKGJvZHkpO1xuICAgICAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgICAgIG5ld0NvbW1lbnQuY3VpZCA9IG9iai5faWQ7XG4gICAgICAgIC8vIOafpeivouW4luWtkOeahOS9nOiAhe+8jOS7peS+v+WPkemAgea2iOaBr1xuICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kT25lKHsgX2lkOiBib2R5LnRpZCB9KTtcbiAgICAgICAgbmV3Q29tbWVudC51aWQgPSBwb3N0LnVpZDtcbiAgICAgICAgY29uc3QgY29tbWVudCA9IGF3YWl0IG5ld0NvbW1lbnQuc2F2ZSgpO1xuXG4gICAgICAgIGNvbnN0IG51bSA9IGF3YWl0IENvbW1lbnRzLmdldFRvdGFsKHBvc3QudWlkKTtcbiAgICAgICAgZ2xvYmFsLndzLnNlbmQoXG4gICAgICAgICAgICBwb3N0LnVpZCxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBldmVudDogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG51bSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIC8vIOivhOiuuuiusOaVsFxuICAgICAgICBjb25zdCB1cGRhdGVQb3N0cmVzdWx0ID0gYXdhaXQgUG9zdC51cGRhdGVPbmUoeyBfaWQ6IGJvZHkudGlkIH0sIHsgJGluYzogeyBhbnN3ZXI6IDEgfSB9KTtcbiAgICAgICAgaWYgKGNvbW1lbnQuX2lkICYmIHVwZGF0ZVBvc3RyZXN1bHQubW9kaWZpZWRDb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICBkYXRhOiBjb21tZW50LFxuICAgICAgICAgICAgICAgIG1zZzogJ+ivhOiuuuaIkOWKnycsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+ivhOiuuuWksei0pScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g5b6u5L+hLea3u+WKoOivhOiuulxuICAgIC8vIGFzeW5jIHd4QWRkQ29tbWVudChjdHgpIHtcbiAgICAvLyAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAvLyAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgIC8vICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJRChvYmouX2lkKTtcbiAgICAvLyAgICAgY29uc3QgbmV3Q29tbWVudCA9IG5ldyBDb21tZW50cyhib2R5KTtcbiAgICAvLyAgICAgbmV3Q29tbWVudC5jdWlkID0gb2JqLl9pZDtcbiAgICAvLyAgICAgLy8g5re75Yqg5paH56ug6K+E6K666K6w5pWwXG4gICAgLy8gICAgIGF3YWl0IFBvc3QudXBkYXRlT25lKHsgX2lkOiBib2R5LnRpZCB9LCB7ICRpbmM6IHsgYW5zd2VyOiAxIH0gfSk7XG4gICAgLy8gICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0LmZpbmRCeVBvc3RJZChib2R5LnRpZCk7XG4gICAgLy8gICAgIG5ld0NvbW1lbnQudWlkID0gcG9zdC51aWQuX2lkOyAvLyDkv53lrZjluJblrZDkvZzogIXnmoRpZFxuICAgIC8vICAgICBjb25zdCBjb21tZW50ID0gYXdhaXQgbmV3Q29tbWVudC5zYXZlKCk7XG5cbiAgICAvLyAgICAgLy8g6LCD55So5b6u5L+h6K6i6ZiF5raI5oGvYXBpXG4gICAgLy8gICAgIC8vIDHjgIHlj5HluJbnmoTkvZzogIXlv4XpobvmmK/nlKjlvq7kv6HnmbvlvZXnmoTmiY3lj6/ku6XmjqXmlLborqLpmIXmtojmga9cbiAgICAvLyAgICAgLy8gMuOAgeiHquW3seS4jeiDvee7meiHquW3seWPkeiuoumYhea2iOaBr1xuICAgIC8vICAgICBpZiAob2JqLl9pZCAhPT0gcG9zdC51aWQuX2lkLnRvU3RyaW5nKCkgJiYgcG9zdC51aWQub3BlbmlkKSB7XG4gICAgLy8gICAgICAgICBhd2FpdCB3eFNlbmRNZXNzYWdlKGJvZHksIHBvc3QsIHVzZXIpO1xuICAgIC8vICAgICB9XG5cbiAgICAvLyAgICAgY3R4LmJvZHkgPSB7XG4gICAgLy8gICAgICAgICBtc2c6ICflm57luJbmiJDlip8nLFxuICAgIC8vICAgICAgICAgY29kZTogMCxcbiAgICAvLyAgICAgICAgIGRhdGE6IGNvbW1lbnQsXG4gICAgLy8gICAgIH07XG4gICAgLy8gfVxuICAgIC8vIOabtOaWsOivhOiuulxuICAgIGFzeW5jIHVwZGF0ZUNvbW1lbnQoY3R4KSB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgY2FuUmVwbHkoY3R4KTtcbiAgICAgICAgaWYgKCFjaGVjaykge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+eUqOaIt+W3suiiq+emgeiogO+8gScsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvbW1lbnRzLnVwZGF0ZU9uZSh7IF9pZDogYm9keS5jaWQgfSwgeyAkc2V0OiBib2R5IH0pO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBtc2c6ICfkv67mlLnmiJDlip8nLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyDph4fnurPmnIDkvbPnrZTmoYhcbiAgICBhc3luYyBzZXRCZXN0KGN0eCkge1xuICAgICAgICAvLyDlr7nnlKjmiLfmnYPpmZDnmoTliKTmlq3vvIxwb3N0IHVpZCAtPiBoZWFkZXIgaWRcbiAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgICAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcgJiYgb2JqLl9pZCAhPT0gJycpIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6ICc0MDEnLFxuICAgICAgICAgICAgICAgIG1zZzogJ+eUqOaIt+acqueZu+W9le+8jOaIluiAheeUqOaIt+acquWPl+adgycsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3QuZmluZE9uZSh7IF9pZDogcGFyYW1zLnRpZCB9KTtcbiAgICAgICAgaWYgKHBvc3QudWlkID09PSBvYmouX2lkICYmIHBvc3QuaXNFbmQgPT09ICcwJykge1xuICAgICAgICAgICAgLy8g6K+05piO6L+Z5piv5L2c6ICF5pys5Lq677yM5Y+v5Lul5Y676K6+572uaXNCZXN0XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQb3N0LnVwZGF0ZU9uZShcbiAgICAgICAgICAgICAgICB7IF9pZDogcGFyYW1zLnRpZCB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJHNldDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNFbmQ6ICcxJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0MSA9IGF3YWl0IENvbW1lbnRzLnVwZGF0ZU9uZSh7IF9pZDogcGFyYW1zLmNpZCB9LCB7ICRzZXQ6IHsgaXNCZXN0OiAnMScgfSB9KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQubW9kaWZpZWRDb3VudCA9PT0gMSAmJiByZXN1bHQxLm1vZGlmaWVkQ291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAvLyDmiornp6/liIblgLznu5nph4fnurPnmoTnlKjmiLdcbiAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50ID0gYXdhaXQgQ29tbWVudHMuZmluZEJ5Q2lkKHBhcmFtcy5jaWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdDIgPSBhd2FpdCBVc2VyLnVwZGF0ZU9uZSh7IF9pZDogY29tbWVudC5jdWlkIH0sIHsgJGluYzogeyBmYXZzOiBwYXJzZUludChwb3N0LmZhdikgfSB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Mi5tb2RpZmllZENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogJ+iuvue9ruaIkOWKnycsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHQyLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiAn6K6+572u5pyA5L2z562U5qGILeabtOaWsOeUqOaIt+Wksei0pScsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgICAgICBtc2c6ICforr7nva7lpLHotKUnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IC4uLnJlc3VsdCwgLi4ucmVzdWx0MSB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn5biW5a2Q5bey57uT6LS077yM5peg5rOV6YeN5aSN6K6+572uJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzZXRIYW5kcyhjdHgpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIC8vIOWIpOaWreeUqOaIt+aYr+WQpuW3sue7j+eCuei1nlxuICAgICAgICBjb25zdCB0bXAgPSBhd2FpdCBDb21tZW50c0hhbmRzLmZpbmQoeyBjaWQ6IHBhcmFtcy5jaWQsIHVpZDogb2JqLl9pZCB9KTtcbiAgICAgICAgaWYgKHRtcC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+aCqOW3sue7j+eCuei1nu+8jOivt+WLv+mHjeWkjeeCuei1nicsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIOaWsOWinuS4gOadoeeCuei1nuiusOW9lVxuICAgICAgICBjb25zdCBjb21tZW50ID0gYXdhaXQgQ29tbWVudHMuZmluZEJ5SWQocGFyYW1zLmNpZCk7XG4gICAgICAgIGNvbnN0IG5ld0hhbmRzID0gbmV3IENvbW1lbnRzSGFuZHMoe1xuICAgICAgICAgICAgY2lkOiBwYXJhbXMuY2lkLCAvLyDor4TorrppZFxuICAgICAgICAgICAgaHVpZDogY29tbWVudC5jdWlkLCAvLyDooqvotZ7nlKjmiLdcbiAgICAgICAgICAgIHVpZDogb2JqLl9pZCwgLy8g5b2T5YmN55So5oi377yM5Y2z54K56LWe55So5oi3XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgbmV3SGFuZHMuc2F2ZSgpO1xuICAgICAgICAvLyDmm7TmlrBjb21tZW50c+ihqOS4reWvueW6lOeahOiusOW9leeahGhhbmRz5L+h5oGvICsxXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvbW1lbnRzLnVwZGF0ZU9uZSh7IF9pZDogcGFyYW1zLmNpZCB9LCB7ICRpbmM6IHsgaGFuZHM6IDEgfSB9KTtcbiAgICAgICAgaWYgKHJlc3VsdC5tb2RpZmllZENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+eCuei1nuaIkOWKnycsXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn5L+d5a2Y54K56LWe6K6w5b2V5aSx6LSl77yBJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDojrflj5bliKvkurrlr7nmiJHnmoTluJblrZDnmoTmnIDmlrDor4TorrpcbiAgICAvLyBhc3luYyBnZXRDb21tZW50c09uTWUoY3R4KSB7XG4gICAgLy8gICAgIGNvbnN0IGJvZHkgPSBjdHgucXVlcnk7XG4gICAgLy8gICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKTtcbiAgICAvLyAgICAgY29uc3QgbGltaXQgPSBib2R5LmxpbWl0IHx8IDEwO1xuICAgIC8vICAgICBjb25zdCBwYWdlID0gYm9keS5wYWdlIHx8IDA7XG4gICAgLy8gICAgIGNvbnN0IGNvbW1lbnRzID0gYXdhaXQgQ29tbWVudHMuZ2V0Q29tbWVudHNPbk1lKG9iai5faWQsIHBhZ2UgKiBsaW1pdCwgbGltaXQpO1xuICAgIC8vICAgICBjb21tZW50cy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgIC8vICAgICAgICAgaXRlbS50aWQuY29udGVudCA9IGl0ZW0udGlkLmNvbnRlbnQuc2xpY2UoMCwgMTU1KTtcbiAgICAvLyAgICAgfSk7XG5cbiAgICAvLyAgICAgY3R4LmJvZHkgPSB7XG4gICAgLy8gICAgICAgICBjb2RlOiAwLFxuICAgIC8vICAgICAgICAgY29tbWVudHMsXG4gICAgLy8gICAgIH07XG4gICAgLy8gfVxuXG4gICAgLy8g6I635Y+W5a+55oiR54K56LWe55qE55So5oi3XG4gICAgLy8gYXN5bmMgZ2V0SGFuZFVzZXJzT25NZShjdHgpIHtcbiAgICAvLyAgICAgY29uc3QgYm9keSA9IGN0eC5xdWVyeTtcbiAgICAvLyAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgIC8vICAgICBjb25zdCBsaW1pdCA9IGJvZHkubGltaXQgfHwgMTA7XG4gICAgLy8gICAgIGNvbnN0IHBhZ2UgPSBib2R5LnBhZ2UgfHwgMDtcbiAgICAvLyAgICAgY29uc3QgaGFuZFVzZXJzID0gYXdhaXQgQ29tbWVudHNIYW5kcy5nZXRIYW5kVXNlcnNPbk1lKG9iai5faWQsIHBhZ2UgKiBsaW1pdCwgbGltaXQpO1xuXG4gICAgLy8gICAgIGN0eC5ib2R5ID0ge1xuICAgIC8vICAgICAgICAgY29kZTogMCxcbiAgICAvLyAgICAgICAgIGhhbmRVc2VycyxcbiAgICAvLyAgICAgfTtcbiAgICAvLyB9XG5cbiAgICAvLyDlj5blvpfng63pl6jor4TorrpcbiAgICAvLyBhc3luYyBnZXRDb21tZW50c0NvdW50KGN0eCkge1xuICAgIC8vICAgICBjb25zdCBib2R5ID0gY3R4LnF1ZXJ5O1xuICAgIC8vICAgICBjb25zdCBjb21tZW50cyA9IGF3YWl0IENvbW1lbnRzLmdldENvbW1lbnRzQ291bnQoYm9keS5wYWdlKTtcbiAgICAvLyAgICAgY3R4LmJvZHkgPSB7XG4gICAgLy8gICAgICAgICBjb2RlOiAwLFxuICAgIC8vICAgICAgICAgY29tbWVudHMsXG4gICAgLy8gICAgIH07XG4gICAgLy8gfVxuXG4gICAgLy8g5Y+W5b6X5pyA5paw6K+E6K66XG4gICAgLy8gYXN5bmMgZ2V0TmV3Q29tbWVudHMoY3R4KSB7XG4gICAgLy8gICAgIGNvbnN0IGJvZHkgPSBjdHgucXVlcnk7XG4gICAgLy8gICAgIGNvbnN0IGNvbW1lbnRzID0gYXdhaXQgQ29tbWVudHMuZ2V0TmV3Q29tbWVudHMoYm9keS5wYWdlKTtcbiAgICAvLyAgICAgY29tbWVudHMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAvLyAgICAgICAgIGl0ZW0uY29udGVudCA9IGl0ZW0uY29udGVudC5zdWJzdHJpbmcoMCwgMzApO1xuICAgIC8vICAgICB9KTtcbiAgICAvLyAgICAgY3R4LmJvZHkgPSB7XG4gICAgLy8gICAgICAgICBjb2RlOiAwLFxuICAgIC8vICAgICAgICAgY29tbWVudHMsXG4gICAgLy8gICAgIH07XG4gICAgLy8gfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgQ29tbWVudHNDb250cm9sbGVyKCk7XG4iXSwibmFtZXMiOlsiQ29tbWVudHMiLCJQb3N0IiwiVXNlciIsImNoZWNrQ29kZSIsImdldEpXVFBheWxvYWQiLCJDb21tZW50c0hhbmRzIiwiY2FuUmVwbHkiLCJjdHgiLCJyZXN1bHQiLCJvYmoiLCJoZWFkZXIiLCJhdXRob3JpemF0aW9uIiwiX2lkIiwidXNlciIsImZpbmRCeUlEIiwic3RhdHVzIiwiQ29tbWVudHNDb250cm9sbGVyIiwiZ2V0Q29tbWVudHMiLCJwYXJhbXMiLCJxdWVyeSIsInRpZCIsInBhZ2UiLCJsaW1pdCIsInBhcnNlSW50IiwiZ2V0Q29tbWVudHNMaXN0IiwiYXV0aCIsIm1hcCIsIml0ZW0iLCJ0b0pTT04iLCJpIiwibGVuZ3RoIiwiaGFuZGVkIiwiY29tbWVudHNIYW5kcyIsImZpbmRPbmUiLCJjaWQiLCJ1aWQiLCJ0b3RhbCIsInF1ZXJ5Q291bnQiLCJib2R5IiwiY29kZSIsImRhdGEiLCJtc2ciLCJnZXRDb21tZW50UHVibGljIiwiZ2V0Q29tbWV0c1B1YmxpYyIsImFkZENvbW1lbnQiLCJjaGVjayIsInJlcXVlc3QiLCJzaWQiLCJuZXdDb21tZW50IiwiY3VpZCIsInBvc3QiLCJjb21tZW50Iiwic2F2ZSIsIm51bSIsImdldFRvdGFsIiwiZ2xvYmFsIiwid3MiLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImV2ZW50IiwibWVzc2FnZSIsInVwZGF0ZVBvc3RyZXN1bHQiLCJ1cGRhdGVPbmUiLCIkaW5jIiwiYW5zd2VyIiwibW9kaWZpZWRDb3VudCIsInVwZGF0ZUNvbW1lbnQiLCIkc2V0Iiwic2V0QmVzdCIsImlzRW5kIiwicmVzdWx0MSIsImlzQmVzdCIsImZpbmRCeUNpZCIsInJlc3VsdDIiLCJmYXZzIiwiZmF2Iiwic2V0SGFuZHMiLCJ0bXAiLCJmaW5kIiwiZmluZEJ5SWQiLCJuZXdIYW5kcyIsImh1aWQiLCJoYW5kcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/CommentsController.js\n\n}");

/***/ }),

/***/ "./src/api/ContentController.js":
/*!**************************************!*\
  !*** ./src/api/ContentController.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _model_Links__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/model/Links */ \"./src/model/Links.js\");\n/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/model/User */ \"./src/model/User.js\");\n/* harmony import */ var _model_PostTags__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/model/PostTags */ \"./src/model/PostTags.js\");\n/* harmony import */ var _model_Post__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/model/Post */ \"./src/model/Post.js\");\n/* harmony import */ var _model_UserCollect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/model/UserCollect */ \"./src/model/UserCollect.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! qs */ \"qs\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/config */ \"./src/config/index.js\");\n/* harmony import */ var _common_Utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/common/Utils */ \"./src/common/Utils.js\");\n/* harmony import */ var make_dir__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! make-dir */ \"make-dir\");\n/* harmony import */ var make_dir__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(make_dir__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_11__);\n\n\n\n\n\n\n\n\n\n// import { hwUpload } from '@/common/HwUtils';\n// import dirExists from '@/common/Utils';\n\n\n\n// import { wxMsgCheck, wxImgCheck } from '@/common/WxUtils';\nclass ContentController {\n  // 获取文章列表\n  async getPostList(ctx) {\n    const body = qs__WEBPACK_IMPORTED_MODULE_6___default().parse(ctx.query);\n    const sort = body.sort ? body.sort : 'created';\n    const page = body.page ? parseInt(body.page) : 0;\n    const limit = body.limit ? parseInt(body.limit) : 20;\n    const options = {};\n    if (body.title) {\n      options.title = {\n        $regex: body.title\n      };\n    }\n    if (body.catalog && body.catalog.length > 0) {\n      options.catalog = {\n        $in: body.catalog\n      };\n    }\n    if (body.isTop) {\n      options.isTop = body.isTop;\n    }\n    if (body.isEnd) {\n      options.isEnd = body.isEnd;\n    }\n    if (body.status) {\n      options.status = body.status;\n    }\n    if (typeof body.tag !== 'undefined' && body.tag !== '') {\n      options.tags = {\n        $elemMatch: {\n          name: body.tag\n        }\n      };\n    }\n    const result = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getList(options, sort, page, limit);\n    const total = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].countList(options);\n    ctx.body = {\n      code: 0,\n      data: result,\n      msg: '获取文章列表成功',\n      total: total\n    };\n  }\n\n  // 查询友链\n  async getLinks(ctx) {\n    const result = await _model_Links__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find({\n      type: 'links'\n    });\n    // const post = await Links({\n    //     title: '个人网站',\n    //     link: 'https://zzf.net.cn',\n    //     type: 'tips',\n    //     isTop: '0',\n    //     sort: '0'\n    // });\n\n    // const tmp = await post.save();\n    // console.log(tmp);\n\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n\n  // 查询温馨提醒\n  async getTips(ctx) {\n    const result = await _model_Links__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find({\n      type: 'tips'\n    });\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n\n  // 本周热议\n  async getTopWeek(ctx) {\n    const result = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTopWeek();\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n\n  // 上传图片\n  async uploadImg(ctx) {\n    const file = ctx.request.files.file;\n    // 图片名称、图片格式、存储的位置，返回前台一可以读取的路径\n    // 本地上传\n    // const ext = file.name.split('.').pop();\n    const ext = file.newFilename.split('.').pop();\n    const dir = `${_config__WEBPACK_IMPORTED_MODULE_8__[\"default\"].uploadPath}/${dayjs__WEBPACK_IMPORTED_MODULE_7___default()().format('YYYYMMDD')}`;\n    // // 判断路径是否存在，不存在则创建\n    await make_dir__WEBPACK_IMPORTED_MODULE_10___default()(dir);\n    // // 存储文件到指定的路径\n    // // 给文件一个唯一的名称\n    const picname = (0,uuid__WEBPACK_IMPORTED_MODULE_11__.v4)();\n    const destPath = `${dir}/${picname}.${ext}`;\n    const reader = fs__WEBPACK_IMPORTED_MODULE_5___default().createReadStream(file.filepath);\n    const upStream = fs__WEBPACK_IMPORTED_MODULE_5___default().createWriteStream(destPath);\n    const filePath = `/${dayjs__WEBPACK_IMPORTED_MODULE_7___default()().format('YYYYMMDD')}/${picname}.${ext}`;\n    // // method 1\n    reader.pipe(upStream);\n\n    // const stat = fs.statSync(file.filepath);\n    // 获取上传文件大小\n    // console.log(stat.size);\n    // method 2\n    // 控制上传进度\n    // let totalLength = 0;\n    // reader.on('data', chunk => {\n    //     totalLength += chunk.length;\n    //     console.log(totalLength);\n    //     if (upStream.write(chunk) === false) {\n    //         reader.pause();\n    //     }\n    // });\n\n    // upStream.on('drain', () => {\n    //     reader.resume();\n    // });\n\n    // reader.on('end', () => {\n    //     upStream.end();\n    // });\n\n    ctx.body = {\n      code: 0,\n      msg: '图片上传成功',\n      data: filePath\n    };\n\n    // 接第三方服务上传\n    // const result = await wxImgCheck(file);\n    // if (result.errcode === 0) {\n    //     const uuid = uuidv4();\n    //     // 图片名称、图片格式、存储的位置，返回前台一可以读取的路径\n    //     const user = await User.findByID(ctx._id);\n    //     const fileName = `${user.username}/${moment().format('YYYY-MM-DD')}/${uuid}-${file.name}`;\n    //     try {\n    //         const result = await hwUpload(fileName, file.path);\n    //         ctx.body = {\n    //             code: 0,\n    //             msg: '图片上传成功',\n    //             data: result,\n    //         };\n    //     } catch (error) {\n    //         ctx.body = {\n    //             code: 500,\n    //             msg: '图片上传失败' + error.message,\n    //         };\n    //     }\n    // } else {\n    //     ctx.body = {\n    //         code: 0,\n    //         msg: result.errmsg,\n    //     };\n    // }\n  }\n\n  // 添加新贴\n  async addPost(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const sid = body.sid;\n    const code = body.code;\n    // 验证图片验证码的时效性、正确性\n    const result = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_9__.checkCode)(sid, code);\n    if (result) {\n      const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_9__.getJWTPayload)(ctx.header.authorization);\n      // 判断用户的积分数是否 > fav，否则，提示用户积分不足发贴\n      // 用户积分足够的时候，新建Post，减除用户对应的积分\n      const user = await _model_User__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findByID({\n        _id: obj._id\n      });\n      if (user.favs < body.fav) {\n        ctx.body = {\n          code: 501,\n          msg: '积分不足'\n        };\n        return;\n      } else {\n        await _model_User__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateOne({\n          _id: obj._id\n        }, {\n          $inc: {\n            favs: -body.fav\n          }\n        });\n      }\n      const newPost = new _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"](body);\n      newPost.uid = obj._id;\n      const result = await newPost.save();\n      ctx.body = {\n        code: 0,\n        msg: '成功的保存的文章',\n        data: result\n      };\n    } else {\n      // 图片验证码验证失败\n      ctx.body = {\n        code: 500,\n        msg: '图片验证码验证失败'\n      };\n    }\n  }\n\n  // 更新帖子\n  async updatePost(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const sid = body.sid;\n    const code = body.code;\n    // 验证图片验证码的时效性、正确性\n    const result = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_9__.checkCode)(sid, code);\n    if (result) {\n      const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_9__.getJWTPayload)(ctx.header.authorization);\n      // 判断帖子作者是否为本人\n      const post = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n        _id: body.tid\n      });\n      // 判断帖子是否结贴\n      if (post.uid === obj._id && post.isEnd === '0') {\n        const result = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateOne({\n          _id: body.tid\n        }, body);\n        if (result.modifiedCount === 1) {\n          ctx.body = {\n            code: 0,\n            data: result,\n            msg: '更新帖子成功'\n          };\n        } else {\n          ctx.body = {\n            code: 500,\n            data: result,\n            msg: '编辑帖子，更新失败'\n          };\n        }\n      } else {\n        ctx.body = {\n          code: 401,\n          msg: '没有操作的权限'\n        };\n      }\n    } else {\n      // 图片验证码验证失败\n      ctx.body = {\n        code: 500,\n        msg: '图片验证码验证失败'\n      };\n    }\n  }\n  async updatePostByTid(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const result = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateOne({\n      _id: body._id\n    }, body);\n    if (result.modifiedCount === 1) {\n      ctx.body = {\n        code: 0,\n        data: result,\n        msg: '更新帖子成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        data: result,\n        msg: '编辑帖子，更新失败'\n      };\n    }\n  }\n\n  // 获取文章详情\n  async getPostDetail(ctx) {\n    const params = ctx.query;\n    if (!params.tid) {\n      ctx.body = {\n        code: 500,\n        msg: '文章id为空'\n      };\n      return;\n    }\n    // const post = await Post.findOne({ _id: params.tid })\n    const post = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findByTid(params.tid);\n\n    // if (!post) {\n    //     ctx.body = {\n    //         code: 0,\n    //         data: {},\n    //         msg: '查询文章详情成功',\n    //     };\n    //     return;\n    // }\n    let isFav = 0;\n    // 判断用户是否传递Authorization的数据，即是否登录\n    if (typeof ctx.header.authorization !== 'undefined' && ctx.header.authorization !== '') {\n      const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_9__.getJWTPayload)(ctx.header.authorization);\n      const userCollect = await _model_UserCollect__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findOne({\n        uid: obj._id,\n        tid: params.tid\n      });\n      if (userCollect && userCollect.tid) {\n        isFav = 1;\n      }\n      // await PostHistory.addOrUpdate(obj._id, params.tid); // 添加浏览记录\n    }\n    const newPost = post.toJSON();\n    newPost.isFav = isFav;\n    // 更新文章阅读记数\n    const result = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateOne({\n      _id: params.tid\n    }, {\n      $inc: {\n        reads: 1\n      }\n    });\n    if (post._id && result.modifiedCount === 1) {\n      ctx.body = {\n        code: 0,\n        data: newPost,\n        msg: '查询文章详情成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '获取文章详情失败'\n      };\n    }\n  }\n\n  // 获取用户发贴记录\n  async getPostByUid(ctx) {\n    const params = ctx.query;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_9__.getJWTPayload)(ctx.header.authorization);\n    const result = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getListByUid(obj._id, params.page, params.limit ? parseInt(params.limit) : 10);\n    const total = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].countByUid(obj._id);\n    if (result.length > 0) {\n      ctx.body = {\n        code: 0,\n        data: result,\n        total,\n        msg: '查询列表成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '查询列表失败'\n      };\n    }\n  }\n\n  // 获取用户发贴记录\n  async getPostPublic(ctx) {\n    const params = ctx.query;\n    const result = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getListByUid(params.uid, params.page, params.limit ? parseInt(params.limit) : 10);\n    const total = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].countByUid(params.uid);\n    if (result.length > 0) {\n      ctx.body = {\n        code: 0,\n        data: result,\n        total,\n        msg: '查询列表成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '查询列表失败'\n      };\n    }\n  }\n\n  // 删除发贴记录\n  async deletePostByUid(ctx) {\n    const params = ctx.query;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_9__.getJWTPayload)(ctx.header.authorization);\n    const post = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n      uid: obj._id,\n      _id: params.tid\n    });\n    if (post.id === params.tid && post.isEnd === '0') {\n      // await ContentController.prototype.deletePost(ctx);\n      const result = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].deleteOne({\n        _id: params.tid\n      });\n      if (result.deletedCount === 1) {\n        ctx.body = {\n          code: 0,\n          msg: '删除成功'\n        };\n      } else {\n        ctx.body = {\n          code: 500,\n          msg: '执行删除失败！'\n        };\n      }\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '删除失败，无权限！'\n      };\n    }\n  }\n  async deletePost(ctx) {\n    const {\n      body\n    } = ctx.request;\n    // 删除帖子的同时要删除关联表中的数据\n    const result = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].deleteManyAndRef({\n      _id: {\n        $in: body.ids\n      }\n    });\n    if (result.deletedCount === 1) {\n      ctx.body = {\n        code: 0,\n        msg: '删除成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '执行删除失败！'\n      };\n    }\n  }\n\n  // 添加标签\n  async addTag(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const tag = new _model_PostTags__WEBPACK_IMPORTED_MODULE_2__[\"default\"](body);\n    await tag.save();\n    ctx.body = {\n      code: 0,\n      msg: '标签保存成功'\n    };\n  }\n\n  // 添加标签\n  async getTags(ctx) {\n    const params = ctx.query;\n    const page = params.page ? parseInt(params.page) : 0;\n    const limit = params.limit ? parseInt(params.limit) : 10;\n    const result = await _model_PostTags__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getList({}, page, limit);\n    const total = await _model_PostTags__WEBPACK_IMPORTED_MODULE_2__[\"default\"].countList({});\n    ctx.body = {\n      code: 0,\n      data: result,\n      total,\n      msg: '查询tags成功！'\n    };\n  }\n\n  // 删除标签\n  async removeTag(ctx) {\n    const params = ctx.query;\n    const result = await _model_PostTags__WEBPACK_IMPORTED_MODULE_2__[\"default\"].deleteOne({\n      id: params.ptid\n    });\n    ctx.body = {\n      code: 0,\n      data: result,\n      msg: '删除成功'\n    };\n  }\n\n  // 删除标签\n  async updateTag(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const result = await _model_PostTags__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n      _id: body._id\n    }, body);\n    ctx.body = {\n      code: 0,\n      data: result,\n      msg: '更新成功'\n    };\n  }\n\n  // 批量修改帖子\n  async updatePostBatch(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const result = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateMany({\n      _id: {\n        $in: body.ids\n      }\n    }, {\n      $set: {\n        ...body.settings\n      }\n    });\n    ctx.body = {\n      code: 200,\n      data: result\n    };\n  }\n\n  // 取得浏览历史列表\n  async getPostHistory(ctx) {\n    const body = ctx.query;\n    const limit = parseInt(body.limit) || 10;\n    const skip = ((body.currentPage || 1) - 1) * limit;\n    const historyList = await PostHistory.getListByUid(body.uid, skip, limit);\n    ctx.body = {\n      code: 200,\n      historyList\n    };\n  }\n\n  // 收藏帖子\n  async setCollect(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_9__.getJWTPayload)(ctx.header.authorization);\n    const isCollect = body.isCollect;\n    // isCollect false - 未收藏 => 转成收藏， true - 收藏了 => 删除收藏\n    const result = await _model_UserCollect__WEBPACK_IMPORTED_MODULE_4__[\"default\"].handleCollect(obj._id, body.tid, isCollect);\n    ctx.body = {\n      code: 200,\n      data: result,\n      isCollect: !isCollect,\n      msg: isCollect ? '已取消收藏！' : '收藏成功！'\n    };\n  }\n\n  // 查询是否收藏过某个帖子\n  async checkCollect(ctx) {\n    const body = ctx.query;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_9__.getJWTPayload)(ctx.header.authorization);\n    const result = await _model_UserCollect__WEBPACK_IMPORTED_MODULE_4__[\"default\"].findOne({\n      uid: obj._id,\n      tid: body.tid\n    });\n    let isCollect = false;\n    if (result) {\n      isCollect = true;\n    }\n    ctx.body = {\n      code: 200,\n      isCollect: isCollect,\n      msg: '查询收藏成功'\n    };\n  }\n\n  // 获取近几天的热门帖子\n  async getTopByDay(ctx) {\n    try {\n      const body = ctx.query;\n      const post = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTopByDay(body.days, body.page);\n      ctx.body = {\n        msg: '',\n        code: 200,\n        data: post\n      };\n    } catch (e) {\n      ctx.body = {\n        msg: '热门帖子失败',\n        code: 500\n      };\n    }\n  }\n  async getAllPostByUid(ctx) {\n    const body = ctx.query;\n    const uid = body.uid;\n    const catalog = body.catalog || '';\n    const limit = body.pageSize || 10;\n    const pageSize = body.currentPage || 1;\n    try {\n      const postsList = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].queryByUserId(uid, parseInt(limit), parseInt(pageSize), catalog);\n      const total = await _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"].queryCount({\n        uid: ctx.query.uid\n      });\n      if (body.startTime) {\n        // options.created = { $gte: body.startTime, $lt: body.endTime }\n      }\n      ctx.body = {\n        code: 200,\n        total: total,\n        data: postsList\n      };\n    } catch (e) {\n      ctx.body = {\n        msg: '获取列表失败',\n        code: 500\n      };\n    }\n  }\n  async getCollectList(ctx) {\n    // 获取详细的用户收藏列表\n    const body = ctx.query;\n    const uid = body.uid;\n    const limit = parseInt(body.limit) || 10;\n    const skip = ((body.currentPage || 1) - 1) * limit;\n    const collectList = await _model_UserCollect__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getCollectList(uid, skip, limit);\n    ctx.body = {\n      code: 200,\n      collectList\n    };\n  }\n  async deletePostHistory(ctx) {\n    // 删除浏览记录\n    const body = ctx.query;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_9__.getJWTPayload)(ctx.header.authorization);\n    const result = await PostHistory.delOne(obj._id, body.tid);\n    ctx.body = {\n      code: 200,\n      result\n    };\n  }\n  async deleteCollect(ctx) {\n    // 删除用户收藏\n    const body = ctx.query;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_9__.getJWTPayload)(ctx.header.authorization);\n    const result = await _model_UserCollect__WEBPACK_IMPORTED_MODULE_4__[\"default\"].deleteCollect(obj._id, body.tid);\n    ctx.body = {\n      code: 200,\n      result\n    };\n  }\n\n  // 小程序新增文章\n  async wxAddPost(ctx) {\n    const {\n      body\n    } = ctx.request;\n    try {\n      const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_9__.getJWTPayload)(ctx.header.authorization);\n      let post = {};\n      const _user = await _model_User__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n        _id: obj._id\n      });\n      if (_user.favs < body.fav) {\n        ctx.body = {\n          code: 200,\n          msg: '您的积分不足！'\n        };\n        return;\n      } else {\n        // 扣除相应的积分\n        await _model_User__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateOne({\n          _id: obj._id\n        }, {\n          favs: _user.favs - body.fav\n        });\n      }\n      const newPost = new _model_Post__WEBPACK_IMPORTED_MODULE_3__[\"default\"](body);\n      newPost.uid = obj._id;\n      post = await newPost.save();\n      ctx.body = {\n        msg: '',\n        code: 200,\n        data: post\n      };\n    } catch (e) {\n      // console.log(e)\n      ctx.body = {\n        msg: '添加文章详情失败',\n        code: 500\n      };\n    }\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new ContentController());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJLEdBQUc1RCxJQUFJLENBQUM2RCxHQUFHLEVBQUU7UUFDdkI5RCxHQUFHLENBQUNDLElBQUksR0FBRztVQUNQd0IsSUFBSSxFQUFFLEdBQUc7VUFDVEUsR0FBRyxFQUFFO1FBQ1QsQ0FBQztRQUNEO01BQ0osQ0FBQyxNQUFNO1FBQ0g7UUFDQSxNQUFNMUMsbURBQUksQ0FBQzhFLFNBQVMsQ0FBQztVQUFFSCxHQUFHLEVBQUVMLEdBQUcsQ0FBQ0s7UUFBSSxDQUFDLEVBQUU7VUFBRUMsSUFBSSxFQUFFZ0UsS0FBSyxDQUFDaEUsSUFBSSxHQUFHNUQsSUFBSSxDQUFDNkQ7UUFBSSxDQUFDLENBQUM7TUFDM0U7TUFDQSxNQUFNRyxPQUFPLEdBQUcsSUFBSTlFLG1EQUFJLENBQUNjLElBQUksQ0FBQztNQUM5QmdFLE9BQU8sQ0FBQ0MsR0FBRyxHQUFHWCxHQUFHLENBQUNLLEdBQUc7TUFDckJTLElBQUksR0FBRyxNQUFNSixPQUFPLENBQUNFLElBQUksQ0FBQyxDQUFDO01BQzNCbkUsR0FBRyxDQUFDQyxJQUFJLEdBQUc7UUFDUDBCLEdBQUcsRUFBRSxFQUFFO1FBQ1BGLElBQUksRUFBRSxHQUFHO1FBQ1RDLElBQUksRUFBRTJDO01BQ1YsQ0FBQztJQUNMLENBQUMsQ0FBQyxPQUFPMkMsQ0FBQyxFQUFFO01BQ1I7TUFDQWhILEdBQUcsQ0FBQ0MsSUFBSSxHQUFHO1FBQ1AwQixHQUFHLEVBQUUsVUFBVTtRQUNmRixJQUFJLEVBQUU7TUFDVixDQUFDO0lBQ0w7RUFDSjtBQUNKO0FBRUEsaUVBQWUsSUFBSTNCLGlCQUFpQixDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvYXBpL0NvbnRlbnRDb250cm9sbGVyLmpzPzI1NjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExpbmtzIGZyb20gJ0AvbW9kZWwvTGlua3MnO1xuaW1wb3J0IFVzZXIgZnJvbSAnQC9tb2RlbC9Vc2VyJztcbmltcG9ydCBQb3N0VGFncyBmcm9tICdAL21vZGVsL1Bvc3RUYWdzJztcbmltcG9ydCBQb3N0IGZyb20gJ0AvbW9kZWwvUG9zdCc7XG5pbXBvcnQgVXNlckNvbGxlY3QgZnJvbSAnQC9tb2RlbC9Vc2VyQ29sbGVjdCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHFzIGZyb20gJ3FzJztcbmltcG9ydCBtb21lbnQgZnJvbSAnZGF5anMnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICdAL2NvbmZpZyc7XG4vLyBpbXBvcnQgeyBod1VwbG9hZCB9IGZyb20gJ0AvY29tbW9uL0h3VXRpbHMnO1xuLy8gaW1wb3J0IGRpckV4aXN0cyBmcm9tICdAL2NvbW1vbi9VdGlscyc7XG5pbXBvcnQgeyBjaGVja0NvZGUsIGdldEpXVFBheWxvYWQgfSBmcm9tICdAL2NvbW1vbi9VdGlscyc7XG5pbXBvcnQgbWFrZURpcmVjdG9yeSBmcm9tICdtYWtlLWRpcic7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbi8vIGltcG9ydCB7IHd4TXNnQ2hlY2ssIHd4SW1nQ2hlY2sgfSBmcm9tICdAL2NvbW1vbi9XeFV0aWxzJztcbmNsYXNzIENvbnRlbnRDb250cm9sbGVyIHtcbiAgICAvLyDojrflj5bmlofnq6DliJfooahcbiAgICBhc3luYyBnZXRQb3N0TGlzdChjdHgpIHtcbiAgICAgICAgY29uc3QgYm9keSA9IHFzLnBhcnNlKGN0eC5xdWVyeSk7XG5cbiAgICAgICAgY29uc3Qgc29ydCA9IGJvZHkuc29ydCA/IGJvZHkuc29ydCA6ICdjcmVhdGVkJztcbiAgICAgICAgY29uc3QgcGFnZSA9IGJvZHkucGFnZSA/IHBhcnNlSW50KGJvZHkucGFnZSkgOiAwO1xuICAgICAgICBjb25zdCBsaW1pdCA9IGJvZHkubGltaXQgPyBwYXJzZUludChib2R5LmxpbWl0KSA6IDIwO1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge307XG5cbiAgICAgICAgaWYgKGJvZHkudGl0bGUpIHtcbiAgICAgICAgICAgIG9wdGlvbnMudGl0bGUgPSB7ICRyZWdleDogYm9keS50aXRsZSB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChib2R5LmNhdGFsb2cgJiYgYm9keS5jYXRhbG9nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG9wdGlvbnMuY2F0YWxvZyA9IHsgJGluOiBib2R5LmNhdGFsb2cgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYm9keS5pc1RvcCkge1xuICAgICAgICAgICAgb3B0aW9ucy5pc1RvcCA9IGJvZHkuaXNUb3A7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJvZHkuaXNFbmQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaXNFbmQgPSBib2R5LmlzRW5kO1xuICAgICAgICB9XG4gICAgICAgIGlmIChib2R5LnN0YXR1cykge1xuICAgICAgICAgICAgb3B0aW9ucy5zdGF0dXMgPSBib2R5LnN0YXR1cztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGJvZHkudGFnICE9PSAndW5kZWZpbmVkJyAmJiBib2R5LnRhZyAhPT0gJycpIHtcbiAgICAgICAgICAgIG9wdGlvbnMudGFncyA9IHsgJGVsZW1NYXRjaDogeyBuYW1lOiBib2R5LnRhZyB9IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUG9zdC5nZXRMaXN0KG9wdGlvbnMsIHNvcnQsIHBhZ2UsIGxpbWl0KTtcbiAgICAgICAgY29uc3QgdG90YWwgPSBhd2FpdCBQb3N0LmNvdW50TGlzdChvcHRpb25zKTtcblxuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICBtc2c6ICfojrflj5bmlofnq6DliJfooajmiJDlip8nLFxuICAgICAgICAgICAgdG90YWw6IHRvdGFsLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOafpeivouWPi+mTvlxuICAgIGFzeW5jIGdldExpbmtzKGN0eCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBMaW5rcy5maW5kKHsgdHlwZTogJ2xpbmtzJyB9KTtcbiAgICAgICAgLy8gY29uc3QgcG9zdCA9IGF3YWl0IExpbmtzKHtcbiAgICAgICAgLy8gICAgIHRpdGxlOiAn5Liq5Lq6572R56uZJyxcbiAgICAgICAgLy8gICAgIGxpbms6ICdodHRwczovL3p6Zi5uZXQuY24nLFxuICAgICAgICAvLyAgICAgdHlwZTogJ3RpcHMnLFxuICAgICAgICAvLyAgICAgaXNUb3A6ICcwJyxcbiAgICAgICAgLy8gICAgIHNvcnQ6ICcwJ1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICAvLyBjb25zdCB0bXAgPSBhd2FpdCBwb3N0LnNhdmUoKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2codG1wKTtcblxuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g5p+l6K+i5rip6aao5o+Q6YaSXG4gICAgYXN5bmMgZ2V0VGlwcyhjdHgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgTGlua3MuZmluZCh7IHR5cGU6ICd0aXBzJyB9KTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOacrOWRqOeDreiurlxuICAgIGFzeW5jIGdldFRvcFdlZWsoY3R4KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFBvc3QuZ2V0VG9wV2VlaygpO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g5LiK5Lyg5Zu+54mHXG4gICAgYXN5bmMgdXBsb2FkSW1nKGN0eCkge1xuICAgICAgICBjb25zdCBmaWxlID0gY3R4LnJlcXVlc3QuZmlsZXMuZmlsZTtcbiAgICAgICAgLy8g5Zu+54mH5ZCN56ew44CB5Zu+54mH5qC85byP44CB5a2Y5YKo55qE5L2N572u77yM6L+U5Zue5YmN5Y+w5LiA5Y+v5Lul6K+75Y+W55qE6Lev5b6EXG4gICAgICAgIC8vIOacrOWcsOS4iuS8oFxuICAgICAgICAvLyBjb25zdCBleHQgPSBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKTtcbiAgICAgICAgY29uc3QgZXh0ID0gZmlsZS5uZXdGaWxlbmFtZS5zcGxpdCgnLicpLnBvcCgpO1xuICAgICAgICBjb25zdCBkaXIgPSBgJHtjb25maWcudXBsb2FkUGF0aH0vJHttb21lbnQoKS5mb3JtYXQoJ1lZWVlNTUREJyl9YDtcbiAgICAgICAgLy8gLy8g5Yik5pat6Lev5b6E5piv5ZCm5a2Y5Zyo77yM5LiN5a2Y5Zyo5YiZ5Yib5bu6XG4gICAgICAgIGF3YWl0IG1ha2VEaXJlY3RvcnkoZGlyKTtcbiAgICAgICAgLy8gLy8g5a2Y5YKo5paH5Lu25Yiw5oyH5a6a55qE6Lev5b6EXG4gICAgICAgIC8vIC8vIOe7meaWh+S7tuS4gOS4quWUr+S4gOeahOWQjeensFxuICAgICAgICBjb25zdCBwaWNuYW1lID0gdXVpZHY0KCk7XG4gICAgICAgIGNvbnN0IGRlc3RQYXRoID0gYCR7ZGlyfS8ke3BpY25hbWV9LiR7ZXh0fWA7XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IGZzLmNyZWF0ZVJlYWRTdHJlYW0oZmlsZS5maWxlcGF0aCk7XG4gICAgICAgIGNvbnN0IHVwU3RyZWFtID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0oZGVzdFBhdGgpO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAvJHttb21lbnQoKS5mb3JtYXQoJ1lZWVlNTUREJyl9LyR7cGljbmFtZX0uJHtleHR9YDtcbiAgICAgICAgLy8gLy8gbWV0aG9kIDFcbiAgICAgICAgcmVhZGVyLnBpcGUodXBTdHJlYW0pO1xuXG4gICAgICAgIC8vIGNvbnN0IHN0YXQgPSBmcy5zdGF0U3luYyhmaWxlLmZpbGVwYXRoKTtcbiAgICAgICAgLy8g6I635Y+W5LiK5Lyg5paH5Lu25aSn5bCPXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHN0YXQuc2l6ZSk7XG4gICAgICAgIC8vIG1ldGhvZCAyXG4gICAgICAgIC8vIOaOp+WItuS4iuS8oOi/m+W6plxuICAgICAgICAvLyBsZXQgdG90YWxMZW5ndGggPSAwO1xuICAgICAgICAvLyByZWFkZXIub24oJ2RhdGEnLCBjaHVuayA9PiB7XG4gICAgICAgIC8vICAgICB0b3RhbExlbmd0aCArPSBjaHVuay5sZW5ndGg7XG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyh0b3RhbExlbmd0aCk7XG4gICAgICAgIC8vICAgICBpZiAodXBTdHJlYW0ud3JpdGUoY2h1bmspID09PSBmYWxzZSkge1xuICAgICAgICAvLyAgICAgICAgIHJlYWRlci5wYXVzZSgpO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9KTtcblxuICAgICAgICAvLyB1cFN0cmVhbS5vbignZHJhaW4nLCAoKSA9PiB7XG4gICAgICAgIC8vICAgICByZWFkZXIucmVzdW1lKCk7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIC8vIHJlYWRlci5vbignZW5kJywgKCkgPT4ge1xuICAgICAgICAvLyAgICAgdXBTdHJlYW0uZW5kKCk7XG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgIG1zZzogJ+WbvueJh+S4iuS8oOaIkOWKnycsXG4gICAgICAgICAgICBkYXRhOiBmaWxlUGF0aCxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDmjqXnrKzkuInmlrnmnI3liqHkuIrkvKBcbiAgICAgICAgLy8gY29uc3QgcmVzdWx0ID0gYXdhaXQgd3hJbWdDaGVjayhmaWxlKTtcbiAgICAgICAgLy8gaWYgKHJlc3VsdC5lcnJjb2RlID09PSAwKSB7XG4gICAgICAgIC8vICAgICBjb25zdCB1dWlkID0gdXVpZHY0KCk7XG4gICAgICAgIC8vICAgICAvLyDlm77niYflkI3np7DjgIHlm77niYfmoLzlvI/jgIHlrZjlgqjnmoTkvY3nva7vvIzov5Tlm57liY3lj7DkuIDlj6/ku6Xor7vlj5bnmoTot6/lvoRcbiAgICAgICAgLy8gICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlEKGN0eC5faWQpO1xuICAgICAgICAvLyAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHt1c2VyLnVzZXJuYW1lfS8ke21vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpfS8ke3V1aWR9LSR7ZmlsZS5uYW1lfWA7XG4gICAgICAgIC8vICAgICB0cnkge1xuICAgICAgICAvLyAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGh3VXBsb2FkKGZpbGVOYW1lLCBmaWxlLnBhdGgpO1xuICAgICAgICAvLyAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAvLyAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAvLyAgICAgICAgICAgICBtc2c6ICflm77niYfkuIrkvKDmiJDlip8nLFxuICAgICAgICAvLyAgICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgIC8vICAgICAgICAgfTtcbiAgICAgICAgLy8gICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgLy8gICAgICAgICAgICAgbXNnOiAn5Zu+54mH5LiK5Lyg5aSx6LSlJyArIGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIC8vICAgICAgICAgfTtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAvLyAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgIC8vICAgICAgICAgbXNnOiByZXN1bHQuZXJybXNnLFxuICAgICAgICAvLyAgICAgfTtcbiAgICAgICAgLy8gfVxuICAgIH1cblxuICAgIC8vIOa3u+WKoOaWsOi0tFxuICAgIGFzeW5jIGFkZFBvc3QoY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHNpZCA9IGJvZHkuc2lkO1xuICAgICAgICBjb25zdCBjb2RlID0gYm9keS5jb2RlO1xuICAgICAgICAvLyDpqozor4Hlm77niYfpqozor4HnoIHnmoTml7bmlYjmgKfjgIHmraPnoa7mgKdcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hlY2tDb2RlKHNpZCwgY29kZSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKTtcbiAgICAgICAgICAgIC8vIOWIpOaWreeUqOaIt+eahOenr+WIhuaVsOaYr+WQpiA+IGZhdu+8jOWQpuWIme+8jOaPkOekuueUqOaIt+enr+WIhuS4jei2s+WPkei0tFxuICAgICAgICAgICAgLy8g55So5oi356ev5YiG6Laz5aSf55qE5pe25YCZ77yM5paw5bu6UG9zdO+8jOWHj+mZpOeUqOaIt+WvueW6lOeahOenr+WIhlxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SUQoeyBfaWQ6IG9iai5faWQgfSk7XG4gICAgICAgICAgICBpZiAodXNlci5mYXZzIDwgYm9keS5mYXYpIHtcbiAgICAgICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogNTAxLFxuICAgICAgICAgICAgICAgICAgICBtc2c6ICfnp6/liIbkuI3otrMnLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBVc2VyLnVwZGF0ZU9uZSh7IF9pZDogb2JqLl9pZCB9LCB7ICRpbmM6IHsgZmF2czogLWJvZHkuZmF2IH0gfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG5ld1Bvc3QgPSBuZXcgUG9zdChib2R5KTtcbiAgICAgICAgICAgIG5ld1Bvc3QudWlkID0gb2JqLl9pZDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5ld1Bvc3Quc2F2ZSgpO1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICBtc2c6ICfmiJDlip/nmoTkv53lrZjnmoTmlofnq6AnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyDlm77niYfpqozor4HnoIHpqozor4HlpLHotKVcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICBtc2c6ICflm77niYfpqozor4HnoIHpqozor4HlpLHotKUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOabtOaWsOW4luWtkFxuICAgIGFzeW5jIHVwZGF0ZVBvc3QoY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHNpZCA9IGJvZHkuc2lkO1xuICAgICAgICBjb25zdCBjb2RlID0gYm9keS5jb2RlO1xuICAgICAgICAvLyDpqozor4Hlm77niYfpqozor4HnoIHnmoTml7bmlYjmgKfjgIHmraPnoa7mgKdcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hlY2tDb2RlKHNpZCwgY29kZSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKTtcbiAgICAgICAgICAgIC8vIOWIpOaWreW4luWtkOS9nOiAheaYr+WQpuS4uuacrOS6ulxuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3QuZmluZE9uZSh7IF9pZDogYm9keS50aWQgfSk7XG4gICAgICAgICAgICAvLyDliKTmlq3luJblrZDmmK/lkKbnu5PotLRcbiAgICAgICAgICAgIGlmIChwb3N0LnVpZCA9PT0gb2JqLl9pZCAmJiBwb3N0LmlzRW5kID09PSAnMCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQb3N0LnVwZGF0ZU9uZSh7IF9pZDogYm9keS50aWQgfSwgYm9keSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5tb2RpZmllZENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZzogJ+abtOaWsOW4luWtkOaIkOWKnycsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtc2c6ICfnvJbovpHluJblrZDvvIzmm7TmlrDlpLHotKUnLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDQwMSxcbiAgICAgICAgICAgICAgICAgICAgbXNnOiAn5rKh5pyJ5pON5L2c55qE5p2D6ZmQJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8g5Zu+54mH6aqM6K+B56CB6aqM6K+B5aSx6LSlXG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn5Zu+54mH6aqM6K+B56CB6aqM6K+B5aSx6LSlJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVQb3N0QnlUaWQoY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFBvc3QudXBkYXRlT25lKHsgX2lkOiBib2R5Ll9pZCB9LCBib2R5KTtcbiAgICAgICAgaWYgKHJlc3VsdC5tb2RpZmllZENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICBtc2c6ICfmm7TmlrDluJblrZDmiJDlip8nLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgbXNnOiAn57yW6L6R5biW5a2Q77yM5pu05paw5aSx6LSlJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDojrflj5bmlofnq6Dor6bmg4VcbiAgICBhc3luYyBnZXRQb3N0RGV0YWlsKGN0eCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIGlmICghcGFyYW1zLnRpZCkge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+aWh+eroGlk5Li656m6JyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29uc3QgcG9zdCA9IGF3YWl0IFBvc3QuZmluZE9uZSh7IF9pZDogcGFyYW1zLnRpZCB9KVxuICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlUaWQocGFyYW1zLnRpZCk7XG5cbiAgICAgICAgLy8gaWYgKCFwb3N0KSB7XG4gICAgICAgIC8vICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgLy8gICAgICAgICBjb2RlOiAwLFxuICAgICAgICAvLyAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAvLyAgICAgICAgIG1zZzogJ+afpeivouaWh+eroOivpuaDheaIkOWKnycsXG4gICAgICAgIC8vICAgICB9O1xuICAgICAgICAvLyAgICAgcmV0dXJuO1xuICAgICAgICAvLyB9XG4gICAgICAgIGxldCBpc0ZhdiA9IDA7XG4gICAgICAgIC8vIOWIpOaWreeUqOaIt+aYr+WQpuS8oOmAkkF1dGhvcml6YXRpb27nmoTmlbDmja7vvIzljbPmmK/lkKbnmbvlvZVcbiAgICAgICAgaWYgKHR5cGVvZiBjdHguaGVhZGVyLmF1dGhvcml6YXRpb24gIT09ICd1bmRlZmluZWQnICYmIGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbiAhPT0gJycpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJDb2xsZWN0ID0gYXdhaXQgVXNlckNvbGxlY3QuZmluZE9uZSh7XG4gICAgICAgICAgICAgICAgdWlkOiBvYmouX2lkLFxuICAgICAgICAgICAgICAgIHRpZDogcGFyYW1zLnRpZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHVzZXJDb2xsZWN0ICYmIHVzZXJDb2xsZWN0LnRpZCkge1xuICAgICAgICAgICAgICAgIGlzRmF2ID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGF3YWl0IFBvc3RIaXN0b3J5LmFkZE9yVXBkYXRlKG9iai5faWQsIHBhcmFtcy50aWQpOyAvLyDmt7vliqDmtY/op4jorrDlvZVcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdQb3N0ID0gcG9zdC50b0pTT04oKTtcbiAgICAgICAgbmV3UG9zdC5pc0ZhdiA9IGlzRmF2O1xuICAgICAgICAvLyDmm7TmlrDmlofnq6DpmIXor7vorrDmlbBcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUG9zdC51cGRhdGVPbmUoeyBfaWQ6IHBhcmFtcy50aWQgfSwgeyAkaW5jOiB7IHJlYWRzOiAxIH0gfSk7XG4gICAgICAgIGlmIChwb3N0Ll9pZCAmJiByZXN1bHQubW9kaWZpZWRDb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICBkYXRhOiBuZXdQb3N0LFxuICAgICAgICAgICAgICAgIG1zZzogJ+afpeivouaWh+eroOivpuaDheaIkOWKnycsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+iOt+WPluaWh+eroOivpuaDheWksei0pScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g6I635Y+W55So5oi35Y+R6LS06K6w5b2VXG4gICAgYXN5bmMgZ2V0UG9zdEJ5VWlkKGN0eCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUG9zdC5nZXRMaXN0QnlVaWQob2JqLl9pZCwgcGFyYW1zLnBhZ2UsIHBhcmFtcy5saW1pdCA/IHBhcnNlSW50KHBhcmFtcy5saW1pdCkgOiAxMCk7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgUG9zdC5jb3VudEJ5VWlkKG9iai5faWQpO1xuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgICAgICAgIG1zZzogJ+afpeivouWIl+ihqOaIkOWKnycsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+afpeivouWIl+ihqOWksei0pScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g6I635Y+W55So5oi35Y+R6LS06K6w5b2VXG4gICAgYXN5bmMgZ2V0UG9zdFB1YmxpYyhjdHgpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gY3R4LnF1ZXJ5O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQb3N0LmdldExpc3RCeVVpZChwYXJhbXMudWlkLCBwYXJhbXMucGFnZSwgcGFyYW1zLmxpbWl0ID8gcGFyc2VJbnQocGFyYW1zLmxpbWl0KSA6IDEwKTtcbiAgICAgICAgY29uc3QgdG90YWwgPSBhd2FpdCBQb3N0LmNvdW50QnlVaWQocGFyYW1zLnVpZCk7XG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgdG90YWwsXG4gICAgICAgICAgICAgICAgbXNnOiAn5p+l6K+i5YiX6KGo5oiQ5YqfJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn5p+l6K+i5YiX6KGo5aSx6LSlJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDliKDpmaTlj5HotLTorrDlvZVcbiAgICBhc3luYyBkZWxldGVQb3N0QnlVaWQoY3R4KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kT25lKHsgdWlkOiBvYmouX2lkLCBfaWQ6IHBhcmFtcy50aWQgfSk7XG4gICAgICAgIGlmIChwb3N0LmlkID09PSBwYXJhbXMudGlkICYmIHBvc3QuaXNFbmQgPT09ICcwJykge1xuICAgICAgICAgICAgLy8gYXdhaXQgQ29udGVudENvbnRyb2xsZXIucHJvdG90eXBlLmRlbGV0ZVBvc3QoY3R4KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFBvc3QuZGVsZXRlT25lKHsgX2lkOiBwYXJhbXMudGlkIH0pO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5kZWxldGVkQ291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICAgICAgbXNnOiAn5Yig6Zmk5oiQ5YqfJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgICAgICBtc2c6ICfmiafooYzliKDpmaTlpLHotKXvvIEnLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn5Yig6Zmk5aSx6LSl77yM5peg5p2D6ZmQ77yBJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBkZWxldGVQb3N0KGN0eCkge1xuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICAvLyDliKDpmaTluJblrZDnmoTlkIzml7bopoHliKDpmaTlhbPogZTooajkuK3nmoTmlbDmja5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUG9zdC5kZWxldGVNYW55QW5kUmVmKHsgX2lkOiB7ICRpbjogYm9keS5pZHMgfSB9KTtcbiAgICAgICAgaWYgKHJlc3VsdC5kZWxldGVkQ291bnQgPT09IDEpIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn5Yig6Zmk5oiQ5YqfJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn5omn6KGM5Yig6Zmk5aSx6LSl77yBJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDmt7vliqDmoIfnrb5cbiAgICBhc3luYyBhZGRUYWcoY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHRhZyA9IG5ldyBQb3N0VGFncyhib2R5KTtcbiAgICAgICAgYXdhaXQgdGFnLnNhdmUoKTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgbXNnOiAn5qCH562+5L+d5a2Y5oiQ5YqfJyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyDmt7vliqDmoIfnrb5cbiAgICBhc3luYyBnZXRUYWdzKGN0eCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBwYXJhbXMucGFnZSA/IHBhcnNlSW50KHBhcmFtcy5wYWdlKSA6IDA7XG4gICAgICAgIGNvbnN0IGxpbWl0ID0gcGFyYW1zLmxpbWl0ID8gcGFyc2VJbnQocGFyYW1zLmxpbWl0KSA6IDEwO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQb3N0VGFncy5nZXRMaXN0KHt9LCBwYWdlLCBsaW1pdCk7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgUG9zdFRhZ3MuY291bnRMaXN0KHt9KTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgdG90YWwsXG4gICAgICAgICAgICBtc2c6ICfmn6Xor6J0YWdz5oiQ5Yqf77yBJyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyDliKDpmaTmoIfnrb5cbiAgICBhc3luYyByZW1vdmVUYWcoY3R4KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUG9zdFRhZ3MuZGVsZXRlT25lKHsgaWQ6IHBhcmFtcy5wdGlkIH0pO1xuXG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgIG1zZzogJ+WIoOmZpOaIkOWKnycsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g5Yig6Zmk5qCH562+XG4gICAgYXN5bmMgdXBkYXRlVGFnKGN0eCkge1xuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQb3N0VGFncy51cGRhdGVPbmUoeyBfaWQ6IGJvZHkuX2lkIH0sIGJvZHkpO1xuXG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgIG1zZzogJ+abtOaWsOaIkOWKnycsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g5om56YeP5L+u5pS55biW5a2QXG4gICAgYXN5bmMgdXBkYXRlUG9zdEJhdGNoKGN0eCkge1xuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQb3N0LnVwZGF0ZU1hbnkoeyBfaWQ6IHsgJGluOiBib2R5LmlkcyB9IH0sIHsgJHNldDogeyAuLi5ib2R5LnNldHRpbmdzIH0gfSk7XG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMjAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOWPluW+l+a1j+iniOWOhuWPsuWIl+ihqFxuICAgIGFzeW5jIGdldFBvc3RIaXN0b3J5KGN0eCkge1xuICAgICAgICBjb25zdCBib2R5ID0gY3R4LnF1ZXJ5O1xuICAgICAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KGJvZHkubGltaXQpIHx8IDEwO1xuICAgICAgICBjb25zdCBza2lwID0gKChib2R5LmN1cnJlbnRQYWdlIHx8IDEpIC0gMSkgKiBsaW1pdDtcbiAgICAgICAgY29uc3QgaGlzdG9yeUxpc3QgPSBhd2FpdCBQb3N0SGlzdG9yeS5nZXRMaXN0QnlVaWQoYm9keS51aWQsIHNraXAsIGxpbWl0KTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgICBoaXN0b3J5TGlzdCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyDmlLbol4/luJblrZBcbiAgICBhc3luYyBzZXRDb2xsZWN0KGN0eCkge1xuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgICAgIGNvbnN0IGlzQ29sbGVjdCA9IGJvZHkuaXNDb2xsZWN0O1xuICAgICAgICAvLyBpc0NvbGxlY3QgZmFsc2UgLSDmnKrmlLbol48gPT4g6L2s5oiQ5pS26JeP77yMIHRydWUgLSDmlLbol4/kuoYgPT4g5Yig6Zmk5pS26JePXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJDb2xsZWN0LmhhbmRsZUNvbGxlY3Qob2JqLl9pZCwgYm9keS50aWQsIGlzQ29sbGVjdCk7XG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMjAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgaXNDb2xsZWN0OiAhaXNDb2xsZWN0LFxuICAgICAgICAgICAgbXNnOiBpc0NvbGxlY3QgPyAn5bey5Y+W5raI5pS26JeP77yBJyA6ICfmlLbol4/miJDlip/vvIEnLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOafpeivouaYr+WQpuaUtuiXj+i/h+afkOS4quW4luWtkFxuICAgIGFzeW5jIGNoZWNrQ29sbGVjdChjdHgpIHtcbiAgICAgICAgY29uc3QgYm9keSA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyQ29sbGVjdC5maW5kT25lKHsgdWlkOiBvYmouX2lkLCB0aWQ6IGJvZHkudGlkIH0pO1xuICAgICAgICBsZXQgaXNDb2xsZWN0ID0gZmFsc2U7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlzQ29sbGVjdCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgICBpc0NvbGxlY3Q6IGlzQ29sbGVjdCxcbiAgICAgICAgICAgIG1zZzogJ+afpeivouaUtuiXj+aIkOWKnycsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g6I635Y+W6L+R5Yeg5aSp55qE54Ot6Zeo5biW5a2QXG4gICAgYXN5bmMgZ2V0VG9wQnlEYXkoY3R4KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBib2R5ID0gY3R4LnF1ZXJ5O1xuICAgICAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3QuZ2V0VG9wQnlEYXkoYm9keS5kYXlzLCBib2R5LnBhZ2UpO1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgbXNnOiAnJyxcbiAgICAgICAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgICAgICAgZGF0YTogcG9zdCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIG1zZzogJ+eDremXqOW4luWtkOWksei0pScsXG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFsbFBvc3RCeVVpZChjdHgpIHtcbiAgICAgICAgY29uc3QgYm9keSA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3QgdWlkID0gYm9keS51aWQ7XG4gICAgICAgIGNvbnN0IGNhdGFsb2cgPSBib2R5LmNhdGFsb2cgfHwgJyc7XG4gICAgICAgIGNvbnN0IGxpbWl0ID0gYm9keS5wYWdlU2l6ZSB8fCAxMDtcbiAgICAgICAgY29uc3QgcGFnZVNpemUgPSBib2R5LmN1cnJlbnRQYWdlIHx8IDE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwb3N0c0xpc3QgPSBhd2FpdCBQb3N0LnF1ZXJ5QnlVc2VySWQodWlkLCBwYXJzZUludChsaW1pdCksIHBhcnNlSW50KHBhZ2VTaXplKSwgY2F0YWxvZyk7XG4gICAgICAgICAgICBjb25zdCB0b3RhbCA9IGF3YWl0IFBvc3QucXVlcnlDb3VudCh7IHVpZDogY3R4LnF1ZXJ5LnVpZCB9KTtcbiAgICAgICAgICAgIGlmIChib2R5LnN0YXJ0VGltZSkge1xuICAgICAgICAgICAgICAgIC8vIG9wdGlvbnMuY3JlYXRlZCA9IHsgJGd0ZTogYm9keS5zdGFydFRpbWUsICRsdDogYm9keS5lbmRUaW1lIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgICAgICAgICB0b3RhbDogdG90YWwsXG4gICAgICAgICAgICAgICAgZGF0YTogcG9zdHNMaXN0LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgbXNnOiAn6I635Y+W5YiX6KGo5aSx6LSlJyxcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Q29sbGVjdExpc3QoY3R4KSB7XG4gICAgICAgIC8vIOiOt+WPluivpue7hueahOeUqOaIt+aUtuiXj+WIl+ihqFxuICAgICAgICBjb25zdCBib2R5ID0gY3R4LnF1ZXJ5O1xuICAgICAgICBjb25zdCB1aWQgPSBib2R5LnVpZDtcbiAgICAgICAgY29uc3QgbGltaXQgPSBwYXJzZUludChib2R5LmxpbWl0KSB8fCAxMDtcbiAgICAgICAgY29uc3Qgc2tpcCA9ICgoYm9keS5jdXJyZW50UGFnZSB8fCAxKSAtIDEpICogbGltaXQ7XG4gICAgICAgIGNvbnN0IGNvbGxlY3RMaXN0ID0gYXdhaXQgVXNlckNvbGxlY3QuZ2V0Q29sbGVjdExpc3QodWlkLCBza2lwLCBsaW1pdCk7XG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMjAwLFxuICAgICAgICAgICAgY29sbGVjdExpc3QsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlUG9zdEhpc3RvcnkoY3R4KSB7XG4gICAgICAgIC8vIOWIoOmZpOa1j+iniOiusOW9lVxuICAgICAgICBjb25zdCBib2R5ID0gY3R4LnF1ZXJ5O1xuICAgICAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFBvc3RIaXN0b3J5LmRlbE9uZShvYmouX2lkLCBib2R5LnRpZCk7XG5cbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgICByZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlQ29sbGVjdChjdHgpIHtcbiAgICAgICAgLy8g5Yig6Zmk55So5oi35pS26JePXG4gICAgICAgIGNvbnN0IGJvZHkgPSBjdHgucXVlcnk7XG4gICAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlckNvbGxlY3QuZGVsZXRlQ29sbGVjdChvYmouX2lkLCBib2R5LnRpZCk7XG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogMjAwLFxuICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOWwj+eoi+W6j+aWsOWinuaWh+eroFxuICAgIGFzeW5jIHd4QWRkUG9zdChjdHgpIHtcbiAgICAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKTtcbiAgICAgICAgICAgIGxldCBwb3N0ID0ge307XG4gICAgICAgICAgICBjb25zdCBfdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogb2JqLl9pZCB9KTtcbiAgICAgICAgICAgIGlmIChfdXNlci5mYXZzIDwgYm9keS5mYXYpIHtcbiAgICAgICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogMjAwLFxuICAgICAgICAgICAgICAgICAgICBtc2c6ICfmgqjnmoTnp6/liIbkuI3otrPvvIEnLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDmiaPpmaTnm7jlupTnmoTnp6/liIZcbiAgICAgICAgICAgICAgICBhd2FpdCBVc2VyLnVwZGF0ZU9uZSh7IF9pZDogb2JqLl9pZCB9LCB7IGZhdnM6IF91c2VyLmZhdnMgLSBib2R5LmZhdiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5ld1Bvc3QgPSBuZXcgUG9zdChib2R5KTtcbiAgICAgICAgICAgIG5ld1Bvc3QudWlkID0gb2JqLl9pZDtcbiAgICAgICAgICAgIHBvc3QgPSBhd2FpdCBuZXdQb3N0LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIG1zZzogJycsXG4gICAgICAgICAgICAgICAgY29kZTogMjAwLFxuICAgICAgICAgICAgICAgIGRhdGE6IHBvc3QsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlKVxuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgbXNnOiAn5re75Yqg5paH56ug6K+m5oOF5aSx6LSlJyxcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgQ29udGVudENvbnRyb2xsZXIoKTtcbiJdLCJuYW1lcyI6WyJMaW5rcyIsIlVzZXIiLCJQb3N0VGFncyIsIlBvc3QiLCJVc2VyQ29sbGVjdCIsImZzIiwicXMiLCJtb21lbnQiLCJjb25maWciLCJjaGVja0NvZGUiLCJnZXRKV1RQYXlsb2FkIiwibWFrZURpcmVjdG9yeSIsInY0IiwidXVpZHY0IiwiQ29udGVudENvbnRyb2xsZXIiLCJnZXRQb3N0TGlzdCIsImN0eCIsImJvZHkiLCJwYXJzZSIsInF1ZXJ5Iiwic29ydCIsInBhZ2UiLCJwYXJzZUludCIsImxpbWl0Iiwib3B0aW9ucyIsInRpdGxlIiwiJHJlZ2V4IiwiY2F0YWxvZyIsImxlbmd0aCIsIiRpbiIsImlzVG9wIiwiaXNFbmQiLCJzdGF0dXMiLCJ0YWciLCJ0YWdzIiwiJGVsZW1NYXRjaCIsIm5hbWUiLCJyZXN1bHQiLCJnZXRMaXN0IiwidG90YWwiLCJjb3VudExpc3QiLCJjb2RlIiwiZGF0YSIsIm1zZyIsImdldExpbmtzIiwiZmluZCIsInR5cGUiLCJnZXRUaXBzIiwiZ2V0VG9wV2VlayIsInVwbG9hZEltZyIsImZpbGUiLCJyZXF1ZXN0IiwiZmlsZXMiLCJleHQiLCJuZXdGaWxlbmFtZSIsInNwbGl0IiwicG9wIiwiZGlyIiwidXBsb2FkUGF0aCIsImZvcm1hdCIsInBpY25hbWUiLCJkZXN0UGF0aCIsInJlYWRlciIsImNyZWF0ZVJlYWRTdHJlYW0iLCJmaWxlcGF0aCIsInVwU3RyZWFtIiwiY3JlYXRlV3JpdGVTdHJlYW0iLCJmaWxlUGF0aCIsInBpcGUiLCJhZGRQb3N0Iiwic2lkIiwib2JqIiwiaGVhZGVyIiwiYXV0aG9yaXphdGlvbiIsInVzZXIiLCJmaW5kQnlJRCIsIl9pZCIsImZhdnMiLCJmYXYiLCJ1cGRhdGVPbmUiLCIkaW5jIiwibmV3UG9zdCIsInVpZCIsInNhdmUiLCJ1cGRhdGVQb3N0IiwicG9zdCIsImZpbmRPbmUiLCJ0aWQiLCJtb2RpZmllZENvdW50IiwidXBkYXRlUG9zdEJ5VGlkIiwiZ2V0UG9zdERldGFpbCIsInBhcmFtcyIsImZpbmRCeVRpZCIsImlzRmF2IiwidXNlckNvbGxlY3QiLCJ0b0pTT04iLCJyZWFkcyIsImdldFBvc3RCeVVpZCIsImdldExpc3RCeVVpZCIsImNvdW50QnlVaWQiLCJnZXRQb3N0UHVibGljIiwiZGVsZXRlUG9zdEJ5VWlkIiwiaWQiLCJkZWxldGVPbmUiLCJkZWxldGVkQ291bnQiLCJkZWxldGVQb3N0IiwiZGVsZXRlTWFueUFuZFJlZiIsImlkcyIsImFkZFRhZyIsImdldFRhZ3MiLCJyZW1vdmVUYWciLCJwdGlkIiwidXBkYXRlVGFnIiwidXBkYXRlUG9zdEJhdGNoIiwidXBkYXRlTWFueSIsIiRzZXQiLCJzZXR0aW5ncyIsImdldFBvc3RIaXN0b3J5Iiwic2tpcCIsImN1cnJlbnRQYWdlIiwiaGlzdG9yeUxpc3QiLCJQb3N0SGlzdG9yeSIsInNldENvbGxlY3QiLCJpc0NvbGxlY3QiLCJoYW5kbGVDb2xsZWN0IiwiY2hlY2tDb2xsZWN0IiwiZ2V0VG9wQnlEYXkiLCJkYXlzIiwiZSIsImdldEFsbFBvc3RCeVVpZCIsInBhZ2VTaXplIiwicG9zdHNMaXN0IiwicXVlcnlCeVVzZXJJZCIsInF1ZXJ5Q291bnQiLCJzdGFydFRpbWUiLCJnZXRDb2xsZWN0TGlzdCIsImNvbGxlY3RMaXN0IiwiZGVsZXRlUG9zdEhpc3RvcnkiLCJkZWxPbmUiLCJkZWxldGVDb2xsZWN0Iiwid3hBZGRQb3N0IiwiX3VzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/ContentController.js\n\n}");

/***/ }),

/***/ "./src/api/ErrorController.js":
/*!************************************!*\
  !*** ./src/api/ErrorController.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _model_ErrorRecord__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/ErrorRecord */ \"./src/model/ErrorRecord.js\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! qs */ \"qs\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_1__);\n\n\nclass ErrorController {\n  async getErrorList(ctx) {\n    const params = ctx.query;\n    const methodFilter = await _model_ErrorRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].aggregate([{\n      $group: {\n        _id: '$method'\n      }\n    }, {\n      $sort: {\n        _id: 1\n      }\n    }]);\n    const codeFilter = await _model_ErrorRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].aggregate([{\n      $group: {\n        _id: '$code'\n      }\n    }, {\n      $sort: {\n        _id: 1\n      }\n    }]);\n    const obj = qs__WEBPACK_IMPORTED_MODULE_1___default().parse(params);\n    const query = obj.filter ? {\n      ...obj.filter\n    } : {};\n    if (query.method) {\n      query.method = {\n        $regex: query.method,\n        $options: 'i'\n      };\n    }\n    // 分页\n    const page = params.page ? parseInt(params.page) : 0;\n    const limit = params.limit ? parseInt(params.limit) : 10;\n\n    // { method: /get/i }\n    const result = await _model_ErrorRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find(query).skip((page - 1) * limit).limit(limit).sort({\n      created: -1\n    });\n    const total = await _model_ErrorRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find(query).countDocuments();\n    ctx.body = {\n      code: 0,\n      msg: '查询成功',\n      data: result,\n      total: total,\n      filters: {\n        method: methodFilter.map(o => {\n          return {\n            label: o._id,\n            value: o._id\n          };\n        }),\n        code: codeFilter.map(o => {\n          return {\n            label: o._id,\n            value: parseInt(o._id)\n          };\n        })\n      }\n    };\n  }\n  async deleteError(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const result = await _model_ErrorRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].deleteMany({\n      _id: {\n        $in: body.ids\n      }\n    });\n    ctx.body = {\n      code: 0,\n      msg: '删除成功',\n      data: result\n    };\n  }\n  async addError(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const error = new _model_ErrorRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"](body);\n    const result = await error.save();\n    ctx.body = {\n      code: 0,\n      msg: '保存成功',\n      data: result\n    };\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new ErrorController());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNakIsTUFBTSxHQUFHLE1BQU10QiwwREFBVyxDQUFDd0MsVUFBVSxDQUFDO01BQUU5QixHQUFHLEVBQUU7UUFBRStCLEdBQUcsRUFBRVosSUFBSSxDQUFDYTtNQUFJO0lBQUUsQ0FBQyxDQUFDO0lBQ3ZFdEMsR0FBRyxDQUFDeUIsSUFBSSxHQUFHO01BQ1BDLElBQUksRUFBRSxDQUFDO01BQ1BDLEdBQUcsRUFBRSxNQUFNO01BQ1hDLElBQUksRUFBRVY7SUFDVixDQUFDO0VBQ0w7RUFFQSxNQUFNcUIsUUFBUUEsQ0FBQ3ZDLEdBQUcsRUFBRTtJQUNoQixNQUFNO01BQUV5QjtJQUFLLENBQUMsR0FBR3pCLEdBQUcsQ0FBQ21DLE9BQU87SUFDNUIsTUFBTUssS0FBSyxHQUFHLElBQUk1QywwREFBVyxDQUFDNkIsSUFBSSxDQUFDO0lBQ25DLE1BQU1QLE1BQU0sR0FBRyxNQUFNc0IsS0FBSyxDQUFDQyxJQUFJLENBQUMsQ0FBQztJQUNqQ3pDLEdBQUcsQ0FBQ3lCLElBQUksR0FBRztNQUNQQyxJQUFJLEVBQUUsQ0FBQztNQUNQQyxHQUFHLEVBQUUsTUFBTTtNQUNYQyxJQUFJLEVBQUVWO0lBQ1YsQ0FBQztFQUNMO0FBQ0o7QUFFQSxpRUFBZSxJQUFJcEIsZUFBZSxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvYXBpL0Vycm9yQ29udHJvbGxlci5qcz84NTAxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBFcnJvclJlY29yZCBmcm9tICcuLi9tb2RlbC9FcnJvclJlY29yZCc7XG5pbXBvcnQgcXMgZnJvbSAncXMnO1xuY2xhc3MgRXJyb3JDb250cm9sbGVyIHtcbiAgICBhc3luYyBnZXRFcnJvckxpc3QoY3R4KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IGN0eC5xdWVyeTtcblxuICAgICAgICBjb25zdCBtZXRob2RGaWx0ZXIgPSBhd2FpdCBFcnJvclJlY29yZC5hZ2dyZWdhdGUoW3sgJGdyb3VwOiB7IF9pZDogJyRtZXRob2QnIH0gfSwgeyAkc29ydDogeyBfaWQ6IDEgfSB9XSk7XG5cbiAgICAgICAgY29uc3QgY29kZUZpbHRlciA9IGF3YWl0IEVycm9yUmVjb3JkLmFnZ3JlZ2F0ZShbeyAkZ3JvdXA6IHsgX2lkOiAnJGNvZGUnIH0gfSwgeyAkc29ydDogeyBfaWQ6IDEgfSB9XSk7XG5cbiAgICAgICAgY29uc3Qgb2JqID0gcXMucGFyc2UocGFyYW1zKTtcbiAgICAgICAgY29uc3QgcXVlcnkgPSBvYmouZmlsdGVyID8geyAuLi5vYmouZmlsdGVyIH0gOiB7fTtcbiAgICAgICAgaWYgKHF1ZXJ5Lm1ldGhvZCkge1xuICAgICAgICAgICAgcXVlcnkubWV0aG9kID0geyAkcmVnZXg6IHF1ZXJ5Lm1ldGhvZCwgJG9wdGlvbnM6ICdpJyB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIOWIhumhtVxuICAgICAgICBjb25zdCBwYWdlID0gcGFyYW1zLnBhZ2UgPyBwYXJzZUludChwYXJhbXMucGFnZSkgOiAwO1xuICAgICAgICBjb25zdCBsaW1pdCA9IHBhcmFtcy5saW1pdCA/IHBhcnNlSW50KHBhcmFtcy5saW1pdCkgOiAxMDtcblxuICAgICAgICAvLyB7IG1ldGhvZDogL2dldC9pIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgRXJyb3JSZWNvcmQuZmluZChxdWVyeSlcbiAgICAgICAgICAgIC5za2lwKChwYWdlIC0gMSkgKiBsaW1pdClcbiAgICAgICAgICAgIC5saW1pdChsaW1pdClcbiAgICAgICAgICAgIC5zb3J0KHsgY3JlYXRlZDogLTEgfSk7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgRXJyb3JSZWNvcmQuZmluZChxdWVyeSkuY291bnREb2N1bWVudHMoKTtcblxuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBtc2c6ICfmn6Xor6LmiJDlip8nLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgdG90YWw6IHRvdGFsLFxuICAgICAgICAgICAgZmlsdGVyczoge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kRmlsdGVyLm1hcChvID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBvLl9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvLl9pZCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBjb2RlOiBjb2RlRmlsdGVyLm1hcChvID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBvLl9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChvLl9pZCksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZUVycm9yKGN0eCkge1xuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBFcnJvclJlY29yZC5kZWxldGVNYW55KHsgX2lkOiB7ICRpbjogYm9keS5pZHMgfSB9KTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgbXNnOiAn5Yig6Zmk5oiQ5YqfJyxcbiAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBhZGRFcnJvcihjdHgpIHtcbiAgICAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3JSZWNvcmQoYm9keSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVycm9yLnNhdmUoKTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgbXNnOiAn5L+d5a2Y5oiQ5YqfJyxcbiAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBFcnJvckNvbnRyb2xsZXIoKTtcbiJdLCJuYW1lcyI6WyJFcnJvclJlY29yZCIsInFzIiwiRXJyb3JDb250cm9sbGVyIiwiZ2V0RXJyb3JMaXN0IiwiY3R4IiwicGFyYW1zIiwicXVlcnkiLCJtZXRob2RGaWx0ZXIiLCJhZ2dyZWdhdGUiLCIkZ3JvdXAiLCJfaWQiLCIkc29ydCIsImNvZGVGaWx0ZXIiLCJvYmoiLCJwYXJzZSIsImZpbHRlciIsIm1ldGhvZCIsIiRyZWdleCIsIiRvcHRpb25zIiwicGFnZSIsInBhcnNlSW50IiwibGltaXQiLCJyZXN1bHQiLCJmaW5kIiwic2tpcCIsInNvcnQiLCJjcmVhdGVkIiwidG90YWwiLCJjb3VudERvY3VtZW50cyIsImJvZHkiLCJjb2RlIiwibXNnIiwiZGF0YSIsImZpbHRlcnMiLCJtYXAiLCJvIiwibGFiZWwiLCJ2YWx1ZSIsImRlbGV0ZUVycm9yIiwicmVxdWVzdCIsImRlbGV0ZU1hbnkiLCIkaW4iLCJpZHMiLCJhZGRFcnJvciIsImVycm9yIiwic2F2ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/ErrorController.js\n\n}");

/***/ }),

/***/ "./src/api/LoginController.js":
/*!************************************!*\
  !*** ./src/api/LoginController.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_MailConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/MailConfig */ \"./src/config/MailConfig.js\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/config */ \"./src/config/index.js\");\n/* harmony import */ var _common_Utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/common/Utils */ \"./src/common/Utils.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! md5 */ \"md5\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/model/User */ \"./src/model/User.js\");\n/* harmony import */ var _model_SignRecord__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/model/SignRecord */ \"./src/model/SignRecord.js\");\n/* harmony import */ var _config_RedisConfig__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/config/RedisConfig */ \"./src/config/RedisConfig.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_10__);\n\n\n\n\n\n\n\n\n\n\n\nclass LoginController {\n  // 忘记密码，发送邮件\n  async forget(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_7__[\"default\"].findOne({\n      username: body.username\n    });\n    if (!user) {\n      ctx.body = {\n        code: 404,\n        msg: '请检查账号！'\n      };\n      return;\n    }\n    try {\n      const key = (0,uuid__WEBPACK_IMPORTED_MODULE_10__.v4)();\n      (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_9__.setValue)(key, jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default().sign({\n        _id: user._id\n      }, md5__WEBPACK_IMPORTED_MODULE_6___default()(_config__WEBPACK_IMPORTED_MODULE_3__[\"default\"].JWT_SECRET), {\n        expiresIn: '30m'\n      }), 30 * 60);\n      // body.username -> database -> email\n      const result = await (0,_config_MailConfig__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n        type: 'reset',\n        data: {\n          key: key,\n          username: body.username\n        },\n        code: '',\n        expire: dayjs__WEBPACK_IMPORTED_MODULE_2___default()().add(30, 'minutes').format('YYYY-MM-DD HH:mm:ss'),\n        email: body.username,\n        user: user.name ? user.name : body.username\n      });\n      ctx.body = {\n        code: 0,\n        data: result,\n        msg: '邮件发送成功'\n      };\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  // 登录\n  async login(ctx) {\n    // 接收用户的数据\n    // 返回token\n    const {\n      body\n    } = ctx.request;\n    const sid = body.sid;\n    const code = body.code;\n    // 验证图片验证码的时效性、正确性\n    const result = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_4__.checkCode)(sid, code);\n    if (result) {\n      // 验证用户账号密码是否正确\n      let checkUserPasswd = false;\n      const user = await _model_User__WEBPACK_IMPORTED_MODULE_7__[\"default\"].findOne({\n        username: body.username\n      });\n      if (user === null) {\n        ctx.body = {\n          code: 500,\n          msg: '用户名或者密码错误'\n        };\n        return;\n      }\n      if (await bcrypt__WEBPACK_IMPORTED_MODULE_1___default().compare(body.password, user.password)) {\n        checkUserPasswd = true;\n      }\n      if (checkUserPasswd) {\n        // 验证通过，返回Token数据\n        const userObj = user.toJSON();\n        const arr = ['password', 'username'];\n        arr.map(item => {\n          return delete userObj[item];\n        });\n        // 加入isSign属性\n        const signRecord = await _model_SignRecord__WEBPACK_IMPORTED_MODULE_8__[\"default\"].findByUid(userObj._id);\n        if (signRecord !== null) {\n          if (dayjs__WEBPACK_IMPORTED_MODULE_2___default()(signRecord.created).format('YYYY-MM-DD') === dayjs__WEBPACK_IMPORTED_MODULE_2___default()().format('YYYY-MM-DD')) {\n            userObj.isSign = true;\n          } else {\n            userObj.isSign = false;\n          }\n          userObj.lastSign = signRecord.created;\n        } else {\n          // 用户无签到记录\n          userObj.isSign = false;\n        }\n        const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_5___default().sign({\n          _id: userObj._id\n        }, md5__WEBPACK_IMPORTED_MODULE_6___default()(process.env.JWT_SECRET), {\n          expiresIn: 60 * 60 * 24\n        });\n        ctx.body = {\n          code: 0,\n          data: userObj,\n          token,\n          msg: '登录成功'\n        };\n      } else {\n        // 用户名 密码验证失败，返回提示\n        ctx.body = {\n          code: 500,\n          msg: '用户名或者密码错误'\n        };\n      }\n    } else {\n      // 图片验证码校验失败\n      ctx.body = {\n        code: 401,\n        msg: '图片验证码不正确,请检查！'\n      };\n    }\n  }\n\n  // 注册接口\n  async reg(ctx) {\n    // 接收客户端的数据\n    const {\n      body\n    } = ctx.request;\n    // 校验验证码的内容（时效性、有效性）\n    const sid = body.sid;\n    const code = body.code;\n    let msg = {};\n    // 验证图片验证码的时效性、正确性\n    const result = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_4__.checkCode)(sid, code);\n    let check = true;\n    if (result) {\n      // 查库，看username是否被注册\n      const user1 = await _model_User__WEBPACK_IMPORTED_MODULE_7__[\"default\"].findOne({\n        username: body.username\n      });\n      if (user1 !== null && typeof user1.username !== 'undefined') {\n        msg.username = '此邮箱已经注册，可以通过邮箱找回密码';\n        check = false;\n      }\n      const user2 = await _model_User__WEBPACK_IMPORTED_MODULE_7__[\"default\"].findOne({\n        name: body.name\n      });\n      // 查库，看name是否被注册\n      if (user2 !== null && typeof user2.name !== 'undefined') {\n        msg.name = '此昵称已经被注册，请修改';\n        check = false;\n      }\n      // 写入数据到数据库\n      if (check) {\n        body.password = await bcrypt__WEBPACK_IMPORTED_MODULE_1___default().hash(body.password, 5);\n        const user = new _model_User__WEBPACK_IMPORTED_MODULE_7__[\"default\"]({\n          username: body.username,\n          name: body.name,\n          password: body.password,\n          created: dayjs__WEBPACK_IMPORTED_MODULE_2___default()().format('YYYY-MM-DD HH:mm:ss')\n        });\n        const result = await user.save();\n        ctx.body = {\n          code: 0,\n          data: result,\n          msg: '注册成功'\n        };\n        return;\n      }\n    } else {\n      // veevalidate 显示的错误\n      msg.code = '验证码已经失效，请重新获取！';\n    }\n    ctx.body = {\n      code: 500,\n      msg: msg\n    };\n  }\n\n  // 密码重置\n  async reset(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const sid = body.sid;\n    const code = body.code;\n    let msg = {};\n    // 验证图片验证码的时效性、正确性\n    const result = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_4__.checkCode)(sid, code);\n    if (!body.key) {\n      ctx.body = {\n        code: 500,\n        msg: '请求参数异常，请重新获取链接'\n      };\n      return;\n    }\n    if (!result) {\n      msg.code = ['验证码已经失效，请重新获取！'];\n      ctx.body = {\n        code: 500,\n        msg: msg\n      };\n      return;\n    }\n    if (body.key) {\n      const token = await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_9__.getValue)(body.key);\n      const obj = (0,_common_Utils__WEBPACK_IMPORTED_MODULE_4__.getJWTPayload)('Bearer ' + token);\n      const newpasswd = await bcrypt__WEBPACK_IMPORTED_MODULE_1___default().hash(body.password, 5);\n      await _model_User__WEBPACK_IMPORTED_MODULE_7__[\"default\"].updateOne({\n        _id: obj._id\n      }, {\n        password: newpasswd\n      });\n      ctx.body = {\n        code: 200,\n        msg: '更新用户密码成功！'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '链接已经失效'\n      };\n    }\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new LoginController());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUcsRUFBRTtNQUNULENBQUM7SUFDTCxDQUFDLE1BQU07TUFDSFAsR0FBRyxDQUFDQyxJQUFJLEdBQUc7UUFDUEssSUFBSSxFQUFFLEdBQUc7UUFDVEMsR0FBRyxFQUFFO01BQ1QsQ0FBQztJQUNMO0VBQ0o7QUFDSjtBQUVBLGlFQUFlLElBQUlULGVBQWUsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL2FwaS9Mb2dpbkNvbnRyb2xsZXIuanM/OTUwNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgc2VuZCBmcm9tICdAL2NvbmZpZy9NYWlsQ29uZmlnJztcbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0JztcbmltcG9ydCBtb21lbnQgZnJvbSAnZGF5anMnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICdAL2NvbmZpZyc7XG5pbXBvcnQgeyBjaGVja0NvZGUsIGdldEpXVFBheWxvYWQsIGdlbmVyYXRlVG9rZW4sIGNoZWNrUmVkaXNBY2NvdW50Q29kZSwgZ2V0VGVtcE5hbWUgfSBmcm9tICdAL2NvbW1vbi9VdGlscyc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgbWQ1IGZyb20gJ21kNSc7XG5pbXBvcnQgVXNlciBmcm9tICdAL21vZGVsL1VzZXInO1xuaW1wb3J0IFNpZ25SZWNvcmQgZnJvbSAnQC9tb2RlbC9TaWduUmVjb3JkJztcbmltcG9ydCB7IGdldFZhbHVlLCBzZXRWYWx1ZSB9IGZyb20gJ0AvY29uZmlnL1JlZGlzQ29uZmlnJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG5jbGFzcyBMb2dpbkNvbnRyb2xsZXIge1xuICAgIC8vIOW/mOiusOWvhuegge+8jOWPkemAgemCruS7tlxuICAgIGFzeW5jIGZvcmdldChjdHgpIHtcbiAgICAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lIH0pO1xuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDQwNCxcbiAgICAgICAgICAgICAgICBtc2c6ICfor7fmo4Dmn6XotKblj7fvvIEnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gdXVpZHY0KCk7XG4gICAgICAgICAgICBzZXRWYWx1ZShcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgand0LnNpZ24oeyBfaWQ6IHVzZXIuX2lkIH0sIG1kNShjb25maWcuSldUX1NFQ1JFVCksIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0luOiAnMzBtJyxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAzMCAqIDYwXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgLy8gYm9keS51c2VybmFtZSAtPiBkYXRhYmFzZSAtPiBlbWFpbFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VuZCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc2V0JyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogYm9keS51c2VybmFtZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvZGU6ICcnLFxuICAgICAgICAgICAgICAgIGV4cGlyZTogbW9tZW50KCkuYWRkKDMwLCAnbWludXRlcycpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpLFxuICAgICAgICAgICAgICAgIGVtYWlsOiBib2R5LnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIubmFtZSA/IHVzZXIubmFtZSA6IGJvZHkudXNlcm5hbWUsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgbXNnOiAn6YKu5Lu25Y+R6YCB5oiQ5YqfJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g55m75b2VXG4gICAgYXN5bmMgbG9naW4oY3R4KSB7XG4gICAgICAgIC8vIOaOpeaUtueUqOaIt+eahOaVsOaNrlxuICAgICAgICAvLyDov5Tlm550b2tlblxuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICBjb25zdCBzaWQgPSBib2R5LnNpZDtcbiAgICAgICAgY29uc3QgY29kZSA9IGJvZHkuY29kZTtcbiAgICAgICAgLy8g6aqM6K+B5Zu+54mH6aqM6K+B56CB55qE5pe25pWI5oCn44CB5q2j56Gu5oCnXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoZWNrQ29kZShzaWQsIGNvZGUpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAvLyDpqozor4HnlKjmiLfotKblj7flr4bnoIHmmK/lkKbmraPnoa5cbiAgICAgICAgICAgIGxldCBjaGVja1VzZXJQYXNzd2QgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB1c2VybmFtZTogYm9keS51c2VybmFtZSB9KTtcbiAgICAgICAgICAgIGlmICh1c2VyID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgbXNnOiAn55So5oi35ZCN5oiW6ICF5a+G56CB6ZSZ6K+vJyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhd2FpdCBiY3J5cHQuY29tcGFyZShib2R5LnBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKSkge1xuICAgICAgICAgICAgICAgIGNoZWNrVXNlclBhc3N3ZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2hlY2tVc2VyUGFzc3dkKSB7XG4gICAgICAgICAgICAgICAgLy8g6aqM6K+B6YCa6L+H77yM6L+U5ZueVG9rZW7mlbDmja5cbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyT2JqID0gdXNlci50b0pTT04oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhcnIgPSBbJ3Bhc3N3b3JkJywgJ3VzZXJuYW1lJ107XG4gICAgICAgICAgICAgICAgYXJyLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZSB1c2VyT2JqW2l0ZW1dO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIOWKoOWFpWlzU2lnbuWxnuaAp1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25SZWNvcmQgPSBhd2FpdCBTaWduUmVjb3JkLmZpbmRCeVVpZCh1c2VyT2JqLl9pZCk7XG4gICAgICAgICAgICAgICAgaWYgKHNpZ25SZWNvcmQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vbWVudChzaWduUmVjb3JkLmNyZWF0ZWQpLmZvcm1hdCgnWVlZWS1NTS1ERCcpID09PSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlck9iai5pc1NpZ24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlck9iai5pc1NpZ24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1c2VyT2JqLmxhc3RTaWduID0gc2lnblJlY29yZC5jcmVhdGVkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOeUqOaIt+aXoOetvuWIsOiusOW9lVxuICAgICAgICAgICAgICAgICAgICB1c2VyT2JqLmlzU2lnbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgX2lkOiB1c2VyT2JqLl9pZCB9LCBtZDUocHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCksIHsgZXhwaXJlc0luOiA2MCAqIDYwICogMjQgfSk7XG4gICAgICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHVzZXJPYmosXG4gICAgICAgICAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgICAgICAgICBtc2c6ICfnmbvlvZXmiJDlip8nLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOeUqOaIt+WQjSDlr4bnoIHpqozor4HlpLHotKXvvIzov5Tlm57mj5DnpLpcbiAgICAgICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgICAgICBtc2c6ICfnlKjmiLflkI3miJbogIXlr4bnoIHplJnor68nLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyDlm77niYfpqozor4HnoIHmoKHpqozlpLHotKVcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDQwMSxcbiAgICAgICAgICAgICAgICBtc2c6ICflm77niYfpqozor4HnoIHkuI3mraPnoa4s6K+35qOA5p+l77yBJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDms6jlhozmjqXlj6NcbiAgICBhc3luYyByZWcoY3R4KSB7XG4gICAgICAgIC8vIOaOpeaUtuWuouaIt+err+eahOaVsOaNrlxuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICAvLyDmoKHpqozpqozor4HnoIHnmoTlhoXlrrnvvIjml7bmlYjmgKfjgIHmnInmlYjmgKfvvIlcbiAgICAgICAgY29uc3Qgc2lkID0gYm9keS5zaWQ7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBib2R5LmNvZGU7XG4gICAgICAgIGxldCBtc2cgPSB7fTtcbiAgICAgICAgLy8g6aqM6K+B5Zu+54mH6aqM6K+B56CB55qE5pe25pWI5oCn44CB5q2j56Gu5oCnXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoZWNrQ29kZShzaWQsIGNvZGUpO1xuICAgICAgICBsZXQgY2hlY2sgPSB0cnVlO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAvLyDmn6XlupPvvIznnIt1c2VybmFtZeaYr+WQpuiiq+azqOWGjFxuICAgICAgICAgICAgY29uc3QgdXNlcjEgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB1c2VybmFtZTogYm9keS51c2VybmFtZSB9KTtcbiAgICAgICAgICAgIGlmICh1c2VyMSAhPT0gbnVsbCAmJiB0eXBlb2YgdXNlcjEudXNlcm5hbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgbXNnLnVzZXJuYW1lID0gJ+atpOmCrueuseW3sue7j+azqOWGjO+8jOWPr+S7pemAmui/h+mCrueuseaJvuWbnuWvhueggSc7XG4gICAgICAgICAgICAgICAgY2hlY2sgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVzZXIyID0gYXdhaXQgVXNlci5maW5kT25lKHsgbmFtZTogYm9keS5uYW1lIH0pO1xuICAgICAgICAgICAgLy8g5p+l5bqT77yM55yLbmFtZeaYr+WQpuiiq+azqOWGjFxuICAgICAgICAgICAgaWYgKHVzZXIyICE9PSBudWxsICYmIHR5cGVvZiB1c2VyMi5uYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIG1zZy5uYW1lID0gJ+atpOaYteensOW3sue7j+iiq+azqOWGjO+8jOivt+S/ruaUuSc7XG4gICAgICAgICAgICAgICAgY2hlY2sgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIOWGmeWFpeaVsOaNruWIsOaVsOaNruW6k1xuICAgICAgICAgICAgaWYgKGNoZWNrKSB7XG4gICAgICAgICAgICAgICAgYm9keS5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKGJvZHkucGFzc3dvcmQsIDUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBib2R5LnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBib2R5Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBib2R5LnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVkOiBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VyLnNhdmUoKTtcbiAgICAgICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBtc2c6ICfms6jlhozmiJDlip8nLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gdmVldmFsaWRhdGUg5pi+56S655qE6ZSZ6K+vXG4gICAgICAgICAgICBtc2cuY29kZSA9ICfpqozor4HnoIHlt7Lnu4/lpLHmlYjvvIzor7fph43mlrDojrflj5bvvIEnO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgbXNnOiBtc2csXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g5a+G56CB6YeN572uXG4gICAgYXN5bmMgcmVzZXQoY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHNpZCA9IGJvZHkuc2lkO1xuICAgICAgICBjb25zdCBjb2RlID0gYm9keS5jb2RlO1xuICAgICAgICBsZXQgbXNnID0ge307XG4gICAgICAgIC8vIOmqjOivgeWbvueJh+mqjOivgeeggeeahOaXtuaViOaAp+OAgeato+ehruaAp1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGVja0NvZGUoc2lkLCBjb2RlKTtcbiAgICAgICAgaWYgKCFib2R5LmtleSkge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+ivt+axguWPguaVsOW8guW4uO+8jOivt+mHjeaWsOiOt+WPlumTvuaOpScsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICBtc2cuY29kZSA9IFsn6aqM6K+B56CB5bey57uP5aSx5pWI77yM6K+36YeN5paw6I635Y+W77yBJ107XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICAgICAgbXNnOiBtc2csXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGJvZHkua2V5KSB7XG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IGF3YWl0IGdldFZhbHVlKGJvZHkua2V5KTtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IGdldEpXVFBheWxvYWQoJ0JlYXJlciAnICsgdG9rZW4pO1xuICAgICAgICAgICAgY29uc3QgbmV3cGFzc3dkID0gYXdhaXQgYmNyeXB0Lmhhc2goYm9keS5wYXNzd29yZCwgNSk7XG4gICAgICAgICAgICBhd2FpdCBVc2VyLnVwZGF0ZU9uZShcbiAgICAgICAgICAgICAgICB7IF9pZDogb2JqLl9pZCB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IG5ld3Bhc3N3ZCxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogMjAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+abtOaWsOeUqOaIt+WvhueggeaIkOWKn++8gScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+mTvuaOpeW3sue7j+WkseaViCcsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBuZXcgTG9naW5Db250cm9sbGVyKCk7XG4iXSwibmFtZXMiOlsic2VuZCIsImJjcnlwdCIsIm1vbWVudCIsImNvbmZpZyIsImNoZWNrQ29kZSIsImdldEpXVFBheWxvYWQiLCJnZW5lcmF0ZVRva2VuIiwiY2hlY2tSZWRpc0FjY291bnRDb2RlIiwiZ2V0VGVtcE5hbWUiLCJqd3QiLCJtZDUiLCJVc2VyIiwiU2lnblJlY29yZCIsImdldFZhbHVlIiwic2V0VmFsdWUiLCJ2NCIsInV1aWR2NCIsIkxvZ2luQ29udHJvbGxlciIsImZvcmdldCIsImN0eCIsImJvZHkiLCJyZXF1ZXN0IiwidXNlciIsImZpbmRPbmUiLCJ1c2VybmFtZSIsImNvZGUiLCJtc2ciLCJrZXkiLCJzaWduIiwiX2lkIiwiSldUX1NFQ1JFVCIsImV4cGlyZXNJbiIsInJlc3VsdCIsInR5cGUiLCJkYXRhIiwiZXhwaXJlIiwiYWRkIiwiZm9ybWF0IiwiZW1haWwiLCJuYW1lIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJsb2dpbiIsInNpZCIsImNoZWNrVXNlclBhc3N3ZCIsImNvbXBhcmUiLCJwYXNzd29yZCIsInVzZXJPYmoiLCJ0b0pTT04iLCJhcnIiLCJtYXAiLCJpdGVtIiwic2lnblJlY29yZCIsImZpbmRCeVVpZCIsImNyZWF0ZWQiLCJpc1NpZ24iLCJsYXN0U2lnbiIsInRva2VuIiwicHJvY2VzcyIsImVudiIsInJlZyIsImNoZWNrIiwidXNlcjEiLCJ1c2VyMiIsImhhc2giLCJzYXZlIiwicmVzZXQiLCJvYmoiLCJuZXdwYXNzd2QiLCJ1cGRhdGVPbmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/api/LoginController.js\n\n}");

/***/ }),

/***/ "./src/api/PublicController.js":
/*!*************************************!*\
  !*** ./src/api/PublicController.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_RedisConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/RedisConfig */ \"./src/config/RedisConfig.js\");\nconst svgCaptcha = __webpack_require__(/*! svg-captcha */ \"svg-captcha\");\n\nclass PublicController {\n  // 获取图片验证码\n  async getCaptcha(ctx) {\n    const body = ctx.query;\n    const newCaptca = svgCaptcha.create({\n      size: 4,\n      ignoreChars: '0oO1ilLI',\n      color: true,\n      noise: Math.floor(Math.random() * 5),\n      width: 150,\n      height: 38\n    });\n    if (typeof body.sid === 'undefined') {\n      ctx.body = {\n        code: 500,\n        msg: '参数不全！'\n      };\n      return;\n    }\n    // 保存图片验证码数据，设置超时时间，单位: s\n    // 设置图片验证码超时10分钟\n    await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_0__.setValue)(body.sid, newCaptca.text, 10 * 60);\n    ctx.body = {\n      code: 0,\n      data: newCaptca.data\n    };\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new PublicController());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvYXBpL1B1YmxpY0NvbnRyb2xsZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxNQUFNQSxVQUFVLEdBQUdDLG1CQUFPLENBQUMsZ0NBQWEsQ0FBQztBQUNrQjtBQUMzRCxNQUFNRyxnQkFBZ0IsQ0FBQztFQUNuQjtFQUNBLE1BQU1DLFVBQVVBLENBQUNDLEdBQUcsRUFBRTtJQUNsQixNQUFNQyxJQUFJLEdBQUdELEdBQUcsQ0FBQ0UsS0FBSztJQUN0QixNQUFNQyxTQUFTLEdBQUdULFVBQVUsQ0FBQ1UsTUFBTSxDQUFDO01BQ2hDQyxJQUFJLEVBQUUsQ0FBQztNQUNQQyxXQUFXLEVBQUUsVUFBVTtNQUN2QkMsS0FBSyxFQUFFLElBQUk7TUFDWEMsS0FBSyxFQUFFQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztNQUNwQ0MsS0FBSyxFQUFFLEdBQUc7TUFDVkMsTUFBTSxFQUFFO0lBQ1osQ0FBQyxDQUFDO0lBQ0YsSUFBSSxPQUFPWixJQUFJLENBQUNhLEdBQUcsS0FBSyxXQUFXLEVBQUU7TUFDakNkLEdBQUcsQ0FBQ0MsSUFBSSxHQUFHO1FBQ1BjLElBQUksRUFBRSxHQUFHO1FBQ1RDLEdBQUcsRUFBRTtNQUNULENBQUM7TUFDRDtJQUNKO0lBQ0E7SUFDQTtJQUNBLE1BQU1wQiw2REFBUSxDQUFDSyxJQUFJLENBQUNhLEdBQUcsRUFBRVgsU0FBUyxDQUFDYyxJQUFJLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQztJQUNqRGpCLEdBQUcsQ0FBQ0MsSUFBSSxHQUFHO01BQ1BjLElBQUksRUFBRSxDQUFDO01BQ1BHLElBQUksRUFBRWYsU0FBUyxDQUFDZTtJQUNwQixDQUFDO0VBQ0w7QUFDSjtBQUVBLGlFQUFlLElBQUlwQixnQkFBZ0IsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL2FwaS9QdWJsaWNDb250cm9sbGVyLmpzPzY4YWUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc3ZnQ2FwdGNoYSA9IHJlcXVpcmUoJ3N2Zy1jYXB0Y2hhJyk7XG5pbXBvcnQgeyBzZXRWYWx1ZSwgZ2V0VmFsdWUgfSBmcm9tICcuLi9jb25maWcvUmVkaXNDb25maWcnO1xuY2xhc3MgUHVibGljQ29udHJvbGxlciB7XG4gICAgLy8g6I635Y+W5Zu+54mH6aqM6K+B56CBXG4gICAgYXN5bmMgZ2V0Q2FwdGNoYShjdHgpIHtcbiAgICAgICAgY29uc3QgYm9keSA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3QgbmV3Q2FwdGNhID0gc3ZnQ2FwdGNoYS5jcmVhdGUoe1xuICAgICAgICAgICAgc2l6ZTogNCxcbiAgICAgICAgICAgIGlnbm9yZUNoYXJzOiAnMG9PMWlsTEknLFxuICAgICAgICAgICAgY29sb3I6IHRydWUsXG4gICAgICAgICAgICBub2lzZTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNSksXG4gICAgICAgICAgICB3aWR0aDogMTUwLFxuICAgICAgICAgICAgaGVpZ2h0OiAzOFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBib2R5LnNpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICBtc2c6ICflj4LmlbDkuI3lhajvvIEnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIOS/neWtmOWbvueJh+mqjOivgeeggeaVsOaNru+8jOiuvue9rui2heaXtuaXtumXtO+8jOWNleS9jTogc1xuICAgICAgICAvLyDorr7nva7lm77niYfpqozor4HnoIHotoXml7YxMOWIhumSn1xuICAgICAgICBhd2FpdCBzZXRWYWx1ZShib2R5LnNpZCwgbmV3Q2FwdGNhLnRleHQsIDEwICogNjApO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBkYXRhOiBuZXdDYXB0Y2EuZGF0YVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IFB1YmxpY0NvbnRyb2xsZXIoKTtcbiJdLCJuYW1lcyI6WyJzdmdDYXB0Y2hhIiwicmVxdWlyZSIsInNldFZhbHVlIiwiZ2V0VmFsdWUiLCJQdWJsaWNDb250cm9sbGVyIiwiZ2V0Q2FwdGNoYSIsImN0eCIsImJvZHkiLCJxdWVyeSIsIm5ld0NhcHRjYSIsImNyZWF0ZSIsInNpemUiLCJpZ25vcmVDaGFycyIsImNvbG9yIiwibm9pc2UiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ3aWR0aCIsImhlaWdodCIsInNpZCIsImNvZGUiLCJtc2ciLCJ0ZXh0IiwiZGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/api/PublicController.js\n\n}");

/***/ }),

/***/ "./src/api/UserController.js":
/*!***********************************!*\
  !*** ./src/api/UserController.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/SignRecord */ \"./src/model/SignRecord.js\");\n/* harmony import */ var _common_Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../common/Utils */ \"./src/common/Utils.js\");\n/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../model/User */ \"./src/model/User.js\");\n/* harmony import */ var _model_UserCollect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../model/UserCollect */ \"./src/model/UserCollect.js\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _config_MailConfig__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/config/MailConfig */ \"./src/config/MailConfig.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(uuid__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/config */ \"./src/config/index.js\");\n/* harmony import */ var _config_RedisConfig__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/config/RedisConfig */ \"./src/config/RedisConfig.js\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _model_Comments__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/model/Comments */ \"./src/model/Comments.js\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! qs */ \"qs\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! md5 */ \"md5\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_13__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import CommentsHands from '@/model/CommentsHands';\nclass UserController {\n  // 用户签到接口\n  async userSign(ctx) {\n    // 取用户的ID\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n\n    // 查询用户上一次签到记录\n    const record = await _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findByUid(obj._id);\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByID(obj._id);\n    let newRecord = {};\n    let result = '';\n    // 判断签到逻辑\n    if (record !== null) {\n      // 有历史的签到数据\n      // 判断用户上一次签到记录的created时间是否与今天相同\n      // 如果当前时间的日期与用户上一次的签到日期相同，说明用户已经签到\n      if (dayjs__WEBPACK_IMPORTED_MODULE_4___default()(record.created).format('YYYY-MM-DD') === dayjs__WEBPACK_IMPORTED_MODULE_4___default()().format('YYYY-MM-DD')) {\n        ctx.body = {\n          code: 500,\n          favs: user.favs,\n          count: user.count,\n          lastSign: record.created,\n          msg: '用户已经签到'\n        };\n        return;\n      } else {\n        // 有上一次的签到记录，并且不与今天相同，进行连续签到的判断\n        // 如果相同，代表用户是在连续签到\n        let count = user.count;\n        let fav = 0;\n        // 判断签到时间: 用户上一次的签到时间等于，当前时间的前一天，说明，用户在连续签到\n        // 第n+1天签到的时候，需要与第n的天created比较\n        if (dayjs__WEBPACK_IMPORTED_MODULE_4___default()(record.created).format('YYYY-MM-DD') === dayjs__WEBPACK_IMPORTED_MODULE_4___default()().subtract(1, 'days').format('YYYY-MM-DD')) {\n          // 连续签到的积分获得逻辑\n          count += 1;\n          if (count < 5) {\n            fav = 5;\n          } else if (count >= 5 && count < 15) {\n            fav = 10;\n          } else if (count >= 15 && count < 30) {\n            fav = 15;\n          } else if (count >= 30 && count < 100) {\n            fav = 20;\n          } else if (count >= 100 && count < 365) {\n            fav = 30;\n          } else if (count >= 365) {\n            fav = 50;\n          }\n          await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n            _id: obj._id\n          }, {\n            // user.favs += fav\n            // user.count += 1\n            $inc: {\n              favs: fav,\n              count: 1\n            }\n          });\n          result = {\n            favs: user.favs + fav,\n            count: user.count + 1\n          };\n        } else {\n          // 用户中断了一次签到\n          // 第n+1天签到的时候，需要与第n的天created比较，如果不相等，说明中断了签到。\n          fav = 5;\n          await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n            _id: obj._id\n          }, {\n            $set: {\n              count: 1\n            },\n            $inc: {\n              favs: fav\n            }\n          });\n          result = {\n            favs: user.favs + fav,\n            count: 1\n          };\n        }\n        // 更新签到记录\n        newRecord = new _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n          uid: obj._id,\n          favs: fav\n        });\n        await newRecord.save();\n      }\n    } else {\n      // 无签到数据 =》 第一次签到\n      // 保存用户的签到数据，签到记数 + 积分数据\n      await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n        _id: obj._id\n      }, {\n        $set: {\n          count: 1\n        },\n        $inc: {\n          favs: 5\n        }\n      });\n      // 保存用户的签到记录\n      newRecord = new _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n        uid: obj._id,\n        favs: 5\n      });\n      await newRecord.save();\n      result = {\n        favs: user.favs + 5,\n        count: 1\n      };\n    }\n    ctx.body = {\n      code: 0,\n      msg: '请求成功',\n      ...result,\n      lastSign: newRecord.created\n    };\n  }\n\n  // 更新用户基本信息接口\n  async updateUserInfo(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    // 判断用户是否修改了邮箱\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n      _id: obj._id\n    });\n    let msg = '';\n    if (body.username && body.username !== user.username) {\n      // 用户修改了邮箱\n      // 发送reset邮件\n      // 判断用户的新邮箱是否已经有人注册\n      const tmpUser = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n        username: body.username\n      });\n      if (tmpUser && tmpUser.password) {\n        ctx.body = {\n          code: 501,\n          msg: '邮箱已经注册'\n        };\n        return;\n      }\n      const key = (0,uuid__WEBPACK_IMPORTED_MODULE_6__.v4)();\n      (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_9__.setValue)(key, jsonwebtoken__WEBPACK_IMPORTED_MODULE_7___default().sign({\n        _id: obj._id\n      }, md5__WEBPACK_IMPORTED_MODULE_13___default()(_config__WEBPACK_IMPORTED_MODULE_8__[\"default\"].JWT_SECRET), {\n        expiresIn: '30m'\n      }));\n      await (0,_config_MailConfig__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({\n        type: 'email',\n        data: {\n          key: key,\n          username: body.username\n        },\n        code: '',\n        expire: dayjs__WEBPACK_IMPORTED_MODULE_4___default()().add(30, 'minutes').format('YYYY-MM-DD HH:mm:ss'),\n        email: user.username,\n        user: user.name\n      });\n      msg = '更新基本资料成功，账号修改需要邮件确认，请查收邮件！';\n    }\n    const arr = ['username', 'mobile', 'password'];\n    arr.map(item => {\n      return delete body[item];\n    });\n    const result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n      _id: obj._id\n    }, body);\n    if (result.modifiedCount > 0) {\n      ctx.body = {\n        code: 0,\n        msg: msg === '' ? '更新成功' : msg\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '更新失败'\n      };\n    }\n  }\n\n  // 更新用户名\n  async updateUsername(ctx) {\n    const body = ctx.query;\n    if (body.key) {\n      const token = await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_9__.getValue)(body.key);\n      const obj = (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)('Bearer ' + token);\n      await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n        _id: obj._id\n      }, {\n        username: body.username\n      });\n      ctx.body = {\n        code: 0,\n        msg: '更新用户名成功'\n      };\n    }\n  }\n\n  // 修改密码接口\n  async changePasswd(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n      _id: obj._id\n    });\n    if (await bcrypt__WEBPACK_IMPORTED_MODULE_10___default().compare(body.oldpwd, user.password)) {\n      const newpasswd = await bcrypt__WEBPACK_IMPORTED_MODULE_10___default().hash(body.newpwd, 5);\n      await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n        _id: obj._id\n      }, {\n        $set: {\n          password: newpasswd\n        }\n      });\n      ctx.body = {\n        code: 0,\n        msg: '更新密码成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '更新密码错误，请检查！'\n      };\n    }\n  }\n\n  // 设置收藏\n  async setCollect(ctx) {\n    const params = ctx.query;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    if (parseInt(params.isFav)) {\n      // 说明用户已经收藏了帖子\n      await _model_UserCollect__WEBPACK_IMPORTED_MODULE_3__[\"default\"].deleteOne({\n        uid: obj._id,\n        tid: params.tid\n      });\n      ctx.body = {\n        code: 0,\n        msg: '取消收藏成功'\n      };\n    } else {\n      const newCollect = new _model_UserCollect__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n        uid: obj._id,\n        tid: params.tid,\n        title: params.title\n      });\n      const result = await newCollect.save();\n      if (result.uid) {\n        ctx.body = {\n          code: 0,\n          data: result,\n          msg: '收藏成功'\n        };\n      }\n    }\n  }\n\n  // 获取收藏列表\n  async getCollectByUid(ctx) {\n    const params = ctx.query;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    const result = await _model_UserCollect__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getListByUid(obj._id, params.page, params.limit ? parseInt(params.limit) : 10);\n    const total = await _model_UserCollect__WEBPACK_IMPORTED_MODULE_3__[\"default\"].countByUid(obj._id);\n    if (result.length > 0) {\n      ctx.body = {\n        code: 0,\n        data: result,\n        total,\n        msg: '查询列表成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '查询列表失败'\n      };\n    }\n  }\n\n  // 获取用户基本信息\n  async getBasicInfo(ctx) {\n    const params = ctx.query;\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    const uid = params.uid || obj._id;\n    let user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findByID(uid);\n    // 取得用户的签到记录 有没有 > today 0:00:00\n    if (user) {\n      user = user.toJSON();\n      const date = dayjs__WEBPACK_IMPORTED_MODULE_4___default()().format('YYYY-MM-DD');\n      const result = await _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOne({\n        uid: uid,\n        created: {\n          $gte: date + ' 00:00:00'\n        }\n      });\n      if (result && result.uid) {\n        user.isSign = true;\n      } else {\n        user.isSign = false;\n      }\n    }\n    ctx.body = {\n      code: 0,\n      data: user,\n      msg: '查询成功！'\n    };\n  }\n\n  // 获取历史消息\n  // 记录评论之后，给作者发送消息\n  async getMsg(ctx) {\n    const params = ctx.query;\n    const page = params.page ? params.page : 0;\n    const limit = params.limit ? parseInt(params.limit) : 0;\n    // 方法一： 嵌套查询 -> aggregate\n    // 方法二： 通过冗余换时间\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    const num = await _model_Comments__WEBPACK_IMPORTED_MODULE_11__[\"default\"].getTotal(obj._id);\n    const result = await _model_Comments__WEBPACK_IMPORTED_MODULE_11__[\"default\"].getMsgList(obj._id, page, limit);\n    ctx.body = {\n      code: 0,\n      data: result,\n      total: num\n    };\n  }\n\n  // 设置已读消息\n  async setMsg(ctx) {\n    const params = ctx.query;\n    if (params.id) {\n      const result = await _model_Comments__WEBPACK_IMPORTED_MODULE_11__[\"default\"].updateOne({\n        _id: params.id\n      }, {\n        isRead: '1'\n      });\n      if (result.modifiedCount === 1) {\n        ctx.body = {\n          code: 0\n        };\n      }\n    } else {\n      const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n      const result = await _model_Comments__WEBPACK_IMPORTED_MODULE_11__[\"default\"].updateMany({\n        uid: obj._id\n      }, {\n        isRead: '1'\n      });\n      if (result.modifiedCount >= 1) {\n        ctx.body = {\n          code: 0\n        };\n      }\n    }\n  }\n\n  // 获取历史消息\n  // 记录评论之后，给作者发送消息\n  async getHands(ctx) {\n    const params = ctx.query;\n    const page = params.page ? params.page : 0;\n    const limit = params.limit ? parseInt(params.limit) : 0;\n    // 方法一： 嵌套查询 -> aggregate\n    // 方法二： 通过冗余换时间\n    const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n    const result = await CommentsHands.getHandsByUid(obj._id, page, limit);\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n\n  // 获取用户列表\n  async getUsers(ctx) {\n    let params = ctx.query;\n    params = qs__WEBPACK_IMPORTED_MODULE_12___default().parse(params);\n    const page = params.page ? params.page : 0;\n    const limit = params.limit ? parseInt(params.limit) : 0;\n    const sort = params.sort || 'created';\n    const option = params.option || {};\n    const result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getList(option, sort, page, limit);\n    const total = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].countList(option);\n    ctx.body = {\n      code: 0,\n      data: result,\n      total: total\n    };\n  }\n\n  // 管理员删除用户\n  async deleteUserById(ctx) {\n    const {\n      body\n    } = ctx.request;\n    // const user = await User.findOne({ _id: params.id })\n    // if (user) {\n    const result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].deleteMany({\n      _id: {\n        $in: body.ids\n      }\n    });\n    ctx.body = {\n      code: 0,\n      msg: '删除成功',\n      data: result\n    };\n    // } else {\n    //   ctx.body = {\n    //     code: 500,\n    //     msg: '用户不存在或者id信息错误！'\n    //   }\n    // }\n  }\n\n  // 管理员更新用户\n  async updateUserById(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n      _id: body._id\n    });\n    // 1.校验用户是否存在 -> 用户名是否冲突\n    if (!user) {\n      ctx.body = {\n        code: 500,\n        msg: '用户不存在或者id信息错误！'\n      };\n      return;\n    }\n\n    // if (body.username !== user.username) {\n    //     const userCheckName = await User.findOne({ username: body.username });\n    //     if (userCheckName) {\n    //         ctx.body = {\n    //             code: 501,\n    //             msg: '用户名已经存在，更新失败！',\n    //         };\n    //         return;\n    //     }\n    // }\n\n    // 2.判断密码是否传递 -> 进行加密保存\n    if (body.password) {\n      body.password = await bcrypt__WEBPACK_IMPORTED_MODULE_10___default().hash(body.password, 5);\n    }\n    const result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateOne({\n      _id: body._id\n    }, body);\n    if (result.modifiedCount === 1) {\n      ctx.body = {\n        code: 0,\n        msg: '更新成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '服务异常，更新失败'\n      };\n    }\n  }\n\n  // 批量设置用户属性\n  // 方法一：新增一个接口 方法二： options -> action 'one' 'many'\n  async updateUserBatch(ctx) {\n    const {\n      body\n    } = ctx.request;\n    const result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateMany({\n      _id: {\n        $in: body.ids\n      }\n    }, {\n      $set: {\n        ...body.settings\n      }\n    });\n    ctx.body = {\n      code: 0,\n      data: result\n    };\n  }\n  async checkUsername(ctx) {\n    const params = ctx.query;\n    const user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n      username: params.username\n    });\n    // 默认是 1 - 校验通过， 0 - 校验失败\n    let result = 1;\n    if (user && user.username) {\n      result = 0;\n    }\n    ctx.body = {\n      code: 0,\n      data: result,\n      msg: '用户名已经存在，更新失败！'\n    };\n  }\n  async addUser(ctx) {\n    const {\n      body\n    } = ctx.request;\n    body.password = await bcrypt__WEBPACK_IMPORTED_MODULE_10___default().hash(body.password, 5);\n    const user = new _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"](body);\n    const result = await user.save();\n    const userObj = result.toJSON();\n    const arr = ['password'];\n    arr.map(item => {\n      return delete userObj[item];\n    });\n    if (result) {\n      ctx.body = {\n        code: 0,\n        data: userObj,\n        msg: '添加用户成功'\n      };\n    } else {\n      ctx.body = {\n        code: 500,\n        msg: '服务接口异常'\n      };\n    }\n  }\n\n  // 取得签到列表\n  async getSignList(ctx) {\n    const body = ctx.query;\n    try {\n      let result = '';\n      const type = parseInt(body.type);\n      if (type === 1) {\n        result = await _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findQuickestSign(); // 今日签到榜\n      } else if (type === 2) {\n        result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findTotalSign(); // 总签到榜\n      } else {\n        result = await _model_SignRecord__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findLastSign();\n      }\n      ctx.body = {\n        code: 0,\n        msg: '',\n        data: result\n      };\n    } catch (e) {\n      ctx.body = {\n        msg: '获取最新签到列表失败',\n        code: 500\n      };\n    }\n  }\n\n  // 检测用户是否存在\n  async isUserExist(ctx) {\n    const body = ctx.query;\n    const option = {};\n    body.phone && (option.mobile = body.phone);\n    body.email && (option.username = body.email);\n    const result = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].queryCount(option);\n    ctx.body = {\n      result\n    };\n  }\n\n  // 绑定邮箱或者手机号\n  async accountUpdate(ctx) {\n    const body = ctx.query;\n    const phone = body.phone;\n    const email = body.email;\n    const isCorrect = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.checkRedisAccountCode)(phone || email, body.sms);\n    if (isCorrect) {\n      (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_9__.delValue)(phone || email); // 验证码使用后从 redis 中删除\n      const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(ctx.header.authorization);\n      if (phone) {\n        await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateMobile(obj._id, phone);\n      } else {\n        await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateEmail(obj._id, email);\n      }\n      ctx.body = {\n        code: 0,\n        msg: '资料修改成功！'\n      };\n      return;\n    }\n    ctx.body = {\n      code: 500,\n      msg: '验证码不正确！'\n    };\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (new UserController());//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7SUFDdkUsSUFBSUQsU0FBUyxFQUFFO01BQ1h2SCw2REFBUSxDQUFDbUgsS0FBSyxJQUFJcEUsS0FBSyxDQUFDLENBQUMsQ0FBQztNQUMxQixNQUFNdkMsR0FBRyxHQUFHLE1BQU1wQiw0REFBYSxDQUFDbUIsR0FBRyxDQUFDRSxNQUFNLENBQUNDLGFBQWEsQ0FBQztNQUN6RCxJQUFJeUcsS0FBSyxFQUFFO1FBQ1AsTUFBTTdILG1EQUFJLENBQUNtSSxZQUFZLENBQUNqSCxHQUFHLENBQUNLLEdBQUcsRUFBRXNHLEtBQUssQ0FBQztNQUMzQyxDQUFDLE1BQU07UUFDSCxNQUFNN0gsbURBQUksQ0FBQ29JLFdBQVcsQ0FBQ2xILEdBQUcsQ0FBQ0ssR0FBRyxFQUFFa0MsS0FBSyxDQUFDO01BQzFDO01BQ0F4QyxHQUFHLENBQUNhLElBQUksR0FBRztRQUNQQyxJQUFJLEVBQUUsQ0FBQztRQUNQSSxHQUFHLEVBQUU7TUFDVCxDQUFDO01BQ0Q7SUFDSjtJQUNBbEIsR0FBRyxDQUFDYSxJQUFJLEdBQUc7TUFDUEMsSUFBSSxFQUFFLEdBQUc7TUFDVEksR0FBRyxFQUFFO0lBQ1QsQ0FBQztFQUNMO0FBQ0o7QUFFQSxpRUFBZSxJQUFJcEIsY0FBYyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvYXBpL1VzZXJDb250cm9sbGVyLmpzP2I5YWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNpZ25SZWNvcmQgZnJvbSAnLi4vbW9kZWwvU2lnblJlY29yZCc7XG5pbXBvcnQgeyBnZXRKV1RQYXlsb2FkLCBjaGVja1JlZGlzQWNjb3VudENvZGUgfSBmcm9tICcuLi9jb21tb24vVXRpbHMnO1xuaW1wb3J0IFVzZXIgZnJvbSAnLi4vbW9kZWwvVXNlcic7XG5pbXBvcnQgVXNlckNvbGxlY3QgZnJvbSAnLi4vbW9kZWwvVXNlckNvbGxlY3QnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdkYXlqcyc7XG5pbXBvcnQgc2VuZCBmcm9tICdAL2NvbmZpZy9NYWlsQ29uZmlnJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IGNvbmZpZyBmcm9tICdAL2NvbmZpZyc7XG5pbXBvcnQgeyBzZXRWYWx1ZSwgZ2V0VmFsdWUsIGRlbFZhbHVlIH0gZnJvbSAnQC9jb25maWcvUmVkaXNDb25maWcnO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnO1xuaW1wb3J0IENvbW1lbnRzIGZyb20gJ0AvbW9kZWwvQ29tbWVudHMnO1xuaW1wb3J0IHFzIGZyb20gJ3FzJztcbmltcG9ydCBtZDUgZnJvbSAnbWQ1Jztcbi8vIGltcG9ydCBDb21tZW50c0hhbmRzIGZyb20gJ0AvbW9kZWwvQ29tbWVudHNIYW5kcyc7XG5jbGFzcyBVc2VyQ29udHJvbGxlciB7XG4gICAgLy8g55So5oi3562+5Yiw5o6l5Y+jXG4gICAgYXN5bmMgdXNlclNpZ24oY3R4KSB7XG4gICAgICAgIC8vIOWPlueUqOaIt+eahElEXG4gICAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKTtcblxuICAgICAgICAvLyDmn6Xor6LnlKjmiLfkuIrkuIDmrKHnrb7liLDorrDlvZVcbiAgICAgICAgY29uc3QgcmVjb3JkID0gYXdhaXQgU2lnblJlY29yZC5maW5kQnlVaWQob2JqLl9pZCk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlEKG9iai5faWQpO1xuICAgICAgICBsZXQgbmV3UmVjb3JkID0ge307XG4gICAgICAgIGxldCByZXN1bHQgPSAnJztcbiAgICAgICAgLy8g5Yik5pat562+5Yiw6YC76L6RXG4gICAgICAgIGlmIChyZWNvcmQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIOacieWOhuWPsueahOetvuWIsOaVsOaNrlxuICAgICAgICAgICAgLy8g5Yik5pat55So5oi35LiK5LiA5qyh562+5Yiw6K6w5b2V55qEY3JlYXRlZOaXtumXtOaYr+WQpuS4juS7iuWkqeebuOWQjFxuICAgICAgICAgICAgLy8g5aaC5p6c5b2T5YmN5pe26Ze055qE5pel5pyf5LiO55So5oi35LiK5LiA5qyh55qE562+5Yiw5pel5pyf55u45ZCM77yM6K+05piO55So5oi35bey57uP562+5YiwXG4gICAgICAgICAgICBpZiAobW9tZW50KHJlY29yZC5jcmVhdGVkKS5mb3JtYXQoJ1lZWVktTU0tREQnKSA9PT0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREJykpIHtcbiAgICAgICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgICAgICBmYXZzOiB1c2VyLmZhdnMsXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiB1c2VyLmNvdW50LFxuICAgICAgICAgICAgICAgICAgICBsYXN0U2lnbjogcmVjb3JkLmNyZWF0ZWQsXG4gICAgICAgICAgICAgICAgICAgIG1zZzogJ+eUqOaIt+W3sue7j+etvuWIsCcsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOacieS4iuS4gOasoeeahOetvuWIsOiusOW9le+8jOW5tuS4lOS4jeS4juS7iuWkqeebuOWQjO+8jOi/m+ihjOi/nue7reetvuWIsOeahOWIpOaWrVxuICAgICAgICAgICAgICAgIC8vIOWmguaenOebuOWQjO+8jOS7o+ihqOeUqOaIt+aYr+WcqOi/nue7reetvuWIsFxuICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IHVzZXIuY291bnQ7XG4gICAgICAgICAgICAgICAgbGV0IGZhdiA9IDA7XG4gICAgICAgICAgICAgICAgLy8g5Yik5pat562+5Yiw5pe26Ze0OiDnlKjmiLfkuIrkuIDmrKHnmoTnrb7liLDml7bpl7TnrYnkuo7vvIzlvZPliY3ml7bpl7TnmoTliY3kuIDlpKnvvIzor7TmmI7vvIznlKjmiLflnKjov57nu63nrb7liLBcbiAgICAgICAgICAgICAgICAvLyDnrKxuKzHlpKnnrb7liLDnmoTml7blgJnvvIzpnIDopoHkuI7nrKxu55qE5aSpY3JlYXRlZOavlOi+g1xuICAgICAgICAgICAgICAgIGlmIChtb21lbnQocmVjb3JkLmNyZWF0ZWQpLmZvcm1hdCgnWVlZWS1NTS1ERCcpID09PSBtb21lbnQoKS5zdWJ0cmFjdCgxLCAnZGF5cycpLmZvcm1hdCgnWVlZWS1NTS1ERCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOi/nue7reetvuWIsOeahOenr+WIhuiOt+W+l+mAu+i+kVxuICAgICAgICAgICAgICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPCA1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYXYgPSA1O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50ID49IDUgJiYgY291bnQgPCAxNSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmF2ID0gMTA7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPj0gMTUgJiYgY291bnQgPCAzMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmF2ID0gMTU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPj0gMzAgJiYgY291bnQgPCAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhdiA9IDIwO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50ID49IDEwMCAmJiBjb3VudCA8IDM2NSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmF2ID0gMzA7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPj0gMzY1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYXYgPSA1MDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBVc2VyLnVwZGF0ZU9uZShcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgX2lkOiBvYmouX2lkIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlci5mYXZzICs9IGZhdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZXIuY291bnQgKz0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbmM6IHsgZmF2czogZmF2LCBjb3VudDogMSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYXZzOiB1c2VyLmZhdnMgKyBmYXYsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogdXNlci5jb3VudCArIDEsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g55So5oi35Lit5pat5LqG5LiA5qyh562+5YiwXG4gICAgICAgICAgICAgICAgICAgIC8vIOesrG4rMeWkqeetvuWIsOeahOaXtuWAme+8jOmcgOimgeS4juesrG7nmoTlpKljcmVhdGVk5q+U6L6D77yM5aaC5p6c5LiN55u4562J77yM6K+05piO5Lit5pat5LqG562+5Yiw44CCXG4gICAgICAgICAgICAgICAgICAgIGZhdiA9IDU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IFVzZXIudXBkYXRlT25lKFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBfaWQ6IG9iai5faWQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2V0OiB7IGNvdW50OiAxIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGluYzogeyBmYXZzOiBmYXYgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmF2czogdXNlci5mYXZzICsgZmF2LFxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IDEsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIOabtOaWsOetvuWIsOiusOW9lVxuICAgICAgICAgICAgICAgIG5ld1JlY29yZCA9IG5ldyBTaWduUmVjb3JkKHtcbiAgICAgICAgICAgICAgICAgICAgdWlkOiBvYmouX2lkLFxuICAgICAgICAgICAgICAgICAgICBmYXZzOiBmYXYsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV3UmVjb3JkLnNhdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOaXoOetvuWIsOaVsOaNriA944CLIOesrOS4gOasoeetvuWIsFxuICAgICAgICAgICAgLy8g5L+d5a2Y55So5oi355qE562+5Yiw5pWw5o2u77yM562+5Yiw6K6w5pWwICsg56ev5YiG5pWw5o2uXG4gICAgICAgICAgICBhd2FpdCBVc2VyLnVwZGF0ZU9uZShcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIF9pZDogb2JqLl9pZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgJHNldDogeyBjb3VudDogMSB9LFxuICAgICAgICAgICAgICAgICAgICAkaW5jOiB7IGZhdnM6IDUgfSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgLy8g5L+d5a2Y55So5oi355qE562+5Yiw6K6w5b2VXG4gICAgICAgICAgICBuZXdSZWNvcmQgPSBuZXcgU2lnblJlY29yZCh7XG4gICAgICAgICAgICAgICAgdWlkOiBvYmouX2lkLFxuICAgICAgICAgICAgICAgIGZhdnM6IDUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGF3YWl0IG5ld1JlY29yZC5zYXZlKCk7XG4gICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgICAgZmF2czogdXNlci5mYXZzICsgNSxcbiAgICAgICAgICAgICAgICBjb3VudDogMSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgbXNnOiAn6K+35rGC5oiQ5YqfJyxcbiAgICAgICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgICAgIGxhc3RTaWduOiBuZXdSZWNvcmQuY3JlYXRlZCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyDmm7TmlrDnlKjmiLfln7rmnKzkv6Hmga/mjqXlj6NcbiAgICBhc3luYyB1cGRhdGVVc2VySW5mbyhjdHgpIHtcbiAgICAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgICAgICAvLyDliKTmlq3nlKjmiLfmmK/lkKbkv67mlLnkuobpgq7nrrFcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogb2JqLl9pZCB9KTtcbiAgICAgICAgbGV0IG1zZyA9ICcnO1xuICAgICAgICBpZiAoYm9keS51c2VybmFtZSAmJiBib2R5LnVzZXJuYW1lICE9PSB1c2VyLnVzZXJuYW1lKSB7XG4gICAgICAgICAgICAvLyDnlKjmiLfkv67mlLnkuobpgq7nrrFcbiAgICAgICAgICAgIC8vIOWPkemAgXJlc2V06YKu5Lu2XG4gICAgICAgICAgICAvLyDliKTmlq3nlKjmiLfnmoTmlrDpgq7nrrHmmK/lkKblt7Lnu4/mnInkurrms6jlhoxcbiAgICAgICAgICAgIGNvbnN0IHRtcFVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB1c2VybmFtZTogYm9keS51c2VybmFtZSB9KTtcbiAgICAgICAgICAgIGlmICh0bXBVc2VyICYmIHRtcFVzZXIucGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogNTAxLFxuICAgICAgICAgICAgICAgICAgICBtc2c6ICfpgq7nrrHlt7Lnu4/ms6jlhownLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qga2V5ID0gdXVpZHY0KCk7XG4gICAgICAgICAgICBzZXRWYWx1ZShcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgand0LnNpZ24oeyBfaWQ6IG9iai5faWQgfSwgbWQ1KGNvbmZpZy5KV1RfU0VDUkVUKSwge1xuICAgICAgICAgICAgICAgICAgICBleHBpcmVzSW46ICczMG0nLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYXdhaXQgc2VuZCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2VtYWlsJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogYm9keS51c2VybmFtZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvZGU6ICcnLFxuICAgICAgICAgICAgICAgIGV4cGlyZTogbW9tZW50KCkuYWRkKDMwLCAnbWludXRlcycpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpLFxuICAgICAgICAgICAgICAgIGVtYWlsOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIubmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbXNnID0gJ+abtOaWsOWfuuacrOi1hOaWmeaIkOWKn++8jOi0puWPt+S/ruaUuemcgOimgemCruS7tuehruiupO+8jOivt+afpeaUtumCruS7tu+8gSc7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhcnIgPSBbJ3VzZXJuYW1lJywgJ21vYmlsZScsICdwYXNzd29yZCddO1xuICAgICAgICBhcnIubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZSBib2R5W2l0ZW1dO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlci51cGRhdGVPbmUoeyBfaWQ6IG9iai5faWQgfSwgYm9keSk7XG4gICAgICAgIGlmIChyZXN1bHQubW9kaWZpZWRDb3VudCA+IDApIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgbXNnOiBtc2cgPT09ICcnID8gJ+abtOaWsOaIkOWKnycgOiBtc2csXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+abtOaWsOWksei0pScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g5pu05paw55So5oi35ZCNXG4gICAgYXN5bmMgdXBkYXRlVXNlcm5hbWUoY3R4KSB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSBjdHgucXVlcnk7XG4gICAgICAgIGlmIChib2R5LmtleSkge1xuICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCBnZXRWYWx1ZShib2R5LmtleSk7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBnZXRKV1RQYXlsb2FkKCdCZWFyZXIgJyArIHRva2VuKTtcbiAgICAgICAgICAgIGF3YWl0IFVzZXIudXBkYXRlT25lKFxuICAgICAgICAgICAgICAgIHsgX2lkOiBvYmouX2lkIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogYm9keS51c2VybmFtZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICBtc2c6ICfmm7TmlrDnlKjmiLflkI3miJDlip8nLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOS/ruaUueWvhueggeaOpeWPo1xuICAgIGFzeW5jIGNoYW5nZVBhc3N3ZChjdHgpIHtcbiAgICAgICAgY29uc3QgeyBib2R5IH0gPSBjdHgucmVxdWVzdDtcbiAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgX2lkOiBvYmouX2lkIH0pO1xuICAgICAgICBpZiAoYXdhaXQgYmNyeXB0LmNvbXBhcmUoYm9keS5vbGRwd2QsIHVzZXIucGFzc3dvcmQpKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdwYXNzd2QgPSBhd2FpdCBiY3J5cHQuaGFzaChib2R5Lm5ld3B3ZCwgNSk7XG4gICAgICAgICAgICBhd2FpdCBVc2VyLnVwZGF0ZU9uZSh7IF9pZDogb2JqLl9pZCB9LCB7ICRzZXQ6IHsgcGFzc3dvcmQ6IG5ld3Bhc3N3ZCB9IH0pO1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICBtc2c6ICfmm7TmlrDlr4bnoIHmiJDlip8nLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICBtc2c6ICfmm7TmlrDlr4bnoIHplJnor6/vvIzor7fmo4Dmn6XvvIEnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOiuvue9ruaUtuiXj1xuICAgIGFzeW5jIHNldENvbGxlY3QoY3R4KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgICAgICBpZiAocGFyc2VJbnQocGFyYW1zLmlzRmF2KSkge1xuICAgICAgICAgICAgLy8g6K+05piO55So5oi35bey57uP5pS26JeP5LqG5biW5a2QXG4gICAgICAgICAgICBhd2FpdCBVc2VyQ29sbGVjdC5kZWxldGVPbmUoeyB1aWQ6IG9iai5faWQsIHRpZDogcGFyYW1zLnRpZCB9KTtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn5Y+W5raI5pS26JeP5oiQ5YqfJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuZXdDb2xsZWN0ID0gbmV3IFVzZXJDb2xsZWN0KHtcbiAgICAgICAgICAgICAgICB1aWQ6IG9iai5faWQsXG4gICAgICAgICAgICAgICAgdGlkOiBwYXJhbXMudGlkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBwYXJhbXMudGl0bGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5ld0NvbGxlY3Quc2F2ZSgpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC51aWQpIHtcbiAgICAgICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogMCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBtc2c6ICfmlLbol4/miJDlip8nLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDojrflj5bmlLbol4/liJfooahcbiAgICBhc3luYyBnZXRDb2xsZWN0QnlVaWQoY3R4KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyQ29sbGVjdC5nZXRMaXN0QnlVaWQob2JqLl9pZCwgcGFyYW1zLnBhZ2UsIHBhcmFtcy5saW1pdCA/IHBhcnNlSW50KHBhcmFtcy5saW1pdCkgOiAxMCk7XG4gICAgICAgIGNvbnN0IHRvdGFsID0gYXdhaXQgVXNlckNvbGxlY3QuY291bnRCeVVpZChvYmouX2lkKTtcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgICAgICB0b3RhbCxcbiAgICAgICAgICAgICAgICBtc2c6ICfmn6Xor6LliJfooajmiJDlip8nLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICBtc2c6ICfmn6Xor6LliJfooajlpLHotKUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOiOt+WPlueUqOaIt+WfuuacrOS/oeaBr1xuICAgIGFzeW5jIGdldEJhc2ljSW5mbyhjdHgpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gY3R4LnF1ZXJ5O1xuICAgICAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgICAgIGNvbnN0IHVpZCA9IHBhcmFtcy51aWQgfHwgb2JqLl9pZDtcbiAgICAgICAgbGV0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlEKHVpZCk7XG4gICAgICAgIC8vIOWPluW+l+eUqOaIt+eahOetvuWIsOiusOW9lSDmnInmsqHmnIkgPiB0b2RheSAwOjAwOjAwXG4gICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICB1c2VyID0gdXNlci50b0pTT04oKTtcblxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCcpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgU2lnblJlY29yZC5maW5kT25lKHtcbiAgICAgICAgICAgICAgICB1aWQ6IHVpZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkOiB7ICRndGU6IGRhdGUgKyAnIDAwOjAwOjAwJyB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC51aWQpIHtcbiAgICAgICAgICAgICAgICB1c2VyLmlzU2lnbiA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHVzZXIuaXNTaWduID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogdXNlcixcbiAgICAgICAgICAgIG1zZzogJ+afpeivouaIkOWKn++8gScsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g6I635Y+W5Y6G5Y+y5raI5oGvXG4gICAgLy8g6K6w5b2V6K+E6K665LmL5ZCO77yM57uZ5L2c6ICF5Y+R6YCB5raI5oGvXG4gICAgYXN5bmMgZ2V0TXNnKGN0eCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBwYXJhbXMucGFnZSA/IHBhcmFtcy5wYWdlIDogMDtcbiAgICAgICAgY29uc3QgbGltaXQgPSBwYXJhbXMubGltaXQgPyBwYXJzZUludChwYXJhbXMubGltaXQpIDogMDtcbiAgICAgICAgLy8g5pa55rOV5LiA77yaIOW1jOWll+afpeivoiAtPiBhZ2dyZWdhdGVcbiAgICAgICAgLy8g5pa55rOV5LqM77yaIOmAmui/h+WGl+S9meaNouaXtumXtFxuICAgICAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgICAgIGNvbnN0IG51bSA9IGF3YWl0IENvbW1lbnRzLmdldFRvdGFsKG9iai5faWQpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBDb21tZW50cy5nZXRNc2dMaXN0KG9iai5faWQsIHBhZ2UsIGxpbWl0KTtcblxuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICB0b3RhbDogbnVtLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOiuvue9ruW3suivu+a2iOaBr1xuICAgIGFzeW5jIHNldE1zZyhjdHgpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0gY3R4LnF1ZXJ5O1xuICAgICAgICBpZiAocGFyYW1zLmlkKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBDb21tZW50cy51cGRhdGVPbmUoeyBfaWQ6IHBhcmFtcy5pZCB9LCB7IGlzUmVhZDogJzEnIH0pO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5tb2RpZmllZENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQoY3R4LmhlYWRlci5hdXRob3JpemF0aW9uKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvbW1lbnRzLnVwZGF0ZU1hbnkoeyB1aWQ6IG9iai5faWQgfSwgeyBpc1JlYWQ6ICcxJyB9KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQubW9kaWZpZWRDb3VudCA+PSAxKSB7XG4gICAgICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOiOt+WPluWOhuWPsua2iOaBr1xuICAgIC8vIOiusOW9leivhOiuuuS5i+WQju+8jOe7meS9nOiAheWPkemAgea2iOaBr1xuICAgIGFzeW5jIGdldEhhbmRzKGN0eCkge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjdHgucXVlcnk7XG4gICAgICAgIGNvbnN0IHBhZ2UgPSBwYXJhbXMucGFnZSA/IHBhcmFtcy5wYWdlIDogMDtcbiAgICAgICAgY29uc3QgbGltaXQgPSBwYXJhbXMubGltaXQgPyBwYXJzZUludChwYXJhbXMubGltaXQpIDogMDtcbiAgICAgICAgLy8g5pa55rOV5LiA77yaIOW1jOWll+afpeivoiAtPiBhZ2dyZWdhdGVcbiAgICAgICAgLy8g5pa55rOV5LqM77yaIOmAmui/h+WGl+S9meaNouaXtumXtFxuICAgICAgICBjb25zdCBvYmogPSBhd2FpdCBnZXRKV1RQYXlsb2FkKGN0eC5oZWFkZXIuYXV0aG9yaXphdGlvbik7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvbW1lbnRzSGFuZHMuZ2V0SGFuZHNCeVVpZChvYmouX2lkLCBwYWdlLCBsaW1pdCk7XG5cbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIOiOt+WPlueUqOaIt+WIl+ihqFxuICAgIGFzeW5jIGdldFVzZXJzKGN0eCkge1xuICAgICAgICBsZXQgcGFyYW1zID0gY3R4LnF1ZXJ5O1xuICAgICAgICBwYXJhbXMgPSBxcy5wYXJzZShwYXJhbXMpO1xuICAgICAgICBjb25zdCBwYWdlID0gcGFyYW1zLnBhZ2UgPyBwYXJhbXMucGFnZSA6IDA7XG4gICAgICAgIGNvbnN0IGxpbWl0ID0gcGFyYW1zLmxpbWl0ID8gcGFyc2VJbnQocGFyYW1zLmxpbWl0KSA6IDA7XG4gICAgICAgIGNvbnN0IHNvcnQgPSBwYXJhbXMuc29ydCB8fCAnY3JlYXRlZCc7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHBhcmFtcy5vcHRpb24gfHwge307XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXIuZ2V0TGlzdChvcHRpb24sIHNvcnQsIHBhZ2UsIGxpbWl0KTtcbiAgICAgICAgY29uc3QgdG90YWwgPSBhd2FpdCBVc2VyLmNvdW50TGlzdChvcHRpb24pO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICB0b3RhbDogdG90YWwsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8g566h55CG5ZGY5Yig6Zmk55So5oi3XG4gICAgYXN5bmMgZGVsZXRlVXNlckJ5SWQoY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgICAgIC8vIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBfaWQ6IHBhcmFtcy5pZCB9KVxuICAgICAgICAvLyBpZiAodXNlcikge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyLmRlbGV0ZU1hbnkoeyBfaWQ6IHsgJGluOiBib2R5LmlkcyB9IH0pO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICBtc2c6ICfliKDpmaTmiJDlip8nLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAvLyAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAvLyAgICAgY29kZTogNTAwLFxuICAgICAgICAvLyAgICAgbXNnOiAn55So5oi35LiN5a2Y5Zyo5oiW6ICFaWTkv6Hmga/plJnor6/vvIEnXG4gICAgICAgIC8vICAgfVxuICAgICAgICAvLyB9XG4gICAgfVxuXG4gICAgLy8g566h55CG5ZGY5pu05paw55So5oi3XG4gICAgYXN5bmMgdXBkYXRlVXNlckJ5SWQoY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG5cbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IF9pZDogYm9keS5faWQgfSk7XG4gICAgICAgIC8vIDEu5qCh6aqM55So5oi35piv5ZCm5a2Y5ZyoIC0+IOeUqOaIt+WQjeaYr+WQpuWGsueqgVxuICAgICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICBtc2c6ICfnlKjmiLfkuI3lrZjlnKjmiJbogIVpZOS/oeaBr+mUmeivr++8gScsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaWYgKGJvZHkudXNlcm5hbWUgIT09IHVzZXIudXNlcm5hbWUpIHtcbiAgICAgICAgLy8gICAgIGNvbnN0IHVzZXJDaGVja05hbWUgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyB1c2VybmFtZTogYm9keS51c2VybmFtZSB9KTtcbiAgICAgICAgLy8gICAgIGlmICh1c2VyQ2hlY2tOYW1lKSB7XG4gICAgICAgIC8vICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIGNvZGU6IDUwMSxcbiAgICAgICAgLy8gICAgICAgICAgICAgbXNnOiAn55So5oi35ZCN5bey57uP5a2Y5Zyo77yM5pu05paw5aSx6LSl77yBJyxcbiAgICAgICAgLy8gICAgICAgICB9O1xuICAgICAgICAvLyAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfVxuXG4gICAgICAgIC8vIDIu5Yik5pat5a+G56CB5piv5ZCm5Lyg6YCSIC0+IOi/m+ihjOWKoOWvhuS/neWtmFxuICAgICAgICBpZiAoYm9keS5wYXNzd29yZCkge1xuICAgICAgICAgICAgYm9keS5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKGJvZHkucGFzc3dvcmQsIDUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXIudXBkYXRlT25lKHsgX2lkOiBib2R5Ll9pZCB9LCBib2R5KTtcbiAgICAgICAgaWYgKHJlc3VsdC5tb2RpZmllZENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+abtOaWsOaIkOWKnycsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICAgICAgY29kZTogNTAwLFxuICAgICAgICAgICAgICAgIG1zZzogJ+acjeWKoeW8guW4uO+8jOabtOaWsOWksei0pScsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g5om56YeP6K6+572u55So5oi35bGe5oCnXG4gICAgLy8g5pa55rOV5LiA77ya5paw5aKe5LiA5Liq5o6l5Y+jIOaWueazleS6jO+8miBvcHRpb25zIC0+IGFjdGlvbiAnb25lJyAnbWFueSdcbiAgICBhc3luYyB1cGRhdGVVc2VyQmF0Y2goY3R4KSB7XG4gICAgICAgIGNvbnN0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXIudXBkYXRlTWFueSh7IF9pZDogeyAkaW46IGJvZHkuaWRzIH0gfSwgeyAkc2V0OiB7IC4uLmJvZHkuc2V0dGluZ3MgfSB9KTtcbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGFzeW5jIGNoZWNrVXNlcm5hbWUoY3R4KSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHVzZXJuYW1lOiBwYXJhbXMudXNlcm5hbWUgfSk7XG4gICAgICAgIC8vIOm7mOiupOaYryAxIC0g5qCh6aqM6YCa6L+H77yMIDAgLSDmoKHpqozlpLHotKVcbiAgICAgICAgbGV0IHJlc3VsdCA9IDE7XG4gICAgICAgIGlmICh1c2VyICYmIHVzZXIudXNlcm5hbWUpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgZGF0YTogcmVzdWx0LFxuICAgICAgICAgICAgbXNnOiAn55So5oi35ZCN5bey57uP5a2Y5Zyo77yM5pu05paw5aSx6LSl77yBJyxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhc3luYyBhZGRVc2VyKGN0eCkge1xuICAgICAgICBjb25zdCB7IGJvZHkgfSA9IGN0eC5yZXF1ZXN0O1xuICAgICAgICBib2R5LnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2goYm9keS5wYXNzd29yZCwgNSk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcihib2R5KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlci5zYXZlKCk7XG4gICAgICAgIGNvbnN0IHVzZXJPYmogPSByZXN1bHQudG9KU09OKCk7XG4gICAgICAgIGNvbnN0IGFyciA9IFsncGFzc3dvcmQnXTtcbiAgICAgICAgYXJyLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkZWxldGUgdXNlck9ialtpdGVtXTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgZGF0YTogdXNlck9iaixcbiAgICAgICAgICAgICAgICBtc2c6ICfmt7vliqDnlKjmiLfmiJDlip8nLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgICAgICBtc2c6ICfmnI3liqHmjqXlj6PlvILluLgnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOWPluW+l+etvuWIsOWIl+ihqFxuICAgIGFzeW5jIGdldFNpZ25MaXN0KGN0eCkge1xuICAgICAgICBjb25zdCBib2R5ID0gY3R4LnF1ZXJ5O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9ICcnO1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHBhcnNlSW50KGJvZHkudHlwZSk7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IFNpZ25SZWNvcmQuZmluZFF1aWNrZXN0U2lnbigpOyAvLyDku4rml6Xnrb7liLDmppxcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gMikge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IFVzZXIuZmluZFRvdGFsU2lnbigpOyAvLyDmgLvnrb7liLDmppxcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgU2lnblJlY29yZC5maW5kTGFzdFNpZ24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgbXNnOiAnJyxcbiAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgICAgICBtc2c6ICfojrflj5bmnIDmlrDnrb7liLDliJfooajlpLHotKUnLFxuICAgICAgICAgICAgICAgIGNvZGU6IDUwMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDmo4DmtYvnlKjmiLfmmK/lkKblrZjlnKhcbiAgICBhc3luYyBpc1VzZXJFeGlzdChjdHgpIHtcbiAgICAgICAgY29uc3QgYm9keSA9IGN0eC5xdWVyeTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0ge307XG4gICAgICAgIGJvZHkucGhvbmUgJiYgKG9wdGlvbi5tb2JpbGUgPSBib2R5LnBob25lKTtcbiAgICAgICAgYm9keS5lbWFpbCAmJiAob3B0aW9uLnVzZXJuYW1lID0gYm9keS5lbWFpbCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXIucXVlcnlDb3VudChvcHRpb24pO1xuICAgICAgICBjdHguYm9keSA9IHtcbiAgICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyDnu5Hlrprpgq7nrrHmiJbogIXmiYvmnLrlj7dcbiAgICBhc3luYyBhY2NvdW50VXBkYXRlKGN0eCkge1xuICAgICAgICBjb25zdCBib2R5ID0gY3R4LnF1ZXJ5O1xuICAgICAgICBjb25zdCBwaG9uZSA9IGJvZHkucGhvbmU7XG4gICAgICAgIGNvbnN0IGVtYWlsID0gYm9keS5lbWFpbDtcbiAgICAgICAgY29uc3QgaXNDb3JyZWN0ID0gYXdhaXQgY2hlY2tSZWRpc0FjY291bnRDb2RlKHBob25lIHx8IGVtYWlsLCBib2R5LnNtcyk7XG4gICAgICAgIGlmIChpc0NvcnJlY3QpIHtcbiAgICAgICAgICAgIGRlbFZhbHVlKHBob25lIHx8IGVtYWlsKTsgLy8g6aqM6K+B56CB5L2/55So5ZCO5LuOIHJlZGlzIOS4reWIoOmZpFxuICAgICAgICAgICAgY29uc3Qgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChjdHguaGVhZGVyLmF1dGhvcml6YXRpb24pO1xuICAgICAgICAgICAgaWYgKHBob25lKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgVXNlci51cGRhdGVNb2JpbGUob2JqLl9pZCwgcGhvbmUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBVc2VyLnVwZGF0ZUVtYWlsKG9iai5faWQsIGVtYWlsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgbXNnOiAn6LWE5paZ5L+u5pS55oiQ5Yqf77yBJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmJvZHkgPSB7XG4gICAgICAgICAgICBjb2RlOiA1MDAsXG4gICAgICAgICAgICBtc2c6ICfpqozor4HnoIHkuI3mraPnoa7vvIEnLFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IFVzZXJDb250cm9sbGVyKCk7XG4iXSwibmFtZXMiOlsiU2lnblJlY29yZCIsImdldEpXVFBheWxvYWQiLCJjaGVja1JlZGlzQWNjb3VudENvZGUiLCJVc2VyIiwiVXNlckNvbGxlY3QiLCJtb21lbnQiLCJzZW5kIiwidjQiLCJ1dWlkdjQiLCJqd3QiLCJjb25maWciLCJzZXRWYWx1ZSIsImdldFZhbHVlIiwiZGVsVmFsdWUiLCJiY3J5cHQiLCJDb21tZW50cyIsInFzIiwibWQ1IiwiVXNlckNvbnRyb2xsZXIiLCJ1c2VyU2lnbiIsImN0eCIsIm9iaiIsImhlYWRlciIsImF1dGhvcml6YXRpb24iLCJyZWNvcmQiLCJmaW5kQnlVaWQiLCJfaWQiLCJ1c2VyIiwiZmluZEJ5SUQiLCJuZXdSZWNvcmQiLCJyZXN1bHQiLCJjcmVhdGVkIiwiZm9ybWF0IiwiYm9keSIsImNvZGUiLCJmYXZzIiwiY291bnQiLCJsYXN0U2lnbiIsIm1zZyIsImZhdiIsInN1YnRyYWN0IiwidXBkYXRlT25lIiwiJGluYyIsIiRzZXQiLCJ1aWQiLCJzYXZlIiwidXBkYXRlVXNlckluZm8iLCJyZXF1ZXN0IiwiZmluZE9uZSIsInVzZXJuYW1lIiwidG1wVXNlciIsInBhc3N3b3JkIiwia2V5Iiwic2lnbiIsIkpXVF9TRUNSRVQiLCJleHBpcmVzSW4iLCJ0eXBlIiwiZGF0YSIsImV4cGlyZSIsImFkZCIsImVtYWlsIiwibmFtZSIsImFyciIsIm1hcCIsIml0ZW0iLCJtb2RpZmllZENvdW50IiwidXBkYXRlVXNlcm5hbWUiLCJxdWVyeSIsInRva2VuIiwiY2hhbmdlUGFzc3dkIiwiY29tcGFyZSIsIm9sZHB3ZCIsIm5ld3Bhc3N3ZCIsImhhc2giLCJuZXdwd2QiLCJzZXRDb2xsZWN0IiwicGFyYW1zIiwicGFyc2VJbnQiLCJpc0ZhdiIsImRlbGV0ZU9uZSIsInRpZCIsIm5ld0NvbGxlY3QiLCJ0aXRsZSIsImdldENvbGxlY3RCeVVpZCIsImdldExpc3RCeVVpZCIsInBhZ2UiLCJsaW1pdCIsInRvdGFsIiwiY291bnRCeVVpZCIsImxlbmd0aCIsImdldEJhc2ljSW5mbyIsInRvSlNPTiIsImRhdGUiLCIkZ3RlIiwiaXNTaWduIiwiZ2V0TXNnIiwibnVtIiwiZ2V0VG90YWwiLCJnZXRNc2dMaXN0Iiwic2V0TXNnIiwiaWQiLCJpc1JlYWQiLCJ1cGRhdGVNYW55IiwiZ2V0SGFuZHMiLCJDb21tZW50c0hhbmRzIiwiZ2V0SGFuZHNCeVVpZCIsImdldFVzZXJzIiwicGFyc2UiLCJzb3J0Iiwib3B0aW9uIiwiZ2V0TGlzdCIsImNvdW50TGlzdCIsImRlbGV0ZVVzZXJCeUlkIiwiZGVsZXRlTWFueSIsIiRpbiIsImlkcyIsInVwZGF0ZVVzZXJCeUlkIiwidXBkYXRlVXNlckJhdGNoIiwic2V0dGluZ3MiLCJjaGVja1VzZXJuYW1lIiwiYWRkVXNlciIsInVzZXJPYmoiLCJnZXRTaWduTGlzdCIsImZpbmRRdWlja2VzdFNpZ24iLCJmaW5kVG90YWxTaWduIiwiZmluZExhc3RTaWduIiwiZSIsImlzVXNlckV4aXN0IiwicGhvbmUiLCJtb2JpbGUiLCJxdWVyeUNvdW50IiwiYWNjb3VudFVwZGF0ZSIsImlzQ29ycmVjdCIsInNtcyIsInVwZGF0ZU1vYmlsZSIsInVwZGF0ZUVtYWlsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/api/UserController.js\n\n}");

/***/ }),

/***/ "./src/common/Auth.js":
/*!****************************!*\
  !*** ./src/common/Auth.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/index */ \"./src/config/index.js\");\n/* harmony import */ var _common_Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/common/Utils */ \"./src/common/Utils.js\");\n/* harmony import */ var _config_RedisConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/config/RedisConfig */ \"./src/config/RedisConfig.js\");\n/* harmony import */ var _api_AdminController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/api/AdminController */ \"./src/api/AdminController.js\");\n/* harmony import */ var _Init__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Init */ \"./src/common/Init.js\");\n\n\n\n\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (ctx, next) => {\n  const auth = ctx.header.authorization;\n  if (auth) {\n    // headers 有可能会是 undefine、null、空字符串\n    let obj;\n    try {\n      obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(auth);\n    } catch (error) {\n      error.status = 401;\n      ctx.throw(error);\n    }\n    if (obj._id) {\n      ctx._id = obj._id;\n      let admins = JSON.parse(await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_2__.getValue)('admin'));\n      if (!admins) {\n        admins = await (0,_Init__WEBPACK_IMPORTED_MODULE_4__.run)();\n      }\n      if (admins && admins.length > 0 && admins.includes(obj._id)) {\n        ctx.isAdmin = true;\n        await next();\n        return;\n      } else {\n        ctx.isAdmin = false;\n      }\n    }\n  }\n  // 1. 过滤掉公众路径\n  const {\n    publicPath\n  } = _config_index__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n  if (publicPath.some(item => item.test(ctx.url))) {\n    await next();\n    return;\n  }\n  // 2. 根据用户的roles -> menus -> operations\n  const operations = await _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getOperations(ctx);\n  // 3. 判断用户的请求路径是否在operations里面，如果在放行，否则禁止访问\n  if (operations.includes(ctx.url.split('?')[0])) {\n    await next();\n  } else {\n    ctx.throw(401);\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL0F1dGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9DO0FBQ1c7QUFDQztBQUNJO0FBQ3ZCO0FBRTdCLGlFQUFlLE9BQU9LLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0VBQ2hDLE1BQU1DLElBQUksR0FBR0YsR0FBRyxDQUFDRyxNQUFNLENBQUNDLGFBQWE7RUFDckMsSUFBSUYsSUFBSSxFQUFFO0lBQ047SUFDQSxJQUFJRyxHQUFHO0lBQ1AsSUFBSTtNQUNBQSxHQUFHLEdBQUcsTUFBTVQsNERBQWEsQ0FBQ00sSUFBSSxDQUFDO0lBQ25DLENBQUMsQ0FBQyxPQUFPSSxLQUFLLEVBQUU7TUFDWkEsS0FBSyxDQUFDQyxNQUFNLEdBQUcsR0FBRztNQUNsQlAsR0FBRyxDQUFDUSxLQUFLLENBQUNGLEtBQUssQ0FBQztJQUNwQjtJQUNBLElBQUlELEdBQUcsQ0FBQ0ksR0FBRyxFQUFFO01BQ1RULEdBQUcsQ0FBQ1MsR0FBRyxHQUFHSixHQUFHLENBQUNJLEdBQUc7TUFFakIsSUFBSUMsTUFBTSxHQUFHQyxJQUFJLENBQUNDLEtBQUssQ0FBQyxNQUFNZiw2REFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO01BQ2hELElBQUksQ0FBQ2EsTUFBTSxFQUFFO1FBQ1RBLE1BQU0sR0FBRyxNQUFNWCwwQ0FBRyxDQUFDLENBQUM7TUFDeEI7TUFDQSxJQUFJVyxNQUFNLElBQUlBLE1BQU0sQ0FBQ0csTUFBTSxHQUFHLENBQUMsSUFBSUgsTUFBTSxDQUFDSSxRQUFRLENBQUNULEdBQUcsQ0FBQ0ksR0FBRyxDQUFDLEVBQUU7UUFDekRULEdBQUcsQ0FBQ2UsT0FBTyxHQUFHLElBQUk7UUFDbEIsTUFBTWQsSUFBSSxDQUFDLENBQUM7UUFDWjtNQUNKLENBQUMsTUFBTTtRQUNIRCxHQUFHLENBQUNlLE9BQU8sR0FBRyxLQUFLO01BQ3ZCO0lBQ0o7RUFDSjtFQUNBO0VBQ0EsTUFBTTtJQUFFQztFQUFXLENBQUMsR0FBR3JCLHFEQUFNO0VBQzdCLElBQUlxQixVQUFVLENBQUNDLElBQUksQ0FBQ0MsSUFBSSxJQUFJQSxJQUFJLENBQUNDLElBQUksQ0FBQ25CLEdBQUcsQ0FBQ29CLEdBQUcsQ0FBQyxDQUFDLEVBQUU7SUFDN0MsTUFBTW5CLElBQUksQ0FBQyxDQUFDO0lBQ1o7RUFDSjtFQUNBO0VBQ0EsTUFBTW9CLFVBQVUsR0FBRyxNQUFNdkIsNERBQWUsQ0FBQ3dCLGFBQWEsQ0FBQ3RCLEdBQUcsQ0FBQztFQUMzRDtFQUNBLElBQUlxQixVQUFVLENBQUNQLFFBQVEsQ0FBQ2QsR0FBRyxDQUFDb0IsR0FBRyxDQUFDRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUM1QyxNQUFNdEIsSUFBSSxDQUFDLENBQUM7RUFDaEIsQ0FBQyxNQUFNO0lBQ0hELEdBQUcsQ0FBQ1EsS0FBSyxDQUFDLEdBQUcsQ0FBQztFQUNsQjtBQUNKLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvY29tbW9uL0F1dGguanM/YjQ1YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29uZmlnIGZyb20gJ0AvY29uZmlnL2luZGV4JztcbmltcG9ydCB7IGdldEpXVFBheWxvYWQgfSBmcm9tICdAL2NvbW1vbi9VdGlscyc7XG5pbXBvcnQgeyBnZXRWYWx1ZSB9IGZyb20gJ0AvY29uZmlnL1JlZGlzQ29uZmlnJztcbmltcG9ydCBhZG1pbkNvbnRyb2xsZXIgZnJvbSAnQC9hcGkvQWRtaW5Db250cm9sbGVyJztcbmltcG9ydCB7IHJ1biB9IGZyb20gJy4vSW5pdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIChjdHgsIG5leHQpID0+IHtcbiAgICBjb25zdCBhdXRoID0gY3R4LmhlYWRlci5hdXRob3JpemF0aW9uO1xuICAgIGlmIChhdXRoKSB7XG4gICAgICAgIC8vIGhlYWRlcnMg5pyJ5Y+v6IO95Lya5pivIHVuZGVmaW5l44CBbnVsbOOAgeepuuWtl+espuS4slxuICAgICAgICBsZXQgb2JqO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgb2JqID0gYXdhaXQgZ2V0SldUUGF5bG9hZChhdXRoKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGVycm9yLnN0YXR1cyA9IDQwMTtcbiAgICAgICAgICAgIGN0eC50aHJvdyhlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9iai5faWQpIHtcbiAgICAgICAgICAgIGN0eC5faWQgPSBvYmouX2lkO1xuXG4gICAgICAgICAgICBsZXQgYWRtaW5zID0gSlNPTi5wYXJzZShhd2FpdCBnZXRWYWx1ZSgnYWRtaW4nKSk7XG4gICAgICAgICAgICBpZiAoIWFkbWlucykge1xuICAgICAgICAgICAgICAgIGFkbWlucyA9IGF3YWl0IHJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFkbWlucyAmJiBhZG1pbnMubGVuZ3RoID4gMCAmJiBhZG1pbnMuaW5jbHVkZXMob2JqLl9pZCkpIHtcbiAgICAgICAgICAgICAgICBjdHguaXNBZG1pbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgbmV4dCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3R4LmlzQWRtaW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyAxLiDov4fmu6TmjonlhazkvJfot6/lvoRcbiAgICBjb25zdCB7IHB1YmxpY1BhdGggfSA9IGNvbmZpZztcbiAgICBpZiAocHVibGljUGF0aC5zb21lKGl0ZW0gPT4gaXRlbS50ZXN0KGN0eC51cmwpKSkge1xuICAgICAgICBhd2FpdCBuZXh0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gMi4g5qC55o2u55So5oi355qEcm9sZXMgLT4gbWVudXMgLT4gb3BlcmF0aW9uc1xuICAgIGNvbnN0IG9wZXJhdGlvbnMgPSBhd2FpdCBhZG1pbkNvbnRyb2xsZXIuZ2V0T3BlcmF0aW9ucyhjdHgpO1xuICAgIC8vIDMuIOWIpOaWreeUqOaIt+eahOivt+axgui3r+W+hOaYr+WQpuWcqG9wZXJhdGlvbnPph4zpnaLvvIzlpoLmnpzlnKjmlL7ooYzvvIzlkKbliJnnpoHmraLorr/pl65cbiAgICBpZiAob3BlcmF0aW9ucy5pbmNsdWRlcyhjdHgudXJsLnNwbGl0KCc/JylbMF0pKSB7XG4gICAgICAgIGF3YWl0IG5leHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjdHgudGhyb3coNDAxKTtcbiAgICB9XG59O1xuIl0sIm5hbWVzIjpbImNvbmZpZyIsImdldEpXVFBheWxvYWQiLCJnZXRWYWx1ZSIsImFkbWluQ29udHJvbGxlciIsInJ1biIsImN0eCIsIm5leHQiLCJhdXRoIiwiaGVhZGVyIiwiYXV0aG9yaXphdGlvbiIsIm9iaiIsImVycm9yIiwic3RhdHVzIiwidGhyb3ciLCJfaWQiLCJhZG1pbnMiLCJKU09OIiwicGFyc2UiLCJsZW5ndGgiLCJpbmNsdWRlcyIsImlzQWRtaW4iLCJwdWJsaWNQYXRoIiwic29tZSIsIml0ZW0iLCJ0ZXN0IiwidXJsIiwib3BlcmF0aW9ucyIsImdldE9wZXJhdGlvbnMiLCJzcGxpdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/Auth.js\n\n}");

/***/ }),

/***/ "./src/common/ErrorHandle.js":
/*!***********************************!*\
  !*** ./src/common/ErrorHandle.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_Log4j__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/Log4j */ \"./src/config/Log4j.js\");\n/* harmony import */ var _model_ErrorRecord__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/model/ErrorRecord */ \"./src/model/ErrorRecord.js\");\n/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/model/User */ \"./src/model/User.js\");\n/* harmony import */ var _config_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/config/index */ \"./src/config/index.js\");\n\n\n\n\nconst logger = _config_Log4j__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getLogger('error');\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (ctx, next) => {\n  try {\n    await next();\n    // 1. 收集用户错误的请求路径的日志 -> 造成大量的垃圾数据\n    // 2. 主动判断，并收集特定的接口请求 -> regex -> path, status, params\n    if (ctx.status !== 200 && _config_index__WEBPACK_IMPORTED_MODULE_3__[\"default\"].isDevMode) {\n      const codeMessage = {\n        // 200: '服务器成功返回请求的数据。',\n        201: '新建或修改数据成功。',\n        202: '一个请求已经进入后台排队（异步任务）。',\n        204: '删除数据成功。',\n        400: '发出的请求有错误，服务器没有进行新建或修改数据的操作。',\n        401: '用户没有权限（令牌、用户名、密码错误）。',\n        403: '用户得到授权，但是访问是被禁止的。',\n        404: '发出的请求针对的是不存在的记录，服务器没有进行操作。',\n        405: '请求方法不存在，请检查路由！',\n        406: '请求的格式不可得。',\n        410: '请求的资源被永久删除，且不会再得到的。',\n        422: '当创建一个对象时，发生一个验证错误。',\n        500: '服务器发生错误，请检查服务器。',\n        502: '网关错误。',\n        503: '服务不可用，服务器暂时过载或维护。',\n        504: '网关超时。'\n      };\n      ctx.throw({\n        code: ctx.status,\n        message: codeMessage[ctx.status]\n      });\n    }\n  } catch (err) {\n    // 1. throw Error 2. ctx.throw()\n    logger.error(`${ctx.url} ${ctx.method} ${ctx.status}\n    ${err.stack}\n    `);\n    let user = '';\n    if (ctx._id) {\n      user = await _model_User__WEBPACK_IMPORTED_MODULE_2__[\"default\"].findOne({\n        _id: ctx._id\n      });\n    }\n    // 保存错误日志到数据库\n    await _model_ErrorRecord__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create({\n      message: err.message,\n      code: ctx.response.status,\n      method: ctx.method,\n      path: ctx.path,\n      param: ctx.method === 'GET' ? ctx.query : ctx.request.body,\n      username: user.username,\n      stack: err.stack\n    });\n    if (err.status === 401) {\n      ctx.status = 401;\n      ctx.body = {\n        code: 401,\n        msg: 'Protected resource, use Authorization header to get access\\n'\n      };\n    } else {\n      ctx.status = err.status || 500;\n      ctx.body = Object.assign({\n        code: err.code || 500,\n        msg: err.message\n      },  true ? {\n        stack: err.stack\n      } : 0);\n      // console.log(err.stack);\n    }\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RztRQUNyQmtCLEdBQUcsRUFBRWhCLEdBQUcsQ0FBQ0Q7TUFDYixDQUFDLEVBQ0RvQixLQUFzQyxHQUFHO1FBQUVmLEtBQUssRUFBRUosR0FBRyxDQUFDSTtNQUFNLENBQUMsR0FBRyxDQUNwRSxDQUFDO01BQ0Q7SUFDSjtFQUNKO0FBQ0osQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9jb21tb24vRXJyb3JIYW5kbGUuanM/NDFlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nNGpzIGZyb20gJ0AvY29uZmlnL0xvZzRqJztcbmltcG9ydCBFcnJvclJlY29yZCBmcm9tICdAL21vZGVsL0Vycm9yUmVjb3JkJztcbmltcG9ydCBVc2VyIGZyb20gJ0AvbW9kZWwvVXNlcic7XG5pbXBvcnQgY29uZmlnIGZyb20gJ0AvY29uZmlnL2luZGV4JztcblxuY29uc3QgbG9nZ2VyID0gbG9nNGpzLmdldExvZ2dlcignZXJyb3InKTtcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIChjdHgsIG5leHQpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBuZXh0KCk7XG4gICAgICAgIC8vIDEuIOaUtumbhueUqOaIt+mUmeivr+eahOivt+axgui3r+W+hOeahOaXpeW/lyAtPiDpgKDmiJDlpKfph4/nmoTlnoPlnL7mlbDmja5cbiAgICAgICAgLy8gMi4g5Li75Yqo5Yik5pat77yM5bm25pS26ZuG54m55a6a55qE5o6l5Y+j6K+35rGCIC0+IHJlZ2V4IC0+IHBhdGgsIHN0YXR1cywgcGFyYW1zXG4gICAgICAgIGlmIChjdHguc3RhdHVzICE9PSAyMDAgJiYgY29uZmlnLmlzRGV2TW9kZSkge1xuICAgICAgICAgICAgY29uc3QgY29kZU1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgLy8gMjAwOiAn5pyN5Yqh5Zmo5oiQ5Yqf6L+U5Zue6K+35rGC55qE5pWw5o2u44CCJyxcbiAgICAgICAgICAgICAgICAyMDE6ICfmlrDlu7rmiJbkv67mlLnmlbDmja7miJDlip/jgIInLFxuICAgICAgICAgICAgICAgIDIwMjogJ+S4gOS4quivt+axguW3sue7j+i/m+WFpeWQjuWPsOaOkumYn++8iOW8guatpeS7u+WKoe+8ieOAgicsXG4gICAgICAgICAgICAgICAgMjA0OiAn5Yig6Zmk5pWw5o2u5oiQ5Yqf44CCJyxcbiAgICAgICAgICAgICAgICA0MDA6ICflj5Hlh7rnmoTor7fmsYLmnInplJnor6/vvIzmnI3liqHlmajmsqHmnInov5vooYzmlrDlu7rmiJbkv67mlLnmlbDmja7nmoTmk43kvZzjgIInLFxuICAgICAgICAgICAgICAgIDQwMTogJ+eUqOaIt+ayoeacieadg+mZkO+8iOS7pOeJjOOAgeeUqOaIt+WQjeOAgeWvhueggemUmeivr++8ieOAgicsXG4gICAgICAgICAgICAgICAgNDAzOiAn55So5oi35b6X5Yiw5o6I5p2D77yM5L2G5piv6K6/6Zeu5piv6KKr56aB5q2i55qE44CCJyxcbiAgICAgICAgICAgICAgICA0MDQ6ICflj5Hlh7rnmoTor7fmsYLpkojlr7nnmoTmmK/kuI3lrZjlnKjnmoTorrDlvZXvvIzmnI3liqHlmajmsqHmnInov5vooYzmk43kvZzjgIInLFxuICAgICAgICAgICAgICAgIDQwNTogJ+ivt+axguaWueazleS4jeWtmOWcqO+8jOivt+ajgOafpei3r+eUse+8gScsXG4gICAgICAgICAgICAgICAgNDA2OiAn6K+35rGC55qE5qC85byP5LiN5Y+v5b6X44CCJyxcbiAgICAgICAgICAgICAgICA0MTA6ICfor7fmsYLnmoTotYTmupDooqvmsLjkuYXliKDpmaTvvIzkuJTkuI3kvJrlho3lvpfliLDnmoTjgIInLFxuICAgICAgICAgICAgICAgIDQyMjogJ+W9k+WIm+W7uuS4gOS4quWvueixoeaXtu+8jOWPkeeUn+S4gOS4qumqjOivgemUmeivr+OAgicsXG4gICAgICAgICAgICAgICAgNTAwOiAn5pyN5Yqh5Zmo5Y+R55Sf6ZSZ6K+v77yM6K+35qOA5p+l5pyN5Yqh5Zmo44CCJyxcbiAgICAgICAgICAgICAgICA1MDI6ICfnvZHlhbPplJnor6/jgIInLFxuICAgICAgICAgICAgICAgIDUwMzogJ+acjeWKoeS4jeWPr+eUqO+8jOacjeWKoeWZqOaaguaXtui/h+i9veaIlue7tOaKpOOAgicsXG4gICAgICAgICAgICAgICAgNTA0OiAn572R5YWz6LaF5pe244CCJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjdHgudGhyb3coe1xuICAgICAgICAgICAgICAgIGNvZGU6IGN0eC5zdGF0dXMsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogY29kZU1lc3NhZ2VbY3R4LnN0YXR1c10sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyAxLiB0aHJvdyBFcnJvciAyLiBjdHgudGhyb3coKVxuICAgICAgICBsb2dnZXIuZXJyb3IoYCR7Y3R4LnVybH0gJHtjdHgubWV0aG9kfSAke2N0eC5zdGF0dXN9XG4gICAgJHtlcnIuc3RhY2t9XG4gICAgYCk7XG4gICAgICAgIGxldCB1c2VyID0gJyc7XG4gICAgICAgIGlmIChjdHguX2lkKSB7XG4gICAgICAgICAgICB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgX2lkOiBjdHguX2lkIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIOS/neWtmOmUmeivr+aXpeW/l+WIsOaVsOaNruW6k1xuICAgICAgICBhd2FpdCBFcnJvclJlY29yZC5jcmVhdGUoe1xuICAgICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UsXG4gICAgICAgICAgICBjb2RlOiBjdHgucmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgbWV0aG9kOiBjdHgubWV0aG9kLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJhbTogY3R4Lm1ldGhvZCA9PT0gJ0dFVCcgPyBjdHgucXVlcnkgOiBjdHgucmVxdWVzdC5ib2R5LFxuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgICBzdGFjazogZXJyLnN0YWNrLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGVyci5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgY3R4LnN0YXR1cyA9IDQwMTtcbiAgICAgICAgICAgIGN0eC5ib2R5ID0ge1xuICAgICAgICAgICAgICAgIGNvZGU6IDQwMSxcbiAgICAgICAgICAgICAgICBtc2c6ICdQcm90ZWN0ZWQgcmVzb3VyY2UsIHVzZSBBdXRob3JpemF0aW9uIGhlYWRlciB0byBnZXQgYWNjZXNzXFxuJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHguc3RhdHVzID0gZXJyLnN0YXR1cyB8fCA1MDA7XG4gICAgICAgICAgICBjdHguYm9keSA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBlcnIuY29kZSB8fCA1MDAsXG4gICAgICAgICAgICAgICAgICAgIG1zZzogZXJyLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IHsgc3RhY2s6IGVyci5zdGFjayB9IDoge31cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlcnIuc3RhY2spO1xuICAgICAgICB9XG4gICAgfVxufTtcbiJdLCJuYW1lcyI6WyJsb2c0anMiLCJFcnJvclJlY29yZCIsIlVzZXIiLCJjb25maWciLCJsb2dnZXIiLCJnZXRMb2dnZXIiLCJjdHgiLCJuZXh0Iiwic3RhdHVzIiwiaXNEZXZNb2RlIiwiY29kZU1lc3NhZ2UiLCJ0aHJvdyIsImNvZGUiLCJtZXNzYWdlIiwiZXJyIiwiZXJyb3IiLCJ1cmwiLCJtZXRob2QiLCJzdGFjayIsInVzZXIiLCJfaWQiLCJmaW5kT25lIiwiY3JlYXRlIiwicmVzcG9uc2UiLCJwYXRoIiwicGFyYW0iLCJxdWVyeSIsInJlcXVlc3QiLCJib2R5IiwidXNlcm5hbWUiLCJtc2ciLCJPYmplY3QiLCJhc3NpZ24iLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/common/ErrorHandle.js\n\n}");

/***/ }),

/***/ "./src/common/Init.js":
/*!****************************!*\
  !*** ./src/common/Init.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   run: () => (/* binding */ run)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config */ \"./src/config/index.js\");\n/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/model/User */ \"./src/model/User.js\");\n/* harmony import */ var _config_RedisConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/config/RedisConfig */ \"./src/config/RedisConfig.js\");\n\n\n\nconst run = async () => {\n  if (_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].adminEmail && _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].adminEmail.length > 0) {\n    const emails = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].adminEmail;\n    const arr = [];\n    for (let email of emails) {\n      const user = await _model_User__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n        username: email\n      });\n      arr.push(user._id);\n    }\n    (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_2__.setValue)('admin', JSON.stringify(arr));\n    return arr;\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL0luaXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE4QjtBQUNFO0FBQ2dCO0FBRXpDLE1BQU1HLEdBQUcsR0FBRyxNQUFBQSxDQUFBLEtBQVk7RUFDM0IsSUFBSUgsK0NBQU0sQ0FBQ0ksVUFBVSxJQUFJSiwrQ0FBTSxDQUFDSSxVQUFVLENBQUNDLE1BQU0sR0FBRyxDQUFDLEVBQUU7SUFDbkQsTUFBTUMsTUFBTSxHQUFHTiwrQ0FBTSxDQUFDSSxVQUFVO0lBQ2hDLE1BQU1HLEdBQUcsR0FBRyxFQUFFO0lBQ2QsS0FBSyxJQUFJQyxLQUFLLElBQUlGLE1BQU0sRUFBRTtNQUN0QixNQUFNRyxJQUFJLEdBQUcsTUFBTVIsbURBQUksQ0FBQ1MsT0FBTyxDQUFDO1FBQUVDLFFBQVEsRUFBRUg7TUFBTSxDQUFDLENBQUM7TUFDcERELEdBQUcsQ0FBQ0ssSUFBSSxDQUFDSCxJQUFJLENBQUNJLEdBQUcsQ0FBQztJQUN0QjtJQUNBWCw2REFBUSxDQUFDLE9BQU8sRUFBRVksSUFBSSxDQUFDQyxTQUFTLENBQUNSLEdBQUcsQ0FBQyxDQUFDO0lBQ3RDLE9BQU9BLEdBQUc7RUFDZDtBQUNKLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvY29tbW9uL0luaXQuanM/NWQyNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29uZmlnIGZyb20gJ0AvY29uZmlnJztcbmltcG9ydCBVc2VyIGZyb20gJ0AvbW9kZWwvVXNlcic7XG5pbXBvcnQgeyBzZXRWYWx1ZSB9IGZyb20gJ0AvY29uZmlnL1JlZGlzQ29uZmlnJztcblxuZXhwb3J0IGNvbnN0IHJ1biA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoY29uZmlnLmFkbWluRW1haWwgJiYgY29uZmlnLmFkbWluRW1haWwubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBlbWFpbHMgPSBjb25maWcuYWRtaW5FbWFpbDtcbiAgICAgICAgY29uc3QgYXJyID0gW107XG4gICAgICAgIGZvciAobGV0IGVtYWlsIG9mIGVtYWlscykge1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IHVzZXJuYW1lOiBlbWFpbCB9KTtcbiAgICAgICAgICAgIGFyci5wdXNoKHVzZXIuX2lkKTtcbiAgICAgICAgfVxuICAgICAgICBzZXRWYWx1ZSgnYWRtaW4nLCBKU09OLnN0cmluZ2lmeShhcnIpKTtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9XG59O1xuIl0sIm5hbWVzIjpbImNvbmZpZyIsIlVzZXIiLCJzZXRWYWx1ZSIsInJ1biIsImFkbWluRW1haWwiLCJsZW5ndGgiLCJlbWFpbHMiLCJhcnIiLCJlbWFpbCIsInVzZXIiLCJmaW5kT25lIiwidXNlcm5hbWUiLCJwdXNoIiwiX2lkIiwiSlNPTiIsInN0cmluZ2lmeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/Init.js\n\n}");

/***/ }),

/***/ "./src/common/Logger.js":
/*!******************************!*\
  !*** ./src/common/Logger.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_Log4j__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/Log4j */ \"./src/config/Log4j.js\");\n\nconst logger = _config_Log4j__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getLogger('application');\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (ctx, next) => {\n  const start = Date.now();\n  await next();\n  const resTime = Date.now() - start;\n  if (resTime / 1000 > 1) {\n    // 主要判断系统执行效率\n    logger.warn(`[${ctx.method}] - ${ctx.url} - time: ${resTime / 1000}s`);\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tbW9uL0xvZ2dlci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFvQztBQUVwQyxNQUFNQyxNQUFNLEdBQUdELHFEQUFNLENBQUNFLFNBQVMsQ0FBQyxhQUFhLENBQUM7QUFFOUMsaUVBQWUsT0FBT0MsR0FBRyxFQUFFQyxJQUFJLEtBQUs7RUFDaEMsTUFBTUMsS0FBSyxHQUFHQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0VBQ3hCLE1BQU1ILElBQUksQ0FBQyxDQUFDO0VBQ1osTUFBTUksT0FBTyxHQUFHRixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdGLEtBQUs7RUFDbEMsSUFBSUcsT0FBTyxHQUFHLElBQUksR0FBRyxDQUFDLEVBQUU7SUFDcEI7SUFDQVAsTUFBTSxDQUFDUSxJQUFJLENBQUMsSUFBSU4sR0FBRyxDQUFDTyxNQUFNLE9BQU9QLEdBQUcsQ0FBQ1EsR0FBRyxZQUFZSCxPQUFPLEdBQUcsSUFBSSxHQUFHLENBQUM7RUFDMUU7QUFDSixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL2NvbW1vbi9Mb2dnZXIuanM/Y2VmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nNGpzIGZyb20gJ0AvY29uZmlnL0xvZzRqJztcblxuY29uc3QgbG9nZ2VyID0gbG9nNGpzLmdldExvZ2dlcignYXBwbGljYXRpb24nKTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICBhd2FpdCBuZXh0KCk7XG4gICAgY29uc3QgcmVzVGltZSA9IERhdGUubm93KCkgLSBzdGFydDtcbiAgICBpZiAocmVzVGltZSAvIDEwMDAgPiAxKSB7XG4gICAgICAgIC8vIOS4u+imgeWIpOaWreezu+e7n+aJp+ihjOaViOeOh1xuICAgICAgICBsb2dnZXIud2FybihgWyR7Y3R4Lm1ldGhvZH1dIC0gJHtjdHgudXJsfSAtIHRpbWU6ICR7cmVzVGltZSAvIDEwMDB9c2ApO1xuICAgIH1cbn07XG4iXSwibmFtZXMiOlsibG9nNGpzIiwibG9nZ2VyIiwiZ2V0TG9nZ2VyIiwiY3R4IiwibmV4dCIsInN0YXJ0IiwiRGF0ZSIsIm5vdyIsInJlc1RpbWUiLCJ3YXJuIiwibWV0aG9kIiwidXJsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/common/Logger.js\n\n}");

/***/ }),

/***/ "./src/common/Utils.js":
/*!*****************************!*\
  !*** ./src/common/Utils.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkCode: () => (/* binding */ checkCode),\n/* harmony export */   checkRedisAccountCode: () => (/* binding */ checkRedisAccountCode),\n/* harmony export */   dirExists: () => (/* binding */ dirExists),\n/* harmony export */   flatten: () => (/* binding */ flatten),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getJWTPayload: () => (/* binding */ getJWTPayload),\n/* harmony export */   getMenuData: () => (/* binding */ getMenuData),\n/* harmony export */   getRights: () => (/* binding */ getRights),\n/* harmony export */   getTempName: () => (/* binding */ getTempName),\n/* harmony export */   isToday: () => (/* binding */ isToday),\n/* harmony export */   rand: () => (/* binding */ rand),\n/* harmony export */   rename: () => (/* binding */ rename),\n/* harmony export */   sortMenus: () => (/* binding */ sortMenus)\n/* harmony export */ });\n/* harmony import */ var _config_RedisConfig__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/RedisConfig */ \"./src/config/RedisConfig.js\");\n/* harmony import */ var _config_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../config/index */ \"./src/config/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! md5 */ \"md5\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\nconst getJWTPayload = token => {\n  return jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().verify(token.split(' ')[1], md5__WEBPACK_IMPORTED_MODULE_6___default()(_config_index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].JWT_SECRET));\n};\n\n// 生成 token 返回给客户端\nconst generateToken = (payload, expire = '1h') => {\n  if (payload) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().sign({\n      ...payload\n    }, md5__WEBPACK_IMPORTED_MODULE_6___default()(_config_index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].JWT_SECRET), {\n      expiresIn: expire\n    });\n  } else {\n    throw new Error('生成token失败！');\n  }\n};\n\n// 判断一个日期是否是今天\nconst isToday = _date => {\n  if (_date) {\n    return dayjs__WEBPACK_IMPORTED_MODULE_5___default()(_date).format('YYYY-MM-DD') === dayjs__WEBPACK_IMPORTED_MODULE_5___default()().format('YYYY-MM-DD');\n  }\n  return false;\n};\nconst checkCode = async (key, value) => {\n  const redisData = await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_0__.getValue)(key);\n  if (redisData != null) {\n    if (redisData.toLowerCase() === value.toLowerCase()) {\n      return true;\n    } else {\n      return false;\n    }\n  } else {\n    return false;\n  }\n};\n\n// 验证短信或者邮箱验证码\nconst checkRedisAccountCode = async (accout, sms) => {\n  const redisData = await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_0__.getValue)(accout);\n  if (redisData) {\n    const data = JSON.parse(redisData);\n    return dayjs__WEBPACK_IMPORTED_MODULE_5___default()().isBefore(dayjs__WEBPACK_IMPORTED_MODULE_5___default()(data.expire)) && sms === data.sms;\n  }\n  return false;\n};\nconst getStats = path => {\n  return new Promise(resolve => {\n    // fs.stats(path, (err, stats) => {\n    //   if (err) {\n    //     resolve(false)\n    //   } else {\n    //     resolve(stats)\n    //   }\n    // })\n    fs__WEBPACK_IMPORTED_MODULE_3___default().stat(path, (err, stats) => err ? resolve(false) : resolve(stats));\n  });\n};\nconst mkdir = dir => {\n  return new Promise(resolve => {\n    fs__WEBPACK_IMPORTED_MODULE_3___default().mkdir(dir, err => err ? resolve(false) : resolve(true));\n  });\n};\nconst dirExists = async dir => {\n  const isExists = await getStats(dir);\n  // 如果该路径存在且不是文件，返回 true\n  if (isExists && isExists.isDirectory()) {\n    return true;\n  } else if (isExists) {\n    // 路径存在，但是是文件，返回 false\n    return false;\n  }\n  // 如果该路径不存在\n  const tempDir = path__WEBPACK_IMPORTED_MODULE_4___default().parse(dir).dir;\n  // 循环遍历，递归判断如果上级目录不存在，则产生上级目录\n  const status = await dirExists(tempDir);\n  if (status) {\n    const result = await mkdir(dir);\n    console.log('TCL: dirExists -> result', result);\n    return result;\n  } else {\n    return false;\n  }\n};\nconst rename = (obj, key, newKey) => {\n  if (Object.keys(obj).indexOf(key) !== -1) {\n    obj[newKey] = obj[key];\n    delete obj[key];\n  }\n  return obj;\n};\nconst sortObj = (arr, property) => {\n  return arr.sort((m, n) => m[property] - n[property]);\n};\nconst sortMenus = tree => {\n  tree = sortObj(tree, 'sort');\n  if (tree.children && tree.children.length > 0) {\n    tree.children = sortMenus(tree.children, 'sort');\n  }\n  if (tree.operations && tree.operations.length > 0) {\n    tree.operations = sortMenus(tree.operations, 'sort');\n  }\n  return tree;\n};\nconst getMenuData = (tree, rights, flag) => {\n  const arr = [];\n  for (let i = 0; i < tree.length; i++) {\n    const item = tree[i];\n    // _id 包含在menus中\n    // 结构进行改造，删除opertaions\n    if (rights.includes(item._id + '') || flag) {\n      if (item.type === 'menu') {\n        arr.push({\n          _id: item._id,\n          path: item.path,\n          meta: {\n            title: item.title,\n            hideInBread: item.hideInBread,\n            hideInMenu: item.hideInMenu,\n            notCache: item.notCache,\n            icon: item.icon\n          },\n          component: item.component,\n          children: getMenuData(item.children, rights)\n        });\n      } else if (item.type === 'link') {\n        arr.push({\n          _id: item._id,\n          path: item.path,\n          meta: {\n            title: item.title,\n            icon: item.icon,\n            href: item.link\n          }\n        });\n      }\n    }\n  }\n  return sortObj(arr, 'sort');\n};\nconst flatten = arr => {\n  while (arr.some(item => Array.isArray(item))) {\n    arr = [].concat(...arr);\n  }\n  return arr;\n};\nconst getRights = (tree, menus) => {\n  let arr = [];\n  for (let item of tree) {\n    if (item.operations && item.operations.length > 0) {\n      for (let op of item.operations) {\n        if (menus.includes(op._id + '')) {\n          arr.push(op.path);\n        }\n      }\n    } else if (item.children && item.children.length > 0) {\n      arr.push(getRights(item.children, menus));\n    }\n  }\n  return flatten(arr);\n};\nconst rand = (len = 8) => {\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let text = '';\n  for (let i = 0; i < len; i += 1) {\n    text += possible.charAt(Math.floor(Math.random() * possible.length));\n  }\n  return text;\n};\nconst getTempName = () => {\n  return 'toimc_' + rand() + '@toimc.com';\n};\n\n// 生成一个随机的用户名\n// const getTempName = () => {\n//   return 'toimc_' + Math.random().toString(36).slice(2) + Math.floor(Math.random() * 10000)\n// }\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxNQUFNLENBQUMsQ0FBQyxHQUFHTCxRQUFRLENBQUM5QixNQUFNLENBQUMsQ0FBQztFQUN4RTtFQUNBLE9BQU8rQixJQUFJO0FBQ2YsQ0FBQztBQUVELE1BQU1LLFdBQVcsR0FBR0EsQ0FBQSxLQUFNO0VBQ3RCLE9BQU8sUUFBUSxHQUFHUixJQUFJLENBQUMsQ0FBQyxHQUFHLFlBQVk7QUFDM0MsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9jb21tb24vVXRpbHMuanM/YjRkZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRWYWx1ZSB9IGZyb20gJ0AvY29uZmlnL1JlZGlzQ29uZmlnJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnL2luZGV4JztcbmltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBtb21lbnQgZnJvbSAnZGF5anMnO1xuaW1wb3J0IG1kNSBmcm9tICdtZDUnO1xuXG5jb25zdCBnZXRKV1RQYXlsb2FkID0gdG9rZW4gPT4ge1xuICAgIHJldHVybiBqd3QudmVyaWZ5KHRva2VuLnNwbGl0KCcgJylbMV0sIG1kNShjb25maWcuSldUX1NFQ1JFVCkpO1xufTtcblxuLy8g55Sf5oiQIHRva2VuIOi/lOWbnue7meWuouaIt+err1xuY29uc3QgZ2VuZXJhdGVUb2tlbiA9IChwYXlsb2FkLCBleHBpcmUgPSAnMWgnKSA9PiB7XG4gICAgaWYgKHBheWxvYWQpIHtcbiAgICAgICAgcmV0dXJuIGp3dC5zaWduKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLnBheWxvYWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZDUoY29uZmlnLkpXVF9TRUNSRVQpLFxuICAgICAgICAgICAgeyBleHBpcmVzSW46IGV4cGlyZSB9XG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfnlJ/miJB0b2tlbuWksei0pe+8gScpO1xuICAgIH1cbn07XG5cbi8vIOWIpOaWreS4gOS4quaXpeacn+aYr+WQpuaYr+S7iuWkqVxuZXhwb3J0IGNvbnN0IGlzVG9kYXkgPSBfZGF0ZSA9PiB7XG4gICAgaWYgKF9kYXRlKSB7XG4gICAgICAgIHJldHVybiBtb21lbnQoX2RhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpID09PSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgY2hlY2tDb2RlID0gYXN5bmMgKGtleSwgdmFsdWUpID0+IHtcbiAgICBjb25zdCByZWRpc0RhdGEgPSBhd2FpdCBnZXRWYWx1ZShrZXkpO1xuICAgIGlmIChyZWRpc0RhdGEgIT0gbnVsbCkge1xuICAgICAgICBpZiAocmVkaXNEYXRhLnRvTG93ZXJDYXNlKCkgPT09IHZhbHVlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cbi8vIOmqjOivgeefreS/oeaIluiAhemCrueusemqjOivgeeggVxuZXhwb3J0IGNvbnN0IGNoZWNrUmVkaXNBY2NvdW50Q29kZSA9IGFzeW5jIChhY2NvdXQsIHNtcykgPT4ge1xuICAgIGNvbnN0IHJlZGlzRGF0YSA9IGF3YWl0IGdldFZhbHVlKGFjY291dCk7XG4gICAgaWYgKHJlZGlzRGF0YSkge1xuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShyZWRpc0RhdGEpO1xuICAgICAgICByZXR1cm4gbW9tZW50KCkuaXNCZWZvcmUobW9tZW50KGRhdGEuZXhwaXJlKSkgJiYgc21zID09PSBkYXRhLnNtcztcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgZ2V0U3RhdHMgPSBwYXRoID0+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIC8vIGZzLnN0YXRzKHBhdGgsIChlcnIsIHN0YXRzKSA9PiB7XG4gICAgICAgIC8vICAgaWYgKGVycikge1xuICAgICAgICAvLyAgICAgcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgLy8gICB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgcmVzb2x2ZShzdGF0cylcbiAgICAgICAgLy8gICB9XG4gICAgICAgIC8vIH0pXG4gICAgICAgIGZzLnN0YXQocGF0aCwgKGVyciwgc3RhdHMpID0+IChlcnIgPyByZXNvbHZlKGZhbHNlKSA6IHJlc29sdmUoc3RhdHMpKSk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBta2RpciA9IGRpciA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBmcy5ta2RpcihkaXIsIGVyciA9PiAoZXJyID8gcmVzb2x2ZShmYWxzZSkgOiByZXNvbHZlKHRydWUpKSk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBkaXJFeGlzdHMgPSBhc3luYyBkaXIgPT4ge1xuICAgIGNvbnN0IGlzRXhpc3RzID0gYXdhaXQgZ2V0U3RhdHMoZGlyKTtcbiAgICAvLyDlpoLmnpzor6Xot6/lvoTlrZjlnKjkuJTkuI3mmK/mlofku7bvvIzov5Tlm54gdHJ1ZVxuICAgIGlmIChpc0V4aXN0cyAmJiBpc0V4aXN0cy5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoaXNFeGlzdHMpIHtcbiAgICAgICAgLy8g6Lev5b6E5a2Y5Zyo77yM5L2G5piv5piv5paH5Lu277yM6L+U5ZueIGZhbHNlXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8g5aaC5p6c6K+l6Lev5b6E5LiN5a2Y5ZyoXG4gICAgY29uc3QgdGVtcERpciA9IHBhdGgucGFyc2UoZGlyKS5kaXI7XG4gICAgLy8g5b6q546v6YGN5Y6G77yM6YCS5b2S5Yik5pat5aaC5p6c5LiK57qn55uu5b2V5LiN5a2Y5Zyo77yM5YiZ5Lqn55Sf5LiK57qn55uu5b2VXG4gICAgY29uc3Qgc3RhdHVzID0gYXdhaXQgZGlyRXhpc3RzKHRlbXBEaXIpO1xuICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWtkaXIoZGlyKTtcbiAgICAgICAgY29uc29sZS5sb2coJ1RDTDogZGlyRXhpc3RzIC0+IHJlc3VsdCcsIHJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cbmNvbnN0IHJlbmFtZSA9IChvYmosIGtleSwgbmV3S2V5KSA9PiB7XG4gICAgaWYgKE9iamVjdC5rZXlzKG9iaikuaW5kZXhPZihrZXkpICE9PSAtMSkge1xuICAgICAgICBvYmpbbmV3S2V5XSA9IG9ialtrZXldO1xuICAgICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59O1xuXG5jb25zdCBzb3J0T2JqID0gKGFyciwgcHJvcGVydHkpID0+IHtcbiAgICByZXR1cm4gYXJyLnNvcnQoKG0sIG4pID0+IG1bcHJvcGVydHldIC0gbltwcm9wZXJ0eV0pO1xufTtcblxuY29uc3Qgc29ydE1lbnVzID0gdHJlZSA9PiB7XG4gICAgdHJlZSA9IHNvcnRPYmoodHJlZSwgJ3NvcnQnKTtcbiAgICBpZiAodHJlZS5jaGlsZHJlbiAmJiB0cmVlLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdHJlZS5jaGlsZHJlbiA9IHNvcnRNZW51cyh0cmVlLmNoaWxkcmVuLCAnc29ydCcpO1xuICAgIH1cbiAgICBpZiAodHJlZS5vcGVyYXRpb25zICYmIHRyZWUub3BlcmF0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRyZWUub3BlcmF0aW9ucyA9IHNvcnRNZW51cyh0cmVlLm9wZXJhdGlvbnMsICdzb3J0Jyk7XG4gICAgfVxuICAgIHJldHVybiB0cmVlO1xufTtcblxuY29uc3QgZ2V0TWVudURhdGEgPSAodHJlZSwgcmlnaHRzLCBmbGFnKSA9PiB7XG4gICAgY29uc3QgYXJyID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0cmVlW2ldO1xuICAgICAgICAvLyBfaWQg5YyF5ZCr5ZyobWVudXPkuK1cbiAgICAgICAgLy8g57uT5p6E6L+b6KGM5pS56YCg77yM5Yig6Zmkb3BlcnRhaW9uc1xuICAgICAgICBpZiAocmlnaHRzLmluY2x1ZGVzKGl0ZW0uX2lkICsgJycpIHx8IGZsYWcpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZW51Jykge1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgX2lkOiBpdGVtLl9pZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogaXRlbS5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVJbkJyZWFkOiBpdGVtLmhpZGVJbkJyZWFkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUluTWVudTogaXRlbS5oaWRlSW5NZW51LFxuICAgICAgICAgICAgICAgICAgICAgICAgbm90Q2FjaGU6IGl0ZW0ubm90Q2FjaGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpdGVtLmljb25cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiBpdGVtLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IGdldE1lbnVEYXRhKGl0ZW0uY2hpbGRyZW4sIHJpZ2h0cylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnbGluaycpIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIF9pZDogaXRlbS5faWQsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGl0ZW0ucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgbWV0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpdGVtLmljb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiBpdGVtLmxpbmtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNvcnRPYmooYXJyLCAnc29ydCcpO1xufTtcblxuY29uc3QgZmxhdHRlbiA9IGFyciA9PiB7XG4gICAgd2hpbGUgKGFyci5zb21lKGl0ZW0gPT4gQXJyYXkuaXNBcnJheShpdGVtKSkpIHtcbiAgICAgICAgYXJyID0gW10uY29uY2F0KC4uLmFycik7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG59O1xuXG5jb25zdCBnZXRSaWdodHMgPSAodHJlZSwgbWVudXMpID0+IHtcbiAgICBsZXQgYXJyID0gW107XG4gICAgZm9yIChsZXQgaXRlbSBvZiB0cmVlKSB7XG4gICAgICAgIGlmIChpdGVtLm9wZXJhdGlvbnMgJiYgaXRlbS5vcGVyYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IG9wIG9mIGl0ZW0ub3BlcmF0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmIChtZW51cy5pbmNsdWRlcyhvcC5faWQgKyAnJykpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2gob3AucGF0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBhcnIucHVzaChnZXRSaWdodHMoaXRlbS5jaGlsZHJlbiwgbWVudXMpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmxhdHRlbihhcnIpO1xufTtcblxuY29uc3QgcmFuZCA9IChsZW4gPSA4KSA9PiB7XG4gICAgY29uc3QgcG9zc2libGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xuICAgIGxldCB0ZXh0ID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRleHQ7XG59O1xuXG5jb25zdCBnZXRUZW1wTmFtZSA9ICgpID0+IHtcbiAgICByZXR1cm4gJ3RvaW1jXycgKyByYW5kKCkgKyAnQHRvaW1jLmNvbSc7XG59O1xuXG4vLyDnlJ/miJDkuIDkuKrpmo/mnLrnmoTnlKjmiLflkI1cbi8vIGNvbnN0IGdldFRlbXBOYW1lID0gKCkgPT4ge1xuLy8gICByZXR1cm4gJ3RvaW1jXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwKVxuLy8gfVxuXG5leHBvcnQgeyBjaGVja0NvZGUsIGdldEpXVFBheWxvYWQsIGdlbmVyYXRlVG9rZW4sIGdldFRlbXBOYW1lLCBkaXJFeGlzdHMsIHJlbmFtZSwgZ2V0TWVudURhdGEsIHNvcnRNZW51cywgZmxhdHRlbiwgZ2V0UmlnaHRzLCByYW5kIH07XG4iXSwibmFtZXMiOlsiZ2V0VmFsdWUiLCJjb25maWciLCJqd3QiLCJmcyIsInBhdGgiLCJtb21lbnQiLCJtZDUiLCJnZXRKV1RQYXlsb2FkIiwidG9rZW4iLCJ2ZXJpZnkiLCJzcGxpdCIsIkpXVF9TRUNSRVQiLCJnZW5lcmF0ZVRva2VuIiwicGF5bG9hZCIsImV4cGlyZSIsInNpZ24iLCJleHBpcmVzSW4iLCJFcnJvciIsImlzVG9kYXkiLCJfZGF0ZSIsImZvcm1hdCIsImNoZWNrQ29kZSIsImtleSIsInZhbHVlIiwicmVkaXNEYXRhIiwidG9Mb3dlckNhc2UiLCJjaGVja1JlZGlzQWNjb3VudENvZGUiLCJhY2NvdXQiLCJzbXMiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwiaXNCZWZvcmUiLCJnZXRTdGF0cyIsIlByb21pc2UiLCJyZXNvbHZlIiwic3RhdCIsImVyciIsInN0YXRzIiwibWtkaXIiLCJkaXIiLCJkaXJFeGlzdHMiLCJpc0V4aXN0cyIsImlzRGlyZWN0b3J5IiwidGVtcERpciIsInN0YXR1cyIsInJlc3VsdCIsImNvbnNvbGUiLCJsb2ciLCJyZW5hbWUiLCJvYmoiLCJuZXdLZXkiLCJPYmplY3QiLCJrZXlzIiwiaW5kZXhPZiIsInNvcnRPYmoiLCJhcnIiLCJwcm9wZXJ0eSIsInNvcnQiLCJtIiwibiIsInNvcnRNZW51cyIsInRyZWUiLCJjaGlsZHJlbiIsImxlbmd0aCIsIm9wZXJhdGlvbnMiLCJnZXRNZW51RGF0YSIsInJpZ2h0cyIsImZsYWciLCJpIiwiaXRlbSIsImluY2x1ZGVzIiwiX2lkIiwidHlwZSIsInB1c2giLCJtZXRhIiwidGl0bGUiLCJoaWRlSW5CcmVhZCIsImhpZGVJbk1lbnUiLCJub3RDYWNoZSIsImljb24iLCJjb21wb25lbnQiLCJocmVmIiwibGluayIsImZsYXR0ZW4iLCJzb21lIiwiQXJyYXkiLCJpc0FycmF5IiwiY29uY2F0IiwiZ2V0UmlnaHRzIiwibWVudXMiLCJvcCIsInJhbmQiLCJsZW4iLCJwb3NzaWJsZSIsInRleHQiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJnZXRUZW1wTmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/common/Utils.js\n\n}");

/***/ }),

/***/ "./src/config/DBHelpler.js":
/*!*********************************!*\
  !*** ./src/config/DBHelpler.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/config/index.js\");\n\n\n\n// mongoose.set('useCreateIndex', true);\n// mongoose.set('debug', true)\n\n// 创建连接\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(_index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].DB_URL, {\n  useNewUrlParser: true\n});\n\n// 连接成功\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('connected', () => {\n  console.log(`MongoDB: ${_index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].DB_NAME}, DB_HOST: ${_index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].MONGO_HOSTNAME} connection opened! `);\n});\n\n// 连接异常\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('error', err => {\n  console.log('Mongoose connection error: ' + err);\n});\n\n// 断开连接\nmongoose__WEBPACK_IMPORTED_MODULE_0___default().connection.on('disconnected', () => {\n  console.log('Mongoose connection disconnected');\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default()));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29uZmlnL0RCSGVscGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWdDO0FBQ0g7O0FBRTdCO0FBQ0E7O0FBRUE7QUFDQUEsdURBQWdCLENBQUNDLDhDQUFNLENBQUNFLE1BQU0sRUFBRTtFQUM1QkMsZUFBZSxFQUFFO0FBQ3JCLENBQUMsQ0FBQzs7QUFFRjtBQUNBSiwwREFBbUIsQ0FBQ00sRUFBRSxDQUFDLFdBQVcsRUFBRSxNQUFNO0VBQ3RDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxZQUFZUCw4Q0FBTSxDQUFDUSxPQUFPLGNBQWNSLDhDQUFNLENBQUNTLGNBQWMsc0JBQXNCLENBQUM7QUFDcEcsQ0FBQyxDQUFDOztBQUVGO0FBQ0FWLDBEQUFtQixDQUFDTSxFQUFFLENBQUMsT0FBTyxFQUFFSyxHQUFHLElBQUk7RUFDbkNKLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDZCQUE2QixHQUFHRyxHQUFHLENBQUM7QUFDcEQsQ0FBQyxDQUFDOztBQUVGO0FBQ0FYLDBEQUFtQixDQUFDTSxFQUFFLENBQUMsY0FBYyxFQUFFLE1BQU07RUFDekNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGtDQUFrQyxDQUFDO0FBQ25ELENBQUMsQ0FBQztBQUVGLGlFQUFlUixpREFBUSIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9jb25maWcvREJIZWxwbGVyLmpzP2U2ODQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi9pbmRleCc7XG5cbi8vIG1vbmdvb3NlLnNldCgndXNlQ3JlYXRlSW5kZXgnLCB0cnVlKTtcbi8vIG1vbmdvb3NlLnNldCgnZGVidWcnLCB0cnVlKVxuXG4vLyDliJvlu7rov57mjqVcbm1vbmdvb3NlLmNvbm5lY3QoY29uZmlnLkRCX1VSTCwge1xuICAgIHVzZU5ld1VybFBhcnNlcjogdHJ1ZVxufSk7XG5cbi8vIOi/nuaOpeaIkOWKn1xubW9uZ29vc2UuY29ubmVjdGlvbi5vbignY29ubmVjdGVkJywgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGBNb25nb0RCOiAke2NvbmZpZy5EQl9OQU1FfSwgREJfSE9TVDogJHtjb25maWcuTU9OR09fSE9TVE5BTUV9IGNvbm5lY3Rpb24gb3BlbmVkISBgKTtcbn0pO1xuXG4vLyDov57mjqXlvILluLhcbm1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Vycm9yJywgZXJyID0+IHtcbiAgICBjb25zb2xlLmxvZygnTW9uZ29vc2UgY29ubmVjdGlvbiBlcnJvcjogJyArIGVycik7XG59KTtcblxuLy8g5pat5byA6L+e5o6lXG5tb25nb29zZS5jb25uZWN0aW9uLm9uKCdkaXNjb25uZWN0ZWQnLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ01vbmdvb3NlIGNvbm5lY3Rpb24gZGlzY29ubmVjdGVkJyk7XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2U7XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJjb25maWciLCJjb25uZWN0IiwiREJfVVJMIiwidXNlTmV3VXJsUGFyc2VyIiwiY29ubmVjdGlvbiIsIm9uIiwiY29uc29sZSIsImxvZyIsIkRCX05BTUUiLCJNT05HT19IT1NUTkFNRSIsImVyciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/config/DBHelpler.js\n\n}");

/***/ }),

/***/ "./src/config/Log4j.js":
/*!*****************************!*\
  !*** ./src/config/Log4j.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var koa_log4__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! koa-log4 */ \"koa-log4\");\n/* harmony import */ var koa_log4__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(koa_log4__WEBPACK_IMPORTED_MODULE_0__);\n\nkoa_log4__WEBPACK_IMPORTED_MODULE_0___default().configure({\n  appenders: {\n    access: {\n      type: 'dateFile',\n      filename: 'logs/access.log',\n      pattern: '-yyyy-MM-dd.log'\n    },\n    application: {\n      type: 'dateFile',\n      filename: 'logs/app.log',\n      pattern: '-yyyy-MM-dd.log'\n    },\n    error: {\n      type: 'dateFile',\n      filename: 'logs/error.log',\n      pattern: '-yyyy-MM-dd.log'\n    },\n    out: {\n      type: 'console'\n    }\n  },\n  categories: {\n    default: {\n      appenders: ['out'],\n      level: 'info'\n    },\n    access: {\n      appenders: ['access'],\n      level: 'info'\n    },\n    application: {\n      appenders: ['application'],\n      level: 'warn'\n    },\n    error: {\n      appenders: ['error'],\n      level: 'warn'\n    }\n  }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((koa_log4__WEBPACK_IMPORTED_MODULE_0___default()));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29uZmlnL0xvZzRqLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QjtBQUU5QkEseURBQWdCLENBQUM7RUFDYkUsU0FBUyxFQUFFO0lBQ1BDLE1BQU0sRUFBRTtNQUNKQyxJQUFJLEVBQUUsVUFBVTtNQUNoQkMsUUFBUSxFQUFFLGlCQUFpQjtNQUMzQkMsT0FBTyxFQUFFO0lBQ2IsQ0FBQztJQUNEQyxXQUFXLEVBQUU7TUFDVEgsSUFBSSxFQUFFLFVBQVU7TUFDaEJDLFFBQVEsRUFBRSxjQUFjO01BQ3hCQyxPQUFPLEVBQUU7SUFDYixDQUFDO0lBQ0RFLEtBQUssRUFBRTtNQUNISixJQUFJLEVBQUUsVUFBVTtNQUNoQkMsUUFBUSxFQUFFLGdCQUFnQjtNQUMxQkMsT0FBTyxFQUFFO0lBQ2IsQ0FBQztJQUNERyxHQUFHLEVBQUU7TUFBRUwsSUFBSSxFQUFFO0lBQVU7RUFDM0IsQ0FBQztFQUNETSxVQUFVLEVBQUU7SUFDUkMsT0FBTyxFQUFFO01BQUVULFNBQVMsRUFBRSxDQUFDLEtBQUssQ0FBQztNQUFFVSxLQUFLLEVBQUU7SUFBTyxDQUFDO0lBQzlDVCxNQUFNLEVBQUU7TUFBRUQsU0FBUyxFQUFFLENBQUMsUUFBUSxDQUFDO01BQUVVLEtBQUssRUFBRTtJQUFPLENBQUM7SUFDaERMLFdBQVcsRUFBRTtNQUFFTCxTQUFTLEVBQUUsQ0FBQyxhQUFhLENBQUM7TUFBRVUsS0FBSyxFQUFFO0lBQU8sQ0FBQztJQUMxREosS0FBSyxFQUFFO01BQUVOLFNBQVMsRUFBRSxDQUFDLE9BQU8sQ0FBQztNQUFFVSxLQUFLLEVBQUU7SUFBTztFQUNqRDtBQUNKLENBQUMsQ0FBQztBQUVGLGlFQUFlWixpREFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9jb25maWcvTG9nNGouanM/MjBiYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nNGpzIGZyb20gJ2tvYS1sb2c0JztcblxubG9nNGpzLmNvbmZpZ3VyZSh7XG4gICAgYXBwZW5kZXJzOiB7XG4gICAgICAgIGFjY2Vzczoge1xuICAgICAgICAgICAgdHlwZTogJ2RhdGVGaWxlJyxcbiAgICAgICAgICAgIGZpbGVuYW1lOiAnbG9ncy9hY2Nlc3MubG9nJyxcbiAgICAgICAgICAgIHBhdHRlcm46ICcteXl5eS1NTS1kZC5sb2cnLFxuICAgICAgICB9LFxuICAgICAgICBhcHBsaWNhdGlvbjoge1xuICAgICAgICAgICAgdHlwZTogJ2RhdGVGaWxlJyxcbiAgICAgICAgICAgIGZpbGVuYW1lOiAnbG9ncy9hcHAubG9nJyxcbiAgICAgICAgICAgIHBhdHRlcm46ICcteXl5eS1NTS1kZC5sb2cnLFxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgICAgdHlwZTogJ2RhdGVGaWxlJyxcbiAgICAgICAgICAgIGZpbGVuYW1lOiAnbG9ncy9lcnJvci5sb2cnLFxuICAgICAgICAgICAgcGF0dGVybjogJy15eXl5LU1NLWRkLmxvZycsXG4gICAgICAgIH0sXG4gICAgICAgIG91dDogeyB0eXBlOiAnY29uc29sZScgfSxcbiAgICB9LFxuICAgIGNhdGVnb3JpZXM6IHtcbiAgICAgICAgZGVmYXVsdDogeyBhcHBlbmRlcnM6IFsnb3V0J10sIGxldmVsOiAnaW5mbycgfSxcbiAgICAgICAgYWNjZXNzOiB7IGFwcGVuZGVyczogWydhY2Nlc3MnXSwgbGV2ZWw6ICdpbmZvJyB9LFxuICAgICAgICBhcHBsaWNhdGlvbjogeyBhcHBlbmRlcnM6IFsnYXBwbGljYXRpb24nXSwgbGV2ZWw6ICd3YXJuJyB9LFxuICAgICAgICBlcnJvcjogeyBhcHBlbmRlcnM6IFsnZXJyb3InXSwgbGV2ZWw6ICd3YXJuJyB9LFxuICAgIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgbG9nNGpzO1xuIl0sIm5hbWVzIjpbImxvZzRqcyIsImNvbmZpZ3VyZSIsImFwcGVuZGVycyIsImFjY2VzcyIsInR5cGUiLCJmaWxlbmFtZSIsInBhdHRlcm4iLCJhcHBsaWNhdGlvbiIsImVycm9yIiwib3V0IiwiY2F0ZWdvcmllcyIsImRlZmF1bHQiLCJsZXZlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/config/Log4j.js\n\n}");

/***/ }),

/***/ "./src/config/MailConfig.js":
/*!**********************************!*\
  !*** ./src/config/MailConfig.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"nodemailer\");\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(nodemailer__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/config */ \"./src/config/index.js\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! qs */ \"qs\");\n/* harmony import */ var qs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst toSendSms = (option, sendInfo) => {\n  option.subject = '你好，你的验证码';\n  option.text = `您正在绑定您的邮箱，验证码为：${sendInfo.code}，验证码过期时间：${sendInfo.expire}。`;\n  option.html = '';\n};\n\n// async..await is not allowed in global scope, must use a wrapper\nasync function send(sendInfo, isSendSms) {\n  console.log('sendInfo', sendInfo);\n  // Generate test SMTP service account from ethereal.email\n  // Only needed if you don't have a real mail account for testing\n  // let testAccount = await nodemailer.createTestAccount()\n\n  // create reusable transporter object using the default SMTP transport\n  const transporter = nodemailer__WEBPACK_IMPORTED_MODULE_0___default().createTransport({\n    host: 'smtp.qq.com',\n    port: 587,\n    secure: false,\n    // true for 465, false for other ports\n    auth: {\n      user: '285273676@qq.com',\n      // generated ethereal user\n      pass: 'pkblqdtiadnsbhdf' // generated ethereal password\n    }\n  });\n\n  // let sendInfo = {\n  //   code: '1234',\n  //   expire: '2019-10-01',\n  //   email: 'imoocbrian@qq.com',\n  //   user: 'Brian',\n  // }\n  const baseUrl = _config__WEBPACK_IMPORTED_MODULE_1__[\"default\"].baseUrl;\n  console.log('config', _config__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n  const route = sendInfo.type === 'email' ? '/confirm' : '/reset';\n  const url = `${baseUrl}/#${route}?` + qs__WEBPACK_IMPORTED_MODULE_2___default().stringify(sendInfo.data);\n  const mailOptions = {\n    from: '\"认证邮件\" <285273676@qq.com>',\n    // sender address\n    to: sendInfo.email,\n    // list of receivers\n    subject: sendInfo.user !== '' && sendInfo.type !== 'email' ? `你好开发者，${sendInfo.user}！《慕课网前端全栈实践》${sendInfo.type === 'reset' ? '重置密码链接！' : '注册码！'}` : '《慕课网前端全栈实践》确认修改邮件链接',\n    // Subject line\n    text: `您在《慕课网前端全栈实践》课程中注册，您的邀请码是${sendInfo.code},邀请码的过期时间: ${sendInfo.expire}`,\n    // plain text body\n    html: `\n        <div style=\"border: 1px solid #dcdcdc;color: #676767;width: 600px; margin: 0 auto; padding-bottom: 50px;position: relative;\">\n        <div style=\"height: 60px; background: #393d49; line-height: 60px; color: #58a36f; font-size: 18px;padding-left: 10px;\">Imooc社区——欢迎来到官方社区</div>\n        <div style=\"padding: 25px\">\n          <div>您好，${sendInfo.user}童鞋，重置链接有效时间30分钟，请在${sendInfo.expire}之前${sendInfo.code ? '重置您的密码' : '修改您的邮箱为：' + sendInfo.data.username}：</div>\n          <a href=\"${url}\" style=\"padding: 10px 20px; color: #fff; background: #009e94; display: inline-block;margin: 15px 0;\">${sendInfo.code ? '立即重置密码' : '确认设置邮箱'}</a>\n          <div style=\"padding: 5px; background: #f2f2f2;\">如果该邮件不是由你本人操作，请勿进行激活！否则你的邮箱将会被他人绑定。</div>\n        </div>\n        <div style=\"background: #fafafa; color: #b4b4b4;text-align: center; line-height: 45px; height: 45px; position: absolute; left: 0; bottom: 0;width: 100%;\">系统邮件，请勿直接回复</div>\n    </div>\n    ` // html body\n  };\n  if (isSendSms) {\n    // 发送短信验证码\n    toSendSms(mailOptions, sendInfo);\n  }\n\n  // send mail with defined transport object\n  const info = await transporter.sendMail(mailOptions);\n  return `Message sent: %s, ${info.messageId}`;\n  // Message sent: <b658f8ca-6296-ccf4-8306-87d57a0b4321@example.com>\n\n  // Preview only available when sending through an Ethereal account\n  // console.log('Preview URL: %s', nodemailer.getTestMessageUrl(info))\n  // Preview URL: https://ethereal.email/message/WaQKMgKddxQDoou...\n}\n\n// main().catch(console.error)\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (send);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bmZpZy5qcz8yZGIxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBub2RlbWFpbGVyIGZyb20gJ25vZGVtYWlsZXInO1xuaW1wb3J0IGNvbmZpZyBmcm9tICdAL2NvbmZpZyc7XG5pbXBvcnQgcXMgZnJvbSAncXMnO1xuXG5jb25zdCB0b1NlbmRTbXMgPSAob3B0aW9uLCBzZW5kSW5mbykgPT4ge1xuICAgIG9wdGlvbi5zdWJqZWN0ID0gJ+S9oOWlve+8jOS9oOeahOmqjOivgeeggSc7XG4gICAgb3B0aW9uLnRleHQgPSBg5oKo5q2j5Zyo57uR5a6a5oKo55qE6YKu566x77yM6aqM6K+B56CB5Li677yaJHtzZW5kSW5mby5jb2Rlfe+8jOmqjOivgeeggei/h+acn+aXtumXtO+8miR7c2VuZEluZm8uZXhwaXJlfeOAgmA7XG4gICAgb3B0aW9uLmh0bWwgPSAnJztcbn07XG5cbi8vIGFzeW5jLi5hd2FpdCBpcyBub3QgYWxsb3dlZCBpbiBnbG9iYWwgc2NvcGUsIG11c3QgdXNlIGEgd3JhcHBlclxuYXN5bmMgZnVuY3Rpb24gc2VuZChzZW5kSW5mbywgaXNTZW5kU21zKSB7XG4gICAgY29uc29sZS5sb2coJ3NlbmRJbmZvJywgc2VuZEluZm8pO1xuICAgIC8vIEdlbmVyYXRlIHRlc3QgU01UUCBzZXJ2aWNlIGFjY291bnQgZnJvbSBldGhlcmVhbC5lbWFpbFxuICAgIC8vIE9ubHkgbmVlZGVkIGlmIHlvdSBkb24ndCBoYXZlIGEgcmVhbCBtYWlsIGFjY291bnQgZm9yIHRlc3RpbmdcbiAgICAvLyBsZXQgdGVzdEFjY291bnQgPSBhd2FpdCBub2RlbWFpbGVyLmNyZWF0ZVRlc3RBY2NvdW50KClcblxuICAgIC8vIGNyZWF0ZSByZXVzYWJsZSB0cmFuc3BvcnRlciBvYmplY3QgdXNpbmcgdGhlIGRlZmF1bHQgU01UUCB0cmFuc3BvcnRcbiAgICBjb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcbiAgICAgICAgaG9zdDogJ3NtdHAucXEuY29tJyxcbiAgICAgICAgcG9ydDogNTg3LFxuICAgICAgICBzZWN1cmU6IGZhbHNlLCAvLyB0cnVlIGZvciA0NjUsIGZhbHNlIGZvciBvdGhlciBwb3J0c1xuICAgICAgICBhdXRoOiB7XG4gICAgICAgICAgICB1c2VyOiAnMjg1MjczNjc2QHFxLmNvbScsIC8vIGdlbmVyYXRlZCBldGhlcmVhbCB1c2VyXG4gICAgICAgICAgICBwYXNzOiAncGtibHFkdGlhZG5zYmhkZicgLy8gZ2VuZXJhdGVkIGV0aGVyZWFsIHBhc3N3b3JkXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGxldCBzZW5kSW5mbyA9IHtcbiAgICAvLyAgIGNvZGU6ICcxMjM0JyxcbiAgICAvLyAgIGV4cGlyZTogJzIwMTktMTAtMDEnLFxuICAgIC8vICAgZW1haWw6ICdpbW9vY2JyaWFuQHFxLmNvbScsXG4gICAgLy8gICB1c2VyOiAnQnJpYW4nLFxuICAgIC8vIH1cbiAgICBjb25zdCBiYXNlVXJsID0gY29uZmlnLmJhc2VVcmw7XG4gICAgY29uc29sZS5sb2coJ2NvbmZpZycsIGNvbmZpZyk7XG4gICAgY29uc3Qgcm91dGUgPSBzZW5kSW5mby50eXBlID09PSAnZW1haWwnID8gJy9jb25maXJtJyA6ICcvcmVzZXQnO1xuICAgIGNvbnN0IHVybCA9IGAke2Jhc2VVcmx9LyMke3JvdXRlfT9gICsgcXMuc3RyaW5naWZ5KHNlbmRJbmZvLmRhdGEpO1xuXG4gICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XG4gICAgICAgIGZyb206ICdcIuiupOivgemCruS7tlwiIDwyODUyNzM2NzZAcXEuY29tPicsIC8vIHNlbmRlciBhZGRyZXNzXG4gICAgICAgIHRvOiBzZW5kSW5mby5lbWFpbCwgLy8gbGlzdCBvZiByZWNlaXZlcnNcbiAgICAgICAgc3ViamVjdDpcbiAgICAgICAgICAgIHNlbmRJbmZvLnVzZXIgIT09ICcnICYmIHNlbmRJbmZvLnR5cGUgIT09ICdlbWFpbCdcbiAgICAgICAgICAgICAgICA/IGDkvaDlpb3lvIDlj5HogIXvvIwke3NlbmRJbmZvLnVzZXJ977yB44CK5oWV6K++572R5YmN56uv5YWo5qCI5a6e6Le144CLJHtzZW5kSW5mby50eXBlID09PSAncmVzZXQnID8gJ+mHjee9ruWvhueggemTvuaOpe+8gScgOiAn5rOo5YaM56CB77yBJ31gXG4gICAgICAgICAgICAgICAgOiAn44CK5oWV6K++572R5YmN56uv5YWo5qCI5a6e6Le144CL56Gu6K6k5L+u5pS56YKu5Lu26ZO+5o6lJywgLy8gU3ViamVjdCBsaW5lXG4gICAgICAgIHRleHQ6IGDmgqjlnKjjgIrmhZXor77nvZHliY3nq6/lhajmoIjlrp7ot7XjgIvor77nqIvkuK3ms6jlhozvvIzmgqjnmoTpgoDor7fnoIHmmK8ke3NlbmRJbmZvLmNvZGV9LOmCgOivt+eggeeahOi/h+acn+aXtumXtDogJHtzZW5kSW5mby5leHBpcmV9YCwgLy8gcGxhaW4gdGV4dCBib2R5XG4gICAgICAgIGh0bWw6IGBcbiAgICAgICAgPGRpdiBzdHlsZT1cImJvcmRlcjogMXB4IHNvbGlkICNkY2RjZGM7Y29sb3I6ICM2NzY3Njc7d2lkdGg6IDYwMHB4OyBtYXJnaW46IDAgYXV0bzsgcGFkZGluZy1ib3R0b206IDUwcHg7cG9zaXRpb246IHJlbGF0aXZlO1wiPlxuICAgICAgICA8ZGl2IHN0eWxlPVwiaGVpZ2h0OiA2MHB4OyBiYWNrZ3JvdW5kOiAjMzkzZDQ5OyBsaW5lLWhlaWdodDogNjBweDsgY29sb3I6ICM1OGEzNmY7IGZvbnQtc2l6ZTogMThweDtwYWRkaW5nLWxlZnQ6IDEwcHg7XCI+SW1vb2PnpL7ljLrigJTigJTmrKLov47mnaXliLDlrpjmlrnnpL7ljLo8L2Rpdj5cbiAgICAgICAgPGRpdiBzdHlsZT1cInBhZGRpbmc6IDI1cHhcIj5cbiAgICAgICAgICA8ZGl2PuaCqOWlve+8jCR7c2VuZEluZm8udXNlcn3nq6XpnovvvIzph43nva7pk77mjqXmnInmlYjml7bpl7QzMOWIhumSn++8jOivt+WcqCR7c2VuZEluZm8uZXhwaXJlfeS5i+WJjSR7XG4gICAgICAgICAgICBzZW5kSW5mby5jb2RlID8gJ+mHjee9ruaCqOeahOWvhueggScgOiAn5L+u5pS55oKo55qE6YKu566x5Li677yaJyArIHNlbmRJbmZvLmRhdGEudXNlcm5hbWVcbiAgICAgICAgfe+8mjwvZGl2PlxuICAgICAgICAgIDxhIGhyZWY9XCIke3VybH1cIiBzdHlsZT1cInBhZGRpbmc6IDEwcHggMjBweDsgY29sb3I6ICNmZmY7IGJhY2tncm91bmQ6ICMwMDllOTQ7IGRpc3BsYXk6IGlubGluZS1ibG9jazttYXJnaW46IDE1cHggMDtcIj4ke1xuICAgICAgICAgICAgc2VuZEluZm8uY29kZSA/ICfnq4vljbPph43nva7lr4bnoIEnIDogJ+ehruiupOiuvue9rumCrueusSdcbiAgICAgICAgfTwvYT5cbiAgICAgICAgICA8ZGl2IHN0eWxlPVwicGFkZGluZzogNXB4OyBiYWNrZ3JvdW5kOiAjZjJmMmYyO1wiPuWmguaenOivpemCruS7tuS4jeaYr+eUseS9oOacrOS6uuaTjeS9nO+8jOivt+WLv+i/m+ihjOa/gOa0u++8geWQpuWImeS9oOeahOmCrueuseWwhuS8muiiq+S7luS6uue7keWumuOAgjwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6ICNmYWZhZmE7IGNvbG9yOiAjYjRiNGI0O3RleHQtYWxpZ246IGNlbnRlcjsgbGluZS1oZWlnaHQ6IDQ1cHg7IGhlaWdodDogNDVweDsgcG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAwOyBib3R0b206IDA7d2lkdGg6IDEwMCU7XCI+57O757uf6YKu5Lu277yM6K+35Yu/55u05o6l5Zue5aSNPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgYCAvLyBodG1sIGJvZHlcbiAgICB9O1xuXG4gICAgaWYgKGlzU2VuZFNtcykge1xuICAgICAgICAvLyDlj5HpgIHnn63kv6Hpqozor4HnoIFcbiAgICAgICAgdG9TZW5kU21zKG1haWxPcHRpb25zLCBzZW5kSW5mbyk7XG4gICAgfVxuXG4gICAgLy8gc2VuZCBtYWlsIHdpdGggZGVmaW5lZCB0cmFuc3BvcnQgb2JqZWN0XG4gICAgY29uc3QgaW5mbyA9IGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKTtcblxuICAgIHJldHVybiBgTWVzc2FnZSBzZW50OiAlcywgJHtpbmZvLm1lc3NhZ2VJZH1gO1xuICAgIC8vIE1lc3NhZ2Ugc2VudDogPGI2NThmOGNhLTYyOTYtY2NmNC04MzA2LTg3ZDU3YTBiNDMyMUBleGFtcGxlLmNvbT5cblxuICAgIC8vIFByZXZpZXcgb25seSBhdmFpbGFibGUgd2hlbiBzZW5kaW5nIHRocm91Z2ggYW4gRXRoZXJlYWwgYWNjb3VudFxuICAgIC8vIGNvbnNvbGUubG9nKCdQcmV2aWV3IFVSTDogJXMnLCBub2RlbWFpbGVyLmdldFRlc3RNZXNzYWdlVXJsKGluZm8pKVxuICAgIC8vIFByZXZpZXcgVVJMOiBodHRwczovL2V0aGVyZWFsLmVtYWlsL21lc3NhZ2UvV2FRS01nS2RkeFFEb291Li4uXG59XG5cbi8vIG1haW4oKS5jYXRjaChjb25zb2xlLmVycm9yKVxuXG5leHBvcnQgZGVmYXVsdCBzZW5kO1xuIl0sIm5hbWVzIjpbIm5vZGVtYWlsZXIiLCJjb25maWciLCJxcyIsInRvU2VuZFNtcyIsIm9wdGlvbiIsInNlbmRJbmZvIiwic3ViamVjdCIsInRleHQiLCJjb2RlIiwiZXhwaXJlIiwiaHRtbCIsInNlbmQiLCJpc1NlbmRTbXMiLCJjb25zb2xlIiwibG9nIiwidHJhbnNwb3J0ZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJob3N0IiwicG9ydCIsInNlY3VyZSIsImF1dGgiLCJ1c2VyIiwicGFzcyIsImJhc2VVcmwiLCJyb3V0ZSIsInR5cGUiLCJ1cmwiLCJzdHJpbmdpZnkiLCJkYXRhIiwibWFpbE9wdGlvbnMiLCJmcm9tIiwidG8iLCJlbWFpbCIsInVzZXJuYW1lIiwiaW5mbyIsInNlbmRNYWlsIiwibWVzc2FnZUlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/config/MailConfig.js\n\n}");

/***/ }),

/***/ "./src/config/RedisConfig.js":
/*!***********************************!*\
  !*** ./src/config/RedisConfig.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   client: () => (/* binding */ client),\n/* harmony export */   delValue: () => (/* binding */ delValue),\n/* harmony export */   getHValue: () => (/* binding */ getHValue),\n/* harmony export */   getValue: () => (/* binding */ getValue),\n/* harmony export */   setValue: () => (/* binding */ setValue)\n/* harmony export */ });\n/* harmony import */ var redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redis */ \"redis\");\n/* harmony import */ var redis__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(redis__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ \"./src/config/index.js\");\n\n\nconst options = {\n  socket: {\n    host: _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].REDIS.host,\n    // 服务器地址\n    port: _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].REDIS.port // Redis 端口\n  },\n  password: _index__WEBPACK_IMPORTED_MODULE_1__[\"default\"].REDIS.password,\n  no_ready_check: true,\n  detect_buffers: true\n};\nlet client = (0,redis__WEBPACK_IMPORTED_MODULE_0__.createClient)(options);\n\n// 连接 Redis（只执行一次）\nconst initRedis = async () => {\n  if (!client.isOpen) {\n    await client.connect();\n  }\n  return client;\n};\nclient.on('error', err => {\n  console.error('❌ Redis Client Error:', err.message);\n  setTimeout(async () => {\n    await initRedis();\n  }, 2000);\n});\nclient.on('connect', () => {\n  console.log('✅ Redis connected successfully');\n});\nclient.on('end', () => {\n  console.log('redis connection has closed');\n});\nclient.on('reconnecting', o => {\n  console.log('redis client reconnecting', o.attempt, o.delay);\n});\nconst setValue = async (key, value, time) => {\n  await initRedis();\n  if (typeof value === 'undefined' || value == null || value === '') {\n    return;\n  }\n  if (typeof value === 'object') {\n    await client.hSet(key, value);\n  } else {\n    if (time) {\n      await client.setEx(key, time, value);\n    } else {\n      await client.set(key, value);\n    }\n  }\n};\nconst getValue = async key => {\n  await initRedis();\n  return client.get(key);\n};\nconst getHValue = async key => {\n  await initRedis();\n  return client.hGetAll(key);\n};\nconst delValue = async key => {\n  await initRedis();\n  const res = await client.del(key);\n  if (res === 1) {\n    console.log('delete successfully');\n  } else {\n    console.log(`⚠️ Failed to delete key \"${key}\"`);\n  }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHLE1BQU1WLEdBQUcsSUFBSTtFQUMxQixNQUFNZCxTQUFTLENBQUMsQ0FBQztFQUNqQixNQUFNeUIsR0FBRyxHQUFHLE1BQU0xQixNQUFNLENBQUMyQixHQUFHLENBQUNaLEdBQUcsQ0FBQztFQUNqQyxJQUFJVyxHQUFHLEtBQUssQ0FBQyxFQUFFO0lBQ1hwQixPQUFPLENBQUNJLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQztFQUN0QyxDQUFDLE1BQU07SUFDSEosT0FBTyxDQUFDSSxHQUFHLENBQUMsNEJBQTRCSyxHQUFHLEdBQUcsQ0FBQztFQUNuRDtBQUNKLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvY29uZmlnL1JlZGlzQ29uZmlnLmpzP2I3ODkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAncmVkaXMnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2luZGV4JztcblxuY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBzb2NrZXQ6IHtcbiAgICAgICAgaG9zdDogY29uZmlnLlJFRElTLmhvc3QsIC8vIOacjeWKoeWZqOWcsOWdgFxuICAgICAgICBwb3J0OiBjb25maWcuUkVESVMucG9ydCAvLyBSZWRpcyDnq6/lj6NcbiAgICB9LFxuICAgIHBhc3N3b3JkOiBjb25maWcuUkVESVMucGFzc3dvcmQsXG4gICAgbm9fcmVhZHlfY2hlY2s6IHRydWUsXG4gICAgZGV0ZWN0X2J1ZmZlcnM6IHRydWVcbn07XG5cbmxldCBjbGllbnQgPSBjcmVhdGVDbGllbnQob3B0aW9ucyk7XG5cbi8vIOi/nuaOpSBSZWRpc++8iOWPquaJp+ihjOS4gOasoe+8iVxuY29uc3QgaW5pdFJlZGlzID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghY2xpZW50LmlzT3Blbikge1xuICAgICAgICBhd2FpdCBjbGllbnQuY29ubmVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gY2xpZW50O1xufTtcblxuY2xpZW50Lm9uKCdlcnJvcicsIGVyciA9PiB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIFJlZGlzIENsaWVudCBFcnJvcjonLCBlcnIubWVzc2FnZSk7XG4gICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGluaXRSZWRpcygpO1xuICAgIH0sIDIwMDApO1xufSk7XG5cbmNsaWVudC5vbignY29ubmVjdCcsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygn4pyFIFJlZGlzIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHknKTtcbn0pO1xuXG5jbGllbnQub24oJ2VuZCcsICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygncmVkaXMgY29ubmVjdGlvbiBoYXMgY2xvc2VkJyk7XG59KTtcblxuY2xpZW50Lm9uKCdyZWNvbm5lY3RpbmcnLCBvID0+IHtcbiAgICBjb25zb2xlLmxvZygncmVkaXMgY2xpZW50IHJlY29ubmVjdGluZycsIG8uYXR0ZW1wdCwgby5kZWxheSk7XG59KTtcblxuY29uc3Qgc2V0VmFsdWUgPSBhc3luYyAoa2V5LCB2YWx1ZSwgdGltZSkgPT4ge1xuICAgIGF3YWl0IGluaXRSZWRpcygpO1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnIHx8IHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09ICcnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgYXdhaXQgY2xpZW50LmhTZXQoa2V5LCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRpbWUpIHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudC5zZXRFeChrZXksIHRpbWUsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGNsaWVudC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCBnZXRWYWx1ZSA9IGFzeW5jIGtleSA9PiB7XG4gICAgYXdhaXQgaW5pdFJlZGlzKCk7XG4gICAgcmV0dXJuIGNsaWVudC5nZXQoa2V5KTtcbn07XG5cbmNvbnN0IGdldEhWYWx1ZSA9IGFzeW5jIGtleSA9PiB7XG4gICAgYXdhaXQgaW5pdFJlZGlzKCk7XG4gICAgcmV0dXJuIGNsaWVudC5oR2V0QWxsKGtleSk7XG59O1xuXG5jb25zdCBkZWxWYWx1ZSA9IGFzeW5jIGtleSA9PiB7XG4gICAgYXdhaXQgaW5pdFJlZGlzKCk7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LmRlbChrZXkpO1xuICAgIGlmIChyZXMgPT09IDEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2RlbGV0ZSBzdWNjZXNzZnVsbHknKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhg4pqg77iPIEZhaWxlZCB0byBkZWxldGUga2V5IFwiJHtrZXl9XCJgKTtcbiAgICB9XG59O1xuXG5leHBvcnQgeyBjbGllbnQsIHNldFZhbHVlLCBnZXRWYWx1ZSwgZ2V0SFZhbHVlLCBkZWxWYWx1ZSB9O1xuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImNvbmZpZyIsIm9wdGlvbnMiLCJzb2NrZXQiLCJob3N0IiwiUkVESVMiLCJwb3J0IiwicGFzc3dvcmQiLCJub19yZWFkeV9jaGVjayIsImRldGVjdF9idWZmZXJzIiwiY2xpZW50IiwiaW5pdFJlZGlzIiwiaXNPcGVuIiwiY29ubmVjdCIsIm9uIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibWVzc2FnZSIsInNldFRpbWVvdXQiLCJsb2ciLCJvIiwiYXR0ZW1wdCIsImRlbGF5Iiwic2V0VmFsdWUiLCJrZXkiLCJ2YWx1ZSIsInRpbWUiLCJoU2V0Iiwic2V0RXgiLCJzZXQiLCJnZXRWYWx1ZSIsImdldCIsImdldEhWYWx1ZSIsImhHZXRBbGwiLCJkZWxWYWx1ZSIsInJlcyIsImRlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/config/RedisConfig.js\n\n}");

/***/ }),

/***/ "./src/config/WebSocket.js":
/*!*********************************!*\
  !*** ./src/config/WebSocket.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ws__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ws */ \"ws\");\n/* harmony import */ var ws__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ws__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _common_Utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/common/Utils */ \"./src/common/Utils.js\");\n/* harmony import */ var _model_Comments__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/model/Comments */ \"./src/model/Comments.js\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index */ \"./src/config/index.js\");\n// import WebSocket from 'ws';\n\n\n\n\n//\nclass WebSocketServerClient {\n  constructor(config = {}) {\n    const defaultConfig = {\n      host: '0.0.0.0',\n      // 允许外部连接\n      port: _index__WEBPACK_IMPORTED_MODULE_3__[\"default\"].wsPort,\n      timeInterval: 5 * 1000,\n      isAuth: true\n    };\n    // 最终配置\n    const finalConfig = {\n      ...defaultConfig,\n      ...config\n    };\n    this.wss = {};\n    this.timeInterval = finalConfig.timeInterval;\n    this.isAuth = finalConfig.isAuth;\n    this.port = finalConfig.port;\n    this.options = config.options || {};\n  }\n\n  // 初始化webscoekt服务\n  init() {\n    this.wss = new ws__WEBPACK_IMPORTED_MODULE_0__.WebSocketServer({\n      port: this.port,\n      ...this.options\n    });\n\n    // 连接信息\n    this.wss.on('connection', ws => {\n      // 连接上之后随即发送一次心跳检测\n      ws.isAlive = true;\n      ws.send(JSON.stringify({\n        event: 'heartbeat',\n        message: 'ping'\n      }));\n      ws.on('message', msg => this.onMessage(ws, msg));\n      ws.on('close', () => this.onClose(ws));\n    });\n\n    // 心跳检测\n    this.heartbeat();\n  }\n  onMessage(ws, msg) {\n    // 用户鉴权 -> token -> _id\n    // 心跳检测\n    // 消息发送\n    const msgObj = JSON.parse(msg);\n    const events = {\n      auth: async () => {\n        try {\n          const obj = await (0,_common_Utils__WEBPACK_IMPORTED_MODULE_1__.getJWTPayload)(msgObj.message);\n          if (obj) {\n            ws.isAuth = true;\n            ws._id = obj._id;\n            const num = await _model_Comments__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getTotal(obj._id);\n            ws.send(JSON.stringify({\n              event: 'message',\n              message: num\n            }));\n          }\n        } catch (error) {\n          ws.send(JSON.stringify({\n            event: 'noauth',\n            message: 'please auth again'\n          }));\n        }\n      },\n      heartbeat: () => {\n        if (msgObj.message === 'pong') {\n          ws.isAlive = true;\n        }\n      },\n      message: () => {\n        // 鉴权拦截\n        // if (!ws.isAuth && this.isAuth) {\n        //   return\n        // }\n        // 消息广播\n        // this.wss.clients.forEach((client) => {\n        //   if (client.readyState === WebSocket.OPEN && client._id === ws._id) {\n        //     this.send(msg)\n        //   }\n        // })\n      }\n    };\n    events[msgObj.event]();\n  }\n\n  // 点对点的消息发送\n  send(uid, msg) {\n    this.wss.clients.forEach(client => {\n      if (client.readyState === ws__WEBPACK_IMPORTED_MODULE_0__.WebSocket.OPEN && client._id === uid) {\n        client.send(msg);\n      }\n    });\n  }\n\n  // 广播消息 -> 推送系统消息\n  broadcast(msg) {\n    this.wss.clients.forEach(client => {\n      if (client.readyState === ws__WEBPACK_IMPORTED_MODULE_0__.WebSocket.OPEN) {\n        client.send(msg);\n      }\n    });\n  }\n  onClose(ws) {}\n\n  // 心跳检测\n  heartbeat() {\n    clearInterval(this.interval);\n    this.interval = setInterval(() => {\n      this.wss.clients.forEach(ws => {\n        if (!ws.isAlive) {\n          return ws.terminate();\n        }\n        // 主动发送心跳检测请求\n        // 当客户端返回了消息之后，主动设置flag为在线\n        ws.isAlive = false;\n        ws.send(JSON.stringify({\n          event: 'heartbeat',\n          message: 'ping'\n        }));\n      });\n    }, this.timeInterval);\n  }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (WebSocketServerClient);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNDLFFBQVEsQ0FBQztJQUM1QixJQUFJLENBQUNBLFFBQVEsR0FBR0MsV0FBVyxDQUFDLE1BQU07TUFDOUIsSUFBSSxDQUFDakMsR0FBRyxDQUFDeUIsT0FBTyxDQUFDQyxPQUFPLENBQUN0QixFQUFFLElBQUk7UUFDM0IsSUFBSSxDQUFDQSxFQUFFLENBQUNDLE9BQU8sRUFBRTtVQUNiLE9BQU9ELEVBQUUsQ0FBQzhCLFNBQVMsQ0FBQyxDQUFDO1FBQ3pCO1FBQ0E7UUFDQTtRQUNBOUIsRUFBRSxDQUFDQyxPQUFPLEdBQUcsS0FBSztRQUNsQkQsRUFBRSxDQUFDRSxJQUFJLENBQ0hDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO1VBQ1hDLEtBQUssRUFBRSxXQUFXO1VBQ2xCQyxPQUFPLEVBQUU7UUFDYixDQUFDLENBQ0wsQ0FBQztNQUNMLENBQUMsQ0FBQztJQUNOLENBQUMsRUFBRSxJQUFJLENBQUNiLFlBQVksQ0FBQztFQUN6QjtBQUNKO0FBRUEsaUVBQWVQLHFCQUFxQiIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9jb25maWcvV2ViU29ja2V0LmpzP2NkOTMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IFdlYlNvY2tldCBmcm9tICd3cyc7XG5pbXBvcnQgeyBXZWJTb2NrZXQsIFdlYlNvY2tldFNlcnZlciB9IGZyb20gJ3dzJztcbmltcG9ydCB7IGdldEpXVFBheWxvYWQgfSBmcm9tICdAL2NvbW1vbi9VdGlscyc7XG5pbXBvcnQgQ29tbWVudHMgZnJvbSAnQC9tb2RlbC9Db21tZW50cyc7XG5pbXBvcnQgY29uZmlnZmlsZSBmcm9tICcuL2luZGV4Jztcbi8vXG5jbGFzcyBXZWJTb2NrZXRTZXJ2ZXJDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRDb25maWcgPSB7XG4gICAgICAgICAgICBob3N0OiAnMC4wLjAuMCcsIC8vIOWFgeiuuOWklumDqOi/nuaOpVxuICAgICAgICAgICAgcG9ydDogY29uZmlnZmlsZS53c1BvcnQsXG4gICAgICAgICAgICB0aW1lSW50ZXJ2YWw6IDUgKiAxMDAwLFxuICAgICAgICAgICAgaXNBdXRoOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICAvLyDmnIDnu4jphY3nva5cbiAgICAgICAgY29uc3QgZmluYWxDb25maWcgPSB7IC4uLmRlZmF1bHRDb25maWcsIC4uLmNvbmZpZyB9O1xuICAgICAgICB0aGlzLndzcyA9IHt9O1xuICAgICAgICB0aGlzLnRpbWVJbnRlcnZhbCA9IGZpbmFsQ29uZmlnLnRpbWVJbnRlcnZhbDtcbiAgICAgICAgdGhpcy5pc0F1dGggPSBmaW5hbENvbmZpZy5pc0F1dGg7XG4gICAgICAgIHRoaXMucG9ydCA9IGZpbmFsQ29uZmlnLnBvcnQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IGNvbmZpZy5vcHRpb25zIHx8IHt9O1xuICAgIH1cblxuICAgIC8vIOWIneWni+WMlndlYnNjb2VrdOacjeWKoVxuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMud3NzID0gbmV3IFdlYlNvY2tldFNlcnZlcih7IHBvcnQ6IHRoaXMucG9ydCwgLi4udGhpcy5vcHRpb25zIH0pO1xuXG4gICAgICAgIC8vIOi/nuaOpeS/oeaBr1xuICAgICAgICB0aGlzLndzcy5vbignY29ubmVjdGlvbicsIHdzID0+IHtcbiAgICAgICAgICAgIC8vIOi/nuaOpeS4iuS5i+WQjumaj+WNs+WPkemAgeS4gOasoeW/g+i3s+ajgOa1i1xuICAgICAgICAgICAgd3MuaXNBbGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB3cy5zZW5kKFxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdoZWFydGJlYXQnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAncGluZycsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB3cy5vbignbWVzc2FnZScsIG1zZyA9PiB0aGlzLm9uTWVzc2FnZSh3cywgbXNnKSk7XG4gICAgICAgICAgICB3cy5vbignY2xvc2UnLCAoKSA9PiB0aGlzLm9uQ2xvc2Uod3MpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5b+D6Lez5qOA5rWLXG4gICAgICAgIHRoaXMuaGVhcnRiZWF0KCk7XG4gICAgfVxuXG4gICAgb25NZXNzYWdlKHdzLCBtc2cpIHtcbiAgICAgICAgLy8g55So5oi36Ym05p2DIC0+IHRva2VuIC0+IF9pZFxuICAgICAgICAvLyDlv4Pot7Pmo4DmtYtcbiAgICAgICAgLy8g5raI5oGv5Y+R6YCBXG4gICAgICAgIGNvbnN0IG1zZ09iaiA9IEpTT04ucGFyc2UobXNnKTtcbiAgICAgICAgY29uc3QgZXZlbnRzID0ge1xuICAgICAgICAgICAgYXV0aDogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9iaiA9IGF3YWl0IGdldEpXVFBheWxvYWQobXNnT2JqLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cy5pc0F1dGggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3MuX2lkID0gb2JqLl9pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IGF3YWl0IENvbW1lbnRzLmdldFRvdGFsKG9iai5faWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3Muc2VuZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG51bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHdzLnNlbmQoXG4gICAgICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdub2F1dGgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdwbGVhc2UgYXV0aCBhZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoZWFydGJlYXQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobXNnT2JqLm1lc3NhZ2UgPT09ICdwb25nJykge1xuICAgICAgICAgICAgICAgICAgICB3cy5pc0FsaXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWVzc2FnZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIOmJtOadg+aLpuaIqlxuICAgICAgICAgICAgICAgIC8vIGlmICghd3MuaXNBdXRoICYmIHRoaXMuaXNBdXRoKSB7XG4gICAgICAgICAgICAgICAgLy8gICByZXR1cm5cbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgLy8g5raI5oGv5bm/5pKtXG4gICAgICAgICAgICAgICAgLy8gdGhpcy53c3MuY2xpZW50cy5mb3JFYWNoKChjbGllbnQpID0+IHtcbiAgICAgICAgICAgICAgICAvLyAgIGlmIChjbGllbnQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4gJiYgY2xpZW50Ll9pZCA9PT0gd3MuX2lkKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuc2VuZChtc2cpXG4gICAgICAgICAgICAgICAgLy8gICB9XG4gICAgICAgICAgICAgICAgLy8gfSlcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGV2ZW50c1ttc2dPYmouZXZlbnRdKCk7XG4gICAgfVxuXG4gICAgLy8g54K55a+554K555qE5raI5oGv5Y+R6YCBXG4gICAgc2VuZCh1aWQsIG1zZykge1xuICAgICAgICB0aGlzLndzcy5jbGllbnRzLmZvckVhY2goY2xpZW50ID0+IHtcbiAgICAgICAgICAgIGlmIChjbGllbnQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4gJiYgY2xpZW50Ll9pZCA9PT0gdWlkKSB7XG4gICAgICAgICAgICAgICAgY2xpZW50LnNlbmQobXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g5bm/5pKt5raI5oGvIC0+IOaOqOmAgeezu+e7n+a2iOaBr1xuICAgIGJyb2FkY2FzdChtc2cpIHtcbiAgICAgICAgdGhpcy53c3MuY2xpZW50cy5mb3JFYWNoKGNsaWVudCA9PiB7XG4gICAgICAgICAgICBpZiAoY2xpZW50LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICAgICAgICAgICAgY2xpZW50LnNlbmQobXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25DbG9zZSh3cykge31cblxuICAgIC8vIOW/g+i3s+ajgOa1i1xuICAgIGhlYXJ0YmVhdCgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMud3NzLmNsaWVudHMuZm9yRWFjaCh3cyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF3cy5pc0FsaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3cy50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8g5Li75Yqo5Y+R6YCB5b+D6Lez5qOA5rWL6K+35rGCXG4gICAgICAgICAgICAgICAgLy8g5b2T5a6i5oi356uv6L+U5Zue5LqG5raI5oGv5LmL5ZCO77yM5Li75Yqo6K6+572uZmxhZ+S4uuWcqOe6v1xuICAgICAgICAgICAgICAgIHdzLmlzQWxpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB3cy5zZW5kKFxuICAgICAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ2hlYXJ0YmVhdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAncGluZycsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCB0aGlzLnRpbWVJbnRlcnZhbCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBXZWJTb2NrZXRTZXJ2ZXJDbGllbnQ7XG4iXSwibmFtZXMiOlsiV2ViU29ja2V0IiwiV2ViU29ja2V0U2VydmVyIiwiZ2V0SldUUGF5bG9hZCIsIkNvbW1lbnRzIiwiY29uZmlnZmlsZSIsIldlYlNvY2tldFNlcnZlckNsaWVudCIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiZGVmYXVsdENvbmZpZyIsImhvc3QiLCJwb3J0Iiwid3NQb3J0IiwidGltZUludGVydmFsIiwiaXNBdXRoIiwiZmluYWxDb25maWciLCJ3c3MiLCJvcHRpb25zIiwiaW5pdCIsIm9uIiwid3MiLCJpc0FsaXZlIiwic2VuZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJldmVudCIsIm1lc3NhZ2UiLCJtc2ciLCJvbk1lc3NhZ2UiLCJvbkNsb3NlIiwiaGVhcnRiZWF0IiwibXNnT2JqIiwicGFyc2UiLCJldmVudHMiLCJhdXRoIiwib2JqIiwiX2lkIiwibnVtIiwiZ2V0VG90YWwiLCJlcnJvciIsInVpZCIsImNsaWVudHMiLCJmb3JFYWNoIiwiY2xpZW50IiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJicm9hZGNhc3QiLCJjbGVhckludGVydmFsIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsInRlcm1pbmF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/config/WebSocket.js\n\n}");

/***/ }),

/***/ "./src/config/index.js":
/*!*****************************!*\
  !*** ./src/config/index.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{var __dirname = \"src/config\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGO_USERNAME = process.env.DB_USER || 'koa';\nconst MONGO_PASSWORD = process.env.DB_PASS || '925926';\nconst MONGO_HOSTNAME = process.env.DB_HOST || '47.95.36.160';\nconst MONGO_PORT = process.env.DB_PORT || '27018';\nconst DB_NAME = process.env.DB_NAME || 'koa';\nconst DB_URL = `mongodb://${MONGO_USERNAME}:${MONGO_PASSWORD}@${MONGO_HOSTNAME}:${MONGO_PORT}/${DB_NAME}`;\n\n// console.log('DB_URL', DB_URL)\n\nconst REDIS = {\n  host: process.env.REDIS_HOST || '47.95.36.160',\n  port: process.env.REDIS_PORT || 6379,\n  password: process.env.REDIS_PASS || '925926'\n};\nconst JWT_SECRET = 'zzf';\nconst baseUrl =  false ? 0 : 'http://localhost:8080';\nconst uploadPath =  false ? 0 : path__WEBPACK_IMPORTED_MODULE_0___default().join(path__WEBPACK_IMPORTED_MODULE_0___default().resolve(__dirname), '../../public');\nconst adminEmail = ['285273676@qq.com'];\nconst publicPath = [/^\\/v1\\/public/, /^\\/v1\\/login/, /^\\/v1\\/content/, /^\\/v1\\/user/, /^\\/v1\\/comments/];\nconst isDevMode = \"development\" !== 'production';\nconst port = 3002;\nconst wsPort = 3003;\nconst AppID = 'wxc47d78881f2e620c';\nconst AppSecret = 'your-app-secret';\nconst SubIds = ['e1vWHQiTOW9_cP6l31RtO_SDc41hOfhcqhWFCb0cquk', '3icSr0YIBLcMSYXchHBTWgCiAAom4lrkJqZAf2pVc-4', '6q9Rrn0uekifZbdMuhfzmvexEnZh0Qcv2gfHUBsi1kk', 'xVA_zdzgM8zPtpDOO92rpK9kQumz4O84E7sTy9Ihfds', 'sG80CJj2GvArifGRCWOJhumIyY5mQnM94RWGQkdctGc'];\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n  DB_NAME,\n  MONGO_HOSTNAME,\n  DB_URL,\n  REDIS,\n  JWT_SECRET,\n  baseUrl,\n  uploadPath,\n  adminEmail,\n  publicPath,\n  isDevMode,\n  port,\n  wsPort,\n  AppID,\n  AppSecret,\n  SubIds\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29uZmlnL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0I7QUFFeEIsTUFBTUMsY0FBYyxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsT0FBTyxJQUFJLEtBQUs7QUFDbkQsTUFBTUMsY0FBYyxHQUFHSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csT0FBTyxJQUFJLFFBQVE7QUFDdEQsTUFBTUMsY0FBYyxHQUFHTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ssT0FBTyxJQUFJLGNBQWM7QUFDNUQsTUFBTUMsVUFBVSxHQUFHUCxPQUFPLENBQUNDLEdBQUcsQ0FBQ08sT0FBTyxJQUFJLE9BQU87QUFDakQsTUFBTUMsT0FBTyxHQUFHVCxPQUFPLENBQUNDLEdBQUcsQ0FBQ1EsT0FBTyxJQUFJLEtBQUs7QUFFNUMsTUFBTUMsTUFBTSxHQUFHLGFBQWFYLGNBQWMsSUFBSUksY0FBYyxJQUFJRSxjQUFjLElBQUlFLFVBQVUsSUFBSUUsT0FBTyxFQUFFOztBQUV6Rzs7QUFFQSxNQUFNRSxLQUFLLEdBQUc7RUFDVkMsSUFBSSxFQUFFWixPQUFPLENBQUNDLEdBQUcsQ0FBQ1ksVUFBVSxJQUFJLGNBQWM7RUFDOUNDLElBQUksRUFBRWQsT0FBTyxDQUFDQyxHQUFHLENBQUNjLFVBQVUsSUFBSSxJQUFJO0VBQ3BDQyxRQUFRLEVBQUVoQixPQUFPLENBQUNDLEdBQUcsQ0FBQ2dCLFVBQVUsSUFBSTtBQUN4QyxDQUFDO0FBRUQsTUFBTUMsVUFBVSxHQUFHLEtBQUs7QUFFeEIsTUFBTUMsT0FBTyxHQUFHbkIsTUFBcUMsR0FBRyxDQUF5QixHQUFHLHVCQUF1QjtBQUUzRyxNQUFNcUIsVUFBVSxHQUFHckIsTUFBcUMsR0FBRyxDQUFhLEdBQUdGLGdEQUFTLENBQUNBLG1EQUFZLENBQUMwQixTQUFTLENBQUMsRUFBRSxjQUFjLENBQUM7QUFFN0gsTUFBTUMsVUFBVSxHQUFHLENBQUMsa0JBQWtCLENBQUM7QUFFdkMsTUFBTUMsVUFBVSxHQUFHLENBQUMsZUFBZSxFQUFFLGNBQWMsRUFBRSxnQkFBZ0IsRUFBRSxhQUFhLEVBQUUsaUJBQWlCLENBQUM7QUFFeEcsTUFBTUMsU0FBUyxHQUFHM0IsYUFBb0IsS0FBSyxZQUFZO0FBRXZELE1BQU1jLElBQUksR0FBRyxJQUFJO0FBQ2pCLE1BQU1jLE1BQU0sR0FBRyxJQUFJO0FBRW5CLE1BQU1DLEtBQUssR0FBRyxvQkFBb0I7QUFDbEMsTUFBTUMsU0FBUyxHQUFHLGlCQUFpQjtBQUVuQyxNQUFNQyxNQUFNLEdBQUcsQ0FDWCw2Q0FBNkMsRUFDN0MsNkNBQTZDLEVBQzdDLDZDQUE2QyxFQUM3Qyw2Q0FBNkMsRUFDN0MsNkNBQTZDLENBQ2hEO0FBRUQsaUVBQWU7RUFDWHRCLE9BQU87RUFDUEosY0FBYztFQUNkSyxNQUFNO0VBQ05DLEtBQUs7RUFDTE8sVUFBVTtFQUNWQyxPQUFPO0VBQ1BFLFVBQVU7RUFDVkksVUFBVTtFQUNWQyxVQUFVO0VBQ1ZDLFNBQVM7RUFDVGIsSUFBSTtFQUNKYyxNQUFNO0VBQ05DLEtBQUs7RUFDTEMsU0FBUztFQUNUQztBQUNKLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvY29uZmlnL2luZGV4LmpzP2YxMjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmNvbnN0IE1PTkdPX1VTRVJOQU1FID0gcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAna29hJztcbmNvbnN0IE1PTkdPX1BBU1NXT1JEID0gcHJvY2Vzcy5lbnYuREJfUEFTUyB8fCAnOTI1OTI2JztcbmNvbnN0IE1PTkdPX0hPU1ROQU1FID0gcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCAnNDcuOTUuMzYuMTYwJztcbmNvbnN0IE1PTkdPX1BPUlQgPSBwcm9jZXNzLmVudi5EQl9QT1JUIHx8ICcyNzAxOCc7XG5jb25zdCBEQl9OQU1FID0gcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCAna29hJztcblxuY29uc3QgREJfVVJMID0gYG1vbmdvZGI6Ly8ke01PTkdPX1VTRVJOQU1FfToke01PTkdPX1BBU1NXT1JEfUAke01PTkdPX0hPU1ROQU1FfToke01PTkdPX1BPUlR9LyR7REJfTkFNRX1gO1xuXG4vLyBjb25zb2xlLmxvZygnREJfVVJMJywgREJfVVJMKVxuXG5jb25zdCBSRURJUyA9IHtcbiAgICBob3N0OiBwcm9jZXNzLmVudi5SRURJU19IT1NUIHx8ICc0Ny45NS4zNi4xNjAnLFxuICAgIHBvcnQ6IHByb2Nlc3MuZW52LlJFRElTX1BPUlQgfHwgNjM3OSxcbiAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuUkVESVNfUEFTUyB8fCAnOTI1OTI2Jyxcbn07XG5cbmNvbnN0IEpXVF9TRUNSRVQgPSAnenpmJztcblxuY29uc3QgYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnaHR0cHM6Ly90ZWNoLnp6Zi5uZXQuY24nIDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCc7XG5cbmNvbnN0IHVwbG9hZFBhdGggPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gJy9hcHAvcHVibGljJyA6IHBhdGguam9pbihwYXRoLnJlc29sdmUoX19kaXJuYW1lKSwgJy4uLy4uL3B1YmxpYycpO1xuXG5jb25zdCBhZG1pbkVtYWlsID0gWycyODUyNzM2NzZAcXEuY29tJ107XG5cbmNvbnN0IHB1YmxpY1BhdGggPSBbL15cXC92MVxcL3B1YmxpYy8sIC9eXFwvdjFcXC9sb2dpbi8sIC9eXFwvdjFcXC9jb250ZW50LywgL15cXC92MVxcL3VzZXIvLCAvXlxcL3YxXFwvY29tbWVudHMvXTtcblxuY29uc3QgaXNEZXZNb2RlID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJztcblxuY29uc3QgcG9ydCA9IDMwMDI7XG5jb25zdCB3c1BvcnQgPSAzMDAzO1xuXG5jb25zdCBBcHBJRCA9ICd3eGM0N2Q3ODg4MWYyZTYyMGMnO1xuY29uc3QgQXBwU2VjcmV0ID0gJ3lvdXItYXBwLXNlY3JldCc7XG5cbmNvbnN0IFN1YklkcyA9IFtcbiAgICAnZTF2V0hRaVRPVzlfY1A2bDMxUnRPX1NEYzQxaE9maGNxaFdGQ2IwY3F1aycsXG4gICAgJzNpY1NyMFlJQkxjTVNZWGNoSEJUV2dDaUFBb200bHJrSnFaQWYycFZjLTQnLFxuICAgICc2cTlScm4wdWVraWZaYmRNdWhmem12ZXhFblpoMFFjdjJnZkhVQnNpMWtrJyxcbiAgICAneFZBX3pkemdNOHpQdHBET085MnJwSzlrUXVtejRPODRFN3NUeTlJaGZkcycsXG4gICAgJ3NHODBDSmoyR3ZBcmlmR1JDV09KaHVtSXlZNW1Rbk05NFJXR1FrZGN0R2MnLFxuXTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIERCX05BTUUsXG4gICAgTU9OR09fSE9TVE5BTUUsXG4gICAgREJfVVJMLFxuICAgIFJFRElTLFxuICAgIEpXVF9TRUNSRVQsXG4gICAgYmFzZVVybCxcbiAgICB1cGxvYWRQYXRoLFxuICAgIGFkbWluRW1haWwsXG4gICAgcHVibGljUGF0aCxcbiAgICBpc0Rldk1vZGUsXG4gICAgcG9ydCxcbiAgICB3c1BvcnQsXG4gICAgQXBwSUQsXG4gICAgQXBwU2VjcmV0LFxuICAgIFN1Yklkcyxcbn07XG4iXSwibmFtZXMiOlsicGF0aCIsIk1PTkdPX1VTRVJOQU1FIiwicHJvY2VzcyIsImVudiIsIkRCX1VTRVIiLCJNT05HT19QQVNTV09SRCIsIkRCX1BBU1MiLCJNT05HT19IT1NUTkFNRSIsIkRCX0hPU1QiLCJNT05HT19QT1JUIiwiREJfUE9SVCIsIkRCX05BTUUiLCJEQl9VUkwiLCJSRURJUyIsImhvc3QiLCJSRURJU19IT1NUIiwicG9ydCIsIlJFRElTX1BPUlQiLCJwYXNzd29yZCIsIlJFRElTX1BBU1MiLCJKV1RfU0VDUkVUIiwiYmFzZVVybCIsIk5PREVfRU5WIiwidXBsb2FkUGF0aCIsImpvaW4iLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiYWRtaW5FbWFpbCIsInB1YmxpY1BhdGgiLCJpc0Rldk1vZGUiLCJ3c1BvcnQiLCJBcHBJRCIsIkFwcFNlY3JldCIsIlN1YklkcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/config/index.js\n\n}");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{var __dirname = \"src\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _config_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config/index */ \"./src/config/index.js\");\n/* harmony import */ var _common_ErrorHandle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common/ErrorHandle */ \"./src/common/ErrorHandle.js\");\n/* harmony import */ var _config_WebSocket__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config/WebSocket */ \"./src/config/WebSocket.js\");\n/* harmony import */ var _common_Auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/common/Auth */ \"./src/common/Auth.js\");\n/* harmony import */ var _common_Init__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./common/Init */ \"./src/common/Init.js\");\n/* harmony import */ var _config_Log4j__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/config/Log4j */ \"./src/config/Log4j.js\");\n/* harmony import */ var _common_Logger__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/common/Logger */ \"./src/common/Logger.js\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! md5 */ \"md5\");\n/* harmony import */ var md5__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(md5__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _model_User__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./model/User */ \"./src/model/User.js\");\n/* harmony import */ var _config_RedisConfig__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./config/RedisConfig */ \"./src/config/RedisConfig.js\");\n// 手动补全 Web Streams API\n__webpack_require__.g.ReadableStream = (__webpack_require__(/*! stream/web */ \"stream/web\").ReadableStream);\n__webpack_require__.g.WritableStream = (__webpack_require__(/*! stream/web */ \"stream/web\").WritableStream);\n__webpack_require__.g.TransformStream = (__webpack_require__(/*! stream/web */ \"stream/web\").TransformStream);\n__webpack_require__.g.Blob = (__webpack_require__(/*! buffer */ \"buffer\").Blob);\n__webpack_require__.g.File = (__webpack_require__(/*! buffer */ \"buffer\").File);\nconst Koa = __webpack_require__(/*! koa */ \"koa\");\nconst koaJWT = __webpack_require__(/*! koa-jwt */ \"koa-jwt\");\nconst app = new Koa();\nconst path = __webpack_require__(/*! path */ \"path\");\nconst Router = __webpack_require__(/*! koa-router */ \"koa-router\");\n// const router = new Router();\nconst router = __webpack_require__(/*! ./routes/index */ \"./src/routes/index.js\");\nconst cors = __webpack_require__(/*! @koa/cors */ \"@koa/cors\");\nconst {\n  koaBody\n} = __webpack_require__(/*! koa-body */ \"koa-body\");\nconst json = __webpack_require__(/*! koa-json */ \"koa-json\");\nconst helmet = __webpack_require__(/*! koa-helmet */ \"koa-helmet\");\nconst statics = __webpack_require__(/*! koa-static */ \"koa-static\");\nconst compose = __webpack_require__(/*! koa-compose */ \"koa-compose\");\nconst compress = __webpack_require__(/*! koa-compress */ \"koa-compress\");\n\n\n\n\n\n\n\n\nconst ws = new _config_WebSocket__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\nws.init();\n__webpack_require__.g.ws = ws;\n\ndotenv__WEBPACK_IMPORTED_MODULE_8___default().config();\n\n\n\n// setValue('express', '5.0.0');\n// const val = await getValue('express');\n// console.log(val);\n\nasync function testRedis() {\n  // await setValue('imoocObj12', { name: 'node', age: 18 });\n  // const val = await getHValue('imoocObj');\n  // console.log(val);\n  await (0,_config_RedisConfig__WEBPACK_IMPORTED_MODULE_10__.delValue)('name1');\n}\n\n// const mongoose = require('mongoose');\n\n// main()\n//     .then(() => {\n//         console.log('✅ MongoDB connected');\n//     })\n//     .catch(err => console.log(err));\n// async function main() {\n//     await mongoose.connect('mongodb://koa:925926@47.95.36.160:27018/koa');\n// }\n\n// const UserSchema = new mongoose.Schema({\n//     name: String,\n//     age: Number\n// });\n\n// const User = mongoose.model('users', UserSchema);\n\nasync function test() {\n  // let u = await User.findOne({ name: 'Node' });\n  // 创建\n  // const u = new User({ name: '李四', age: 28 });\n  // await u.save();\n\n  // 更新一个\n  // await User.updateOne({ name: '李四' }, { age: 26 });\n  // 通过ID更新\n  // await User.findByIdAndUpdate('68f5cf8223e1c36ef8c7d8f2', { name: '王五' });\n\n  // 删除一个\n  // await User.deleteOne({ name: 'Node' });\n\n  // 查询所有\n  const users = await _model_User__WEBPACK_IMPORTED_MODULE_9__[\"default\"].find();\n  console.log(users);\n}\n\n// test();\n\nconst isDevMode =  false ? 0 : true;\n\n// router.prefix('/api');\n\n// router.get('/', async (ctx, next) => {\n//     ctx.body = 'Hello World';\n// });\n\n// router.get('/msg', async (ctx, next) => {\n//     let params = ctx.request.query;\n//     console.log(params);\n//     ctx.body = `\n//     {\n//         code: 0,\n//         data: ${JSON.stringify(params)},\n//         message: '请求成功'\n//     }\n//     `;\n// });\n\n// router.post('/post', async (ctx, next) => {\n//     let { body } = ctx.request;\n//     console.log(ctx.request);\n\n//     ctx.body = `{\n//         code: 0,\n//         data: ${JSON.stringify(body)},\n//         message: '请求成功'\n//     }`;\n// });\n\n// 定义公共路径，不需要jwt鉴权\nconst jwt = koaJWT({\n  secret: md5__WEBPACK_IMPORTED_MODULE_7___default()(process.env.JWT_SECRET)\n}).unless({\n  path: [/^\\/v1\\/public/, /^\\/v1\\/login/]\n});\n\n/**\n * 使用koa-compose 集成中间件\n */\nconst middleware = compose([_common_Logger__WEBPACK_IMPORTED_MODULE_6__[\"default\"], koaBody({\n  multipart: true,\n  formidable: {\n    keepExtensions: true,\n    maxFieldsSize: 5 * 1024 * 1024\n  },\n  onError: err => {\n    console.log('koabody TCL: err', err);\n  }\n}), cors(), json({\n  pretty: false,\n  param: 'pretty'\n}), helmet(), statics(path.join(__dirname, '../public')),\n// 用来展示静态资源\n_common_ErrorHandle__WEBPACK_IMPORTED_MODULE_1__[\"default\"], jwt, _common_Auth__WEBPACK_IMPORTED_MODULE_3__[\"default\"], _config_index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isDevMode ? _config_Log4j__WEBPACK_IMPORTED_MODULE_5__[\"default\"].koaLogger(_config_Log4j__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getLogger('http'), {\n  level: 'auto'\n}) : _config_Log4j__WEBPACK_IMPORTED_MODULE_5__[\"default\"].koaLogger(_config_Log4j__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getLogger('access'), {\n  level: 'auto'\n})]);\nif (!isDevMode) {\n  app.use(compress());\n}\napp.use(middleware);\n\n// app.use(router.routes()).use(router.allowedMethods());\n\napp.use(router());\napp.listen(3002, () => {\n  const logger = _config_Log4j__WEBPACK_IMPORTED_MODULE_5__[\"default\"].getLogger('out');\n  logger.info('app is runing at ' + _config_index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].port);\n  (0,_common_Init__WEBPACK_IMPORTED_MODULE_4__.run)();\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDO0FBRWpCSCxHQUFHLENBQUN3RCxNQUFNLENBQUMsSUFBSSxFQUFFLE1BQU07RUFDbkIsTUFBTUMsTUFBTSxHQUFHekMscURBQU0sQ0FBQ3FDLFNBQVMsQ0FBQyxLQUFLLENBQUM7RUFDdENJLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLG1CQUFtQixHQUFHL0MscURBQU0sQ0FBQ2dELElBQUksQ0FBQztFQUM5QzVDLGlEQUFHLENBQUMsQ0FBQztBQUNULENBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9pbmRleC5qcz9iNjM1Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIOaJi+WKqOihpeWFqCBXZWIgU3RyZWFtcyBBUElcbmdsb2JhbC5SZWFkYWJsZVN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbS93ZWInKS5SZWFkYWJsZVN0cmVhbTtcbmdsb2JhbC5Xcml0YWJsZVN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbS93ZWInKS5Xcml0YWJsZVN0cmVhbTtcbmdsb2JhbC5UcmFuc2Zvcm1TdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0vd2ViJykuVHJhbnNmb3JtU3RyZWFtO1xuZ2xvYmFsLkJsb2IgPSByZXF1aXJlKCdidWZmZXInKS5CbG9iO1xuZ2xvYmFsLkZpbGUgPSByZXF1aXJlKCdidWZmZXInKS5GaWxlO1xuXG5jb25zdCBLb2EgPSByZXF1aXJlKCdrb2EnKTtcbmNvbnN0IGtvYUpXVCA9IHJlcXVpcmUoJ2tvYS1qd3QnKTtcbmNvbnN0IGFwcCA9IG5ldyBLb2EoKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5jb25zdCBSb3V0ZXIgPSByZXF1aXJlKCdrb2Etcm91dGVyJyk7XG4vLyBjb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKCk7XG5jb25zdCByb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcy9pbmRleCcpO1xuY29uc3QgY29ycyA9IHJlcXVpcmUoJ0Brb2EvY29ycycpO1xuY29uc3QgeyBrb2FCb2R5IH0gPSByZXF1aXJlKCdrb2EtYm9keScpO1xuY29uc3QganNvbiA9IHJlcXVpcmUoJ2tvYS1qc29uJyk7XG5jb25zdCBoZWxtZXQgPSByZXF1aXJlKCdrb2EtaGVsbWV0Jyk7XG5jb25zdCBzdGF0aWNzID0gcmVxdWlyZSgna29hLXN0YXRpYycpO1xuY29uc3QgY29tcG9zZSA9IHJlcXVpcmUoJ2tvYS1jb21wb3NlJyk7XG5jb25zdCBjb21wcmVzcyA9IHJlcXVpcmUoJ2tvYS1jb21wcmVzcycpO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZy9pbmRleCc7XG5pbXBvcnQgZXJyb3JIYW5kbGUgZnJvbSAnLi9jb21tb24vRXJyb3JIYW5kbGUnO1xuaW1wb3J0IFdlYlNvY2tldFNlcnZlckNsaWVudCBmcm9tICcuL2NvbmZpZy9XZWJTb2NrZXQnO1xuaW1wb3J0IGF1dGggZnJvbSAnQC9jb21tb24vQXV0aCc7XG5pbXBvcnQgeyBydW4gfSBmcm9tICcuL2NvbW1vbi9Jbml0JztcbmltcG9ydCBsb2c0anMgZnJvbSAnQC9jb25maWcvTG9nNGonO1xuaW1wb3J0IG1vbml0b3JMb2dnZXIgZnJvbSAnQC9jb21tb24vTG9nZ2VyJztcbmltcG9ydCBtZDUgZnJvbSAnbWQ1JztcblxuY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0U2VydmVyQ2xpZW50KCk7XG53cy5pbml0KCk7XG5nbG9iYWwud3MgPSB3cztcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmRvdGVudi5jb25maWcoKTtcblxuaW1wb3J0IFVzZXIgZnJvbSAnLi9tb2RlbC9Vc2VyJztcbmltcG9ydCB7IHNldFZhbHVlLCBnZXRWYWx1ZSwgZGVsVmFsdWUsIGdldEhWYWx1ZSB9IGZyb20gJy4vY29uZmlnL1JlZGlzQ29uZmlnJztcblxuLy8gc2V0VmFsdWUoJ2V4cHJlc3MnLCAnNS4wLjAnKTtcbi8vIGNvbnN0IHZhbCA9IGF3YWl0IGdldFZhbHVlKCdleHByZXNzJyk7XG4vLyBjb25zb2xlLmxvZyh2YWwpO1xuXG5hc3luYyBmdW5jdGlvbiB0ZXN0UmVkaXMoKSB7XG4gICAgLy8gYXdhaXQgc2V0VmFsdWUoJ2ltb29jT2JqMTInLCB7IG5hbWU6ICdub2RlJywgYWdlOiAxOCB9KTtcbiAgICAvLyBjb25zdCB2YWwgPSBhd2FpdCBnZXRIVmFsdWUoJ2ltb29jT2JqJyk7XG4gICAgLy8gY29uc29sZS5sb2codmFsKTtcbiAgICBhd2FpdCBkZWxWYWx1ZSgnbmFtZTEnKTtcbn1cblxuLy8gY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuXG4vLyBtYWluKClcbi8vICAgICAudGhlbigoKSA9PiB7XG4vLyAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgTW9uZ29EQiBjb25uZWN0ZWQnKTtcbi8vICAgICB9KVxuLy8gICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG4vLyBhc3luYyBmdW5jdGlvbiBtYWluKCkge1xuLy8gICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QoJ21vbmdvZGI6Ly9rb2E6OTI1OTI2QDQ3Ljk1LjM2LjE2MDoyNzAxOC9rb2EnKTtcbi8vIH1cblxuLy8gY29uc3QgVXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuLy8gICAgIG5hbWU6IFN0cmluZyxcbi8vICAgICBhZ2U6IE51bWJlclxuLy8gfSk7XG5cbi8vIGNvbnN0IFVzZXIgPSBtb25nb29zZS5tb2RlbCgndXNlcnMnLCBVc2VyU2NoZW1hKTtcblxuYXN5bmMgZnVuY3Rpb24gdGVzdCgpIHtcbiAgICAvLyBsZXQgdSA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IG5hbWU6ICdOb2RlJyB9KTtcbiAgICAvLyDliJvlu7pcbiAgICAvLyBjb25zdCB1ID0gbmV3IFVzZXIoeyBuYW1lOiAn5p2O5ZubJywgYWdlOiAyOCB9KTtcbiAgICAvLyBhd2FpdCB1LnNhdmUoKTtcblxuICAgIC8vIOabtOaWsOS4gOS4qlxuICAgIC8vIGF3YWl0IFVzZXIudXBkYXRlT25lKHsgbmFtZTogJ+adjuWbmycgfSwgeyBhZ2U6IDI2IH0pO1xuICAgIC8vIOmAmui/h0lE5pu05pawXG4gICAgLy8gYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZSgnNjhmNWNmODIyM2UxYzM2ZWY4YzdkOGYyJywgeyBuYW1lOiAn546L5LqUJyB9KTtcblxuICAgIC8vIOWIoOmZpOS4gOS4qlxuICAgIC8vIGF3YWl0IFVzZXIuZGVsZXRlT25lKHsgbmFtZTogJ05vZGUnIH0pO1xuXG4gICAgLy8g5p+l6K+i5omA5pyJXG4gICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoKTtcbiAgICBjb25zb2xlLmxvZyh1c2Vycyk7XG59XG5cbi8vIHRlc3QoKTtcblxuY29uc3QgaXNEZXZNb2RlID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/IGZhbHNlIDogdHJ1ZTtcblxuLy8gcm91dGVyLnByZWZpeCgnL2FwaScpO1xuXG4vLyByb3V0ZXIuZ2V0KCcvJywgYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuLy8gICAgIGN0eC5ib2R5ID0gJ0hlbGxvIFdvcmxkJztcbi8vIH0pO1xuXG4vLyByb3V0ZXIuZ2V0KCcvbXNnJywgYXN5bmMgKGN0eCwgbmV4dCkgPT4ge1xuLy8gICAgIGxldCBwYXJhbXMgPSBjdHgucmVxdWVzdC5xdWVyeTtcbi8vICAgICBjb25zb2xlLmxvZyhwYXJhbXMpO1xuLy8gICAgIGN0eC5ib2R5ID0gYFxuLy8gICAgIHtcbi8vICAgICAgICAgY29kZTogMCxcbi8vICAgICAgICAgZGF0YTogJHtKU09OLnN0cmluZ2lmeShwYXJhbXMpfSxcbi8vICAgICAgICAgbWVzc2FnZTogJ+ivt+axguaIkOWKnydcbi8vICAgICB9XG4vLyAgICAgYDtcbi8vIH0pO1xuXG4vLyByb3V0ZXIucG9zdCgnL3Bvc3QnLCBhc3luYyAoY3R4LCBuZXh0KSA9PiB7XG4vLyAgICAgbGV0IHsgYm9keSB9ID0gY3R4LnJlcXVlc3Q7XG4vLyAgICAgY29uc29sZS5sb2coY3R4LnJlcXVlc3QpO1xuXG4vLyAgICAgY3R4LmJvZHkgPSBge1xuLy8gICAgICAgICBjb2RlOiAwLFxuLy8gICAgICAgICBkYXRhOiAke0pTT04uc3RyaW5naWZ5KGJvZHkpfSxcbi8vICAgICAgICAgbWVzc2FnZTogJ+ivt+axguaIkOWKnydcbi8vICAgICB9YDtcbi8vIH0pO1xuXG4vLyDlrprkuYnlhazlhbHot6/lvoTvvIzkuI3pnIDopoFqd3TpibTmnYNcbmNvbnN0IGp3dCA9IGtvYUpXVCh7IHNlY3JldDogbWQ1KHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpIH0pLnVubGVzcyh7XG4gICAgcGF0aDogWy9eXFwvdjFcXC9wdWJsaWMvLCAvXlxcL3YxXFwvbG9naW4vXSxcbn0pO1xuXG4vKipcbiAqIOS9v+eUqGtvYS1jb21wb3NlIOmbhuaIkOS4remXtOS7tlxuICovXG5jb25zdCBtaWRkbGV3YXJlID0gY29tcG9zZShbXG4gICAgbW9uaXRvckxvZ2dlcixcbiAgICBrb2FCb2R5KHtcbiAgICAgICAgbXVsdGlwYXJ0OiB0cnVlLFxuICAgICAgICBmb3JtaWRhYmxlOiB7XG4gICAgICAgICAgICBrZWVwRXh0ZW5zaW9uczogdHJ1ZSxcbiAgICAgICAgICAgIG1heEZpZWxkc1NpemU6IDUgKiAxMDI0ICogMTAyNCxcbiAgICAgICAgfSxcbiAgICAgICAgb25FcnJvcjogZXJyID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdrb2Fib2R5IFRDTDogZXJyJywgZXJyKTtcbiAgICAgICAgfSxcbiAgICB9KSxcbiAgICBjb3JzKCksXG4gICAganNvbih7IHByZXR0eTogZmFsc2UsIHBhcmFtOiAncHJldHR5JyB9KSxcbiAgICBoZWxtZXQoKSxcbiAgICBzdGF0aWNzKHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi9wdWJsaWMnKSksIC8vIOeUqOadpeWxleekuumdmeaAgei1hOa6kFxuICAgIGVycm9ySGFuZGxlLFxuICAgIGp3dCxcbiAgICBhdXRoLFxuICAgIGNvbmZpZy5pc0Rldk1vZGVcbiAgICAgICAgPyBsb2c0anMua29hTG9nZ2VyKGxvZzRqcy5nZXRMb2dnZXIoJ2h0dHAnKSwge1xuICAgICAgICAgICAgICBsZXZlbDogJ2F1dG8nLFxuICAgICAgICAgIH0pXG4gICAgICAgIDogbG9nNGpzLmtvYUxvZ2dlcihsb2c0anMuZ2V0TG9nZ2VyKCdhY2Nlc3MnKSwge1xuICAgICAgICAgICAgICBsZXZlbDogJ2F1dG8nLFxuICAgICAgICAgIH0pLFxuXSk7XG5cbmlmICghaXNEZXZNb2RlKSB7XG4gICAgYXBwLnVzZShjb21wcmVzcygpKTtcbn1cblxuYXBwLnVzZShtaWRkbGV3YXJlKTtcblxuLy8gYXBwLnVzZShyb3V0ZXIucm91dGVzKCkpLnVzZShyb3V0ZXIuYWxsb3dlZE1ldGhvZHMoKSk7XG5cbmFwcC51c2Uocm91dGVyKCkpO1xuXG5hcHAubGlzdGVuKDMwMDIsICgpID0+IHtcbiAgICBjb25zdCBsb2dnZXIgPSBsb2c0anMuZ2V0TG9nZ2VyKCdvdXQnKTtcbiAgICBsb2dnZXIuaW5mbygnYXBwIGlzIHJ1bmluZyBhdCAnICsgY29uZmlnLnBvcnQpO1xuICAgIHJ1bigpO1xufSk7XG4iXSwibmFtZXMiOlsiZ2xvYmFsIiwiUmVhZGFibGVTdHJlYW0iLCJyZXF1aXJlIiwiV3JpdGFibGVTdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJCbG9iIiwiRmlsZSIsIktvYSIsImtvYUpXVCIsImFwcCIsInBhdGgiLCJSb3V0ZXIiLCJyb3V0ZXIiLCJjb3JzIiwia29hQm9keSIsImpzb24iLCJoZWxtZXQiLCJzdGF0aWNzIiwiY29tcG9zZSIsImNvbXByZXNzIiwiY29uZmlnIiwiZXJyb3JIYW5kbGUiLCJXZWJTb2NrZXRTZXJ2ZXJDbGllbnQiLCJhdXRoIiwicnVuIiwibG9nNGpzIiwibW9uaXRvckxvZ2dlciIsIm1kNSIsIndzIiwiaW5pdCIsImRvdGVudiIsIlVzZXIiLCJzZXRWYWx1ZSIsImdldFZhbHVlIiwiZGVsVmFsdWUiLCJnZXRIVmFsdWUiLCJ0ZXN0UmVkaXMiLCJ0ZXN0IiwidXNlcnMiLCJmaW5kIiwiY29uc29sZSIsImxvZyIsImlzRGV2TW9kZSIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImp3dCIsInNlY3JldCIsIkpXVF9TRUNSRVQiLCJ1bmxlc3MiLCJtaWRkbGV3YXJlIiwibXVsdGlwYXJ0IiwiZm9ybWlkYWJsZSIsImtlZXBFeHRlbnNpb25zIiwibWF4RmllbGRzU2l6ZSIsIm9uRXJyb3IiLCJlcnIiLCJwcmV0dHkiLCJwYXJhbSIsImpvaW4iLCJfX2Rpcm5hbWUiLCJrb2FMb2dnZXIiLCJnZXRMb2dnZXIiLCJsZXZlbCIsInVzZSIsImxpc3RlbiIsImxvZ2dlciIsImluZm8iLCJwb3J0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.js\n\n}");

/***/ }),

/***/ "./src/model/Comments.js":
/*!*******************************!*\
  !*** ./src/model/Comments.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/DBHelpler */ \"./src/config/DBHelpler.js\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _CommentsHands__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./CommentsHands */ \"./src/model/CommentsHands.js\");\n\n\n\nconst CommentsSchema = new _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema({\n  tid: {\n    type: String,\n    ref: 'post'\n  },\n  uid: {\n    type: String,\n    ref: 'users'\n  },\n  // 文章作者ID\n  cuid: {\n    type: String,\n    ref: 'users'\n  },\n  // 评论用户的ID\n  content: {\n    type: String\n  },\n  hands: {\n    type: Number,\n    default: 0\n  },\n  status: {\n    type: String,\n    default: '1'\n  },\n  isRead: {\n    type: String,\n    default: '0'\n  },\n  isBest: {\n    type: String,\n    default: '0'\n  }\n}, {\n  toJSON: {\n    virtuals: true\n  },\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nCommentsSchema.post('save', function (error, doc, next) {\n  if (error.name === 'MongoError' && error.code === 11000) {\n    next(new Error('There was a duplicate key error'));\n  } else {\n    next(error);\n  }\n});\nCommentsSchema.statics = {\n  findByTid: function (id) {\n    return this.find({\n      tid: id\n    });\n  },\n  findByCid: function (id) {\n    return this.findOne({\n      _id: id\n    });\n  },\n  getCommentsList: function (id, page, limit) {\n    return this.find({\n      tid: id\n    }).populate({\n      path: 'cuid',\n      select: '_id name pic isVip',\n      match: {\n        status: {\n          $eq: '0'\n        }\n      }\n    }).populate({\n      path: 'tid',\n      select: '_id title status'\n    }).skip(page * limit).limit(limit);\n  },\n  queryCount: function (id) {\n    return this.find({\n      tid: id\n    }).countDocuments();\n  },\n  getCommetsPublic: function (id, page, limit) {\n    return this.find({\n      cuid: id\n    }).populate({\n      path: 'tid',\n      select: '_id title'\n    }).skip(page * limit).limit(limit).sort({\n      created: -1\n    });\n  },\n  getMsgList: function (id, page, limit) {\n    return this.find({\n      uid: id,\n      cuid: {\n        $ne: id\n      },\n      isRead: {\n        $eq: '0'\n      },\n      // 未读状态\n      status: {\n        $eq: '1'\n      } // 是否显示\n    }).populate({\n      path: 'tid',\n      select: '_id title content'\n    }).populate({\n      path: 'uid',\n      select: '_id name'\n    }).populate({\n      path: 'cuid',\n      select: '_id name'\n    }).skip(limit * page).limit(limit).sort({\n      created: -1\n    });\n  },\n  getTotal: function (id) {\n    return this.find({\n      uid: id,\n      isRead: '0',\n      status: '1'\n    }).countDocuments();\n  },\n  getCommentsOptions: function (options, page, limit) {\n    let query = {};\n    if (typeof options.search !== 'undefined') {\n      if (typeof options.search === 'string' && options.search.trim() !== '') {\n        // radio\n        query[options.item] = options.search;\n      }\n\n      /**\n      * 创建视图：\n      * db.createView('comments_users', 'comments', [\n      { '$lookup': {\n        from: 'posts', let: { pid: { '$toObjectId': '$tid' } },\n        pipeline: [ { '$match': { '$expr': { '$eq': [ '$_id', '$$pid' ] } } },\n        { '$project': { _id: 1, uid: 1, title: 1 } } ], as: 'tid' } },\n        { '$replaceRoot': { newRoot: { '$mergeObjects': [ { '$arrayElemAt': [ '$tid', 0 ] }, '$$ROOT' ] } } },\n        { '$unwind': '$tid' },\n        { '$addFields': { userId: { '$toObjectId': '$uid' } } },\n        { '$lookup': {\n            from: 'users', localField: 'userId', foreignField: '_id', as: 'uid' } },\n        { '$unwind': '$uid' }, { '$addFields': { fuserId: { '$toObjectId': '$cuid' } } },\n        { '$lookup': { from: 'users', localField: 'fuserId', foreignField: '_id', as: 'cuid' } },\n        { '$unwind': '$cuid' },\n      { '$project': { tid: 1, cuid: { name: 1, _id: 1 }, uid: { name: 1, _id: 1 }, isBest: 1, status: 1, content: 1, created: 1 } },\n      { '$sort': { created: -1 } }],\n      {})\n      */\n      if (['uid', 'tid', 'cuid'].includes(options.item)) {\n        let arr = [{\n          $lookup: {\n            from: 'posts',\n            let: {\n              pid: {\n                $toObjectId: '$tid'\n              }\n            },\n            pipeline: [{\n              $match: {\n                $expr: {\n                  $eq: ['$_id', '$$pid']\n                }\n              }\n            }, {\n              $project: {\n                _id: 1,\n                uid: 1,\n                title: 1\n              }\n            }],\n            as: 'tid'\n          }\n        }, {\n          $replaceRoot: {\n            newRoot: {\n              $mergeObjects: [{\n                $arrayElemAt: ['$tid', 0]\n              }, '$$ROOT']\n            }\n          }\n        }, {\n          $unwind: '$tid'\n        }];\n        if (options.item === 'tid') {\n          arr.push({\n            $match: {\n              title: {\n                $regex: options.search,\n                $options: 'i'\n              }\n            }\n          });\n        }\n        arr = arr.concat([{\n          $addFields: {\n            userId: {\n              $toObjectId: '$uid'\n            }\n          }\n        }, {\n          $lookup: {\n            from: 'users',\n            localField: 'userId',\n            foreignField: '_id',\n            as: 'uid'\n          }\n        }]);\n        if (options.item === 'uid' && options.search.trim() !== '') {\n          arr.push({\n            $match: {\n              'uid.name': {\n                $regex: options.search,\n                $options: 'i'\n              }\n            }\n          });\n        }\n        arr.push({\n          $unwind: '$uid'\n        });\n        arr = arr.concat([{\n          $addFields: {\n            fuserId: {\n              $toObjectId: '$cuid'\n            }\n          }\n        }, {\n          $lookup: {\n            from: 'users',\n            localField: 'fuserId',\n            foreignField: '_id',\n            as: 'cuid'\n          }\n        }]);\n        if (options.item === 'cuid' && options.search.trim() !== '') {\n          arr.push({\n            $match: {\n              'cuid.name': {\n                $regex: options.search,\n                $options: 'i'\n              }\n            }\n          });\n        }\n        arr = arr.concat([{\n          $unwind: '$cuid'\n        }, {\n          $project: {\n            tid: 1,\n            cuid: {\n              name: 1,\n              _id: 1\n            },\n            uid: {\n              name: 1,\n              _id: 1\n            },\n            isBest: 1,\n            status: 1,\n            content: 1,\n            created: 1\n          }\n        }, {\n          $skip: limit * page\n        }, {\n          $limit: limit\n        }, {\n          $sort: {\n            created: -1\n          }\n        }]);\n        return this.aggregate(arr);\n      }\n      if (options.item === 'created') {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = {\n          created: {\n            $gte: new Date(start),\n            $lt: new Date(end)\n          }\n        };\n      }\n      return this.find(query).populate({\n        path: 'tid',\n        select: '_id title'\n      }).populate({\n        path: 'cuid',\n        select: '_id name'\n      }).populate({\n        path: 'uid',\n        select: '_id name'\n      }).skip(page * limit).limit(limit).sort({\n        created: -1\n      });\n    }\n  },\n  getCommentsOptionsCount: function (options) {\n    let query = {};\n    if (typeof options.search !== 'undefined') {\n      if (typeof options.search === 'string' && options.search.trim() !== '') {\n        // radio\n        query[options.item] = options.search;\n      }\n      if (['uid', 'tid', 'cuid'].includes(options.item)) {\n        let arr = [{\n          $lookup: {\n            from: 'posts',\n            let: {\n              pid: {\n                $toObjectId: '$tid'\n              }\n            },\n            pipeline: [{\n              $match: {\n                $expr: {\n                  $eq: ['$_id', '$$pid']\n                }\n              }\n            }, {\n              $project: {\n                _id: 1,\n                uid: 1,\n                title: 1\n              }\n            }],\n            as: 'tid'\n          }\n        }, {\n          $replaceRoot: {\n            newRoot: {\n              $mergeObjects: [{\n                $arrayElemAt: ['$tid', 0]\n              }, '$$ROOT']\n            }\n          }\n        }, {\n          $unwind: '$tid'\n        }];\n        if (options.item === 'tid') {\n          arr.push({\n            $match: {\n              title: {\n                $regex: options.search,\n                $options: 'i'\n              }\n            }\n          });\n        }\n        arr = arr.concat([{\n          $addFields: {\n            userId: {\n              $toObjectId: '$uid'\n            }\n          }\n        }, {\n          $lookup: {\n            from: 'users',\n            localField: 'userId',\n            foreignField: '_id',\n            as: 'uid'\n          }\n        }]);\n        if (options.item === 'uid' && options.search.trim() !== '') {\n          arr.push({\n            $match: {\n              'uid.name': {\n                $regex: options.search,\n                $options: 'i'\n              }\n            }\n          });\n        }\n        arr.push({\n          $unwind: '$uid'\n        });\n        arr = arr.concat([{\n          $addFields: {\n            fuserId: {\n              $toObjectId: '$cuid'\n            }\n          }\n        }, {\n          $lookup: {\n            from: 'users',\n            localField: 'fuserId',\n            foreignField: '_id',\n            as: 'cuid'\n          }\n        }]);\n        if (options.item === 'cuid' && options.search.trim() !== '') {\n          arr.push({\n            $match: {\n              'cuid.name': {\n                $regex: options.search,\n                $options: 'i'\n              }\n            }\n          });\n        }\n        arr.push({\n          $unwind: '$cuid'\n        });\n        arr.push({\n          $project: {\n            tid: 1,\n            cuid: {\n              name: 1,\n              _id: 1\n            },\n            uid: {\n              name: 1,\n              _id: 1\n            },\n            isBest: 1,\n            status: 1,\n            content: 1,\n            created: 1\n          }\n        });\n        arr.push({\n          $group: {\n            _id: null,\n            count: {\n              $sum: 1\n            }\n          }\n        });\n        return this.aggregate(arr);\n      }\n      if (options.item === 'created') {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = {\n          created: {\n            $gte: new Date(start),\n            $lt: new Date(end)\n          }\n        };\n      }\n      return this.find(query).countDocuments();\n    }\n    return this.find(query).countDocuments();\n  },\n  // 取得其它用户对我的帖子的最新评论\n  getCommentsOnMe: function (uid, skip, limit) {\n    return this.find({\n      uid\n    }).sort({\n      created: -1\n    }).skip(skip).limit(limit).populate([{\n      path: 'cuid',\n      select: 'name pic'\n    }, {\n      path: 'tid',\n      select: 'title content'\n    }]);\n  },\n  // 删除评论，先删除该评论相关的点赞\n  deleteManyAndRef: async function (conditions) {\n    const commentList = await this.find(conditions);\n    console.assert(commentList.length > 0, '未找到要删除的 comments 文档！');\n    for (let i = 0; i < commentList.length; i++) {\n      await _CommentsHands__WEBPACK_IMPORTED_MODULE_2__[\"default\"].deleteByCommentId(commentList[i]._id);\n    }\n    return this.deleteMany(conditions);\n  },\n  // 获取每个用户的评论数量\n  getCommentsCount: function (skip) {\n    return this.aggregate([{\n      $group: {\n        _id: '$cuid',\n        count: {\n          $sum: 1\n        }\n      }\n    }, {\n      $sort: {\n        count: -1\n      }\n    }, {\n      $skip: skip * 15\n    }, {\n      $limit: 15\n    }, {\n      $lookup: {\n        let: {\n          userId: {\n            $toObjectId: '$_id'\n          }\n        },\n        from: 'users',\n        pipeline: [{\n          $match: {\n            $expr: {\n              $eq: ['$_id', '$$userId']\n            }\n          }\n        }, {\n          $project: {\n            _id: 1,\n            name: 1,\n            pic: 1\n          }\n        }],\n        as: 'user'\n      }\n    }]);\n  },\n  // 获取最新评论\n  getNewComments: function (skip) {\n    return this.aggregate([{\n      $sort: {\n        created: -1\n      }\n    }, {\n      $skip: skip * 15\n    }, {\n      $limit: 15\n    }, {\n      $lookup: {\n        let: {\n          userId: {\n            $toObjectId: '$uid'\n          }\n        },\n        from: 'users',\n        pipeline: [{\n          $match: {\n            $expr: {\n              $eq: ['$_id', '$$userId']\n            }\n          }\n        }, {\n          $project: {\n            _id: 1,\n            name: 1,\n            pic: 1\n          }\n        }],\n        as: 'user'\n      }\n    }, {\n      $lookup: {\n        let: {\n          postId: {\n            $toObjectId: '$tid'\n          }\n        },\n        from: 'posts',\n        pipeline: [{\n          $match: {\n            $expr: {\n              $eq: ['$_id', '$$postId']\n            }\n          }\n        }, {\n          $project: {\n            _id: 1,\n            title: 1,\n            answer: 1\n          }\n        }],\n        as: 'post'\n      }\n    }]);\n  },\n  // getMsgList: function (id, page, limit) {\n  //   return this.aggregate([\n  // {\n  //   $lookup: {\n  //     from: 'posts',\n  //     let: { pid: { $toObjectId: '$tid' } },\n  //     pipeline: [\n  //       { $match: { $expr: { $eq: ['$_id', '$$pid'] } } },\n  //       { $project: { _id: 1, uid: 1, content: 1 } }\n  //     ],\n  //     as: 'post'\n  //   }\n  // },\n  // {\n  //   $replaceRoot: {\n  //     newRoot: {\n  //       $mergeObjects: [{ $arrayElemAt: ['$post', 0] }, '$$ROOT']\n  //     }\n  //   }\n  // },\n  // { $addFields: { userId: { $toObjectId: '$uid' } } },\n  // { $lookup: { from: 'users', localField: 'userId', foreignField: '_id', as: 'tuid' } },\n  // { $unwind: '$tuid' },\n  // { $addFields: { fuserId: { $toObjectId: '$cuid' } } },\n  // { $lookup: { from: 'users', localField: 'fuserId', foreignField: '_id', as: 'fuid' } },\n  // { $unwind: '$fuid' },\n  // { $project: { post: 0, tuid: { username: 0, password: 0 }, fuid: { username: 0, password: 0 }, userId: 0, fuserId: 0, tid: 0, cuid: 0 } },\n  //     { $match: { uid: id, status: '1', isRead: '0' } }\n  //   ])\n  //     .skip(limit * page)\n  //     .limit(limit)\n  //     .sort({ created: -1 })\n  // }\n  getHotComments: function (page, limit, index) {\n    if (index === '0') {\n      // 总评论记数 -> aggregate聚合查询\n      return this.aggregate([\n      // 匹配30天内的评论数据\n      {\n        $match: {\n          created: {\n            $gte: new Date(dayjs__WEBPACK_IMPORTED_MODULE_1___default()().subtract(30, 'day'))\n          }\n        }\n      }, {\n        $group: {\n          _id: '$cuid',\n          count: {\n            $sum: 1\n          }\n        }\n      }, {\n        $addFields: {\n          userId: {\n            $toObjectId: '$_id'\n          }\n        }\n      }, {\n        $lookup: {\n          from: 'users',\n          localField: 'userId',\n          foreignField: '_id',\n          as: 'cuid'\n        }\n      }, {\n        $unwind: '$cuid'\n      }, {\n        $project: {\n          cuid: {\n            name: 1,\n            _id: 1,\n            pic: 1\n          },\n          count: 1\n        }\n      }, {\n        $skip: page * limit\n      }, {\n        $limit: limit\n      }, {\n        $sort: {\n          count: -1\n        }\n      }]);\n    } else if (index === '1') {\n      // 最新评论\n      return this.find({})\n      // populate\n      .populate({\n        path: 'cuid',\n        select: 'name pic _id'\n      }).skip(page * limit).limit(limit).sort({\n        created: -1\n      });\n    }\n  },\n  getHotCommentsCount: async function (index) {\n    if (index === '0') {\n      // 总评论记数 -> aggregate聚合查询\n      const result = await this.aggregate([\n      // 匹配30天内的评论数据\n      {\n        $match: {\n          created: {\n            $gte: new Date(dayjs__WEBPACK_IMPORTED_MODULE_1___default()().subtract(30, 'day'))\n          }\n        }\n      }, {\n        $group: {\n          _id: '$cuid',\n          count: {\n            $sum: 1\n          }\n        }\n      }, {\n        $group: {\n          _id: 'null',\n          total: {\n            $sum: 1\n          }\n        }\n      }]);\n      return result.length > 0 ? result[0].total : 0;\n    } else if (index === '1') {\n      // 最新评论\n      return this.find({}).countDocuments();\n    }\n  }\n};\nconst Comments = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('comments', CommentsSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Comments);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1lBQUUyQyxJQUFJLEVBQUUsSUFBSUMsSUFBSSxDQUFDN0YsNENBQU0sQ0FBQyxDQUFDLENBQUNvSCxRQUFRLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQztVQUFFO1FBQUU7TUFBRSxDQUFDLEVBQ3pFO1FBQUVwQixNQUFNLEVBQUU7VUFBRTdELEdBQUcsRUFBRSxPQUFPO1VBQUU4RCxLQUFLLEVBQUU7WUFBRUMsSUFBSSxFQUFFO1VBQUU7UUFBRTtNQUFFLENBQUMsRUFDaEQ7UUFBRUYsTUFBTSxFQUFFO1VBQUU3RCxHQUFHLEVBQUUsTUFBTTtVQUFFb0YsS0FBSyxFQUFFO1lBQUVyQixJQUFJLEVBQUU7VUFBRTtRQUFFO01BQUUsQ0FBQyxDQUNsRCxDQUFDO01BQ0YsT0FBT29CLE1BQU0sQ0FBQ2IsTUFBTSxHQUFHLENBQUMsR0FBR2EsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDQyxLQUFLLEdBQUcsQ0FBQztJQUNsRCxDQUFDLE1BQU0sSUFBSUosS0FBSyxLQUFLLEdBQUcsRUFBRTtNQUN0QjtNQUNBLE9BQU8sSUFBSSxDQUFDbkYsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUNjLGNBQWMsQ0FBQyxDQUFDO0lBQ3pDO0VBQ0o7QUFDSixDQUFDO0FBRUQsTUFBTTBFLFFBQVEsR0FBR3pILHlEQUFRLENBQUMwSCxLQUFLLENBQUMsVUFBVSxFQUFFdkgsY0FBYyxDQUFDO0FBRTNELGlFQUFlc0gsUUFBUSIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9tb2RlbC9Db21tZW50cy5qcz8yZTAxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICcuLi9jb25maWcvREJIZWxwbGVyJztcbmltcG9ydCBtb21lbnQgZnJvbSAnZGF5anMnO1xuaW1wb3J0IENvbW1lbnRzSGFuZHMgZnJvbSAnLi9Db21tZW50c0hhbmRzJztcblxuY29uc3QgQ29tbWVudHNTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICAgIHtcbiAgICAgICAgdGlkOiB7IHR5cGU6IFN0cmluZywgcmVmOiAncG9zdCcgfSxcbiAgICAgICAgdWlkOiB7IHR5cGU6IFN0cmluZywgcmVmOiAndXNlcnMnIH0sIC8vIOaWh+eroOS9nOiAhUlEXG4gICAgICAgIGN1aWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6ICd1c2VycycgfSwgLy8g6K+E6K6655So5oi355qESURcbiAgICAgICAgY29udGVudDogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICAgICAgaGFuZHM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gICAgICAgIHN0YXR1czogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcxJyB9LFxuICAgICAgICBpc1JlYWQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnMCcgfSxcbiAgICAgICAgaXNCZXN0OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJzAnIH0sXG4gICAgfSxcbiAgICB7IHRvSlNPTjogeyB2aXJ0dWFsczogdHJ1ZSB9LCB0aW1lc3RhbXBzOiB7IGNyZWF0ZWRBdDogJ2NyZWF0ZWQnLCB1cGRhdGVkQXQ6ICd1cGRhdGVkJyB9IH1cbik7XG5cbkNvbW1lbnRzU2NoZW1hLnBvc3QoJ3NhdmUnLCBmdW5jdGlvbiAoZXJyb3IsIGRvYywgbmV4dCkge1xuICAgIGlmIChlcnJvci5uYW1lID09PSAnTW9uZ29FcnJvcicgJiYgZXJyb3IuY29kZSA9PT0gMTEwMDApIHtcbiAgICAgICAgbmV4dChuZXcgRXJyb3IoJ1RoZXJlIHdhcyBhIGR1cGxpY2F0ZSBrZXkgZXJyb3InKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufSk7XG5cbkNvbW1lbnRzU2NoZW1hLnN0YXRpY3MgPSB7XG4gICAgZmluZEJ5VGlkOiBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZCh7IHRpZDogaWQgfSk7XG4gICAgfSxcbiAgICBmaW5kQnlDaWQ6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kT25lKHsgX2lkOiBpZCB9KTtcbiAgICB9LFxuICAgIGdldENvbW1lbnRzTGlzdDogZnVuY3Rpb24gKGlkLCBwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHsgdGlkOiBpZCB9KVxuICAgICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICBwYXRoOiAnY3VpZCcsXG4gICAgICAgICAgICAgICAgc2VsZWN0OiAnX2lkIG5hbWUgcGljIGlzVmlwJyxcbiAgICAgICAgICAgICAgICBtYXRjaDogeyBzdGF0dXM6IHsgJGVxOiAnMCcgfSB9LFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5wb3B1bGF0ZSh7XG4gICAgICAgICAgICAgICAgcGF0aDogJ3RpZCcsXG4gICAgICAgICAgICAgICAgc2VsZWN0OiAnX2lkIHRpdGxlIHN0YXR1cycsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNraXAocGFnZSAqIGxpbWl0KVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KTtcbiAgICB9LFxuICAgIHF1ZXJ5Q291bnQ6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHsgdGlkOiBpZCB9KS5jb3VudERvY3VtZW50cygpO1xuICAgIH0sXG4gICAgZ2V0Q29tbWV0c1B1YmxpYzogZnVuY3Rpb24gKGlkLCBwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHsgY3VpZDogaWQgfSlcbiAgICAgICAgICAgIC5wb3B1bGF0ZSh7XG4gICAgICAgICAgICAgICAgcGF0aDogJ3RpZCcsXG4gICAgICAgICAgICAgICAgc2VsZWN0OiAnX2lkIHRpdGxlJyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc2tpcChwYWdlICogbGltaXQpXG4gICAgICAgICAgICAubGltaXQobGltaXQpXG4gICAgICAgICAgICAuc29ydCh7IGNyZWF0ZWQ6IC0xIH0pO1xuICAgIH0sXG4gICAgZ2V0TXNnTGlzdDogZnVuY3Rpb24gKGlkLCBwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHtcbiAgICAgICAgICAgIHVpZDogaWQsXG4gICAgICAgICAgICBjdWlkOiB7ICRuZTogaWQgfSxcbiAgICAgICAgICAgIGlzUmVhZDogeyAkZXE6ICcwJyB9LCAvLyDmnKror7vnirbmgIFcbiAgICAgICAgICAgIHN0YXR1czogeyAkZXE6ICcxJyB9LCAvLyDmmK/lkKbmmL7npLpcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5wb3B1bGF0ZSh7XG4gICAgICAgICAgICAgICAgcGF0aDogJ3RpZCcsXG4gICAgICAgICAgICAgICAgc2VsZWN0OiAnX2lkIHRpdGxlIGNvbnRlbnQnLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5wb3B1bGF0ZSh7XG4gICAgICAgICAgICAgICAgcGF0aDogJ3VpZCcsXG4gICAgICAgICAgICAgICAgc2VsZWN0OiAnX2lkIG5hbWUnLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5wb3B1bGF0ZSh7XG4gICAgICAgICAgICAgICAgcGF0aDogJ2N1aWQnLFxuICAgICAgICAgICAgICAgIHNlbGVjdDogJ19pZCBuYW1lJyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc2tpcChsaW1pdCAqIHBhZ2UpXG4gICAgICAgICAgICAubGltaXQobGltaXQpXG4gICAgICAgICAgICAuc29ydCh7IGNyZWF0ZWQ6IC0xIH0pO1xuICAgIH0sXG4gICAgZ2V0VG90YWw6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHsgdWlkOiBpZCwgaXNSZWFkOiAnMCcsIHN0YXR1czogJzEnIH0pLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgfSxcbiAgICBnZXRDb21tZW50c09wdGlvbnM6IGZ1bmN0aW9uIChvcHRpb25zLCBwYWdlLCBsaW1pdCkge1xuICAgICAgICBsZXQgcXVlcnkgPSB7fTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNlYXJjaCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zZWFyY2ggPT09ICdzdHJpbmcnICYmIG9wdGlvbnMuc2VhcmNoLnRyaW0oKSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAvLyByYWRpb1xuICAgICAgICAgICAgICAgIHF1ZXJ5W29wdGlvbnMuaXRlbV0gPSBvcHRpb25zLnNlYXJjaDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgKiDliJvlu7rop4blm77vvJpcbiAgICAgICAqIGRiLmNyZWF0ZVZpZXcoJ2NvbW1lbnRzX3VzZXJzJywgJ2NvbW1lbnRzJywgW1xuICAgICAgICAgIHsgJyRsb29rdXAnOiB7XG4gICAgICAgICAgICAgIGZyb206ICdwb3N0cycsIGxldDogeyBwaWQ6IHsgJyR0b09iamVjdElkJzogJyR0aWQnIH0gfSxcbiAgICAgICAgICAgICAgcGlwZWxpbmU6IFsgeyAnJG1hdGNoJzogeyAnJGV4cHInOiB7ICckZXEnOiBbICckX2lkJywgJyQkcGlkJyBdIH0gfSB9LFxuICAgICAgICAgICAgICB7ICckcHJvamVjdCc6IHsgX2lkOiAxLCB1aWQ6IDEsIHRpdGxlOiAxIH0gfSBdLCBhczogJ3RpZCcgfSB9LFxuICAgICAgICAgICAgICB7ICckcmVwbGFjZVJvb3QnOiB7IG5ld1Jvb3Q6IHsgJyRtZXJnZU9iamVjdHMnOiBbIHsgJyRhcnJheUVsZW1BdCc6IFsgJyR0aWQnLCAwIF0gfSwgJyQkUk9PVCcgXSB9IH0gfSxcbiAgICAgICAgICAgICAgeyAnJHVud2luZCc6ICckdGlkJyB9LFxuICAgICAgICAgICAgICB7ICckYWRkRmllbGRzJzogeyB1c2VySWQ6IHsgJyR0b09iamVjdElkJzogJyR1aWQnIH0gfSB9LFxuICAgICAgICAgICAgICB7ICckbG9va3VwJzoge1xuICAgICAgICAgICAgICAgICAgZnJvbTogJ3VzZXJzJywgbG9jYWxGaWVsZDogJ3VzZXJJZCcsIGZvcmVpZ25GaWVsZDogJ19pZCcsIGFzOiAndWlkJyB9IH0sXG4gICAgICAgICAgICAgIHsgJyR1bndpbmQnOiAnJHVpZCcgfSwgeyAnJGFkZEZpZWxkcyc6IHsgZnVzZXJJZDogeyAnJHRvT2JqZWN0SWQnOiAnJGN1aWQnIH0gfSB9LFxuICAgICAgICAgICAgICB7ICckbG9va3VwJzogeyBmcm9tOiAndXNlcnMnLCBsb2NhbEZpZWxkOiAnZnVzZXJJZCcsIGZvcmVpZ25GaWVsZDogJ19pZCcsIGFzOiAnY3VpZCcgfSB9LFxuICAgICAgICAgICAgICB7ICckdW53aW5kJzogJyRjdWlkJyB9LFxuICAgICAgICAgIHsgJyRwcm9qZWN0JzogeyB0aWQ6IDEsIGN1aWQ6IHsgbmFtZTogMSwgX2lkOiAxIH0sIHVpZDogeyBuYW1lOiAxLCBfaWQ6IDEgfSwgaXNCZXN0OiAxLCBzdGF0dXM6IDEsIGNvbnRlbnQ6IDEsIGNyZWF0ZWQ6IDEgfSB9LFxuICAgICAgICAgIHsgJyRzb3J0JzogeyBjcmVhdGVkOiAtMSB9IH1dLFxuICAgICAgICAgIHt9KVxuICAgICAgICovXG4gICAgICAgICAgICBpZiAoWyd1aWQnLCAndGlkJywgJ2N1aWQnXS5pbmNsdWRlcyhvcHRpb25zLml0ZW0pKSB7XG4gICAgICAgICAgICAgICAgbGV0IGFyciA9IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGxvb2t1cDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb206ICdwb3N0cycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0OiB7IHBpZDogeyAkdG9PYmplY3RJZDogJyR0aWQnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaXBlbGluZTogW3sgJG1hdGNoOiB7ICRleHByOiB7ICRlcTogWyckX2lkJywgJyQkcGlkJ10gfSB9IH0sIHsgJHByb2plY3Q6IHsgX2lkOiAxLCB1aWQ6IDEsIHRpdGxlOiAxIH0gfV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXM6ICd0aWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHJlcGxhY2VSb290OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Um9vdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVyZ2VPYmplY3RzOiBbeyAkYXJyYXlFbGVtQXQ6IFsnJHRpZCcsIDBdIH0sICckJFJPT1QnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyAkdW53aW5kOiAnJHRpZCcgfSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLml0ZW0gPT09ICd0aWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRtYXRjaDogeyB0aXRsZTogeyAkcmVnZXg6IG9wdGlvbnMuc2VhcmNoLCAkb3B0aW9uczogJ2knIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFyciA9IGFyci5jb25jYXQoW1xuICAgICAgICAgICAgICAgICAgICB7ICRhZGRGaWVsZHM6IHsgdXNlcklkOiB7ICR0b09iamVjdElkOiAnJHVpZCcgfSB9IH0sXG4gICAgICAgICAgICAgICAgICAgIHsgJGxvb2t1cDogeyBmcm9tOiAndXNlcnMnLCBsb2NhbEZpZWxkOiAndXNlcklkJywgZm9yZWlnbkZpZWxkOiAnX2lkJywgYXM6ICd1aWQnIH0gfSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pdGVtID09PSAndWlkJyAmJiBvcHRpb25zLnNlYXJjaC50cmltKCkgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRtYXRjaDogeyAndWlkLm5hbWUnOiB7ICRyZWdleDogb3B0aW9ucy5zZWFyY2gsICRvcHRpb25zOiAnaScgfSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goeyAkdW53aW5kOiAnJHVpZCcgfSk7XG4gICAgICAgICAgICAgICAgYXJyID0gYXJyLmNvbmNhdChbXG4gICAgICAgICAgICAgICAgICAgIHsgJGFkZEZpZWxkczogeyBmdXNlcklkOiB7ICR0b09iamVjdElkOiAnJGN1aWQnIH0gfSB9LFxuICAgICAgICAgICAgICAgICAgICB7ICRsb29rdXA6IHsgZnJvbTogJ3VzZXJzJywgbG9jYWxGaWVsZDogJ2Z1c2VySWQnLCBmb3JlaWduRmllbGQ6ICdfaWQnLCBhczogJ2N1aWQnIH0gfSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pdGVtID09PSAnY3VpZCcgJiYgb3B0aW9ucy5zZWFyY2gudHJpbSgpICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWF0Y2g6IHsgJ2N1aWQubmFtZSc6IHsgJHJlZ2V4OiBvcHRpb25zLnNlYXJjaCwgJG9wdGlvbnM6ICdpJyB9IH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhcnIgPSBhcnIuY29uY2F0KFtcbiAgICAgICAgICAgICAgICAgICAgeyAkdW53aW5kOiAnJGN1aWQnIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRwcm9qZWN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlkOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1aWQ6IHsgbmFtZTogMSwgX2lkOiAxIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlkOiB7IG5hbWU6IDEsIF9pZDogMSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQmVzdDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgeyAkc2tpcDogbGltaXQgKiBwYWdlIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgJGxpbWl0OiBsaW1pdCB9LFxuICAgICAgICAgICAgICAgICAgICB7ICRzb3J0OiB7IGNyZWF0ZWQ6IC0xIH0gfSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZ2dyZWdhdGUoYXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLml0ZW0gPT09ICdjcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gb3B0aW9ucy5zZWFyY2hbMF07XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kID0gb3B0aW9ucy5zZWFyY2hbMV07XG4gICAgICAgICAgICAgICAgcXVlcnkgPSB7IGNyZWF0ZWQ6IHsgJGd0ZTogbmV3IERhdGUoc3RhcnQpLCAkbHQ6IG5ldyBEYXRlKGVuZCkgfSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZChxdWVyeSlcbiAgICAgICAgICAgICAgICAucG9wdWxhdGUoe1xuICAgICAgICAgICAgICAgICAgICBwYXRoOiAndGlkJyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiAnX2lkIHRpdGxlJyxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5wb3B1bGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHBhdGg6ICdjdWlkJyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiAnX2lkIG5hbWUnLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogJ3VpZCcsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdDogJ19pZCBuYW1lJyxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5za2lwKHBhZ2UgKiBsaW1pdClcbiAgICAgICAgICAgICAgICAubGltaXQobGltaXQpXG4gICAgICAgICAgICAgICAgLnNvcnQoeyBjcmVhdGVkOiAtMSB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0Q29tbWVudHNPcHRpb25zQ291bnQ6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIGxldCBxdWVyeSA9IHt9O1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2VhcmNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNlYXJjaCA9PT0gJ3N0cmluZycgJiYgb3B0aW9ucy5zZWFyY2gudHJpbSgpICE9PSAnJykge1xuICAgICAgICAgICAgICAgIC8vIHJhZGlvXG4gICAgICAgICAgICAgICAgcXVlcnlbb3B0aW9ucy5pdGVtXSA9IG9wdGlvbnMuc2VhcmNoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFsndWlkJywgJ3RpZCcsICdjdWlkJ10uaW5jbHVkZXMob3B0aW9ucy5pdGVtKSkge1xuICAgICAgICAgICAgICAgIGxldCBhcnIgPSBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb29rdXA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiAncG9zdHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldDogeyBwaWQ6IHsgJHRvT2JqZWN0SWQ6ICckdGlkJyB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmU6IFt7ICRtYXRjaDogeyAkZXhwcjogeyAkZXE6IFsnJF9pZCcsICckJHBpZCddIH0gfSB9LCB7ICRwcm9qZWN0OiB7IF9pZDogMSwgdWlkOiAxLCB0aXRsZTogMSB9IH1dLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzOiAndGlkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRyZXBsYWNlUm9vdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Jvb3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1lcmdlT2JqZWN0czogW3sgJGFycmF5RWxlbUF0OiBbJyR0aWQnLCAwXSB9LCAnJCRST09UJ10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgJHVud2luZDogJyR0aWQnIH0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pdGVtID09PSAndGlkJykge1xuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWF0Y2g6IHsgdGl0bGU6IHsgJHJlZ2V4OiBvcHRpb25zLnNlYXJjaCwgJG9wdGlvbnM6ICdpJyB9IH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhcnIgPSBhcnIuY29uY2F0KFtcbiAgICAgICAgICAgICAgICAgICAgeyAkYWRkRmllbGRzOiB7IHVzZXJJZDogeyAkdG9PYmplY3RJZDogJyR1aWQnIH0gfSB9LFxuICAgICAgICAgICAgICAgICAgICB7ICRsb29rdXA6IHsgZnJvbTogJ3VzZXJzJywgbG9jYWxGaWVsZDogJ3VzZXJJZCcsIGZvcmVpZ25GaWVsZDogJ19pZCcsIGFzOiAndWlkJyB9IH0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaXRlbSA9PT0gJ3VpZCcgJiYgb3B0aW9ucy5zZWFyY2gudHJpbSgpICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWF0Y2g6IHsgJ3VpZC5uYW1lJzogeyAkcmVnZXg6IG9wdGlvbnMuc2VhcmNoLCAkb3B0aW9uczogJ2knIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFyci5wdXNoKHsgJHVud2luZDogJyR1aWQnIH0pO1xuICAgICAgICAgICAgICAgIGFyciA9IGFyci5jb25jYXQoW1xuICAgICAgICAgICAgICAgICAgICB7ICRhZGRGaWVsZHM6IHsgZnVzZXJJZDogeyAkdG9PYmplY3RJZDogJyRjdWlkJyB9IH0gfSxcbiAgICAgICAgICAgICAgICAgICAgeyAkbG9va3VwOiB7IGZyb206ICd1c2VycycsIGxvY2FsRmllbGQ6ICdmdXNlcklkJywgZm9yZWlnbkZpZWxkOiAnX2lkJywgYXM6ICdjdWlkJyB9IH0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaXRlbSA9PT0gJ2N1aWQnICYmIG9wdGlvbnMuc2VhcmNoLnRyaW0oKSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgJG1hdGNoOiB7ICdjdWlkLm5hbWUnOiB7ICRyZWdleDogb3B0aW9ucy5zZWFyY2gsICRvcHRpb25zOiAnaScgfSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goeyAkdW53aW5kOiAnJGN1aWQnIH0pO1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgJHByb2plY3Q6IHsgdGlkOiAxLCBjdWlkOiB7IG5hbWU6IDEsIF9pZDogMSB9LCB1aWQ6IHsgbmFtZTogMSwgX2lkOiAxIH0sIGlzQmVzdDogMSwgc3RhdHVzOiAxLCBjb250ZW50OiAxLCBjcmVhdGVkOiAxIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXJyLnB1c2goeyAkZ3JvdXA6IHsgX2lkOiBudWxsLCBjb3VudDogeyAkc3VtOiAxIH0gfSB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hZ2dyZWdhdGUoYXJyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaXRlbSA9PT0gJ2NyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBvcHRpb25zLnNlYXJjaFswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSBvcHRpb25zLnNlYXJjaFsxXTtcbiAgICAgICAgICAgICAgICBxdWVyeSA9IHsgY3JlYXRlZDogeyAkZ3RlOiBuZXcgRGF0ZShzdGFydCksICRsdDogbmV3IERhdGUoZW5kKSB9IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kKHF1ZXJ5KS5jb3VudERvY3VtZW50cygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQocXVlcnkpLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgfSxcbiAgICAvLyDlj5blvpflhbblroPnlKjmiLflr7nmiJHnmoTluJblrZDnmoTmnIDmlrDor4TorrpcbiAgICBnZXRDb21tZW50c09uTWU6IGZ1bmN0aW9uICh1aWQsIHNraXAsIGxpbWl0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQoeyB1aWQgfSlcbiAgICAgICAgICAgIC5zb3J0KHsgY3JlYXRlZDogLTEgfSlcbiAgICAgICAgICAgIC5za2lwKHNraXApXG4gICAgICAgICAgICAubGltaXQobGltaXQpXG4gICAgICAgICAgICAucG9wdWxhdGUoW1xuICAgICAgICAgICAgICAgIHsgcGF0aDogJ2N1aWQnLCBzZWxlY3Q6ICduYW1lIHBpYycgfSxcbiAgICAgICAgICAgICAgICB7IHBhdGg6ICd0aWQnLCBzZWxlY3Q6ICd0aXRsZSBjb250ZW50JyB9LFxuICAgICAgICAgICAgXSk7XG4gICAgfSxcbiAgICAvLyDliKDpmaTor4TorrrvvIzlhYjliKDpmaTor6Xor4Torrrnm7jlhbPnmoTngrnotZ5cbiAgICBkZWxldGVNYW55QW5kUmVmOiBhc3luYyBmdW5jdGlvbiAoY29uZGl0aW9ucykge1xuICAgICAgICBjb25zdCBjb21tZW50TGlzdCA9IGF3YWl0IHRoaXMuZmluZChjb25kaXRpb25zKTtcbiAgICAgICAgY29uc29sZS5hc3NlcnQoY29tbWVudExpc3QubGVuZ3RoID4gMCwgJ+acquaJvuWIsOimgeWIoOmZpOeahCBjb21tZW50cyDmlofmoaPvvIEnKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21tZW50TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXdhaXQgQ29tbWVudHNIYW5kcy5kZWxldGVCeUNvbW1lbnRJZChjb21tZW50TGlzdFtpXS5faWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRlbGV0ZU1hbnkoY29uZGl0aW9ucyk7XG4gICAgfSxcbiAgICAvLyDojrflj5bmr4/kuKrnlKjmiLfnmoTor4TorrrmlbDph49cbiAgICBnZXRDb21tZW50c0NvdW50OiBmdW5jdGlvbiAoc2tpcCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZ2dyZWdhdGUoW1xuICAgICAgICAgICAgeyAkZ3JvdXA6IHsgX2lkOiAnJGN1aWQnLCBjb3VudDogeyAkc3VtOiAxIH0gfSB9LFxuICAgICAgICAgICAgeyAkc29ydDogeyBjb3VudDogLTEgfSB9LFxuICAgICAgICAgICAgeyAkc2tpcDogc2tpcCAqIDE1IH0sXG4gICAgICAgICAgICB7ICRsaW1pdDogMTUgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAkbG9va3VwOiB7XG4gICAgICAgICAgICAgICAgICAgIGxldDogeyB1c2VySWQ6IHsgJHRvT2JqZWN0SWQ6ICckX2lkJyB9IH0sXG4gICAgICAgICAgICAgICAgICAgIGZyb206ICd1c2VycycsXG4gICAgICAgICAgICAgICAgICAgIHBpcGVsaW5lOiBbeyAkbWF0Y2g6IHsgJGV4cHI6IHsgJGVxOiBbJyRfaWQnLCAnJCR1c2VySWQnXSB9IH0gfSwgeyAkcHJvamVjdDogeyBfaWQ6IDEsIG5hbWU6IDEsIHBpYzogMSB9IH1dLFxuICAgICAgICAgICAgICAgICAgICBhczogJ3VzZXInLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKTtcbiAgICB9LFxuICAgIC8vIOiOt+WPluacgOaWsOivhOiuulxuICAgIGdldE5ld0NvbW1lbnRzOiBmdW5jdGlvbiAoc2tpcCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hZ2dyZWdhdGUoW1xuICAgICAgICAgICAgeyAkc29ydDogeyBjcmVhdGVkOiAtMSB9IH0sXG4gICAgICAgICAgICB7ICRza2lwOiBza2lwICogMTUgfSxcbiAgICAgICAgICAgIHsgJGxpbWl0OiAxNSB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICRsb29rdXA6IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0OiB7IHVzZXJJZDogeyAkdG9PYmplY3RJZDogJyR1aWQnIH0gfSxcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogJ3VzZXJzJyxcbiAgICAgICAgICAgICAgICAgICAgcGlwZWxpbmU6IFt7ICRtYXRjaDogeyAkZXhwcjogeyAkZXE6IFsnJF9pZCcsICckJHVzZXJJZCddIH0gfSB9LCB7ICRwcm9qZWN0OiB7IF9pZDogMSwgbmFtZTogMSwgcGljOiAxIH0gfV0sXG4gICAgICAgICAgICAgICAgICAgIGFzOiAndXNlcicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJGxvb2t1cDoge1xuICAgICAgICAgICAgICAgICAgICBsZXQ6IHsgcG9zdElkOiB7ICR0b09iamVjdElkOiAnJHRpZCcgfSB9LFxuICAgICAgICAgICAgICAgICAgICBmcm9tOiAncG9zdHMnLFxuICAgICAgICAgICAgICAgICAgICBwaXBlbGluZTogW3sgJG1hdGNoOiB7ICRleHByOiB7ICRlcTogWyckX2lkJywgJyQkcG9zdElkJ10gfSB9IH0sIHsgJHByb2plY3Q6IHsgX2lkOiAxLCB0aXRsZTogMSwgYW5zd2VyOiAxIH0gfV0sXG4gICAgICAgICAgICAgICAgICAgIGFzOiAncG9zdCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuICAgIH0sXG4gICAgLy8gZ2V0TXNnTGlzdDogZnVuY3Rpb24gKGlkLCBwYWdlLCBsaW1pdCkge1xuICAgIC8vICAgcmV0dXJuIHRoaXMuYWdncmVnYXRlKFtcbiAgICAvLyB7XG4gICAgLy8gICAkbG9va3VwOiB7XG4gICAgLy8gICAgIGZyb206ICdwb3N0cycsXG4gICAgLy8gICAgIGxldDogeyBwaWQ6IHsgJHRvT2JqZWN0SWQ6ICckdGlkJyB9IH0sXG4gICAgLy8gICAgIHBpcGVsaW5lOiBbXG4gICAgLy8gICAgICAgeyAkbWF0Y2g6IHsgJGV4cHI6IHsgJGVxOiBbJyRfaWQnLCAnJCRwaWQnXSB9IH0gfSxcbiAgICAvLyAgICAgICB7ICRwcm9qZWN0OiB7IF9pZDogMSwgdWlkOiAxLCBjb250ZW50OiAxIH0gfVxuICAgIC8vICAgICBdLFxuICAgIC8vICAgICBhczogJ3Bvc3QnXG4gICAgLy8gICB9XG4gICAgLy8gfSxcbiAgICAvLyB7XG4gICAgLy8gICAkcmVwbGFjZVJvb3Q6IHtcbiAgICAvLyAgICAgbmV3Um9vdDoge1xuICAgIC8vICAgICAgICRtZXJnZU9iamVjdHM6IFt7ICRhcnJheUVsZW1BdDogWyckcG9zdCcsIDBdIH0sICckJFJPT1QnXVxuICAgIC8vICAgICB9XG4gICAgLy8gICB9XG4gICAgLy8gfSxcbiAgICAvLyB7ICRhZGRGaWVsZHM6IHsgdXNlcklkOiB7ICR0b09iamVjdElkOiAnJHVpZCcgfSB9IH0sXG4gICAgLy8geyAkbG9va3VwOiB7IGZyb206ICd1c2VycycsIGxvY2FsRmllbGQ6ICd1c2VySWQnLCBmb3JlaWduRmllbGQ6ICdfaWQnLCBhczogJ3R1aWQnIH0gfSxcbiAgICAvLyB7ICR1bndpbmQ6ICckdHVpZCcgfSxcbiAgICAvLyB7ICRhZGRGaWVsZHM6IHsgZnVzZXJJZDogeyAkdG9PYmplY3RJZDogJyRjdWlkJyB9IH0gfSxcbiAgICAvLyB7ICRsb29rdXA6IHsgZnJvbTogJ3VzZXJzJywgbG9jYWxGaWVsZDogJ2Z1c2VySWQnLCBmb3JlaWduRmllbGQ6ICdfaWQnLCBhczogJ2Z1aWQnIH0gfSxcbiAgICAvLyB7ICR1bndpbmQ6ICckZnVpZCcgfSxcbiAgICAvLyB7ICRwcm9qZWN0OiB7IHBvc3Q6IDAsIHR1aWQ6IHsgdXNlcm5hbWU6IDAsIHBhc3N3b3JkOiAwIH0sIGZ1aWQ6IHsgdXNlcm5hbWU6IDAsIHBhc3N3b3JkOiAwIH0sIHVzZXJJZDogMCwgZnVzZXJJZDogMCwgdGlkOiAwLCBjdWlkOiAwIH0gfSxcbiAgICAvLyAgICAgeyAkbWF0Y2g6IHsgdWlkOiBpZCwgc3RhdHVzOiAnMScsIGlzUmVhZDogJzAnIH0gfVxuICAgIC8vICAgXSlcbiAgICAvLyAgICAgLnNraXAobGltaXQgKiBwYWdlKVxuICAgIC8vICAgICAubGltaXQobGltaXQpXG4gICAgLy8gICAgIC5zb3J0KHsgY3JlYXRlZDogLTEgfSlcbiAgICAvLyB9XG4gICAgZ2V0SG90Q29tbWVudHM6IGZ1bmN0aW9uIChwYWdlLCBsaW1pdCwgaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4ID09PSAnMCcpIHtcbiAgICAgICAgICAgIC8vIOaAu+ivhOiuuuiusOaVsCAtPiBhZ2dyZWdhdGXogZrlkIjmn6Xor6JcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFnZ3JlZ2F0ZShbXG4gICAgICAgICAgICAgICAgLy8g5Yy56YWNMzDlpKnlhoXnmoTor4TorrrmlbDmja5cbiAgICAgICAgICAgICAgICB7ICRtYXRjaDogeyBjcmVhdGVkOiB7ICRndGU6IG5ldyBEYXRlKG1vbWVudCgpLnN1YnRyYWN0KDMwLCAnZGF5JykpIH0gfSB9LFxuICAgICAgICAgICAgICAgIHsgJGdyb3VwOiB7IF9pZDogJyRjdWlkJywgY291bnQ6IHsgJHN1bTogMSB9IH0gfSxcbiAgICAgICAgICAgICAgICB7ICRhZGRGaWVsZHM6IHsgdXNlcklkOiB7ICR0b09iamVjdElkOiAnJF9pZCcgfSB9IH0sXG4gICAgICAgICAgICAgICAgeyAkbG9va3VwOiB7IGZyb206ICd1c2VycycsIGxvY2FsRmllbGQ6ICd1c2VySWQnLCBmb3JlaWduRmllbGQ6ICdfaWQnLCBhczogJ2N1aWQnIH0gfSxcbiAgICAgICAgICAgICAgICB7ICR1bndpbmQ6ICckY3VpZCcgfSxcbiAgICAgICAgICAgICAgICB7ICRwcm9qZWN0OiB7IGN1aWQ6IHsgbmFtZTogMSwgX2lkOiAxLCBwaWM6IDEgfSwgY291bnQ6IDEgfSB9LFxuICAgICAgICAgICAgICAgIHsgJHNraXA6IHBhZ2UgKiBsaW1pdCB9LFxuICAgICAgICAgICAgICAgIHsgJGxpbWl0OiBsaW1pdCB9LFxuICAgICAgICAgICAgICAgIHsgJHNvcnQ6IHsgY291bnQ6IC0xIH0gfSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09PSAnMScpIHtcbiAgICAgICAgICAgIC8vIOacgOaWsOivhOiuulxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmQoe30pXG4gICAgICAgICAgICAgICAgICAgIC8vIHBvcHVsYXRlXG4gICAgICAgICAgICAgICAgICAgIC5wb3B1bGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiAnY3VpZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Q6ICduYW1lIHBpYyBfaWQnLFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuc2tpcChwYWdlICogbGltaXQpXG4gICAgICAgICAgICAgICAgICAgIC5saW1pdChsaW1pdClcbiAgICAgICAgICAgICAgICAgICAgLnNvcnQoeyBjcmVhdGVkOiAtMSB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0SG90Q29tbWVudHNDb3VudDogYXN5bmMgZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gJzAnKSB7XG4gICAgICAgICAgICAvLyDmgLvor4TorrrorrDmlbAgLT4gYWdncmVnYXRl6IGa5ZCI5p+l6K+iXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmFnZ3JlZ2F0ZShbXG4gICAgICAgICAgICAgICAgLy8g5Yy56YWNMzDlpKnlhoXnmoTor4TorrrmlbDmja5cbiAgICAgICAgICAgICAgICB7ICRtYXRjaDogeyBjcmVhdGVkOiB7ICRndGU6IG5ldyBEYXRlKG1vbWVudCgpLnN1YnRyYWN0KDMwLCAnZGF5JykpIH0gfSB9LFxuICAgICAgICAgICAgICAgIHsgJGdyb3VwOiB7IF9pZDogJyRjdWlkJywgY291bnQ6IHsgJHN1bTogMSB9IH0gfSxcbiAgICAgICAgICAgICAgICB7ICRncm91cDogeyBfaWQ6ICdudWxsJywgdG90YWw6IHsgJHN1bTogMSB9IH0gfSxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5sZW5ndGggPiAwID8gcmVzdWx0WzBdLnRvdGFsIDogMDtcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gJzEnKSB7XG4gICAgICAgICAgICAvLyDmnIDmlrDor4TorrpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmQoe30pLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgICAgIH1cbiAgICB9LFxufTtcblxuY29uc3QgQ29tbWVudHMgPSBtb25nb29zZS5tb2RlbCgnY29tbWVudHMnLCBDb21tZW50c1NjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IENvbW1lbnRzO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwibW9tZW50IiwiQ29tbWVudHNIYW5kcyIsIkNvbW1lbnRzU2NoZW1hIiwiU2NoZW1hIiwidGlkIiwidHlwZSIsIlN0cmluZyIsInJlZiIsInVpZCIsImN1aWQiLCJjb250ZW50IiwiaGFuZHMiLCJOdW1iZXIiLCJkZWZhdWx0Iiwic3RhdHVzIiwiaXNSZWFkIiwiaXNCZXN0IiwidG9KU09OIiwidmlydHVhbHMiLCJ0aW1lc3RhbXBzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwicG9zdCIsImVycm9yIiwiZG9jIiwibmV4dCIsIm5hbWUiLCJjb2RlIiwiRXJyb3IiLCJzdGF0aWNzIiwiZmluZEJ5VGlkIiwiaWQiLCJmaW5kIiwiZmluZEJ5Q2lkIiwiZmluZE9uZSIsIl9pZCIsImdldENvbW1lbnRzTGlzdCIsInBhZ2UiLCJsaW1pdCIsInBvcHVsYXRlIiwicGF0aCIsInNlbGVjdCIsIm1hdGNoIiwiJGVxIiwic2tpcCIsInF1ZXJ5Q291bnQiLCJjb3VudERvY3VtZW50cyIsImdldENvbW1ldHNQdWJsaWMiLCJzb3J0IiwiY3JlYXRlZCIsImdldE1zZ0xpc3QiLCIkbmUiLCJnZXRUb3RhbCIsImdldENvbW1lbnRzT3B0aW9ucyIsIm9wdGlvbnMiLCJxdWVyeSIsInNlYXJjaCIsInRyaW0iLCJpdGVtIiwiaW5jbHVkZXMiLCJhcnIiLCIkbG9va3VwIiwiZnJvbSIsImxldCIsInBpZCIsIiR0b09iamVjdElkIiwicGlwZWxpbmUiLCIkbWF0Y2giLCIkZXhwciIsIiRwcm9qZWN0IiwidGl0bGUiLCJhcyIsIiRyZXBsYWNlUm9vdCIsIm5ld1Jvb3QiLCIkbWVyZ2VPYmplY3RzIiwiJGFycmF5RWxlbUF0IiwiJHVud2luZCIsInB1c2giLCIkcmVnZXgiLCIkb3B0aW9ucyIsImNvbmNhdCIsIiRhZGRGaWVsZHMiLCJ1c2VySWQiLCJsb2NhbEZpZWxkIiwiZm9yZWlnbkZpZWxkIiwiZnVzZXJJZCIsIiRza2lwIiwiJGxpbWl0IiwiJHNvcnQiLCJhZ2dyZWdhdGUiLCJzdGFydCIsImVuZCIsIiRndGUiLCJEYXRlIiwiJGx0IiwiZ2V0Q29tbWVudHNPcHRpb25zQ291bnQiLCIkZ3JvdXAiLCJjb3VudCIsIiRzdW0iLCJnZXRDb21tZW50c09uTWUiLCJkZWxldGVNYW55QW5kUmVmIiwiY29uZGl0aW9ucyIsImNvbW1lbnRMaXN0IiwiY29uc29sZSIsImFzc2VydCIsImxlbmd0aCIsImkiLCJkZWxldGVCeUNvbW1lbnRJZCIsImRlbGV0ZU1hbnkiLCJnZXRDb21tZW50c0NvdW50IiwicGljIiwiZ2V0TmV3Q29tbWVudHMiLCJwb3N0SWQiLCJhbnN3ZXIiLCJnZXRIb3RDb21tZW50cyIsImluZGV4Iiwic3VidHJhY3QiLCJnZXRIb3RDb21tZW50c0NvdW50IiwicmVzdWx0IiwidG90YWwiLCJDb21tZW50cyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/model/Comments.js\n\n}");

/***/ }),

/***/ "./src/model/CommentsHands.js":
/*!************************************!*\
  !*** ./src/model/CommentsHands.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/DBHelpler */ \"./src/config/DBHelpler.js\");\n\nconst CommentsSchema = new _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema({\n  cid: {\n    type: String,\n    ref: 'comments'\n  },\n  huid: {\n    type: String,\n    ref: 'users'\n  },\n  // 被点赞用户的id\n  uid: {\n    type: String,\n    ref: 'users'\n  } // 点赞用户的id\n}, {\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nCommentsSchema.post('save', function (error, doc, next) {\n  if (error.name === 'MongoError' && error.code === 11000) {\n    next(new Error('There was a duplicate key error'));\n  } else {\n    next(error);\n  }\n});\nCommentsSchema.statics = {\n  findByCid: function (id) {\n    return this.find({\n      cid: id\n    });\n  },\n  getHandsByUid: function (id, page, limit) {\n    return this.find({\n      uid: id\n    }).populate({\n      path: 'huid',\n      select: '_id name pic'\n    }).populate({\n      path: 'cid',\n      select: '_id content'\n    }).skip(page * limit).limit(limit).sort({\n      created: -1\n    });\n  },\n  // 取得其他用户对我的最新点赞\n  getHandUsersOnMe: function (uid, skip, limit) {\n    return this.find({\n      huid: uid\n    })\n    // .populate({ path: 'uid', select: 'name pic' })\n    .sort({\n      created: -1\n    }).skip(skip).limit(limit);\n  },\n  deleteByCommentId: function (cid) {\n    return this.deleteMany({\n      cid\n    });\n  }\n};\nconst CommentsHands = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('comments_hands', CommentsSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CommentsHands);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kZWwvQ29tbWVudHNIYW5kcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEyQztBQUUzQyxNQUFNQyxjQUFjLEdBQUcsSUFBSUQseURBQVEsQ0FBQ0UsTUFBTSxDQUN0QztFQUNJQyxHQUFHLEVBQUU7SUFBRUMsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLEdBQUcsRUFBRTtFQUFXLENBQUM7RUFDdENDLElBQUksRUFBRTtJQUFFSCxJQUFJLEVBQUVDLE1BQU07SUFBRUMsR0FBRyxFQUFFO0VBQVEsQ0FBQztFQUFFO0VBQ3RDRSxHQUFHLEVBQUU7SUFBRUosSUFBSSxFQUFFQyxNQUFNO0lBQUVDLEdBQUcsRUFBRTtFQUFRLENBQUMsQ0FBRTtBQUN6QyxDQUFDLEVBQ0Q7RUFBRUcsVUFBVSxFQUFFO0lBQUVDLFNBQVMsRUFBRSxTQUFTO0lBQUVDLFNBQVMsRUFBRTtFQUFVO0FBQUUsQ0FDakUsQ0FBQztBQUVEVixjQUFjLENBQUNXLElBQUksQ0FBQyxNQUFNLEVBQUUsVUFBVUMsS0FBSyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtFQUNwRCxJQUFJRixLQUFLLENBQUNHLElBQUksS0FBSyxZQUFZLElBQUlILEtBQUssQ0FBQ0ksSUFBSSxLQUFLLEtBQUssRUFBRTtJQUNyREYsSUFBSSxDQUFDLElBQUlHLEtBQUssQ0FBQyxpQ0FBaUMsQ0FBQyxDQUFDO0VBQ3RELENBQUMsTUFBTTtJQUNISCxJQUFJLENBQUNGLEtBQUssQ0FBQztFQUNmO0FBQ0osQ0FBQyxDQUFDO0FBRUZaLGNBQWMsQ0FBQ2tCLE9BQU8sR0FBRztFQUNyQkMsU0FBUyxFQUFFLFNBQUFBLENBQVVDLEVBQUUsRUFBRTtJQUNyQixPQUFPLElBQUksQ0FBQ0MsSUFBSSxDQUFDO01BQUVuQixHQUFHLEVBQUVrQjtJQUFHLENBQUMsQ0FBQztFQUNqQyxDQUFDO0VBQ0RFLGFBQWEsRUFBRSxTQUFBQSxDQUFVRixFQUFFLEVBQUVHLElBQUksRUFBRUMsS0FBSyxFQUFFO0lBQ3RDLE9BQU8sSUFBSSxDQUFDSCxJQUFJLENBQUM7TUFBRWQsR0FBRyxFQUFFYTtJQUFHLENBQUMsQ0FBQyxDQUN4QkssUUFBUSxDQUFDO01BQ05DLElBQUksRUFBRSxNQUFNO01BQ1pDLE1BQU0sRUFBRTtJQUNaLENBQUMsQ0FBQyxDQUNERixRQUFRLENBQUM7TUFDTkMsSUFBSSxFQUFFLEtBQUs7TUFDWEMsTUFBTSxFQUFFO0lBQ1osQ0FBQyxDQUFDLENBQ0RDLElBQUksQ0FBQ0wsSUFBSSxHQUFHQyxLQUFLLENBQUMsQ0FDbEJBLEtBQUssQ0FBQ0EsS0FBSyxDQUFDLENBQ1pLLElBQUksQ0FBQztNQUFFQyxPQUFPLEVBQUUsQ0FBQztJQUFFLENBQUMsQ0FBQztFQUM5QixDQUFDO0VBQ0Q7RUFDQUMsZ0JBQWdCLEVBQUUsU0FBQUEsQ0FBVXhCLEdBQUcsRUFBRXFCLElBQUksRUFBRUosS0FBSyxFQUFFO0lBQzFDLE9BQ0ksSUFBSSxDQUFDSCxJQUFJLENBQUM7TUFBRWYsSUFBSSxFQUFFQztJQUFJLENBQUM7SUFDbkI7SUFBQSxDQUNDc0IsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRSxDQUFDO0lBQUUsQ0FBQyxDQUFDLENBQ3JCRixJQUFJLENBQUNBLElBQUksQ0FBQyxDQUNWSixLQUFLLENBQUNBLEtBQUssQ0FBQztFQUV6QixDQUFDO0VBQ0RRLGlCQUFpQixFQUFFLFNBQUFBLENBQVU5QixHQUFHLEVBQUU7SUFDOUIsT0FBTyxJQUFJLENBQUMrQixVQUFVLENBQUM7TUFBRS9CO0lBQUksQ0FBQyxDQUFDO0VBQ25DO0FBQ0osQ0FBQztBQUVELE1BQU1nQyxhQUFhLEdBQUduQyx5REFBUSxDQUFDb0MsS0FBSyxDQUFDLGdCQUFnQixFQUFFbkMsY0FBYyxDQUFDO0FBRXRFLGlFQUFla0MsYUFBYSIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9tb2RlbC9Db21tZW50c0hhbmRzLmpzP2M5N2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJy4uL2NvbmZpZy9EQkhlbHBsZXInO1xuXG5jb25zdCBDb21tZW50c1NjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gICAge1xuICAgICAgICBjaWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6ICdjb21tZW50cycgfSxcbiAgICAgICAgaHVpZDogeyB0eXBlOiBTdHJpbmcsIHJlZjogJ3VzZXJzJyB9LCAvLyDooqvngrnotZ7nlKjmiLfnmoRpZFxuICAgICAgICB1aWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6ICd1c2VycycgfSwgLy8g54K56LWe55So5oi355qEaWRcbiAgICB9LFxuICAgIHsgdGltZXN0YW1wczogeyBjcmVhdGVkQXQ6ICdjcmVhdGVkJywgdXBkYXRlZEF0OiAndXBkYXRlZCcgfSB9XG4pO1xuXG5Db21tZW50c1NjaGVtYS5wb3N0KCdzYXZlJywgZnVuY3Rpb24gKGVycm9yLCBkb2MsIG5leHQpIHtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ01vbmdvRXJyb3InICYmIGVycm9yLmNvZGUgPT09IDExMDAwKSB7XG4gICAgICAgIG5leHQobmV3IEVycm9yKCdUaGVyZSB3YXMgYSBkdXBsaWNhdGUga2V5IGVycm9yJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn0pO1xuXG5Db21tZW50c1NjaGVtYS5zdGF0aWNzID0ge1xuICAgIGZpbmRCeUNpZDogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQoeyBjaWQ6IGlkIH0pO1xuICAgIH0sXG4gICAgZ2V0SGFuZHNCeVVpZDogZnVuY3Rpb24gKGlkLCBwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHsgdWlkOiBpZCB9KVxuICAgICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICBwYXRoOiAnaHVpZCcsXG4gICAgICAgICAgICAgICAgc2VsZWN0OiAnX2lkIG5hbWUgcGljJyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAucG9wdWxhdGUoe1xuICAgICAgICAgICAgICAgIHBhdGg6ICdjaWQnLFxuICAgICAgICAgICAgICAgIHNlbGVjdDogJ19pZCBjb250ZW50JyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc2tpcChwYWdlICogbGltaXQpXG4gICAgICAgICAgICAubGltaXQobGltaXQpXG4gICAgICAgICAgICAuc29ydCh7IGNyZWF0ZWQ6IC0xIH0pO1xuICAgIH0sXG4gICAgLy8g5Y+W5b6X5YW25LuW55So5oi35a+55oiR55qE5pyA5paw54K56LWeXG4gICAgZ2V0SGFuZFVzZXJzT25NZTogZnVuY3Rpb24gKHVpZCwgc2tpcCwgbGltaXQpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIHRoaXMuZmluZCh7IGh1aWQ6IHVpZCB9KVxuICAgICAgICAgICAgICAgIC8vIC5wb3B1bGF0ZSh7IHBhdGg6ICd1aWQnLCBzZWxlY3Q6ICduYW1lIHBpYycgfSlcbiAgICAgICAgICAgICAgICAuc29ydCh7IGNyZWF0ZWQ6IC0xIH0pXG4gICAgICAgICAgICAgICAgLnNraXAoc2tpcClcbiAgICAgICAgICAgICAgICAubGltaXQobGltaXQpXG4gICAgICAgICk7XG4gICAgfSxcbiAgICBkZWxldGVCeUNvbW1lbnRJZDogZnVuY3Rpb24gKGNpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWxldGVNYW55KHsgY2lkIH0pO1xuICAgIH0sXG59O1xuXG5jb25zdCBDb21tZW50c0hhbmRzID0gbW9uZ29vc2UubW9kZWwoJ2NvbW1lbnRzX2hhbmRzJywgQ29tbWVudHNTY2hlbWEpO1xuXG5leHBvcnQgZGVmYXVsdCBDb21tZW50c0hhbmRzO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiQ29tbWVudHNTY2hlbWEiLCJTY2hlbWEiLCJjaWQiLCJ0eXBlIiwiU3RyaW5nIiwicmVmIiwiaHVpZCIsInVpZCIsInRpbWVzdGFtcHMiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJwb3N0IiwiZXJyb3IiLCJkb2MiLCJuZXh0IiwibmFtZSIsImNvZGUiLCJFcnJvciIsInN0YXRpY3MiLCJmaW5kQnlDaWQiLCJpZCIsImZpbmQiLCJnZXRIYW5kc0J5VWlkIiwicGFnZSIsImxpbWl0IiwicG9wdWxhdGUiLCJwYXRoIiwic2VsZWN0Iiwic2tpcCIsInNvcnQiLCJjcmVhdGVkIiwiZ2V0SGFuZFVzZXJzT25NZSIsImRlbGV0ZUJ5Q29tbWVudElkIiwiZGVsZXRlTWFueSIsIkNvbW1lbnRzSGFuZHMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/model/CommentsHands.js\n\n}");

/***/ }),

/***/ "./src/model/ErrorRecord.js":
/*!**********************************!*\
  !*** ./src/model/ErrorRecord.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/DBHelpler */ \"./src/config/DBHelpler.js\");\n\nconst Schema = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema;\nconst ErrorRecordSchema = new Schema({\n  message: {\n    type: String,\n    default: ''\n  },\n  // 错误信息\n  code: {\n    type: String,\n    default: ''\n  },\n  // response status\n  method: {\n    type: String,\n    default: ''\n  },\n  // 请求的类型\n  path: {\n    type: String,\n    default: ''\n  },\n  // 请求的路径\n  param: {\n    type: Schema.Types.Mixed,\n    default: ''\n  },\n  // 请求的参数\n  username: {\n    type: String,\n    default: ''\n  },\n  // 当前登录用户\n  stack: {\n    type: String,\n    default: ''\n  }\n}, {\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nconst ErrorRecord = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('error_record', ErrorRecordSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ErrorRecord);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kZWwvRXJyb3JSZWNvcmQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkM7QUFFM0MsTUFBTUMsTUFBTSxHQUFHRCx5REFBUSxDQUFDQyxNQUFNO0FBRTlCLE1BQU1DLGlCQUFpQixHQUFHLElBQUlELE1BQU0sQ0FDaEM7RUFDSUUsT0FBTyxFQUFFO0lBQUVDLElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBQUU7RUFDeENDLElBQUksRUFBRTtJQUFFSCxJQUFJLEVBQUVDLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQUcsQ0FBQztFQUFFO0VBQ3JDRSxNQUFNLEVBQUU7SUFBRUosSUFBSSxFQUFFQyxNQUFNO0lBQUVDLE9BQU8sRUFBRTtFQUFHLENBQUM7RUFBRTtFQUN2Q0csSUFBSSxFQUFFO0lBQUVMLElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBQUU7RUFDckNJLEtBQUssRUFBRTtJQUFFTixJQUFJLEVBQUVILE1BQU0sQ0FBQ1UsS0FBSyxDQUFDQyxLQUFLO0lBQUVOLE9BQU8sRUFBRTtFQUFHLENBQUM7RUFBRTtFQUNsRE8sUUFBUSxFQUFFO0lBQUVULElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBQUU7RUFDekNRLEtBQUssRUFBRTtJQUFFVixJQUFJLEVBQUVDLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQUc7QUFDdkMsQ0FBQyxFQUNEO0VBQUVTLFVBQVUsRUFBRTtJQUFFQyxTQUFTLEVBQUUsU0FBUztJQUFFQyxTQUFTLEVBQUU7RUFBVTtBQUFFLENBQ2pFLENBQUM7QUFFRCxNQUFNQyxXQUFXLEdBQUdsQix5REFBUSxDQUFDbUIsS0FBSyxDQUFDLGNBQWMsRUFBRWpCLGlCQUFpQixDQUFDO0FBRXJFLGlFQUFlZ0IsV0FBVyIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9tb2RlbC9FcnJvclJlY29yZC5qcz9hODJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICcuLi9jb25maWcvREJIZWxwbGVyJztcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xuXG5jb25zdCBFcnJvclJlY29yZFNjaGVtYSA9IG5ldyBTY2hlbWEoXG4gICAge1xuICAgICAgICBtZXNzYWdlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSwgLy8g6ZSZ6K+v5L+h5oGvXG4gICAgICAgIGNvZGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LCAvLyByZXNwb25zZSBzdGF0dXNcbiAgICAgICAgbWV0aG9kOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSwgLy8g6K+35rGC55qE57G75Z6LXG4gICAgICAgIHBhdGg6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LCAvLyDor7fmsYLnmoTot6/lvoRcbiAgICAgICAgcGFyYW06IHsgdHlwZTogU2NoZW1hLlR5cGVzLk1peGVkLCBkZWZhdWx0OiAnJyB9LCAvLyDor7fmsYLnmoTlj4LmlbBcbiAgICAgICAgdXNlcm5hbWU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LCAvLyDlvZPliY3nmbvlvZXnlKjmiLdcbiAgICAgICAgc3RhY2s6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgIH0sXG4gICAgeyB0aW1lc3RhbXBzOiB7IGNyZWF0ZWRBdDogJ2NyZWF0ZWQnLCB1cGRhdGVkQXQ6ICd1cGRhdGVkJyB9IH1cbik7XG5cbmNvbnN0IEVycm9yUmVjb3JkID0gbW9uZ29vc2UubW9kZWwoJ2Vycm9yX3JlY29yZCcsIEVycm9yUmVjb3JkU2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgRXJyb3JSZWNvcmQ7XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJTY2hlbWEiLCJFcnJvclJlY29yZFNjaGVtYSIsIm1lc3NhZ2UiLCJ0eXBlIiwiU3RyaW5nIiwiZGVmYXVsdCIsImNvZGUiLCJtZXRob2QiLCJwYXRoIiwicGFyYW0iLCJUeXBlcyIsIk1peGVkIiwidXNlcm5hbWUiLCJzdGFjayIsInRpbWVzdGFtcHMiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJFcnJvclJlY29yZCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/model/ErrorRecord.js\n\n}");

/***/ }),

/***/ "./src/model/Links.js":
/*!****************************!*\
  !*** ./src/model/Links.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/DBHelpler */ \"./src/config/DBHelpler.js\");\n\nconst LinksSchema = new _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema({\n  title: {\n    type: String,\n    default: ''\n  },\n  link: {\n    type: String,\n    default: ''\n  },\n  type: {\n    type: String,\n    default: 'link'\n  },\n  isTop: {\n    type: String,\n    default: ''\n  },\n  sort: {\n    type: String,\n    default: ''\n  }\n}, {\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nconst Links = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('links', LinksSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Links);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kZWwvTGlua3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7QUFFMUMsTUFBTUMsV0FBVyxHQUFHLElBQUlELHlEQUFRLENBQUNFLE1BQU0sQ0FDbkM7RUFDSUMsS0FBSyxFQUFFO0lBQUVDLElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBQ3BDQyxJQUFJLEVBQUU7SUFBRUgsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLE9BQU8sRUFBRTtFQUFHLENBQUM7RUFDbkNGLElBQUksRUFBRTtJQUFFQSxJQUFJLEVBQUVDLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQU8sQ0FBQztFQUN2Q0UsS0FBSyxFQUFFO0lBQUVKLElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBQ3BDRyxJQUFJLEVBQUU7SUFBRUwsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLE9BQU8sRUFBRTtFQUFHO0FBQ3RDLENBQUMsRUFDRDtFQUFFSSxVQUFVLEVBQUU7SUFBRUMsU0FBUyxFQUFFLFNBQVM7SUFBRUMsU0FBUyxFQUFFO0VBQVU7QUFBRSxDQUNqRSxDQUFDO0FBRUQsTUFBTUMsS0FBSyxHQUFHYix5REFBUSxDQUFDYyxLQUFLLENBQUMsT0FBTyxFQUFFYixXQUFXLENBQUM7QUFFbEQsaUVBQWVZLEtBQUsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvbW9kZWwvTGlua3MuanM/ZTMxMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnQC9jb25maWcvREJIZWxwbGVyJztcblxuY29uc3QgTGlua3NTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICAgIHtcbiAgICAgICAgdGl0bGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgICAgICBsaW5rOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcbiAgICAgICAgdHlwZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdsaW5rJyB9LFxuICAgICAgICBpc1RvcDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXG4gICAgICAgIHNvcnQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9XG4gICAgfSxcbiAgICB7IHRpbWVzdGFtcHM6IHsgY3JlYXRlZEF0OiAnY3JlYXRlZCcsIHVwZGF0ZWRBdDogJ3VwZGF0ZWQnIH0gfVxuKTtcblxuY29uc3QgTGlua3MgPSBtb25nb29zZS5tb2RlbCgnbGlua3MnLCBMaW5rc1NjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IExpbmtzO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiTGlua3NTY2hlbWEiLCJTY2hlbWEiLCJ0aXRsZSIsInR5cGUiLCJTdHJpbmciLCJkZWZhdWx0IiwibGluayIsImlzVG9wIiwic29ydCIsInRpbWVzdGFtcHMiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJMaW5rcyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/model/Links.js\n\n}");

/***/ }),

/***/ "./src/model/Menus.js":
/*!****************************!*\
  !*** ./src/model/Menus.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/DBHelpler */ \"./src/config/DBHelpler.js\");\n\nconst Schema = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema;\nconst MenuSchema = new Schema({\n  title: {\n    type: String,\n    default: ''\n  },\n  name: {\n    type: String,\n    default: ''\n  },\n  path: {\n    type: String,\n    default: ''\n  },\n  component: {\n    type: String,\n    default: ''\n  },\n  hideInBread: {\n    type: Boolean,\n    default: false\n  },\n  hideInMenu: {\n    type: Boolean,\n    default: false\n  },\n  notCache: {\n    type: Boolean,\n    default: false\n  },\n  icon: {\n    type: String,\n    default: ''\n  },\n  sort: {\n    type: String,\n    default: 0\n  },\n  link: {\n    type: String,\n    default: ''\n  },\n  redirect: {\n    type: String,\n    default: ''\n  },\n  type: {\n    type: String,\n    default: 'menu'\n  },\n  // 配合tree组件，展开对应的树形结构\n  expand: {\n    type: Boolean,\n    default: true\n  }\n});\nconst OperationSchema = new Schema({\n  name: {\n    type: String,\n    default: ''\n  },\n  type: {\n    type: String,\n    default: ''\n  },\n  method: {\n    type: String,\n    default: ''\n  },\n  path: {\n    type: String,\n    default: ''\n  },\n  regmark: {\n    type: String,\n    default: ''\n  }\n});\nMenuSchema.add({\n  children: [MenuSchema],\n  operations: [OperationSchema]\n});\nconst Menus = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('menus', MenuSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Menus);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kZWwvTWVudXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7QUFFMUMsTUFBTUMsTUFBTSxHQUFHRCx5REFBUSxDQUFDQyxNQUFNO0FBRTlCLE1BQU1DLFVBQVUsR0FBRyxJQUFJRCxNQUFNLENBQUM7RUFDMUJFLEtBQUssRUFBRTtJQUFFQyxJQUFJLEVBQUVDLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQUcsQ0FBQztFQUNwQ0MsSUFBSSxFQUFFO0lBQUVILElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBQ25DRSxJQUFJLEVBQUU7SUFBRUosSUFBSSxFQUFFQyxNQUFNO0lBQUVDLE9BQU8sRUFBRTtFQUFHLENBQUM7RUFDbkNHLFNBQVMsRUFBRTtJQUFFTCxJQUFJLEVBQUVDLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQUcsQ0FBQztFQUN4Q0ksV0FBVyxFQUFFO0lBQUVOLElBQUksRUFBRU8sT0FBTztJQUFFTCxPQUFPLEVBQUU7RUFBTSxDQUFDO0VBQzlDTSxVQUFVLEVBQUU7SUFBRVIsSUFBSSxFQUFFTyxPQUFPO0lBQUVMLE9BQU8sRUFBRTtFQUFNLENBQUM7RUFDN0NPLFFBQVEsRUFBRTtJQUFFVCxJQUFJLEVBQUVPLE9BQU87SUFBRUwsT0FBTyxFQUFFO0VBQU0sQ0FBQztFQUMzQ1EsSUFBSSxFQUFFO0lBQUVWLElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBQ25DUyxJQUFJLEVBQUU7SUFBRVgsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLE9BQU8sRUFBRTtFQUFFLENBQUM7RUFDbENVLElBQUksRUFBRTtJQUFFWixJQUFJLEVBQUVDLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQUcsQ0FBQztFQUNuQ1csUUFBUSxFQUFFO0lBQUViLElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBQ3ZDRixJQUFJLEVBQUU7SUFBRUEsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLE9BQU8sRUFBRTtFQUFPLENBQUM7RUFDdkM7RUFDQVksTUFBTSxFQUFFO0lBQUVkLElBQUksRUFBRU8sT0FBTztJQUFFTCxPQUFPLEVBQUU7RUFBSztBQUMzQyxDQUFDLENBQUM7QUFFRixNQUFNYSxlQUFlLEdBQUcsSUFBSWxCLE1BQU0sQ0FBQztFQUMvQk0sSUFBSSxFQUFFO0lBQUVILElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBQ25DRixJQUFJLEVBQUU7SUFBRUEsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLE9BQU8sRUFBRTtFQUFHLENBQUM7RUFDbkNjLE1BQU0sRUFBRTtJQUFFaEIsSUFBSSxFQUFFQyxNQUFNO0lBQUVDLE9BQU8sRUFBRTtFQUFHLENBQUM7RUFDckNFLElBQUksRUFBRTtJQUFFSixJQUFJLEVBQUVDLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQUcsQ0FBQztFQUNuQ2UsT0FBTyxFQUFFO0lBQUVqQixJQUFJLEVBQUVDLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQUc7QUFDekMsQ0FBQyxDQUFDO0FBRUZKLFVBQVUsQ0FBQ29CLEdBQUcsQ0FBQztFQUNYQyxRQUFRLEVBQUUsQ0FBQ3JCLFVBQVUsQ0FBQztFQUN0QnNCLFVBQVUsRUFBRSxDQUFDTCxlQUFlO0FBQ2hDLENBQUMsQ0FBQztBQUVGLE1BQU1NLEtBQUssR0FBR3pCLHlEQUFRLENBQUMwQixLQUFLLENBQUMsT0FBTyxFQUFFeEIsVUFBVSxDQUFDO0FBRWpELGlFQUFldUIsS0FBSyIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9tb2RlbC9NZW51cy5qcz80Y2E0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdAL2NvbmZpZy9EQkhlbHBsZXInO1xuXG5jb25zdCBTY2hlbWEgPSBtb25nb29zZS5TY2hlbWE7XG5cbmNvbnN0IE1lbnVTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgICB0aXRsZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXG4gICAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXG4gICAgcGF0aDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXG4gICAgY29tcG9uZW50OiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcbiAgICBoaWRlSW5CcmVhZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgIGhpZGVJbk1lbnU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbiAgICBub3RDYWNoZTogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICAgIGljb246IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgIHNvcnQ6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAwIH0sXG4gICAgbGluazogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0sXG4gICAgcmVkaXJlY3Q6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgIHR5cGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnbWVudScgfSxcbiAgICAvLyDphY3lkIh0cmVl57uE5Lu277yM5bGV5byA5a+55bqU55qE5qCR5b2i57uT5p6EXG4gICAgZXhwYW5kOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IHRydWUgfSxcbn0pO1xuXG5jb25zdCBPcGVyYXRpb25TY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgICBuYW1lOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcbiAgICB0eXBlOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcbiAgICBtZXRob2Q6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgIHBhdGg6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgIHJlZ21hcms6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxufSk7XG5cbk1lbnVTY2hlbWEuYWRkKHtcbiAgICBjaGlsZHJlbjogW01lbnVTY2hlbWFdLFxuICAgIG9wZXJhdGlvbnM6IFtPcGVyYXRpb25TY2hlbWFdLFxufSk7XG5cbmNvbnN0IE1lbnVzID0gbW9uZ29vc2UubW9kZWwoJ21lbnVzJywgTWVudVNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IE1lbnVzO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiTWVudVNjaGVtYSIsInRpdGxlIiwidHlwZSIsIlN0cmluZyIsImRlZmF1bHQiLCJuYW1lIiwicGF0aCIsImNvbXBvbmVudCIsImhpZGVJbkJyZWFkIiwiQm9vbGVhbiIsImhpZGVJbk1lbnUiLCJub3RDYWNoZSIsImljb24iLCJzb3J0IiwibGluayIsInJlZGlyZWN0IiwiZXhwYW5kIiwiT3BlcmF0aW9uU2NoZW1hIiwibWV0aG9kIiwicmVnbWFyayIsImFkZCIsImNoaWxkcmVuIiwib3BlcmF0aW9ucyIsIk1lbnVzIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/model/Menus.js\n\n}");

/***/ }),

/***/ "./src/model/Post.js":
/*!***************************!*\
  !*** ./src/model/Post.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/DBHelpler */ \"./src/config/DBHelpler.js\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// import Comments from './Comments';\n// import UserCollect from './UserCollect';\n// import PostHistory from './PostHistory';\n\nconst PostSchema = new _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema({\n  uid: {\n    type: String,\n    ref: 'users'\n  },\n  title: {\n    type: String\n  },\n  content: {\n    type: String\n  },\n  catalog: {\n    type: String\n  },\n  fav: {\n    type: String\n  },\n  isEnd: {\n    type: String,\n    default: '0'\n  },\n  reads: {\n    type: Number,\n    default: 0\n  },\n  answer: {\n    type: Number,\n    default: 0\n  },\n  status: {\n    type: String,\n    default: '0'\n  },\n  isTop: {\n    type: String,\n    default: '0'\n  },\n  sort: {\n    type: String,\n    default: 100\n  },\n  tags: {\n    type: Array,\n    default: [\n      // {\n      //   name: '',\n      //   class: ''\n      // }\n    ]\n  }\n}, {\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nPostSchema.virtual('user', {\n  ref: 'users',\n  localField: 'uid',\n  foreignField: '_id'\n});\nPostSchema.statics = {\n  /**\n   * 获取文章列表数据\n   * @param {Object} options 筛选条件\n   * @param {String} sort 排序方式\n   * @param {Number} page 分页页数\n   * @param {Number} limit 分页条数\n   */\n  getList: function (options, sort, page, limit) {\n    return this.find(options).sort({\n      [sort]: -1\n    }).skip(page * limit).limit(limit).populate({\n      path: 'uid',\n      select: 'name isVip pic'\n    });\n  },\n  countList: function (options) {\n    return this.find(options).countDocuments();\n  },\n  getTopWeek: function () {\n    return this.find({\n      created: {\n        $gte: dayjs__WEBPACK_IMPORTED_MODULE_1___default()().subtract(7, 'days')\n      }\n    }, {\n      answer: 1,\n      title: 1\n    }).sort({\n      answer: -1\n    }).limit(15);\n  },\n  findByTid: function (id) {\n    return this.findOne({\n      _id: id\n    }).populate({\n      path: 'uid',\n      select: 'name pic isVip _id'\n    });\n  },\n  getListByUid: function (id, page, limit) {\n    return this.find({\n      uid: id\n    }).skip(page * limit).limit(limit).sort({\n      created: -1\n    });\n  },\n  queryCount: function (options) {\n    return this.find(options).countDocuments();\n  },\n  countByUid: function (id) {\n    return this.find({\n      uid: id\n    }).countDocuments();\n  },\n  getHotPost: function (page, limit, start, end) {\n    let query = {};\n    if (start !== '' && end !== '') {\n      query = {\n        created: {\n          $gte: start,\n          $lt: end\n        }\n      };\n    }\n    return this.find(query).skip(limit * page).limit(limit).sort({\n      answer: -1\n    });\n  },\n  getHotPostCount: function (page, limit, start, end) {\n    let query = {};\n    if (start !== '' && end !== '') {\n      query = {\n        created: {\n          $gte: start,\n          $lt: end\n        }\n      };\n    }\n    return this.find(query).countDocuments();\n  },\n  findByPostId: function (id) {\n    return this.findOne({\n      _id: id\n    }).populate({\n      path: 'uid',\n      select: 'name pic isVip _id openid'\n    });\n  },\n  // 获取 num 天以内的热门评论\n  getTopByDay: function (num, skip) {\n    const querryOption = num ? {\n      created: {\n        $gte: dayjs__WEBPACK_IMPORTED_MODULE_1___default()().subtract(num, 'days')\n      }\n    } : {};\n    return this.find(querryOption, {\n      answer: 1,\n      title: 1,\n      _id: 1\n    }).sort({\n      answer: -1\n    }).skip(skip * 15).limit(15);\n  },\n  // 根据uid查询发帖，可选参数：catalog-帖子类别\n  queryByUserId: function (uid, limit, pageSize, catalog) {\n    const option = {\n      uid\n    };\n    catalog && (option.catalog = catalog);\n    return this.find(option).sort({\n      created: -1\n    }).skip(limit * (pageSize - 1)).limit(limit);\n  },\n  // 删除帖子，先删除该帖子相关的评论、收藏、浏览历史\n  deleteManyAndRef: async function (conditions) {\n    const postList = await this.find(conditions);\n    console.assert(postList.length > 0, '未找到要删除的 post 文档！');\n    for (let i = 0; i < postList.length; i++) {\n      // await Comments.deleteManyAndRef({ tid: postList[i]._id });\n      // await UserCollect.deleteByPostId(postList[i]._id);\n      // await PostHistory.deleteByPostId(postList[i]._id);\n    }\n    return this.deleteMany(conditions);\n  }\n};\nconst PostModel = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('post', PostSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (PostModel);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHSixRQUFRLENBQUNHLE1BQU0sRUFBRUMsQ0FBQyxFQUFFLEVBQUU7TUFDdEM7TUFDQTtNQUNBO0lBQUE7SUFFSixPQUFPLElBQUksQ0FBQ0MsVUFBVSxDQUFDTixVQUFVLENBQUM7RUFDdEM7QUFDSixDQUFDO0FBRUQsTUFBTU8sU0FBUyxHQUFHeEUseURBQVEsQ0FBQ3lFLEtBQUssQ0FBQyxNQUFNLEVBQUV2RSxVQUFVLENBQUM7QUFFcEQsaUVBQWVzRSxTQUFTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL21vZGVsL1Bvc3QuanM/NTljNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnQC9jb25maWcvREJIZWxwbGVyJztcbmltcG9ydCBtb21lbnQgZnJvbSAnZGF5anMnO1xuLy8gaW1wb3J0IENvbW1lbnRzIGZyb20gJy4vQ29tbWVudHMnO1xuLy8gaW1wb3J0IFVzZXJDb2xsZWN0IGZyb20gJy4vVXNlckNvbGxlY3QnO1xuLy8gaW1wb3J0IFBvc3RIaXN0b3J5IGZyb20gJy4vUG9zdEhpc3RvcnknO1xuXG5jb25zdCBQb3N0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAgICB7XG4gICAgICAgIHVpZDogeyB0eXBlOiBTdHJpbmcsIHJlZjogJ3VzZXJzJyB9LFxuICAgICAgICB0aXRsZTogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICAgICAgY29udGVudDogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICAgICAgY2F0YWxvZzogeyB0eXBlOiBTdHJpbmcgfSxcbiAgICAgICAgZmF2OiB7IHR5cGU6IFN0cmluZyB9LFxuICAgICAgICBpc0VuZDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcwJyB9LFxuICAgICAgICByZWFkczogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgICAgICAgYW5zd2VyOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICAgICAgICBzdGF0dXM6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnMCcgfSxcbiAgICAgICAgaXNUb3A6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnMCcgfSxcbiAgICAgICAgc29ydDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6IDEwMCB9LFxuICAgICAgICB0YWdzOiB7XG4gICAgICAgICAgICB0eXBlOiBBcnJheSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtcbiAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgLy8gICBuYW1lOiAnJyxcbiAgICAgICAgICAgICAgICAvLyAgIGNsYXNzOiAnJ1xuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB7IHRpbWVzdGFtcHM6IHsgY3JlYXRlZEF0OiAnY3JlYXRlZCcsIHVwZGF0ZWRBdDogJ3VwZGF0ZWQnIH0gfVxuKTtcblxuUG9zdFNjaGVtYS52aXJ0dWFsKCd1c2VyJywge1xuICAgIHJlZjogJ3VzZXJzJyxcbiAgICBsb2NhbEZpZWxkOiAndWlkJyxcbiAgICBmb3JlaWduRmllbGQ6ICdfaWQnLFxufSk7XG5cblBvc3RTY2hlbWEuc3RhdGljcyA9IHtcbiAgICAvKipcbiAgICAgKiDojrflj5bmlofnq6DliJfooajmlbDmja5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyDnrZvpgInmnaHku7ZcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc29ydCDmjpLluo/mlrnlvI9cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcGFnZSDliIbpobXpobXmlbBcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbGltaXQg5YiG6aG15p2h5pWwXG4gICAgICovXG4gICAgZ2V0TGlzdDogZnVuY3Rpb24gKG9wdGlvbnMsIHNvcnQsIHBhZ2UsIGxpbWl0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQob3B0aW9ucylcbiAgICAgICAgICAgIC5zb3J0KHsgW3NvcnRdOiAtMSB9KVxuICAgICAgICAgICAgLnNraXAocGFnZSAqIGxpbWl0KVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KVxuICAgICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICBwYXRoOiAndWlkJyxcbiAgICAgICAgICAgICAgICBzZWxlY3Q6ICduYW1lIGlzVmlwIHBpYycsXG4gICAgICAgICAgICB9KTtcbiAgICB9LFxuICAgIGNvdW50TGlzdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZChvcHRpb25zKS5jb3VudERvY3VtZW50cygpO1xuICAgIH0sXG4gICAgZ2V0VG9wV2VlazogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgJGd0ZTogbW9tZW50KCkuc3VidHJhY3QoNywgJ2RheXMnKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhbnN3ZXI6IDEsXG4gICAgICAgICAgICAgICAgdGl0bGU6IDEsXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgICAgIC5zb3J0KHsgYW5zd2VyOiAtMSB9KVxuICAgICAgICAgICAgLmxpbWl0KDE1KTtcbiAgICB9LFxuICAgIGZpbmRCeVRpZDogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRPbmUoeyBfaWQ6IGlkIH0pLnBvcHVsYXRlKHtcbiAgICAgICAgICAgIHBhdGg6ICd1aWQnLFxuICAgICAgICAgICAgc2VsZWN0OiAnbmFtZSBwaWMgaXNWaXAgX2lkJyxcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRMaXN0QnlVaWQ6IGZ1bmN0aW9uIChpZCwgcGFnZSwgbGltaXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZCh7IHVpZDogaWQgfSlcbiAgICAgICAgICAgIC5za2lwKHBhZ2UgKiBsaW1pdClcbiAgICAgICAgICAgIC5saW1pdChsaW1pdClcbiAgICAgICAgICAgIC5zb3J0KHsgY3JlYXRlZDogLTEgfSk7XG4gICAgfSxcbiAgICBxdWVyeUNvdW50OiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKG9wdGlvbnMpLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgfSxcbiAgICBjb3VudEJ5VWlkOiBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZCh7IHVpZDogaWQgfSkuY291bnREb2N1bWVudHMoKTtcbiAgICB9LFxuICAgIGdldEhvdFBvc3Q6IGZ1bmN0aW9uIChwYWdlLCBsaW1pdCwgc3RhcnQsIGVuZCkge1xuICAgICAgICBsZXQgcXVlcnkgPSB7fTtcbiAgICAgICAgaWYgKHN0YXJ0ICE9PSAnJyAmJiBlbmQgIT09ICcnKSB7XG4gICAgICAgICAgICBxdWVyeSA9IHsgY3JlYXRlZDogeyAkZ3RlOiBzdGFydCwgJGx0OiBlbmQgfSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQocXVlcnkpXG4gICAgICAgICAgICAuc2tpcChsaW1pdCAqIHBhZ2UpXG4gICAgICAgICAgICAubGltaXQobGltaXQpXG4gICAgICAgICAgICAuc29ydCh7IGFuc3dlcjogLTEgfSk7XG4gICAgfSxcbiAgICBnZXRIb3RQb3N0Q291bnQ6IGZ1bmN0aW9uIChwYWdlLCBsaW1pdCwgc3RhcnQsIGVuZCkge1xuICAgICAgICBsZXQgcXVlcnkgPSB7fTtcbiAgICAgICAgaWYgKHN0YXJ0ICE9PSAnJyAmJiBlbmQgIT09ICcnKSB7XG4gICAgICAgICAgICBxdWVyeSA9IHsgY3JlYXRlZDogeyAkZ3RlOiBzdGFydCwgJGx0OiBlbmQgfSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQocXVlcnkpLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgfSxcbiAgICBmaW5kQnlQb3N0SWQ6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kT25lKHsgX2lkOiBpZCB9KS5wb3B1bGF0ZSh7XG4gICAgICAgICAgICBwYXRoOiAndWlkJyxcbiAgICAgICAgICAgIHNlbGVjdDogJ25hbWUgcGljIGlzVmlwIF9pZCBvcGVuaWQnLFxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIOiOt+WPliBudW0g5aSp5Lul5YaF55qE54Ot6Zeo6K+E6K66XG4gICAgZ2V0VG9wQnlEYXk6IGZ1bmN0aW9uIChudW0sIHNraXApIHtcbiAgICAgICAgY29uc3QgcXVlcnJ5T3B0aW9uID0gbnVtID8geyBjcmVhdGVkOiB7ICRndGU6IG1vbWVudCgpLnN1YnRyYWN0KG51bSwgJ2RheXMnKSB9IH0gOiB7fTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZChxdWVycnlPcHRpb24sIHsgYW5zd2VyOiAxLCB0aXRsZTogMSwgX2lkOiAxIH0pXG4gICAgICAgICAgICAuc29ydCh7IGFuc3dlcjogLTEgfSlcbiAgICAgICAgICAgIC5za2lwKHNraXAgKiAxNSlcbiAgICAgICAgICAgIC5saW1pdCgxNSk7XG4gICAgfSxcbiAgICAvLyDmoLnmja51aWTmn6Xor6Llj5HluJbvvIzlj6/pgInlj4LmlbDvvJpjYXRhbG9nLeW4luWtkOexu+WIq1xuICAgIHF1ZXJ5QnlVc2VySWQ6IGZ1bmN0aW9uICh1aWQsIGxpbWl0LCBwYWdlU2l6ZSwgY2F0YWxvZykge1xuICAgICAgICBjb25zdCBvcHRpb24gPSB7IHVpZCB9O1xuICAgICAgICBjYXRhbG9nICYmIChvcHRpb24uY2F0YWxvZyA9IGNhdGFsb2cpO1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKG9wdGlvbilcbiAgICAgICAgICAgIC5zb3J0KHsgY3JlYXRlZDogLTEgfSlcbiAgICAgICAgICAgIC5za2lwKGxpbWl0ICogKHBhZ2VTaXplIC0gMSkpXG4gICAgICAgICAgICAubGltaXQobGltaXQpO1xuICAgIH0sXG4gICAgLy8g5Yig6Zmk5biW5a2Q77yM5YWI5Yig6Zmk6K+l5biW5a2Q55u45YWz55qE6K+E6K6644CB5pS26JeP44CB5rWP6KeI5Y6G5Y+yXG4gICAgZGVsZXRlTWFueUFuZFJlZjogYXN5bmMgZnVuY3Rpb24gKGNvbmRpdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcG9zdExpc3QgPSBhd2FpdCB0aGlzLmZpbmQoY29uZGl0aW9ucyk7XG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KHBvc3RMaXN0Lmxlbmd0aCA+IDAsICfmnKrmib7liLDopoHliKDpmaTnmoQgcG9zdCDmlofmoaPvvIEnKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb3N0TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gYXdhaXQgQ29tbWVudHMuZGVsZXRlTWFueUFuZFJlZih7IHRpZDogcG9zdExpc3RbaV0uX2lkIH0pO1xuICAgICAgICAgICAgLy8gYXdhaXQgVXNlckNvbGxlY3QuZGVsZXRlQnlQb3N0SWQocG9zdExpc3RbaV0uX2lkKTtcbiAgICAgICAgICAgIC8vIGF3YWl0IFBvc3RIaXN0b3J5LmRlbGV0ZUJ5UG9zdElkKHBvc3RMaXN0W2ldLl9pZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZGVsZXRlTWFueShjb25kaXRpb25zKTtcbiAgICB9LFxufTtcblxuY29uc3QgUG9zdE1vZGVsID0gbW9uZ29vc2UubW9kZWwoJ3Bvc3QnLCBQb3N0U2NoZW1hKTtcblxuZXhwb3J0IGRlZmF1bHQgUG9zdE1vZGVsO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwibW9tZW50IiwiUG9zdFNjaGVtYSIsIlNjaGVtYSIsInVpZCIsInR5cGUiLCJTdHJpbmciLCJyZWYiLCJ0aXRsZSIsImNvbnRlbnQiLCJjYXRhbG9nIiwiZmF2IiwiaXNFbmQiLCJkZWZhdWx0IiwicmVhZHMiLCJOdW1iZXIiLCJhbnN3ZXIiLCJzdGF0dXMiLCJpc1RvcCIsInNvcnQiLCJ0YWdzIiwiQXJyYXkiLCJ0aW1lc3RhbXBzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwidmlydHVhbCIsImxvY2FsRmllbGQiLCJmb3JlaWduRmllbGQiLCJzdGF0aWNzIiwiZ2V0TGlzdCIsIm9wdGlvbnMiLCJwYWdlIiwibGltaXQiLCJmaW5kIiwic2tpcCIsInBvcHVsYXRlIiwicGF0aCIsInNlbGVjdCIsImNvdW50TGlzdCIsImNvdW50RG9jdW1lbnRzIiwiZ2V0VG9wV2VlayIsImNyZWF0ZWQiLCIkZ3RlIiwic3VidHJhY3QiLCJmaW5kQnlUaWQiLCJpZCIsImZpbmRPbmUiLCJfaWQiLCJnZXRMaXN0QnlVaWQiLCJxdWVyeUNvdW50IiwiY291bnRCeVVpZCIsImdldEhvdFBvc3QiLCJzdGFydCIsImVuZCIsInF1ZXJ5IiwiJGx0IiwiZ2V0SG90UG9zdENvdW50IiwiZmluZEJ5UG9zdElkIiwiZ2V0VG9wQnlEYXkiLCJudW0iLCJxdWVycnlPcHRpb24iLCJxdWVyeUJ5VXNlcklkIiwicGFnZVNpemUiLCJvcHRpb24iLCJkZWxldGVNYW55QW5kUmVmIiwiY29uZGl0aW9ucyIsInBvc3RMaXN0IiwiY29uc29sZSIsImFzc2VydCIsImxlbmd0aCIsImkiLCJkZWxldGVNYW55IiwiUG9zdE1vZGVsIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/model/Post.js\n\n}");

/***/ }),

/***/ "./src/model/PostTags.js":
/*!*******************************!*\
  !*** ./src/model/PostTags.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/DBHelpler */ \"./src/config/DBHelpler.js\");\n\nconst Schema = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema;\nconst PostTagsSchema = new Schema({\n  tagName: {\n    type: String,\n    default: ''\n  },\n  tagClass: {\n    type: String,\n    default: ''\n  }\n}, {\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nPostTagsSchema.statics = {\n  getList: function (options, page, limit) {\n    return this.find(options).skip(page * limit).limit(limit).sort({\n      created: -1\n    });\n  },\n  countList: function (options) {\n    return this.find(options).countDocuments();\n  }\n};\nconst Links = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('post_tags', PostTagsSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Links);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kZWwvUG9zdFRhZ3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7QUFFMUMsTUFBTUMsTUFBTSxHQUFHRCx5REFBUSxDQUFDQyxNQUFNO0FBRTlCLE1BQU1DLGNBQWMsR0FBRyxJQUFJRCxNQUFNLENBQzdCO0VBQ0lFLE9BQU8sRUFBRTtJQUFFQyxJQUFJLEVBQUVDLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQUcsQ0FBQztFQUN0Q0MsUUFBUSxFQUFFO0lBQUVILElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRztBQUMxQyxDQUFDLEVBQ0Q7RUFBRUUsVUFBVSxFQUFFO0lBQUVDLFNBQVMsRUFBRSxTQUFTO0lBQUVDLFNBQVMsRUFBRTtFQUFVO0FBQUUsQ0FDakUsQ0FBQztBQUVEUixjQUFjLENBQUNTLE9BQU8sR0FBRztFQUNyQkMsT0FBTyxFQUFFLFNBQUFBLENBQVVDLE9BQU8sRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUU7SUFDckMsT0FBTyxJQUFJLENBQUNDLElBQUksQ0FBQ0gsT0FBTyxDQUFDLENBQ3BCSSxJQUFJLENBQUNILElBQUksR0FBR0MsS0FBSyxDQUFDLENBQ2xCQSxLQUFLLENBQUNBLEtBQUssQ0FBQyxDQUNaRyxJQUFJLENBQUM7TUFBRUMsT0FBTyxFQUFFLENBQUM7SUFBRSxDQUFDLENBQUM7RUFDOUIsQ0FBQztFQUNEQyxTQUFTLEVBQUUsU0FBQUEsQ0FBVVAsT0FBTyxFQUFFO0lBQzFCLE9BQU8sSUFBSSxDQUFDRyxJQUFJLENBQUNILE9BQU8sQ0FBQyxDQUFDUSxjQUFjLENBQUMsQ0FBQztFQUM5QztBQUNKLENBQUM7QUFFRCxNQUFNQyxLQUFLLEdBQUd0Qix5REFBUSxDQUFDdUIsS0FBSyxDQUFDLFdBQVcsRUFBRXJCLGNBQWMsQ0FBQztBQUV6RCxpRUFBZW9CLEtBQUsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvbW9kZWwvUG9zdFRhZ3MuanM/Y2ZjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnQC9jb25maWcvREJIZWxwbGVyJztcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xuXG5jb25zdCBQb3N0VGFnc1NjaGVtYSA9IG5ldyBTY2hlbWEoXG4gICAge1xuICAgICAgICB0YWdOYW1lOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcbiAgICAgICAgdGFnQ2xhc3M6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgIH0sXG4gICAgeyB0aW1lc3RhbXBzOiB7IGNyZWF0ZWRBdDogJ2NyZWF0ZWQnLCB1cGRhdGVkQXQ6ICd1cGRhdGVkJyB9IH1cbik7XG5cblBvc3RUYWdzU2NoZW1hLnN0YXRpY3MgPSB7XG4gICAgZ2V0TGlzdDogZnVuY3Rpb24gKG9wdGlvbnMsIHBhZ2UsIGxpbWl0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQob3B0aW9ucylcbiAgICAgICAgICAgIC5za2lwKHBhZ2UgKiBsaW1pdClcbiAgICAgICAgICAgIC5saW1pdChsaW1pdClcbiAgICAgICAgICAgIC5zb3J0KHsgY3JlYXRlZDogLTEgfSk7XG4gICAgfSxcbiAgICBjb3VudExpc3Q6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQob3B0aW9ucykuY291bnREb2N1bWVudHMoKTtcbiAgICB9LFxufTtcblxuY29uc3QgTGlua3MgPSBtb25nb29zZS5tb2RlbCgncG9zdF90YWdzJywgUG9zdFRhZ3NTY2hlbWEpO1xuXG5leHBvcnQgZGVmYXVsdCBMaW5rcztcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNjaGVtYSIsIlBvc3RUYWdzU2NoZW1hIiwidGFnTmFtZSIsInR5cGUiLCJTdHJpbmciLCJkZWZhdWx0IiwidGFnQ2xhc3MiLCJ0aW1lc3RhbXBzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwic3RhdGljcyIsImdldExpc3QiLCJvcHRpb25zIiwicGFnZSIsImxpbWl0IiwiZmluZCIsInNraXAiLCJzb3J0IiwiY3JlYXRlZCIsImNvdW50TGlzdCIsImNvdW50RG9jdW1lbnRzIiwiTGlua3MiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/model/PostTags.js\n\n}");

/***/ }),

/***/ "./src/model/Roles.js":
/*!****************************!*\
  !*** ./src/model/Roles.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/config/DBHelpler */ \"./src/config/DBHelpler.js\");\n\nconst Schema = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema;\nconst RolesSchema = new Schema({\n  name: {\n    type: String,\n    default: ''\n  },\n  role: {\n    type: String,\n    default: ''\n  },\n  desc: {\n    type: String,\n    default: ''\n  },\n  menu: {\n    type: Array,\n    default: []\n  }\n});\nconst Roles = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('roles', RolesSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Roles);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbW9kZWwvUm9sZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7QUFFMUMsTUFBTUMsTUFBTSxHQUFHRCx5REFBUSxDQUFDQyxNQUFNO0FBRTlCLE1BQU1DLFdBQVcsR0FBRyxJQUFJRCxNQUFNLENBQUM7RUFDM0JFLElBQUksRUFBRTtJQUFFQyxJQUFJLEVBQUVDLE1BQU07SUFBRUMsT0FBTyxFQUFFO0VBQUcsQ0FBQztFQUNuQ0MsSUFBSSxFQUFFO0lBQUVILElBQUksRUFBRUMsTUFBTTtJQUFFQyxPQUFPLEVBQUU7RUFBRyxDQUFDO0VBQ25DRSxJQUFJLEVBQUU7SUFBRUosSUFBSSxFQUFFQyxNQUFNO0lBQUVDLE9BQU8sRUFBRTtFQUFHLENBQUM7RUFDbkNHLElBQUksRUFBRTtJQUFFTCxJQUFJLEVBQUVNLEtBQUs7SUFBRUosT0FBTyxFQUFFO0VBQUc7QUFDckMsQ0FBQyxDQUFDO0FBRUYsTUFBTUssS0FBSyxHQUFHWCx5REFBUSxDQUFDWSxLQUFLLENBQUMsT0FBTyxFQUFFVixXQUFXLENBQUM7QUFFbEQsaUVBQWVTLEtBQUsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvbW9kZWwvUm9sZXMuanM/NTFjYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnQC9jb25maWcvREJIZWxwbGVyJztcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xuXG5jb25zdCBSb2xlc1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgIHJvbGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgIGRlc2M6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgIG1lbnU6IHsgdHlwZTogQXJyYXksIGRlZmF1bHQ6IFtdIH0sXG59KTtcblxuY29uc3QgUm9sZXMgPSBtb25nb29zZS5tb2RlbCgncm9sZXMnLCBSb2xlc1NjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFJvbGVzO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiU2NoZW1hIiwiUm9sZXNTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsImRlZmF1bHQiLCJyb2xlIiwiZGVzYyIsIm1lbnUiLCJBcnJheSIsIlJvbGVzIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/model/Roles.js\n\n}");

/***/ }),

/***/ "./src/model/SignRecord.js":
/*!*********************************!*\
  !*** ./src/model/SignRecord.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/DBHelpler */ \"./src/config/DBHelpler.js\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dayjs */ \"dayjs\");\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _common_Utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../common/Utils */ \"./src/common/Utils.js\");\n\n\n\nconst SignRecordSchema = new _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema({\n  uid: {\n    type: String,\n    ref: 'users'\n  },\n  favs: {\n    type: Number\n  }\n}, {\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nSignRecordSchema.statics = {\n  findByUid: function (uid) {\n    return this.findOne({\n      uid: uid\n    }).sort({\n      created: -1\n    });\n  },\n  getLatestSign: function (page, limit) {\n    return this.find({}).populate({\n      path: 'uid',\n      select: '_id name pic'\n    }).skip(page * limit).limit(limit).sort({\n      created: -1\n    });\n  },\n  getTopSign: function (page, limit) {\n    return this.find({\n      created: {\n        $gte: dayjs__WEBPACK_IMPORTED_MODULE_1___default()().format('YYYY-MM-DD 00:00:00')\n      }\n    }).populate({\n      path: 'uid',\n      select: '_id name pic'\n    }).skip(page * limit).limit(limit).sort({\n      created: 1\n    });\n  },\n  getSignCount: function () {\n    return this.find({}).countDocuments();\n  },\n  getTopSignCount: function () {\n    return this.find({\n      created: {\n        $gte: dayjs__WEBPACK_IMPORTED_MODULE_1___default()().format('YYYY-MM-DD 00:00:00')\n      }\n    }).countDocuments();\n  },\n  isSign: function (uid) {\n    // 判断用户是否签到\n    return this.findOne({\n      uid: uid\n    }, {\n      openid: 0\n    }).sort({\n      created: -1\n    }).then(doc => {\n      return doc && (0,_common_Utils__WEBPACK_IMPORTED_MODULE_2__.isToday)(doc.created) ? 1 : 0;\n    });\n  },\n  // 取得最快签到\n  findQuickestSign: function () {\n    return this.find({\n      created: {\n        $gte: new Date(dayjs__WEBPACK_IMPORTED_MODULE_1___default()().format('YYYY-MM-DD 00:00:00'))\n      }\n    }).sort({\n      created: 1\n    }).limit(20).populate({\n      path: 'uid',\n      select: 'name pic isVip _id'\n    });\n  },\n  // 取得最新签到\n  findLastSign: function () {\n    return this.find({}).sort({\n      created: -1\n    }).limit(20).populate({\n      path: 'uid',\n      select: 'name pic isVip _id'\n    });\n  }\n};\nconst SignRecord = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('sign_record', SignRecordSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SignRecord);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7RUFDVixDQUFDO0VBQ0Q7RUFDQW1CLGdCQUFnQixFQUFFLFNBQUFBLENBQUEsRUFBWTtJQUMxQixPQUFPLElBQUksQ0FBQ2YsSUFBSSxDQUFDO01BQ2JKLE9BQU8sRUFBRTtRQUFFVSxJQUFJLEVBQUUsSUFBSVUsSUFBSSxDQUFDckMsNENBQU0sQ0FBQyxDQUFDLENBQUM0QixNQUFNLENBQUMscUJBQXFCLENBQUM7TUFBRTtJQUN0RSxDQUFDLENBQUMsQ0FDR1osSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRTtJQUFFLENBQUMsQ0FBQyxDQUNwQkcsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUNURSxRQUFRLENBQUM7TUFDTkMsSUFBSSxFQUFFLEtBQUs7TUFDWEMsTUFBTSxFQUFFO0lBQ1osQ0FBQyxDQUFDO0VBQ1YsQ0FBQztFQUNEO0VBQ0FjLFlBQVksRUFBRSxTQUFBQSxDQUFBLEVBQVk7SUFDdEIsT0FBTyxJQUFJLENBQUNqQixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQ0wsSUFBSSxDQUFDO01BQUVDLE9BQU8sRUFBRSxDQUFDO0lBQUUsQ0FBQyxDQUFDLENBQUNHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQ0UsUUFBUSxDQUFDO01BQzFEQyxJQUFJLEVBQUUsS0FBSztNQUNYQyxNQUFNLEVBQUU7SUFDWixDQUFDLENBQUM7RUFDTjtBQUNKLENBQUM7QUFFRCxNQUFNZSxVQUFVLEdBQUd4Qyx5REFBUSxDQUFDeUMsS0FBSyxDQUFDLGFBQWEsRUFBRXRDLGdCQUFnQixDQUFDO0FBRWxFLGlFQUFlcUMsVUFBVSIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9tb2RlbC9TaWduUmVjb3JkLmpzPzdjOWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJy4uL2NvbmZpZy9EQkhlbHBsZXInO1xuaW1wb3J0IG1vbWVudCBmcm9tICdkYXlqcyc7XG5pbXBvcnQgeyBpc1RvZGF5IH0gZnJvbSAnLi4vY29tbW9uL1V0aWxzJztcblxuY29uc3QgU2lnblJlY29yZFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gICAge1xuICAgICAgICB1aWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6ICd1c2VycycgfSxcbiAgICAgICAgZmF2czogeyB0eXBlOiBOdW1iZXIgfVxuICAgIH0sXG4gICAgeyB0aW1lc3RhbXBzOiB7IGNyZWF0ZWRBdDogJ2NyZWF0ZWQnLCB1cGRhdGVkQXQ6ICd1cGRhdGVkJyB9IH1cbik7XG5cblNpZ25SZWNvcmRTY2hlbWEuc3RhdGljcyA9IHtcbiAgICBmaW5kQnlVaWQ6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZE9uZSh7IHVpZDogdWlkIH0pLnNvcnQoeyBjcmVhdGVkOiAtMSB9KTtcbiAgICB9LFxuICAgIGdldExhdGVzdFNpZ246IGZ1bmN0aW9uIChwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHt9KVxuICAgICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICBwYXRoOiAndWlkJyxcbiAgICAgICAgICAgICAgICBzZWxlY3Q6ICdfaWQgbmFtZSBwaWMnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNraXAocGFnZSAqIGxpbWl0KVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KVxuICAgICAgICAgICAgLnNvcnQoeyBjcmVhdGVkOiAtMSB9KTtcbiAgICB9LFxuICAgIGdldFRvcFNpZ246IGZ1bmN0aW9uIChwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHtcbiAgICAgICAgICAgIGNyZWF0ZWQ6IHsgJGd0ZTogbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREIDAwOjAwOjAwJykgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICBwYXRoOiAndWlkJyxcbiAgICAgICAgICAgICAgICBzZWxlY3Q6ICdfaWQgbmFtZSBwaWMnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNraXAocGFnZSAqIGxpbWl0KVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KVxuICAgICAgICAgICAgLnNvcnQoeyBjcmVhdGVkOiAxIH0pO1xuICAgIH0sXG4gICAgZ2V0U2lnbkNvdW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQoe30pLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgfSxcbiAgICBnZXRUb3BTaWduQ291bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZCh7XG4gICAgICAgICAgICBjcmVhdGVkOiB7ICRndGU6IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCAwMDowMDowMCcpIH1cbiAgICAgICAgfSkuY291bnREb2N1bWVudHMoKTtcbiAgICB9LFxuICAgIGlzU2lnbjogZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICAvLyDliKTmlq3nlKjmiLfmmK/lkKbnrb7liLBcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZE9uZSh7IHVpZDogdWlkIH0sIHsgb3BlbmlkOiAwIH0pXG4gICAgICAgICAgICAuc29ydCh7IGNyZWF0ZWQ6IC0xIH0pXG4gICAgICAgICAgICAudGhlbihkb2MgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2MgJiYgaXNUb2RheShkb2MuY3JlYXRlZCkgPyAxIDogMDtcbiAgICAgICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8g5Y+W5b6X5pyA5b+r562+5YiwXG4gICAgZmluZFF1aWNrZXN0U2lnbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHtcbiAgICAgICAgICAgIGNyZWF0ZWQ6IHsgJGd0ZTogbmV3IERhdGUobW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREIDAwOjAwOjAwJykpIH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5zb3J0KHsgY3JlYXRlZDogMSB9KVxuICAgICAgICAgICAgLmxpbWl0KDIwKVxuICAgICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICBwYXRoOiAndWlkJyxcbiAgICAgICAgICAgICAgICBzZWxlY3Q6ICduYW1lIHBpYyBpc1ZpcCBfaWQnXG4gICAgICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIOWPluW+l+acgOaWsOetvuWIsFxuICAgIGZpbmRMYXN0U2lnbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHt9KS5zb3J0KHsgY3JlYXRlZDogLTEgfSkubGltaXQoMjApLnBvcHVsYXRlKHtcbiAgICAgICAgICAgIHBhdGg6ICd1aWQnLFxuICAgICAgICAgICAgc2VsZWN0OiAnbmFtZSBwaWMgaXNWaXAgX2lkJ1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5jb25zdCBTaWduUmVjb3JkID0gbW9uZ29vc2UubW9kZWwoJ3NpZ25fcmVjb3JkJywgU2lnblJlY29yZFNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFNpZ25SZWNvcmQ7XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJtb21lbnQiLCJpc1RvZGF5IiwiU2lnblJlY29yZFNjaGVtYSIsIlNjaGVtYSIsInVpZCIsInR5cGUiLCJTdHJpbmciLCJyZWYiLCJmYXZzIiwiTnVtYmVyIiwidGltZXN0YW1wcyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInN0YXRpY3MiLCJmaW5kQnlVaWQiLCJmaW5kT25lIiwic29ydCIsImNyZWF0ZWQiLCJnZXRMYXRlc3RTaWduIiwicGFnZSIsImxpbWl0IiwiZmluZCIsInBvcHVsYXRlIiwicGF0aCIsInNlbGVjdCIsInNraXAiLCJnZXRUb3BTaWduIiwiJGd0ZSIsImZvcm1hdCIsImdldFNpZ25Db3VudCIsImNvdW50RG9jdW1lbnRzIiwiZ2V0VG9wU2lnbkNvdW50IiwiaXNTaWduIiwib3BlbmlkIiwidGhlbiIsImRvYyIsImZpbmRRdWlja2VzdFNpZ24iLCJEYXRlIiwiZmluZExhc3RTaWduIiwiU2lnblJlY29yZCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/model/SignRecord.js\n\n}");

/***/ }),

/***/ "./src/model/User.js":
/*!***************************!*\
  !*** ./src/model/User.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/DBHelpler */ \"./src/config/DBHelpler.js\");\n\nconst UserSchema = new _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema({\n  username: {\n    type: String,\n    index: {\n      unique: true\n    },\n    sparse: true\n  },\n  // index 用来添加索引，保证数据的唯一性\n  password: {\n    type: String\n  },\n  name: {\n    type: String\n  },\n  // created: { type: Date },\n  // updated: { type: Date },\n  favs: {\n    type: Number,\n    default: 100\n  },\n  gender: {\n    type: String,\n    default: ''\n  },\n  roles: {\n    type: Array,\n    default: ['user']\n  },\n  pic: {\n    type: String,\n    default: '/img/logo.jpg'\n  },\n  mobile: {\n    type: String,\n    match: /^1[3-9](\\d{9})$/,\n    default: ''\n  },\n  status: {\n    type: String,\n    default: '0'\n  },\n  regmark: {\n    type: String,\n    default: ''\n  },\n  location: {\n    type: String,\n    default: ''\n  },\n  isVip: {\n    type: String,\n    default: '0'\n  },\n  count: {\n    type: Number,\n    default: 0\n  },\n  openid: {\n    type: String,\n    default: ''\n  },\n  unionid: {\n    type: String,\n    default: ''\n  } // 对于开放平台的\n}, {\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nUserSchema.post('save', function (error, doc, next) {\n  if (error.name === 'MongoError' && error.code === 11000) {\n    next(new Error('Error: Monngoose has a duplicate key.'));\n  } else {\n    next(error);\n  }\n});\nUserSchema.statics = {\n  findByID: function (id) {\n    return this.findOne({\n      _id: id\n    }, {\n      password: 0\n    });\n  },\n  getList: function (options, sort, page, limit) {\n    // 1. datepicker -> item: string, search -> array  startitme,endtime\n    // 2. radio -> key-value $in\n    // 3. select -> key-array $in\n    let query = {};\n    if (typeof options.search !== 'undefined') {\n      if (typeof options.search === 'string' && options.search.trim() !== '') {\n        if (['name', 'username'].includes(options.item)) {\n          // 模糊匹配\n          query[options.item] = {\n            $regex: new RegExp(options.search)\n          };\n          // =》 { name: { $regex: /admin/ } } => mysql like %admin%\n        } else {\n          // radio\n          query[options.item] = options.search;\n        }\n      }\n      if (options.item === 'roles') {\n        query = {\n          roles: {\n            $in: options.search\n          }\n        };\n      }\n      if (options.item === 'created') {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = {\n          created: {\n            $gte: new Date(start),\n            $lt: new Date(end)\n          }\n        };\n      }\n    }\n    return this.find(query, {\n      password: 0,\n      mobile: 0\n    }).sort({\n      [sort]: -1\n    }).skip(page * limit).limit(limit);\n  },\n  countList: function (options) {\n    let query = {};\n    if (typeof options.search !== 'undefined') {\n      if (typeof options.search === 'string' && options.search.trim() !== '') {\n        if (['name', 'username'].includes(options.item)) {\n          // 模糊匹配\n          query[options.item] = {\n            $regex: new RegExp(options.search)\n          };\n          // =》 { name: { $regex: /admin/ } } => mysql like %admin%\n        } else {\n          // radio\n          query[options.item] = options.search;\n        }\n      }\n      if (options.item === 'roles') {\n        query = {\n          roles: {\n            $in: options.search\n          }\n        };\n      }\n      if (options.item === 'created') {\n        const start = options.search[0];\n        const end = options.search[1];\n        query = {\n          created: {\n            $gte: new Date(start),\n            $lt: new Date(end)\n          }\n        };\n      }\n    }\n    return this.find(query).countDocuments();\n  },\n  getTotalSign: function (page, limit) {\n    return this.find({\n      count: {\n        $gt: 0\n      }\n    }).skip(page * limit).limit(limit).sort({\n      count: -1\n    });\n  },\n  getTotalSignCount: function (page, limit) {\n    return this.find({\n      count: {\n        $gt: 0\n      }\n    }).countDocuments();\n  },\n  getFavs: function (uid) {\n    // 查询用户积分\n    return this.findOne({\n      _id: uid\n    }, {\n      favs: 1\n    }).then(res => {\n      return res.favs;\n    });\n  },\n  // 通过 unionid 查找用户，如果没有找到就创建一个\n  findOrCreateByUnionid: function (wxUserInfo) {\n    return this.findOne({\n      unionid: wxUserInfo.unionId\n    }, {\n      unionid: 0,\n      password: 0\n    }).then(user => {\n      return user || this.create({\n        openid: wxUserInfo.openId,\n        unionid: wxUserInfo.unionId,\n        username: getTempName() + '@toimc.com',\n        name: wxUserInfo.nickName,\n        roles: ['user'],\n        gender: wxUserInfo.gender,\n        pic: wxUserInfo.avatarUrl,\n        location: wxUserInfo.city\n      });\n    });\n  },\n  // 取得签到次数最多的用户\n  findTotalSign: function () {\n    return this.find({\n      count: {\n        $gte: 1\n      }\n    }, {\n      password: 0,\n      organs: 0,\n      roles: 0,\n      location: 0,\n      gender: 0,\n      regmark: 0\n    }).sort({\n      count: -1\n    }).limit(20);\n  },\n  queryCount: function (options) {\n    return this.find(options).countDocuments();\n  },\n  updateMobile: function (uid, phone) {\n    return this.updateOne({\n      _id: uid\n    }, {\n      mobile: phone\n    });\n  },\n  updateEmail: function (uid, email) {\n    return this.updateOne({\n      _id: uid\n    }, {\n      username: email\n    });\n  }\n};\nconst UserModel = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('users', UserSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserModel);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RW5CLEtBQUssRUFBRSxDQUFDO0lBQUUsQ0FBQyxDQUFDLENBQ25CcUIsS0FBSyxDQUFDLEVBQUUsQ0FBQztFQUNsQixDQUFDO0VBQ0RzQyxVQUFVLEVBQUUsU0FBQUEsQ0FBVXpDLE9BQU8sRUFBRTtJQUMzQixPQUFPLElBQUksQ0FBQ2tCLElBQUksQ0FBQ2xCLE9BQU8sQ0FBQyxDQUFDcUIsY0FBYyxDQUFDLENBQUM7RUFDOUMsQ0FBQztFQUNEcUIsWUFBWSxFQUFFLFNBQUFBLENBQVVoQixHQUFHLEVBQUVpQixLQUFLLEVBQUU7SUFDaEMsT0FBTyxJQUFJLENBQUNDLFNBQVMsQ0FBQztNQUFFOUMsR0FBRyxFQUFFNEI7SUFBSSxDQUFDLEVBQUU7TUFBRWxELE1BQU0sRUFBRW1FO0lBQU0sQ0FBQyxDQUFDO0VBQzFELENBQUM7RUFDREUsV0FBVyxFQUFFLFNBQUFBLENBQVVuQixHQUFHLEVBQUVvQixLQUFLLEVBQUU7SUFDL0IsT0FBTyxJQUFJLENBQUNGLFNBQVMsQ0FBQztNQUFFOUMsR0FBRyxFQUFFNEI7SUFBSSxDQUFDLEVBQUU7TUFBRWpFLFFBQVEsRUFBRXFGO0lBQU0sQ0FBQyxDQUFDO0VBQzVEO0FBQ0osQ0FBQztBQUVELE1BQU1DLFNBQVMsR0FBR3pGLHlEQUFRLENBQUMwRixLQUFLLENBQUMsT0FBTyxFQUFFekYsVUFBVSxDQUFDO0FBRXJELGlFQUFld0YsU0FBUyIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9tb2RlbC9Vc2VyLmpzPzc2ZmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJy4uL2NvbmZpZy9EQkhlbHBsZXInO1xuXG5jb25zdCBVc2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAgICB7XG4gICAgICAgIHVzZXJuYW1lOiB7IHR5cGU6IFN0cmluZywgaW5kZXg6IHsgdW5pcXVlOiB0cnVlIH0sIHNwYXJzZTogdHJ1ZSB9LCAvLyBpbmRleCDnlKjmnaXmt7vliqDntKLlvJXvvIzkv53or4HmlbDmja7nmoTllK/kuIDmgKdcbiAgICAgICAgcGFzc3dvcmQ6IHsgdHlwZTogU3RyaW5nIH0sXG4gICAgICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nIH0sXG4gICAgICAgIC8vIGNyZWF0ZWQ6IHsgdHlwZTogRGF0ZSB9LFxuICAgICAgICAvLyB1cGRhdGVkOiB7IHR5cGU6IERhdGUgfSxcbiAgICAgICAgZmF2czogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDEwMCB9LFxuICAgICAgICBnZW5kZXI6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgICAgICByb2xlczogeyB0eXBlOiBBcnJheSwgZGVmYXVsdDogWyd1c2VyJ10gfSxcbiAgICAgICAgcGljOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJy9pbWcvbG9nby5qcGcnIH0sXG4gICAgICAgIG1vYmlsZTogeyB0eXBlOiBTdHJpbmcsIG1hdGNoOiAvXjFbMy05XShcXGR7OX0pJC8sIGRlZmF1bHQ6ICcnIH0sXG4gICAgICAgIHN0YXR1czogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcwJyB9LFxuICAgICAgICByZWdtYXJrOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcbiAgICAgICAgbG9jYXRpb246IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnJyB9LFxuICAgICAgICBpc1ZpcDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcwJyB9LFxuICAgICAgICBjb3VudDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgICAgICAgb3BlbmlkOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfSxcbiAgICAgICAgdW5pb25pZDogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICcnIH0gLy8g5a+55LqO5byA5pS+5bmz5Y+w55qEXG4gICAgfSxcbiAgICB7IHRpbWVzdGFtcHM6IHsgY3JlYXRlZEF0OiAnY3JlYXRlZCcsIHVwZGF0ZWRBdDogJ3VwZGF0ZWQnIH0gfVxuKTtcblxuVXNlclNjaGVtYS5wb3N0KCdzYXZlJywgZnVuY3Rpb24gKGVycm9yLCBkb2MsIG5leHQpIHtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ01vbmdvRXJyb3InICYmIGVycm9yLmNvZGUgPT09IDExMDAwKSB7XG4gICAgICAgIG5leHQobmV3IEVycm9yKCdFcnJvcjogTW9ubmdvb3NlIGhhcyBhIGR1cGxpY2F0ZSBrZXkuJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn0pO1xuXG5Vc2VyU2NoZW1hLnN0YXRpY3MgPSB7XG4gICAgZmluZEJ5SUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kT25lKFxuICAgICAgICAgICAgeyBfaWQ6IGlkIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9LFxuICAgIGdldExpc3Q6IGZ1bmN0aW9uIChvcHRpb25zLCBzb3J0LCBwYWdlLCBsaW1pdCkge1xuICAgICAgICAvLyAxLiBkYXRlcGlja2VyIC0+IGl0ZW06IHN0cmluZywgc2VhcmNoIC0+IGFycmF5ICBzdGFydGl0bWUsZW5kdGltZVxuICAgICAgICAvLyAyLiByYWRpbyAtPiBrZXktdmFsdWUgJGluXG4gICAgICAgIC8vIDMuIHNlbGVjdCAtPiBrZXktYXJyYXkgJGluXG4gICAgICAgIGxldCBxdWVyeSA9IHt9O1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2VhcmNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNlYXJjaCA9PT0gJ3N0cmluZycgJiYgb3B0aW9ucy5zZWFyY2gudHJpbSgpICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGlmIChbJ25hbWUnLCAndXNlcm5hbWUnXS5pbmNsdWRlcyhvcHRpb25zLml0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOaooeeziuWMuemFjVxuICAgICAgICAgICAgICAgICAgICBxdWVyeVtvcHRpb25zLml0ZW1dID0geyAkcmVnZXg6IG5ldyBSZWdFeHAob3B0aW9ucy5zZWFyY2gpIH07XG4gICAgICAgICAgICAgICAgICAgIC8vID3jgIsgeyBuYW1lOiB7ICRyZWdleDogL2FkbWluLyB9IH0gPT4gbXlzcWwgbGlrZSAlYWRtaW4lXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmFkaW9cbiAgICAgICAgICAgICAgICAgICAgcXVlcnlbb3B0aW9ucy5pdGVtXSA9IG9wdGlvbnMuc2VhcmNoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLml0ZW0gPT09ICdyb2xlcycpIHtcbiAgICAgICAgICAgICAgICBxdWVyeSA9IHsgcm9sZXM6IHsgJGluOiBvcHRpb25zLnNlYXJjaCB9IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pdGVtID09PSAnY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IG9wdGlvbnMuc2VhcmNoWzBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IG9wdGlvbnMuc2VhcmNoWzFdO1xuICAgICAgICAgICAgICAgIHF1ZXJ5ID0geyBjcmVhdGVkOiB7ICRndGU6IG5ldyBEYXRlKHN0YXJ0KSwgJGx0OiBuZXcgRGF0ZShlbmQpIH0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHF1ZXJ5LCB7IHBhc3N3b3JkOiAwLCBtb2JpbGU6IDAgfSlcbiAgICAgICAgICAgIC5zb3J0KHsgW3NvcnRdOiAtMSB9KVxuICAgICAgICAgICAgLnNraXAocGFnZSAqIGxpbWl0KVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KTtcbiAgICB9LFxuICAgIGNvdW50TGlzdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IHF1ZXJ5ID0ge307XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zZWFyY2ggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2VhcmNoID09PSAnc3RyaW5nJyAmJiBvcHRpb25zLnNlYXJjaC50cmltKCkgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKFsnbmFtZScsICd1c2VybmFtZSddLmluY2x1ZGVzKG9wdGlvbnMuaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5qih57OK5Yy56YWNXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5W29wdGlvbnMuaXRlbV0gPSB7ICRyZWdleDogbmV3IFJlZ0V4cChvcHRpb25zLnNlYXJjaCkgfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gPeOAiyB7IG5hbWU6IHsgJHJlZ2V4OiAvYWRtaW4vIH0gfSA9PiBteXNxbCBsaWtlICVhZG1pbiVcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyByYWRpb1xuICAgICAgICAgICAgICAgICAgICBxdWVyeVtvcHRpb25zLml0ZW1dID0gb3B0aW9ucy5zZWFyY2g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaXRlbSA9PT0gJ3JvbGVzJykge1xuICAgICAgICAgICAgICAgIHF1ZXJ5ID0geyByb2xlczogeyAkaW46IG9wdGlvbnMuc2VhcmNoIH0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLml0ZW0gPT09ICdjcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gb3B0aW9ucy5zZWFyY2hbMF07XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kID0gb3B0aW9ucy5zZWFyY2hbMV07XG4gICAgICAgICAgICAgICAgcXVlcnkgPSB7IGNyZWF0ZWQ6IHsgJGd0ZTogbmV3IERhdGUoc3RhcnQpLCAkbHQ6IG5ldyBEYXRlKGVuZCkgfSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQocXVlcnkpLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgfSxcbiAgICBnZXRUb3RhbFNpZ246IGZ1bmN0aW9uIChwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHsgY291bnQ6IHsgJGd0OiAwIH0gfSlcbiAgICAgICAgICAgIC5za2lwKHBhZ2UgKiBsaW1pdClcbiAgICAgICAgICAgIC5saW1pdChsaW1pdClcbiAgICAgICAgICAgIC5zb3J0KHsgY291bnQ6IC0xIH0pO1xuICAgIH0sXG4gICAgZ2V0VG90YWxTaWduQ291bnQ6IGZ1bmN0aW9uIChwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHsgY291bnQ6IHsgJGd0OiAwIH0gfSkuY291bnREb2N1bWVudHMoKTtcbiAgICB9LFxuICAgIGdldEZhdnM6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgLy8g5p+l6K+i55So5oi356ev5YiGXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRPbmUoeyBfaWQ6IHVpZCB9LCB7IGZhdnM6IDEgfSkudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5mYXZzO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIOmAmui/hyB1bmlvbmlkIOafpeaJvueUqOaIt++8jOWmguaenOayoeacieaJvuWIsOWwseWIm+W7uuS4gOS4qlxuICAgIGZpbmRPckNyZWF0ZUJ5VW5pb25pZDogZnVuY3Rpb24gKHd4VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZE9uZSh7IHVuaW9uaWQ6IHd4VXNlckluZm8udW5pb25JZCB9LCB7IHVuaW9uaWQ6IDAsIHBhc3N3b3JkOiAwIH0pLnRoZW4odXNlciA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIHVzZXIgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wZW5pZDogd3hVc2VySW5mby5vcGVuSWQsXG4gICAgICAgICAgICAgICAgICAgIHVuaW9uaWQ6IHd4VXNlckluZm8udW5pb25JZCxcbiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IGdldFRlbXBOYW1lKCkgKyAnQHRvaW1jLmNvbScsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHd4VXNlckluZm8ubmlja05hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGVzOiBbJ3VzZXInXSxcbiAgICAgICAgICAgICAgICAgICAgZ2VuZGVyOiB3eFVzZXJJbmZvLmdlbmRlcixcbiAgICAgICAgICAgICAgICAgICAgcGljOiB3eFVzZXJJbmZvLmF2YXRhclVybCxcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IHd4VXNlckluZm8uY2l0eVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIOWPluW+l+etvuWIsOasoeaVsOacgOWkmueahOeUqOaIt1xuICAgIGZpbmRUb3RhbFNpZ246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZChcbiAgICAgICAgICAgIHsgY291bnQ6IHsgJGd0ZTogMSB9IH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IDAsXG4gICAgICAgICAgICAgICAgb3JnYW5zOiAwLFxuICAgICAgICAgICAgICAgIHJvbGVzOiAwLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uOiAwLFxuICAgICAgICAgICAgICAgIGdlbmRlcjogMCxcbiAgICAgICAgICAgICAgICByZWdtYXJrOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgICAgIC5zb3J0KHsgY291bnQ6IC0xIH0pXG4gICAgICAgICAgICAubGltaXQoMjApO1xuICAgIH0sXG4gICAgcXVlcnlDb3VudDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZChvcHRpb25zKS5jb3VudERvY3VtZW50cygpO1xuICAgIH0sXG4gICAgdXBkYXRlTW9iaWxlOiBmdW5jdGlvbiAodWlkLCBwaG9uZSkge1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVPbmUoeyBfaWQ6IHVpZCB9LCB7IG1vYmlsZTogcGhvbmUgfSk7XG4gICAgfSxcbiAgICB1cGRhdGVFbWFpbDogZnVuY3Rpb24gKHVpZCwgZW1haWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlT25lKHsgX2lkOiB1aWQgfSwgeyB1c2VybmFtZTogZW1haWwgfSk7XG4gICAgfVxufTtcblxuY29uc3QgVXNlck1vZGVsID0gbW9uZ29vc2UubW9kZWwoJ3VzZXJzJywgVXNlclNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJNb2RlbDtcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlVzZXJTY2hlbWEiLCJTY2hlbWEiLCJ1c2VybmFtZSIsInR5cGUiLCJTdHJpbmciLCJpbmRleCIsInVuaXF1ZSIsInNwYXJzZSIsInBhc3N3b3JkIiwibmFtZSIsImZhdnMiLCJOdW1iZXIiLCJkZWZhdWx0IiwiZ2VuZGVyIiwicm9sZXMiLCJBcnJheSIsInBpYyIsIm1vYmlsZSIsIm1hdGNoIiwic3RhdHVzIiwicmVnbWFyayIsImxvY2F0aW9uIiwiaXNWaXAiLCJjb3VudCIsIm9wZW5pZCIsInVuaW9uaWQiLCJ0aW1lc3RhbXBzIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0IiwicG9zdCIsImVycm9yIiwiZG9jIiwibmV4dCIsImNvZGUiLCJFcnJvciIsInN0YXRpY3MiLCJmaW5kQnlJRCIsImlkIiwiZmluZE9uZSIsIl9pZCIsImdldExpc3QiLCJvcHRpb25zIiwic29ydCIsInBhZ2UiLCJsaW1pdCIsInF1ZXJ5Iiwic2VhcmNoIiwidHJpbSIsImluY2x1ZGVzIiwiaXRlbSIsIiRyZWdleCIsIlJlZ0V4cCIsIiRpbiIsInN0YXJ0IiwiZW5kIiwiY3JlYXRlZCIsIiRndGUiLCJEYXRlIiwiJGx0IiwiZmluZCIsInNraXAiLCJjb3VudExpc3QiLCJjb3VudERvY3VtZW50cyIsImdldFRvdGFsU2lnbiIsIiRndCIsImdldFRvdGFsU2lnbkNvdW50IiwiZ2V0RmF2cyIsInVpZCIsInRoZW4iLCJyZXMiLCJmaW5kT3JDcmVhdGVCeVVuaW9uaWQiLCJ3eFVzZXJJbmZvIiwidW5pb25JZCIsInVzZXIiLCJjcmVhdGUiLCJvcGVuSWQiLCJnZXRUZW1wTmFtZSIsIm5pY2tOYW1lIiwiYXZhdGFyVXJsIiwiY2l0eSIsImZpbmRUb3RhbFNpZ24iLCJvcmdhbnMiLCJxdWVyeUNvdW50IiwidXBkYXRlTW9iaWxlIiwicGhvbmUiLCJ1cGRhdGVPbmUiLCJ1cGRhdGVFbWFpbCIsImVtYWlsIiwiVXNlck1vZGVsIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/model/User.js\n\n}");

/***/ }),

/***/ "./src/model/UserCollect.js":
/*!**********************************!*\
  !*** ./src/model/UserCollect.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../config/DBHelpler */ \"./src/config/DBHelpler.js\");\n\nconst UserCollectSchema = new _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Schema({\n  uid: {\n    type: String,\n    ref: 'users'\n  },\n  tid: {\n    type: String,\n    ref: 'post'\n  }\n}, {\n  timestamps: {\n    createdAt: 'created',\n    updatedAt: 'updated'\n  }\n});\nUserCollectSchema.post('save', function (error, doc, next) {\n  if (error.name === 'MongoError' && error.code === 11000) {\n    next(new Error('There was a duplicate key error'));\n  } else {\n    next(error);\n  }\n});\nUserCollectSchema.statics = {\n  // 查询特定用户的收藏数据\n  getListByUid: function (id, page, limit) {\n    return this.find({\n      uid: id\n    }).populate({\n      path: 'tid'\n    }).populate({\n      path: 'uid',\n      select: '_id pic name'\n    }).skip(limit * page).limit(limit).sort({\n      created: -1\n    });\n  },\n  queryCollectCount: function (options) {\n    return this.find(options).countDocuments();\n  },\n  queryCollectByUserId: function (uid, limit, pageSize) {\n    return this.find({\n      uid: uid\n    }).skip(limit * (pageSize - 1)).limit(limit);\n  },\n  // 查询总数\n  countByUid: function (id) {\n    return this.find({\n      uid: id\n    }).countDocuments();\n  },\n  isCollect: function (uid, tid) {\n    // 判断用户是否收藏了该文章\n    return this.findOne({\n      uid,\n      tid\n    }).then(doc => {\n      return !!doc;\n    });\n  },\n  // 根据用户是否有收藏，设置收藏，或者删除收藏\n  // isCollect false - 未收藏 => 转成收藏， true - 收藏了 => 删除收藏\n  handleCollect: function (uid, tid, isCollect) {\n    if (isCollect) {\n      return this.deleteMany({\n        uid,\n        tid\n      });\n    } else {\n      return this.create({\n        uid,\n        tid\n      });\n    }\n  },\n  // 获取用户收藏，关联post表、user表\n  getCollectList: function (_uid, _skip, _limit) {\n    return this.find({\n      uid: _uid\n    }).sort({\n      created: -1\n    }).skip(_skip || 0).limit(_limit || 10).populate({\n      path: 'tid',\n      select: 'uid title content answer',\n      populate: {\n        path: 'uid',\n        select: 'name pic'\n      }\n    });\n  },\n  // 删除用户收藏\n  deleteCollect: function (_uid, _tid) {\n    return this.deleteMany({\n      uid: _uid,\n      tid: _tid\n    });\n  },\n  deleteByPostId: function (tid) {\n    return this.deleteMany({\n      tid\n    });\n  }\n};\nconst UserCollect = _config_DBHelpler__WEBPACK_IMPORTED_MODULE_0__[\"default\"].model('user_collect', UserCollectSchema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserCollect);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ckUsaUVBQWVnRCxXQUFXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL21vZGVsL1VzZXJDb2xsZWN0LmpzPzgxOTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vb2dvb3NlIGZyb20gJy4uL2NvbmZpZy9EQkhlbHBsZXInO1xuXG5jb25zdCBVc2VyQ29sbGVjdFNjaGVtYSA9IG5ldyBtb29nb29zZS5TY2hlbWEoXG4gICAge1xuICAgICAgICB1aWQ6IHsgdHlwZTogU3RyaW5nLCByZWY6ICd1c2VycycgfSxcbiAgICAgICAgdGlkOiB7IHR5cGU6IFN0cmluZywgcmVmOiAncG9zdCcgfSxcbiAgICB9LFxuICAgIHsgdGltZXN0YW1wczogeyBjcmVhdGVkQXQ6ICdjcmVhdGVkJywgdXBkYXRlZEF0OiAndXBkYXRlZCcgfSB9XG4pO1xuXG5Vc2VyQ29sbGVjdFNjaGVtYS5wb3N0KCdzYXZlJywgZnVuY3Rpb24gKGVycm9yLCBkb2MsIG5leHQpIHtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ01vbmdvRXJyb3InICYmIGVycm9yLmNvZGUgPT09IDExMDAwKSB7XG4gICAgICAgIG5leHQobmV3IEVycm9yKCdUaGVyZSB3YXMgYSBkdXBsaWNhdGUga2V5IGVycm9yJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgIH1cbn0pO1xuXG5Vc2VyQ29sbGVjdFNjaGVtYS5zdGF0aWNzID0ge1xuICAgIC8vIOafpeivoueJueWumueUqOaIt+eahOaUtuiXj+aVsOaNrlxuICAgIGdldExpc3RCeVVpZDogZnVuY3Rpb24gKGlkLCBwYWdlLCBsaW1pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKHsgdWlkOiBpZCB9KVxuICAgICAgICAgICAgLnBvcHVsYXRlKHtcbiAgICAgICAgICAgICAgICBwYXRoOiAndGlkJyxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAucG9wdWxhdGUoe1xuICAgICAgICAgICAgICAgIHBhdGg6ICd1aWQnLFxuICAgICAgICAgICAgICAgIHNlbGVjdDogJ19pZCBwaWMgbmFtZScsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnNraXAobGltaXQgKiBwYWdlKVxuICAgICAgICAgICAgLmxpbWl0KGxpbWl0KVxuICAgICAgICAgICAgLnNvcnQoeyBjcmVhdGVkOiAtMSB9KTtcbiAgICB9LFxuICAgIHF1ZXJ5Q29sbGVjdENvdW50OiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kKG9wdGlvbnMpLmNvdW50RG9jdW1lbnRzKCk7XG4gICAgfSxcbiAgICBxdWVyeUNvbGxlY3RCeVVzZXJJZDogZnVuY3Rpb24gKHVpZCwgbGltaXQsIHBhZ2VTaXplKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmQoeyB1aWQ6IHVpZCB9KVxuICAgICAgICAgICAgLnNraXAobGltaXQgKiAocGFnZVNpemUgLSAxKSlcbiAgICAgICAgICAgIC5saW1pdChsaW1pdCk7XG4gICAgfSxcbiAgICAvLyDmn6Xor6LmgLvmlbBcbiAgICBjb3VudEJ5VWlkOiBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZCh7IHVpZDogaWQgfSkuY291bnREb2N1bWVudHMoKTtcbiAgICB9LFxuICAgIGlzQ29sbGVjdDogZnVuY3Rpb24gKHVpZCwgdGlkKSB7XG4gICAgICAgIC8vIOWIpOaWreeUqOaIt+aYr+WQpuaUtuiXj+S6huivpeaWh+eroFxuICAgICAgICByZXR1cm4gdGhpcy5maW5kT25lKHsgdWlkLCB0aWQgfSkudGhlbihkb2MgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICEhZG9jO1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIOagueaNrueUqOaIt+aYr+WQpuacieaUtuiXj++8jOiuvue9ruaUtuiXj++8jOaIluiAheWIoOmZpOaUtuiXj1xuICAgIC8vIGlzQ29sbGVjdCBmYWxzZSAtIOacquaUtuiXjyA9PiDovazmiJDmlLbol4/vvIwgdHJ1ZSAtIOaUtuiXj+S6hiA9PiDliKDpmaTmlLbol49cbiAgICBoYW5kbGVDb2xsZWN0OiBmdW5jdGlvbiAodWlkLCB0aWQsIGlzQ29sbGVjdCkge1xuICAgICAgICBpZiAoaXNDb2xsZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWxldGVNYW55KHsgdWlkLCB0aWQgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGUoeyB1aWQsIHRpZCB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLy8g6I635Y+W55So5oi35pS26JeP77yM5YWz6IGUcG9zdOihqOOAgXVzZXLooahcbiAgICBnZXRDb2xsZWN0TGlzdDogZnVuY3Rpb24gKF91aWQsIF9za2lwLCBfbGltaXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZCh7IHVpZDogX3VpZCB9KVxuICAgICAgICAgICAgLnNvcnQoeyBjcmVhdGVkOiAtMSB9KVxuICAgICAgICAgICAgLnNraXAoX3NraXAgfHwgMClcbiAgICAgICAgICAgIC5saW1pdChfbGltaXQgfHwgMTApXG4gICAgICAgICAgICAucG9wdWxhdGUoe1xuICAgICAgICAgICAgICAgIHBhdGg6ICd0aWQnLFxuICAgICAgICAgICAgICAgIHNlbGVjdDogJ3VpZCB0aXRsZSBjb250ZW50IGFuc3dlcicsXG4gICAgICAgICAgICAgICAgcG9wdWxhdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogJ3VpZCcsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdDogJ25hbWUgcGljJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyDliKDpmaTnlKjmiLfmlLbol49cbiAgICBkZWxldGVDb2xsZWN0OiBmdW5jdGlvbiAoX3VpZCwgX3RpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWxldGVNYW55KHsgdWlkOiBfdWlkLCB0aWQ6IF90aWQgfSk7XG4gICAgfSxcbiAgICBkZWxldGVCeVBvc3RJZDogZnVuY3Rpb24gKHRpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWxldGVNYW55KHsgdGlkIH0pO1xuICAgIH0sXG59O1xuXG5jb25zdCBVc2VyQ29sbGVjdCA9IG1vb2dvb3NlLm1vZGVsKCd1c2VyX2NvbGxlY3QnLCBVc2VyQ29sbGVjdFNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJDb2xsZWN0O1xuIl0sIm5hbWVzIjpbIm1vb2dvb3NlIiwiVXNlckNvbGxlY3RTY2hlbWEiLCJTY2hlbWEiLCJ1aWQiLCJ0eXBlIiwiU3RyaW5nIiwicmVmIiwidGlkIiwidGltZXN0YW1wcyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInBvc3QiLCJlcnJvciIsImRvYyIsIm5leHQiLCJuYW1lIiwiY29kZSIsIkVycm9yIiwic3RhdGljcyIsImdldExpc3RCeVVpZCIsImlkIiwicGFnZSIsImxpbWl0IiwiZmluZCIsInBvcHVsYXRlIiwicGF0aCIsInNlbGVjdCIsInNraXAiLCJzb3J0IiwiY3JlYXRlZCIsInF1ZXJ5Q29sbGVjdENvdW50Iiwib3B0aW9ucyIsImNvdW50RG9jdW1lbnRzIiwicXVlcnlDb2xsZWN0QnlVc2VySWQiLCJwYWdlU2l6ZSIsImNvdW50QnlVaWQiLCJpc0NvbGxlY3QiLCJmaW5kT25lIiwidGhlbiIsImhhbmRsZUNvbGxlY3QiLCJkZWxldGVNYW55IiwiY3JlYXRlIiwiZ2V0Q29sbGVjdExpc3QiLCJfdWlkIiwiX3NraXAiLCJfbGltaXQiLCJkZWxldGVDb2xsZWN0IiwiX3RpZCIsImRlbGV0ZUJ5UG9zdElkIiwiVXNlckNvbGxlY3QiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/model/UserCollect.js\n\n}");

/***/ }),

/***/ "./src/routes/index.js":
/*!*****************************!*\
  !*** ./src/routes/index.js ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("{const combineRoutes = __webpack_require__(/*! koa-combine-routers */ \"koa-combine-routers\");\n\n// 加载目录中的Router中间件\nconst moduleFiles = __webpack_require__(\"./src/routes/modules sync recursive \\\\.js$\");\n\n// reduce方法去拼接 koa-combine-router所需的数据结构 Object[]\nconst modules = moduleFiles.keys().reduce((items, path) => {\n  const value = moduleFiles(path);\n  items.push(value.default);\n  return items;\n}, []);\nmodule.exports = combineRoutes(modules);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm91dGVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLGFBQWEsR0FBR0MsbUJBQU8sQ0FBQyxnREFBcUIsQ0FBQzs7QUFFcEQ7QUFDQSxNQUFNQyxXQUFXLEdBQUdELGlFQUEyQzs7QUFFL0Q7QUFDQSxNQUFNRyxPQUFPLEdBQUdGLFdBQVcsQ0FBQ0csSUFBSSxDQUFDLENBQUMsQ0FBQ0MsTUFBTSxDQUFDLENBQUNDLEtBQUssRUFBRUMsSUFBSSxLQUFLO0VBQ3ZELE1BQU1DLEtBQUssR0FBR1AsV0FBVyxDQUFDTSxJQUFJLENBQUM7RUFDL0JELEtBQUssQ0FBQ0csSUFBSSxDQUFDRCxLQUFLLENBQUNFLE9BQU8sQ0FBQztFQUN6QixPQUFPSixLQUFLO0FBQ2hCLENBQUMsRUFBRSxFQUFFLENBQUM7QUFFTkssTUFBTSxDQUFDQyxPQUFPLEdBQUdiLGFBQWEsQ0FBQ0ksT0FBTyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL3JvdXRlcy9pbmRleC5qcz9lMjZjIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbWJpbmVSb3V0ZXMgPSByZXF1aXJlKCdrb2EtY29tYmluZS1yb3V0ZXJzJyk7XG5cbi8vIOWKoOi9veebruW9leS4reeahFJvdXRlcuS4remXtOS7tlxuY29uc3QgbW9kdWxlRmlsZXMgPSByZXF1aXJlLmNvbnRleHQoJy4vbW9kdWxlcycsIHRydWUsIC9cXC5qcyQvKTtcblxuLy8gcmVkdWNl5pa55rOV5Y675ou85o6lIGtvYS1jb21iaW5lLXJvdXRlcuaJgOmcgOeahOaVsOaNrue7k+aehCBPYmplY3RbXVxuY29uc3QgbW9kdWxlcyA9IG1vZHVsZUZpbGVzLmtleXMoKS5yZWR1Y2UoKGl0ZW1zLCBwYXRoKSA9PiB7XG4gICAgY29uc3QgdmFsdWUgPSBtb2R1bGVGaWxlcyhwYXRoKTtcbiAgICBpdGVtcy5wdXNoKHZhbHVlLmRlZmF1bHQpO1xuICAgIHJldHVybiBpdGVtcztcbn0sIFtdKTtcblxubW9kdWxlLmV4cG9ydHMgPSBjb21iaW5lUm91dGVzKG1vZHVsZXMpO1xuIl0sIm5hbWVzIjpbImNvbWJpbmVSb3V0ZXMiLCJyZXF1aXJlIiwibW9kdWxlRmlsZXMiLCJjb250ZXh0IiwibW9kdWxlcyIsImtleXMiLCJyZWR1Y2UiLCJpdGVtcyIsInBhdGgiLCJ2YWx1ZSIsInB1c2giLCJkZWZhdWx0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/routes/index.js\n\n}");

/***/ }),

/***/ "./src/routes/modules sync recursive \\.js$":
/*!****************************************!*\
  !*** ./src/routes/modules/ sync \.js$ ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var map = {
	"./adminRouter.js": "./src/routes/modules/adminRouter.js",
	"./commentsRouter.js": "./src/routes/modules/commentsRouter.js",
	"./contentRouter.js": "./src/routes/modules/contentRouter.js",
	"./loginRouter.js": "./src/routes/modules/loginRouter.js",
	"./publicRouter.js": "./src/routes/modules/publicRouter.js",
	"./userRouter.js": "./src/routes/modules/userRouter.js",
	"routes/modules/adminRouter.js": "./src/routes/modules/adminRouter.js",
	"routes/modules/commentsRouter.js": "./src/routes/modules/commentsRouter.js",
	"routes/modules/contentRouter.js": "./src/routes/modules/contentRouter.js",
	"routes/modules/loginRouter.js": "./src/routes/modules/loginRouter.js",
	"routes/modules/publicRouter.js": "./src/routes/modules/publicRouter.js",
	"routes/modules/userRouter.js": "./src/routes/modules/userRouter.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./src/routes/modules sync recursive \\.js$";

/***/ }),

/***/ "./src/routes/modules/adminRouter.js":
/*!*******************************************!*\
  !*** ./src/routes/modules/adminRouter.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! koa-router */ \"koa-router\");\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(koa_router__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api_ContentController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api/ContentController */ \"./src/api/ContentController.js\");\n/* harmony import */ var _api_UserController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/api/UserController */ \"./src/api/UserController.js\");\n/* harmony import */ var _api_AdminController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/api/AdminController */ \"./src/api/AdminController.js\");\n/* harmony import */ var _api_ErrorController__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/api/ErrorController */ \"./src/api/ErrorController.js\");\n\n\n\n\n\nconst router = new (koa_router__WEBPACK_IMPORTED_MODULE_0___default())();\nrouter.prefix('/v1/admin');\n\n// 标签页面\n// 获取标签列表\nrouter.get('/getTags', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getTags);\n\n// 添加标签\nrouter.post('/addTag', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].addTag);\n\n// 删除标签\nrouter.get('/removeTag', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].removeTag);\n\n// 编辑标签\nrouter.post('/editTag', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateTag);\n\n// 用户管理\n// 查询所有用户\nrouter.get('/users', _api_UserController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getUsers);\n\n// 删除\nrouter.post('/deleteUser', _api_UserController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].deleteUserById);\n\n// 更新特定用户\nrouter.post('/updateUser', _api_UserController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateUserById);\nrouter.post('/updateUserSettings', _api_UserController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].updateUserBatch);\n\n// 添加用户\nrouter.post('/addUser', _api_UserController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].addUser);\n\n// 校验用户名是否冲突\nrouter.get('/checkname', _api_UserController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].checkUsername);\n\n// 添加菜单\nrouter.post('/addMenu', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].addMenu);\n\n// 获取菜单\nrouter.get('/getMenu', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getMenu);\n\n// 删除菜单\nrouter.post('/deleteMenu', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].deleteMenu);\n\n// 更新菜单\nrouter.post('/updateMenu', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateMenu);\n\n// 添加角色\nrouter.post('/addRole', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].addRole);\n\n// 获取角色\nrouter.get('/getRoles', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getRoles);\n\n// 删除角色\nrouter.post('/deleteRole', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].deleteRole);\n\n// 更新角色\nrouter.post('/updateRole', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateRole);\n\n// 获取评论\nrouter.get('/getComments', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getCommentsAll);\n\n// 删除评论\nrouter.post('/deleteComments', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].deleteCommentsBatch);\n\n// 批量更新评论\nrouter.post('/updateCommentsBatch', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateCommentsBatch);\n\n// 获取角色列表\nrouter.get('/getRolesNames', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getRoleNames);\n\n// 获取用户 -> 角色 -> 动态菜单信息\nrouter.get('/getRoutes', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getRoutes);\n\n// 获取统计数据\nrouter.get('/getstat', _api_AdminController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getStats);\n\n// 获取错误日志\nrouter.get('/getError', _api_ErrorController__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getErrorList);\n\n// 删除错误日志\nrouter.post('/deleteError', _api_ErrorController__WEBPACK_IMPORTED_MODULE_4__[\"default\"].deleteError);\n\n// router.get('/getOperations', adminController.getOperations)\n\n// 更新帖子\nrouter.post('/content/updateId', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updatePostByTid);\n\n// 更新帖子设置\nrouter.post('/content/updatePostSettings', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updatePostBatch);\n\n// 删除帖子\nrouter.post('/content/delete', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].deletePost);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHLENBQUMsVUFBVSxFQUFFSiw0REFBZSxDQUFDNkIsUUFBUSxDQUFDOztBQUVoRDtBQUNBM0IsTUFBTSxDQUFDRSxHQUFHLENBQUMsV0FBVyxFQUFFSCw0REFBZSxDQUFDNkIsWUFBWSxDQUFDOztBQUVyRDtBQUNBNUIsTUFBTSxDQUFDSSxJQUFJLENBQUMsY0FBYyxFQUFFTCw0REFBZSxDQUFDOEIsV0FBVyxDQUFDOztBQUV4RDs7QUFFQTtBQUNBN0IsTUFBTSxDQUFDSSxJQUFJLENBQUMsbUJBQW1CLEVBQUVSLDhEQUFpQixDQUFDa0MsZUFBZSxDQUFDOztBQUVuRTtBQUNBOUIsTUFBTSxDQUFDSSxJQUFJLENBQUMsNkJBQTZCLEVBQUVSLDhEQUFpQixDQUFDbUMsZUFBZSxDQUFDOztBQUU3RTtBQUNBL0IsTUFBTSxDQUFDSSxJQUFJLENBQUMsaUJBQWlCLEVBQUVSLDhEQUFpQixDQUFDb0MsVUFBVSxDQUFDO0FBRTVELGlFQUFlaEMsTUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2tvYS8uL3NyYy9yb3V0ZXMvbW9kdWxlcy9hZG1pblJvdXRlci5qcz9kNjQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb3V0ZXIgZnJvbSAna29hLXJvdXRlcic7XG5pbXBvcnQgY29udGVudENvbnRyb2xsZXIgZnJvbSAnQC9hcGkvQ29udGVudENvbnRyb2xsZXInO1xuaW1wb3J0IHVzZXJDb250cm9sbGVyIGZyb20gJ0AvYXBpL1VzZXJDb250cm9sbGVyJztcbmltcG9ydCBhZG1pbkNvbnRyb2xsZXIgZnJvbSAnQC9hcGkvQWRtaW5Db250cm9sbGVyJztcbmltcG9ydCBlcnJvckNvbnRyb2xsZXIgZnJvbSAnQC9hcGkvRXJyb3JDb250cm9sbGVyJztcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpO1xuXG5yb3V0ZXIucHJlZml4KCcvdjEvYWRtaW4nKTtcblxuLy8g5qCH562+6aG16Z2iXG4vLyDojrflj5bmoIfnrb7liJfooahcbnJvdXRlci5nZXQoJy9nZXRUYWdzJywgY29udGVudENvbnRyb2xsZXIuZ2V0VGFncyk7XG5cbi8vIOa3u+WKoOagh+etvlxucm91dGVyLnBvc3QoJy9hZGRUYWcnLCBjb250ZW50Q29udHJvbGxlci5hZGRUYWcpO1xuXG4vLyDliKDpmaTmoIfnrb5cbnJvdXRlci5nZXQoJy9yZW1vdmVUYWcnLCBjb250ZW50Q29udHJvbGxlci5yZW1vdmVUYWcpO1xuXG4vLyDnvJbovpHmoIfnrb5cbnJvdXRlci5wb3N0KCcvZWRpdFRhZycsIGNvbnRlbnRDb250cm9sbGVyLnVwZGF0ZVRhZyk7XG5cbi8vIOeUqOaIt+euoeeQhlxuLy8g5p+l6K+i5omA5pyJ55So5oi3XG5yb3V0ZXIuZ2V0KCcvdXNlcnMnLCB1c2VyQ29udHJvbGxlci5nZXRVc2Vycyk7XG5cbi8vIOWIoOmZpFxucm91dGVyLnBvc3QoJy9kZWxldGVVc2VyJywgdXNlckNvbnRyb2xsZXIuZGVsZXRlVXNlckJ5SWQpO1xuXG4vLyDmm7TmlrDnibnlrprnlKjmiLdcbnJvdXRlci5wb3N0KCcvdXBkYXRlVXNlcicsIHVzZXJDb250cm9sbGVyLnVwZGF0ZVVzZXJCeUlkKTtcblxucm91dGVyLnBvc3QoJy91cGRhdGVVc2VyU2V0dGluZ3MnLCB1c2VyQ29udHJvbGxlci51cGRhdGVVc2VyQmF0Y2gpO1xuXG4vLyDmt7vliqDnlKjmiLdcbnJvdXRlci5wb3N0KCcvYWRkVXNlcicsIHVzZXJDb250cm9sbGVyLmFkZFVzZXIpO1xuXG4vLyDmoKHpqoznlKjmiLflkI3mmK/lkKblhrLnqoFcbnJvdXRlci5nZXQoJy9jaGVja25hbWUnLCB1c2VyQ29udHJvbGxlci5jaGVja1VzZXJuYW1lKTtcblxuLy8g5re75Yqg6I+c5Y2VXG5yb3V0ZXIucG9zdCgnL2FkZE1lbnUnLCBhZG1pbkNvbnRyb2xsZXIuYWRkTWVudSk7XG5cbi8vIOiOt+WPluiPnOWNlVxucm91dGVyLmdldCgnL2dldE1lbnUnLCBhZG1pbkNvbnRyb2xsZXIuZ2V0TWVudSk7XG5cbi8vIOWIoOmZpOiPnOWNlVxucm91dGVyLnBvc3QoJy9kZWxldGVNZW51JywgYWRtaW5Db250cm9sbGVyLmRlbGV0ZU1lbnUpO1xuXG4vLyDmm7TmlrDoj5zljZVcbnJvdXRlci5wb3N0KCcvdXBkYXRlTWVudScsIGFkbWluQ29udHJvbGxlci51cGRhdGVNZW51KTtcblxuLy8g5re75Yqg6KeS6ImyXG5yb3V0ZXIucG9zdCgnL2FkZFJvbGUnLCBhZG1pbkNvbnRyb2xsZXIuYWRkUm9sZSk7XG5cbi8vIOiOt+WPluinkuiJslxucm91dGVyLmdldCgnL2dldFJvbGVzJywgYWRtaW5Db250cm9sbGVyLmdldFJvbGVzKTtcblxuLy8g5Yig6Zmk6KeS6ImyXG5yb3V0ZXIucG9zdCgnL2RlbGV0ZVJvbGUnLCBhZG1pbkNvbnRyb2xsZXIuZGVsZXRlUm9sZSk7XG5cbi8vIOabtOaWsOinkuiJslxucm91dGVyLnBvc3QoJy91cGRhdGVSb2xlJywgYWRtaW5Db250cm9sbGVyLnVwZGF0ZVJvbGUpO1xuXG4vLyDojrflj5bor4TorrpcbnJvdXRlci5nZXQoJy9nZXRDb21tZW50cycsIGFkbWluQ29udHJvbGxlci5nZXRDb21tZW50c0FsbCk7XG5cbi8vIOWIoOmZpOivhOiuulxucm91dGVyLnBvc3QoJy9kZWxldGVDb21tZW50cycsIGFkbWluQ29udHJvbGxlci5kZWxldGVDb21tZW50c0JhdGNoKTtcblxuLy8g5om56YeP5pu05paw6K+E6K66XG5yb3V0ZXIucG9zdCgnL3VwZGF0ZUNvbW1lbnRzQmF0Y2gnLCBhZG1pbkNvbnRyb2xsZXIudXBkYXRlQ29tbWVudHNCYXRjaCk7XG5cbi8vIOiOt+WPluinkuiJsuWIl+ihqFxucm91dGVyLmdldCgnL2dldFJvbGVzTmFtZXMnLCBhZG1pbkNvbnRyb2xsZXIuZ2V0Um9sZU5hbWVzKTtcblxuLy8g6I635Y+W55So5oi3IC0+IOinkuiJsiAtPiDliqjmgIHoj5zljZXkv6Hmga9cbnJvdXRlci5nZXQoJy9nZXRSb3V0ZXMnLCBhZG1pbkNvbnRyb2xsZXIuZ2V0Um91dGVzKTtcblxuLy8g6I635Y+W57uf6K6h5pWw5o2uXG5yb3V0ZXIuZ2V0KCcvZ2V0c3RhdCcsIGFkbWluQ29udHJvbGxlci5nZXRTdGF0cyk7XG5cbi8vIOiOt+WPlumUmeivr+aXpeW/l1xucm91dGVyLmdldCgnL2dldEVycm9yJywgZXJyb3JDb250cm9sbGVyLmdldEVycm9yTGlzdCk7XG5cbi8vIOWIoOmZpOmUmeivr+aXpeW/l1xucm91dGVyLnBvc3QoJy9kZWxldGVFcnJvcicsIGVycm9yQ29udHJvbGxlci5kZWxldGVFcnJvcik7XG5cbi8vIHJvdXRlci5nZXQoJy9nZXRPcGVyYXRpb25zJywgYWRtaW5Db250cm9sbGVyLmdldE9wZXJhdGlvbnMpXG5cbi8vIOabtOaWsOW4luWtkFxucm91dGVyLnBvc3QoJy9jb250ZW50L3VwZGF0ZUlkJywgY29udGVudENvbnRyb2xsZXIudXBkYXRlUG9zdEJ5VGlkKTtcblxuLy8g5pu05paw5biW5a2Q6K6+572uXG5yb3V0ZXIucG9zdCgnL2NvbnRlbnQvdXBkYXRlUG9zdFNldHRpbmdzJywgY29udGVudENvbnRyb2xsZXIudXBkYXRlUG9zdEJhdGNoKTtcblxuLy8g5Yig6Zmk5biW5a2QXG5yb3V0ZXIucG9zdCgnL2NvbnRlbnQvZGVsZXRlJywgY29udGVudENvbnRyb2xsZXIuZGVsZXRlUG9zdCk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJuYW1lcyI6WyJSb3V0ZXIiLCJjb250ZW50Q29udHJvbGxlciIsInVzZXJDb250cm9sbGVyIiwiYWRtaW5Db250cm9sbGVyIiwiZXJyb3JDb250cm9sbGVyIiwicm91dGVyIiwicHJlZml4IiwiZ2V0IiwiZ2V0VGFncyIsInBvc3QiLCJhZGRUYWciLCJyZW1vdmVUYWciLCJ1cGRhdGVUYWciLCJnZXRVc2VycyIsImRlbGV0ZVVzZXJCeUlkIiwidXBkYXRlVXNlckJ5SWQiLCJ1cGRhdGVVc2VyQmF0Y2giLCJhZGRVc2VyIiwiY2hlY2tVc2VybmFtZSIsImFkZE1lbnUiLCJnZXRNZW51IiwiZGVsZXRlTWVudSIsInVwZGF0ZU1lbnUiLCJhZGRSb2xlIiwiZ2V0Um9sZXMiLCJkZWxldGVSb2xlIiwidXBkYXRlUm9sZSIsImdldENvbW1lbnRzQWxsIiwiZGVsZXRlQ29tbWVudHNCYXRjaCIsInVwZGF0ZUNvbW1lbnRzQmF0Y2giLCJnZXRSb2xlTmFtZXMiLCJnZXRSb3V0ZXMiLCJnZXRTdGF0cyIsImdldEVycm9yTGlzdCIsImRlbGV0ZUVycm9yIiwidXBkYXRlUG9zdEJ5VGlkIiwidXBkYXRlUG9zdEJhdGNoIiwiZGVsZXRlUG9zdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/routes/modules/adminRouter.js\n\n}");

/***/ }),

/***/ "./src/routes/modules/commentsRouter.js":
/*!**********************************************!*\
  !*** ./src/routes/modules/commentsRouter.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! koa-router */ \"koa-router\");\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(koa_router__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api_CommentsController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api/CommentsController */ \"./src/api/CommentsController.js\");\n\n\nconst router = new (koa_router__WEBPACK_IMPORTED_MODULE_0___default())();\nrouter.prefix('/v1/comments');\n\n// 添加评论\nrouter.post('/reply', _api_CommentsController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].addComment);\n\n// 微信评论回复\n// router.post('/wxreply', commentsController.wxAddComment)\n\n// 更新评论\nrouter.post('/update', _api_CommentsController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateComment);\n\n// 设置最佳答案\nrouter.get('/accept', _api_CommentsController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setBest);\n\n// 评论点赞\nrouter.get('/hands', _api_CommentsController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setHands);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm91dGVzL21vZHVsZXMvY29tbWVudHNSb3V0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUMwQjtBQUUxRCxNQUFNRSxNQUFNLEdBQUcsSUFBSUYsbURBQU0sQ0FBQyxDQUFDO0FBRTNCRSxNQUFNLENBQUNDLE1BQU0sQ0FBQyxjQUFjLENBQUM7O0FBRTdCO0FBQ0FELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLFFBQVEsRUFBRUgsK0RBQWtCLENBQUNJLFVBQVUsQ0FBQzs7QUFFcEQ7QUFDQTs7QUFFQTtBQUNBSCxNQUFNLENBQUNFLElBQUksQ0FBQyxTQUFTLEVBQUVILCtEQUFrQixDQUFDSyxhQUFhLENBQUM7O0FBRXhEO0FBQ0FKLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDLFNBQVMsRUFBRU4sK0RBQWtCLENBQUNPLE9BQU8sQ0FBQzs7QUFFakQ7QUFDQU4sTUFBTSxDQUFDSyxHQUFHLENBQUMsUUFBUSxFQUFFTiwrREFBa0IsQ0FBQ1EsUUFBUSxDQUFDO0FBRWpELGlFQUFlUCxNQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL3JvdXRlcy9tb2R1bGVzL2NvbW1lbnRzUm91dGVyLmpzPzhjZDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJvdXRlciBmcm9tICdrb2Etcm91dGVyJztcbmltcG9ydCBjb21tZW50c0NvbnRyb2xsZXIgZnJvbSAnQC9hcGkvQ29tbWVudHNDb250cm9sbGVyJztcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpO1xuXG5yb3V0ZXIucHJlZml4KCcvdjEvY29tbWVudHMnKTtcblxuLy8g5re75Yqg6K+E6K66XG5yb3V0ZXIucG9zdCgnL3JlcGx5JywgY29tbWVudHNDb250cm9sbGVyLmFkZENvbW1lbnQpO1xuXG4vLyDlvq7kv6Hor4Torrrlm57lpI1cbi8vIHJvdXRlci5wb3N0KCcvd3hyZXBseScsIGNvbW1lbnRzQ29udHJvbGxlci53eEFkZENvbW1lbnQpXG5cbi8vIOabtOaWsOivhOiuulxucm91dGVyLnBvc3QoJy91cGRhdGUnLCBjb21tZW50c0NvbnRyb2xsZXIudXBkYXRlQ29tbWVudCk7XG5cbi8vIOiuvue9ruacgOS9s+etlOahiFxucm91dGVyLmdldCgnL2FjY2VwdCcsIGNvbW1lbnRzQ29udHJvbGxlci5zZXRCZXN0KTtcblxuLy8g6K+E6K6654K56LWeXG5yb3V0ZXIuZ2V0KCcvaGFuZHMnLCBjb21tZW50c0NvbnRyb2xsZXIuc2V0SGFuZHMpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXSwibmFtZXMiOlsiUm91dGVyIiwiY29tbWVudHNDb250cm9sbGVyIiwicm91dGVyIiwicHJlZml4IiwicG9zdCIsImFkZENvbW1lbnQiLCJ1cGRhdGVDb21tZW50IiwiZ2V0Iiwic2V0QmVzdCIsInNldEhhbmRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/routes/modules/commentsRouter.js\n\n}");

/***/ }),

/***/ "./src/routes/modules/contentRouter.js":
/*!*********************************************!*\
  !*** ./src/routes/modules/contentRouter.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! koa-router */ \"koa-router\");\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(koa_router__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api_ContentController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api/ContentController */ \"./src/api/ContentController.js\");\n\nconst router = new (koa_router__WEBPACK_IMPORTED_MODULE_0___default())();\n\nrouter.prefix('/v1/content');\n\n// 上传图片\nrouter.post('/upload', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].uploadImg);\n\n// 发表新贴\nrouter.post('/add', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].addPost);\n\n// 更新帖子\nrouter.post('/update', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updatePost);\nrouter.post('/updateId', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updatePostByTid);\n\n// router.post('/updatePostSettings', contentController.updatePostBatch)\n\n// // 删除帖子\nrouter.post('/delete', _api_ContentController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].deletePost);\n\n// 微信发贴\n// router.post('/wxAdd', contentController.addWxPost);\n\n// 取得浏览历史列表\n// router.get('/getPostHistory', contentController.getPostHistory);\n\n// 收藏帖子\n// router.post('/setCollect', contentController.setCollect);\n\n// 查询是否收藏某个帖子\n// router.get('/checkCollect', contentController.checkCollect);\n\n// 删除收藏\n// router.get('/deleteCollect', contentController.deleteCollect);\n\n// 获取用户发贴\n// router.get('/postAll', contentController.getAllPostByUid);\n\n// 获取用户收藏(关联其它表)\n// router.get('/getCollectList', contentController.getCollectList);\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm91dGVzL21vZHVsZXMvY29udGVudFJvdXRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWdDO0FBQ2hDLE1BQU1DLE1BQU0sR0FBRyxJQUFJRCxtREFBTSxDQUFDLENBQUM7QUFFNkI7QUFFeERDLE1BQU0sQ0FBQ0UsTUFBTSxDQUFDLGFBQWEsQ0FBQzs7QUFFNUI7QUFDQUYsTUFBTSxDQUFDRyxJQUFJLENBQUMsU0FBUyxFQUFFRiw4REFBaUIsQ0FBQ0csU0FBUyxDQUFDOztBQUVuRDtBQUNBSixNQUFNLENBQUNHLElBQUksQ0FBQyxNQUFNLEVBQUVGLDhEQUFpQixDQUFDSSxPQUFPLENBQUM7O0FBRTlDO0FBQ0FMLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLFNBQVMsRUFBRUYsOERBQWlCLENBQUNLLFVBQVUsQ0FBQztBQUVwRE4sTUFBTSxDQUFDRyxJQUFJLENBQUMsV0FBVyxFQUFFRiw4REFBaUIsQ0FBQ00sZUFBZSxDQUFDOztBQUUzRDs7QUFFQTtBQUNBUCxNQUFNLENBQUNHLElBQUksQ0FBQyxTQUFTLEVBQUVGLDhEQUFpQixDQUFDTyxVQUFVLENBQUM7O0FBRXBEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaUVBQWVSLE1BQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvcm91dGVzL21vZHVsZXMvY29udGVudFJvdXRlci5qcz84YTEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb3V0ZXIgZnJvbSAna29hLXJvdXRlcic7XG5jb25zdCByb3V0ZXIgPSBuZXcgUm91dGVyKCk7XG5cbmltcG9ydCBjb250ZW50Q29udHJvbGxlciBmcm9tICdAL2FwaS9Db250ZW50Q29udHJvbGxlcic7XG5cbnJvdXRlci5wcmVmaXgoJy92MS9jb250ZW50Jyk7XG5cbi8vIOS4iuS8oOWbvueJh1xucm91dGVyLnBvc3QoJy91cGxvYWQnLCBjb250ZW50Q29udHJvbGxlci51cGxvYWRJbWcpO1xuXG4vLyDlj5HooajmlrDotLRcbnJvdXRlci5wb3N0KCcvYWRkJywgY29udGVudENvbnRyb2xsZXIuYWRkUG9zdCk7XG5cbi8vIOabtOaWsOW4luWtkFxucm91dGVyLnBvc3QoJy91cGRhdGUnLCBjb250ZW50Q29udHJvbGxlci51cGRhdGVQb3N0KTtcblxucm91dGVyLnBvc3QoJy91cGRhdGVJZCcsIGNvbnRlbnRDb250cm9sbGVyLnVwZGF0ZVBvc3RCeVRpZCk7XG5cbi8vIHJvdXRlci5wb3N0KCcvdXBkYXRlUG9zdFNldHRpbmdzJywgY29udGVudENvbnRyb2xsZXIudXBkYXRlUG9zdEJhdGNoKVxuXG4vLyAvLyDliKDpmaTluJblrZBcbnJvdXRlci5wb3N0KCcvZGVsZXRlJywgY29udGVudENvbnRyb2xsZXIuZGVsZXRlUG9zdCk7XG5cbi8vIOW+ruS/oeWPkei0tFxuLy8gcm91dGVyLnBvc3QoJy93eEFkZCcsIGNvbnRlbnRDb250cm9sbGVyLmFkZFd4UG9zdCk7XG5cbi8vIOWPluW+l+a1j+iniOWOhuWPsuWIl+ihqFxuLy8gcm91dGVyLmdldCgnL2dldFBvc3RIaXN0b3J5JywgY29udGVudENvbnRyb2xsZXIuZ2V0UG9zdEhpc3RvcnkpO1xuXG4vLyDmlLbol4/luJblrZBcbi8vIHJvdXRlci5wb3N0KCcvc2V0Q29sbGVjdCcsIGNvbnRlbnRDb250cm9sbGVyLnNldENvbGxlY3QpO1xuXG4vLyDmn6Xor6LmmK/lkKbmlLbol4/mn5DkuKrluJblrZBcbi8vIHJvdXRlci5nZXQoJy9jaGVja0NvbGxlY3QnLCBjb250ZW50Q29udHJvbGxlci5jaGVja0NvbGxlY3QpO1xuXG4vLyDliKDpmaTmlLbol49cbi8vIHJvdXRlci5nZXQoJy9kZWxldGVDb2xsZWN0JywgY29udGVudENvbnRyb2xsZXIuZGVsZXRlQ29sbGVjdCk7XG5cbi8vIOiOt+WPlueUqOaIt+WPkei0tFxuLy8gcm91dGVyLmdldCgnL3Bvc3RBbGwnLCBjb250ZW50Q29udHJvbGxlci5nZXRBbGxQb3N0QnlVaWQpO1xuXG4vLyDojrflj5bnlKjmiLfmlLbol48o5YWz6IGU5YW25a6D6KGoKVxuLy8gcm91dGVyLmdldCgnL2dldENvbGxlY3RMaXN0JywgY29udGVudENvbnRyb2xsZXIuZ2V0Q29sbGVjdExpc3QpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXSwibmFtZXMiOlsiUm91dGVyIiwicm91dGVyIiwiY29udGVudENvbnRyb2xsZXIiLCJwcmVmaXgiLCJwb3N0IiwidXBsb2FkSW1nIiwiYWRkUG9zdCIsInVwZGF0ZVBvc3QiLCJ1cGRhdGVQb3N0QnlUaWQiLCJkZWxldGVQb3N0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/routes/modules/contentRouter.js\n\n}");

/***/ }),

/***/ "./src/routes/modules/loginRouter.js":
/*!*******************************************!*\
  !*** ./src/routes/modules/loginRouter.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! koa-router */ \"koa-router\");\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(koa_router__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api_LoginController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api/LoginController */ \"./src/api/LoginController.js\");\n\nconst router = new (koa_router__WEBPACK_IMPORTED_MODULE_0___default())();\n\nrouter.prefix('/v1/login');\n\n// 忘记密码\nrouter.post('/forget', _api_LoginController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].forget);\n\n// 登录接口\nrouter.post('/login', _api_LoginController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].login);\n\n// 注册用户\nrouter.post('/reg', _api_LoginController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reg);\n\n// 密码重置\nrouter.post('/reset', _api_LoginController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reset);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm91dGVzL21vZHVsZXMvbG9naW5Sb3V0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUNoQyxNQUFNQyxNQUFNLEdBQUcsSUFBSUQsbURBQU0sQ0FBQyxDQUFDO0FBRXlCO0FBRXBEQyxNQUFNLENBQUNFLE1BQU0sQ0FBQyxXQUFXLENBQUM7O0FBRTFCO0FBQ0FGLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLFNBQVMsRUFBRUYsNERBQWUsQ0FBQ0csTUFBTSxDQUFDOztBQUU5QztBQUNBSixNQUFNLENBQUNHLElBQUksQ0FBQyxRQUFRLEVBQUVGLDREQUFlLENBQUNJLEtBQUssQ0FBQzs7QUFFNUM7QUFDQUwsTUFBTSxDQUFDRyxJQUFJLENBQUMsTUFBTSxFQUFFRiw0REFBZSxDQUFDSyxHQUFHLENBQUM7O0FBRXhDO0FBQ0FOLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLFFBQVEsRUFBRUYsNERBQWUsQ0FBQ00sS0FBSyxDQUFDO0FBRTVDLGlFQUFlUCxNQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va29hLy4vc3JjL3JvdXRlcy9tb2R1bGVzL2xvZ2luUm91dGVyLmpzPzJkZGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJvdXRlciBmcm9tICdrb2Etcm91dGVyJztcbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKTtcblxuaW1wb3J0IGxvZ2luQ29udHJvbGxlciBmcm9tICdAL2FwaS9Mb2dpbkNvbnRyb2xsZXInO1xuXG5yb3V0ZXIucHJlZml4KCcvdjEvbG9naW4nKTtcblxuLy8g5b+Y6K6w5a+G56CBXG5yb3V0ZXIucG9zdCgnL2ZvcmdldCcsIGxvZ2luQ29udHJvbGxlci5mb3JnZXQpO1xuXG4vLyDnmbvlvZXmjqXlj6NcbnJvdXRlci5wb3N0KCcvbG9naW4nLCBsb2dpbkNvbnRyb2xsZXIubG9naW4pO1xuXG4vLyDms6jlhoznlKjmiLdcbnJvdXRlci5wb3N0KCcvcmVnJywgbG9naW5Db250cm9sbGVyLnJlZyk7XG5cbi8vIOWvhueggemHjee9rlxucm91dGVyLnBvc3QoJy9yZXNldCcsIGxvZ2luQ29udHJvbGxlci5yZXNldCk7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJuYW1lcyI6WyJSb3V0ZXIiLCJyb3V0ZXIiLCJsb2dpbkNvbnRyb2xsZXIiLCJwcmVmaXgiLCJwb3N0IiwiZm9yZ2V0IiwibG9naW4iLCJyZWciLCJyZXNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/routes/modules/loginRouter.js\n\n}");

/***/ }),

/***/ "./src/routes/modules/publicRouter.js":
/*!********************************************!*\
  !*** ./src/routes/modules/publicRouter.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! koa-router */ \"koa-router\");\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(koa_router__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api_PublicController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api/PublicController */ \"./src/api/PublicController.js\");\n/* harmony import */ var _api_ContentController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/api/ContentController */ \"./src/api/ContentController.js\");\n/* harmony import */ var _api_UserController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/api/UserController */ \"./src/api/UserController.js\");\n/* harmony import */ var _api_CommentsController__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/api/CommentsController */ \"./src/api/CommentsController.js\");\n\nconst router = new (koa_router__WEBPACK_IMPORTED_MODULE_0___default())();\n\n\n\n\nrouter.prefix('/v1/public');\n\n// 获取图片验证码\nrouter.get('/getCaptcha', _api_PublicController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCaptcha);\n\n// 获取文章列表\nrouter.get('/list', _api_ContentController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getPostList);\n\n// 温馨提醒\nrouter.get('/tips', _api_ContentController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getTips);\n\n// 友情链接\nrouter.get('/links', _api_ContentController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getLinks);\n\n// 回复周榜\nrouter.get('/topWeek', _api_ContentController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getTopWeek);\n\n// 确认修改邮件\nrouter.get('/resetEmail', _api_UserController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].updateUsername);\n\n// 获取文章详情\nrouter.get('/content/detail', _api_ContentController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getPostDetail);\n\n// 获取评论列表\nrouter.get('/comments', _api_CommentsController__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getComments);\n\n// 获取热门评论\n// router.get('/getCommentsCount', commentsController.getCommentsCount)\n\n// 获取最新评论\n// router.get('/getNewComments', commentsController.getNewComments)\n\n// 获取用户基本信息\nrouter.get('/info', _api_UserController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getBasicInfo);\n\n// 获取用户最近的发贴记录\nrouter.get('/latestPost', _api_ContentController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getPostPublic);\n\n// 获取用户最近的评论记录\nrouter.get('/latestComment', _api_CommentsController__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getCommentPublic);\n\n// 获取用热门帖子\n// router.get('/hotPost', publicController.getHotPost)\n\n// 获取用热门评论\n// router.get('/hotComments', publicController.getHotComments)\n\n// 获取用签到排行\n// router.get('/hotSignRecord', publicController.getHotSignRecord)\n\n// wx获取模板消息id\n// router.get('/getSubIds', publicController.getSubIds)\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm91dGVzL21vZHVsZXMvcHVibGljUm91dGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBZ0M7QUFDaEMsTUFBTUMsTUFBTSxHQUFHLElBQUlELG1EQUFNLENBQUMsQ0FBQztBQUUyQjtBQUNFO0FBQ047QUFDUTtBQUUxREMsTUFBTSxDQUFDSyxNQUFNLENBQUMsWUFBWSxDQUFDOztBQUUzQjtBQUNBTCxNQUFNLENBQUNNLEdBQUcsQ0FBQyxhQUFhLEVBQUVMLDZEQUFnQixDQUFDTSxVQUFVLENBQUM7O0FBRXREO0FBQ0FQLE1BQU0sQ0FBQ00sR0FBRyxDQUFDLE9BQU8sRUFBRUosOERBQWlCLENBQUNNLFdBQVcsQ0FBQzs7QUFFbEQ7QUFDQVIsTUFBTSxDQUFDTSxHQUFHLENBQUMsT0FBTyxFQUFFSiw4REFBaUIsQ0FBQ08sT0FBTyxDQUFDOztBQUU5QztBQUNBVCxNQUFNLENBQUNNLEdBQUcsQ0FBQyxRQUFRLEVBQUVKLDhEQUFpQixDQUFDUSxRQUFRLENBQUM7O0FBRWhEO0FBQ0FWLE1BQU0sQ0FBQ00sR0FBRyxDQUFDLFVBQVUsRUFBRUosOERBQWlCLENBQUNTLFVBQVUsQ0FBQzs7QUFFcEQ7QUFDQVgsTUFBTSxDQUFDTSxHQUFHLENBQUMsYUFBYSxFQUFFSCwyREFBYyxDQUFDUyxjQUFjLENBQUM7O0FBRXhEO0FBQ0FaLE1BQU0sQ0FBQ00sR0FBRyxDQUFDLGlCQUFpQixFQUFFSiw4REFBaUIsQ0FBQ1csYUFBYSxDQUFDOztBQUU5RDtBQUNBYixNQUFNLENBQUNNLEdBQUcsQ0FBQyxXQUFXLEVBQUVGLCtEQUFrQixDQUFDVSxXQUFXLENBQUM7O0FBRXZEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBZCxNQUFNLENBQUNNLEdBQUcsQ0FBQyxPQUFPLEVBQUVILDJEQUFjLENBQUNZLFlBQVksQ0FBQzs7QUFFaEQ7QUFDQWYsTUFBTSxDQUFDTSxHQUFHLENBQUMsYUFBYSxFQUFFSiw4REFBaUIsQ0FBQ2MsYUFBYSxDQUFDOztBQUUxRDtBQUNBaEIsTUFBTSxDQUFDTSxHQUFHLENBQUMsZ0JBQWdCLEVBQUVGLCtEQUFrQixDQUFDYSxnQkFBZ0IsQ0FBQzs7QUFFakU7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxpRUFBZWpCLE1BQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvcm91dGVzL21vZHVsZXMvcHVibGljUm91dGVyLmpzP2NmYzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJvdXRlciBmcm9tICdrb2Etcm91dGVyJztcbmNvbnN0IHJvdXRlciA9IG5ldyBSb3V0ZXIoKTtcblxuaW1wb3J0IHB1YmxpY0NvbnRyb2xsZXIgZnJvbSAnQC9hcGkvUHVibGljQ29udHJvbGxlcic7XG5pbXBvcnQgY29udGVudENvbnRyb2xsZXIgZnJvbSAnQC9hcGkvQ29udGVudENvbnRyb2xsZXInO1xuaW1wb3J0IHVzZXJDb250cm9sbGVyIGZyb20gJ0AvYXBpL1VzZXJDb250cm9sbGVyJztcbmltcG9ydCBjb21tZW50c0NvbnRyb2xsZXIgZnJvbSAnQC9hcGkvQ29tbWVudHNDb250cm9sbGVyJztcblxucm91dGVyLnByZWZpeCgnL3YxL3B1YmxpYycpO1xuXG4vLyDojrflj5blm77niYfpqozor4HnoIFcbnJvdXRlci5nZXQoJy9nZXRDYXB0Y2hhJywgcHVibGljQ29udHJvbGxlci5nZXRDYXB0Y2hhKTtcblxuLy8g6I635Y+W5paH56ug5YiX6KGoXG5yb3V0ZXIuZ2V0KCcvbGlzdCcsIGNvbnRlbnRDb250cm9sbGVyLmdldFBvc3RMaXN0KTtcblxuLy8g5rip6aao5o+Q6YaSXG5yb3V0ZXIuZ2V0KCcvdGlwcycsIGNvbnRlbnRDb250cm9sbGVyLmdldFRpcHMpO1xuXG4vLyDlj4vmg4Xpk77mjqVcbnJvdXRlci5nZXQoJy9saW5rcycsIGNvbnRlbnRDb250cm9sbGVyLmdldExpbmtzKTtcblxuLy8g5Zue5aSN5ZGo5qacXG5yb3V0ZXIuZ2V0KCcvdG9wV2VlaycsIGNvbnRlbnRDb250cm9sbGVyLmdldFRvcFdlZWspO1xuXG4vLyDnoa7orqTkv67mlLnpgq7ku7ZcbnJvdXRlci5nZXQoJy9yZXNldEVtYWlsJywgdXNlckNvbnRyb2xsZXIudXBkYXRlVXNlcm5hbWUpO1xuXG4vLyDojrflj5bmlofnq6Dor6bmg4VcbnJvdXRlci5nZXQoJy9jb250ZW50L2RldGFpbCcsIGNvbnRlbnRDb250cm9sbGVyLmdldFBvc3REZXRhaWwpO1xuXG4vLyDojrflj5bor4TorrrliJfooahcbnJvdXRlci5nZXQoJy9jb21tZW50cycsIGNvbW1lbnRzQ29udHJvbGxlci5nZXRDb21tZW50cyk7XG5cbi8vIOiOt+WPlueDremXqOivhOiuulxuLy8gcm91dGVyLmdldCgnL2dldENvbW1lbnRzQ291bnQnLCBjb21tZW50c0NvbnRyb2xsZXIuZ2V0Q29tbWVudHNDb3VudClcblxuLy8g6I635Y+W5pyA5paw6K+E6K66XG4vLyByb3V0ZXIuZ2V0KCcvZ2V0TmV3Q29tbWVudHMnLCBjb21tZW50c0NvbnRyb2xsZXIuZ2V0TmV3Q29tbWVudHMpXG5cbi8vIOiOt+WPlueUqOaIt+WfuuacrOS/oeaBr1xucm91dGVyLmdldCgnL2luZm8nLCB1c2VyQ29udHJvbGxlci5nZXRCYXNpY0luZm8pO1xuXG4vLyDojrflj5bnlKjmiLfmnIDov5HnmoTlj5HotLTorrDlvZVcbnJvdXRlci5nZXQoJy9sYXRlc3RQb3N0JywgY29udGVudENvbnRyb2xsZXIuZ2V0UG9zdFB1YmxpYyk7XG5cbi8vIOiOt+WPlueUqOaIt+acgOi/keeahOivhOiuuuiusOW9lVxucm91dGVyLmdldCgnL2xhdGVzdENvbW1lbnQnLCBjb21tZW50c0NvbnRyb2xsZXIuZ2V0Q29tbWVudFB1YmxpYyk7XG5cbi8vIOiOt+WPlueUqOeDremXqOW4luWtkFxuLy8gcm91dGVyLmdldCgnL2hvdFBvc3QnLCBwdWJsaWNDb250cm9sbGVyLmdldEhvdFBvc3QpXG5cbi8vIOiOt+WPlueUqOeDremXqOivhOiuulxuLy8gcm91dGVyLmdldCgnL2hvdENvbW1lbnRzJywgcHVibGljQ29udHJvbGxlci5nZXRIb3RDb21tZW50cylcblxuLy8g6I635Y+W55So562+5Yiw5o6S6KGMXG4vLyByb3V0ZXIuZ2V0KCcvaG90U2lnblJlY29yZCcsIHB1YmxpY0NvbnRyb2xsZXIuZ2V0SG90U2lnblJlY29yZClcblxuLy8gd3jojrflj5bmqKHmnb/mtojmga9pZFxuLy8gcm91dGVyLmdldCgnL2dldFN1YklkcycsIHB1YmxpY0NvbnRyb2xsZXIuZ2V0U3ViSWRzKVxuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXSwibmFtZXMiOlsiUm91dGVyIiwicm91dGVyIiwicHVibGljQ29udHJvbGxlciIsImNvbnRlbnRDb250cm9sbGVyIiwidXNlckNvbnRyb2xsZXIiLCJjb21tZW50c0NvbnRyb2xsZXIiLCJwcmVmaXgiLCJnZXQiLCJnZXRDYXB0Y2hhIiwiZ2V0UG9zdExpc3QiLCJnZXRUaXBzIiwiZ2V0TGlua3MiLCJnZXRUb3BXZWVrIiwidXBkYXRlVXNlcm5hbWUiLCJnZXRQb3N0RGV0YWlsIiwiZ2V0Q29tbWVudHMiLCJnZXRCYXNpY0luZm8iLCJnZXRQb3N0UHVibGljIiwiZ2V0Q29tbWVudFB1YmxpYyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/routes/modules/publicRouter.js\n\n}");

/***/ }),

/***/ "./src/routes/modules/userRouter.js":
/*!******************************************!*\
  !*** ./src/routes/modules/userRouter.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! koa-router */ \"koa-router\");\n/* harmony import */ var koa_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(koa_router__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _api_UserController__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/api/UserController */ \"./src/api/UserController.js\");\n/* harmony import */ var _api_ContentController__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/api/ContentController */ \"./src/api/ContentController.js\");\n/* harmony import */ var _api_ErrorController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/api/ErrorController */ \"./src/api/ErrorController.js\");\n\n\n\n\nconst router = new (koa_router__WEBPACK_IMPORTED_MODULE_0___default())();\nrouter.prefix('/v1/user');\n\n// 用户签到\nrouter.get('/fav', _api_UserController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].userSign);\n\n// 更新用户的基本信息\nrouter.post('/basic', _api_UserController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateUserInfo);\n\n// 修改密码\nrouter.post('/changePassword', _api_UserController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].changePasswd);\n\n// 取消 设置收藏\nrouter.get('/setCollect', _api_UserController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setCollect);\n\n// 获取收藏列表\nrouter.get('/collect', _api_UserController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getCollectByUid);\n\n// 获取用户发贴记录\nrouter.get('/post', _api_ContentController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getPostByUid);\n\n// 删除发贴记录\nrouter.get('/deletePost', _api_ContentController__WEBPACK_IMPORTED_MODULE_2__[\"default\"].deletePostByUid);\n\n// 获取历史消息\nrouter.get('/getmsg', _api_UserController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getMsg);\n\n// 获取点赞记录\n// router.get('/getHands', userController.getHands);\n\n// 设置消息状态\nrouter.get('/setmsg', _api_UserController__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setMsg);\n\n// 保存错误日志\nrouter.post('/addError', _api_ErrorController__WEBPACK_IMPORTED_MODULE_3__[\"default\"].addError);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (router);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcm91dGVzL21vZHVsZXMvdXNlclJvdXRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBZ0M7QUFDa0I7QUFDTTtBQUNKO0FBRXBELE1BQU1JLE1BQU0sR0FBRyxJQUFJSixtREFBTSxDQUFDLENBQUM7QUFFM0JJLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDLFVBQVUsQ0FBQzs7QUFFekI7QUFDQUQsTUFBTSxDQUFDRSxHQUFHLENBQUMsTUFBTSxFQUFFTCwyREFBYyxDQUFDTSxRQUFRLENBQUM7O0FBRTNDO0FBQ0FILE1BQU0sQ0FBQ0ksSUFBSSxDQUFDLFFBQVEsRUFBRVAsMkRBQWMsQ0FBQ1EsY0FBYyxDQUFDOztBQUVwRDtBQUNBTCxNQUFNLENBQUNJLElBQUksQ0FBQyxpQkFBaUIsRUFBRVAsMkRBQWMsQ0FBQ1MsWUFBWSxDQUFDOztBQUUzRDtBQUNBTixNQUFNLENBQUNFLEdBQUcsQ0FBQyxhQUFhLEVBQUVMLDJEQUFjLENBQUNVLFVBQVUsQ0FBQzs7QUFFcEQ7QUFDQVAsTUFBTSxDQUFDRSxHQUFHLENBQUMsVUFBVSxFQUFFTCwyREFBYyxDQUFDVyxlQUFlLENBQUM7O0FBRXREO0FBQ0FSLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLE9BQU8sRUFBRUosOERBQWlCLENBQUNXLFlBQVksQ0FBQzs7QUFFbkQ7QUFDQVQsTUFBTSxDQUFDRSxHQUFHLENBQUMsYUFBYSxFQUFFSiw4REFBaUIsQ0FBQ1ksZUFBZSxDQUFDOztBQUU1RDtBQUNBVixNQUFNLENBQUNFLEdBQUcsQ0FBQyxTQUFTLEVBQUVMLDJEQUFjLENBQUNjLE1BQU0sQ0FBQzs7QUFFNUM7QUFDQTs7QUFFQTtBQUNBWCxNQUFNLENBQUNFLEdBQUcsQ0FBQyxTQUFTLEVBQUVMLDJEQUFjLENBQUNlLE1BQU0sQ0FBQzs7QUFFNUM7QUFDQVosTUFBTSxDQUFDSSxJQUFJLENBQUMsV0FBVyxFQUFFTCw0REFBZSxDQUFDYyxRQUFRLENBQUM7QUFFbEQsaUVBQWViLE1BQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rb2EvLi9zcmMvcm91dGVzL21vZHVsZXMvdXNlclJvdXRlci5qcz8xZjNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSb3V0ZXIgZnJvbSAna29hLXJvdXRlcic7XG5pbXBvcnQgdXNlckNvbnRyb2xsZXIgZnJvbSAnQC9hcGkvVXNlckNvbnRyb2xsZXInO1xuaW1wb3J0IGNvbnRlbnRDb250cm9sbGVyIGZyb20gJ0AvYXBpL0NvbnRlbnRDb250cm9sbGVyJztcbmltcG9ydCBlcnJvckNvbnRyb2xsZXIgZnJvbSAnQC9hcGkvRXJyb3JDb250cm9sbGVyJztcblxuY29uc3Qgcm91dGVyID0gbmV3IFJvdXRlcigpO1xuXG5yb3V0ZXIucHJlZml4KCcvdjEvdXNlcicpO1xuXG4vLyDnlKjmiLfnrb7liLBcbnJvdXRlci5nZXQoJy9mYXYnLCB1c2VyQ29udHJvbGxlci51c2VyU2lnbik7XG5cbi8vIOabtOaWsOeUqOaIt+eahOWfuuacrOS/oeaBr1xucm91dGVyLnBvc3QoJy9iYXNpYycsIHVzZXJDb250cm9sbGVyLnVwZGF0ZVVzZXJJbmZvKTtcblxuLy8g5L+u5pS55a+G56CBXG5yb3V0ZXIucG9zdCgnL2NoYW5nZVBhc3N3b3JkJywgdXNlckNvbnRyb2xsZXIuY2hhbmdlUGFzc3dkKTtcblxuLy8g5Y+W5raIIOiuvue9ruaUtuiXj1xucm91dGVyLmdldCgnL3NldENvbGxlY3QnLCB1c2VyQ29udHJvbGxlci5zZXRDb2xsZWN0KTtcblxuLy8g6I635Y+W5pS26JeP5YiX6KGoXG5yb3V0ZXIuZ2V0KCcvY29sbGVjdCcsIHVzZXJDb250cm9sbGVyLmdldENvbGxlY3RCeVVpZCk7XG5cbi8vIOiOt+WPlueUqOaIt+WPkei0tOiusOW9lVxucm91dGVyLmdldCgnL3Bvc3QnLCBjb250ZW50Q29udHJvbGxlci5nZXRQb3N0QnlVaWQpO1xuXG4vLyDliKDpmaTlj5HotLTorrDlvZVcbnJvdXRlci5nZXQoJy9kZWxldGVQb3N0JywgY29udGVudENvbnRyb2xsZXIuZGVsZXRlUG9zdEJ5VWlkKTtcblxuLy8g6I635Y+W5Y6G5Y+y5raI5oGvXG5yb3V0ZXIuZ2V0KCcvZ2V0bXNnJywgdXNlckNvbnRyb2xsZXIuZ2V0TXNnKTtcblxuLy8g6I635Y+W54K56LWe6K6w5b2VXG4vLyByb3V0ZXIuZ2V0KCcvZ2V0SGFuZHMnLCB1c2VyQ29udHJvbGxlci5nZXRIYW5kcyk7XG5cbi8vIOiuvue9rua2iOaBr+eKtuaAgVxucm91dGVyLmdldCgnL3NldG1zZycsIHVzZXJDb250cm9sbGVyLnNldE1zZyk7XG5cbi8vIOS/neWtmOmUmeivr+aXpeW/l1xucm91dGVyLnBvc3QoJy9hZGRFcnJvcicsIGVycm9yQ29udHJvbGxlci5hZGRFcnJvcik7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJuYW1lcyI6WyJSb3V0ZXIiLCJ1c2VyQ29udHJvbGxlciIsImNvbnRlbnRDb250cm9sbGVyIiwiZXJyb3JDb250cm9sbGVyIiwicm91dGVyIiwicHJlZml4IiwiZ2V0IiwidXNlclNpZ24iLCJwb3N0IiwidXBkYXRlVXNlckluZm8iLCJjaGFuZ2VQYXNzd2QiLCJzZXRDb2xsZWN0IiwiZ2V0Q29sbGVjdEJ5VWlkIiwiZ2V0UG9zdEJ5VWlkIiwiZGVsZXRlUG9zdEJ5VWlkIiwiZ2V0TXNnIiwic2V0TXNnIiwiYWRkRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/routes/modules/userRouter.js\n\n}");

/***/ }),

/***/ "@koa/cors":
/*!****************************!*\
  !*** external "@koa/cors" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("@koa/cors");

/***/ }),

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("bcrypt");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "dayjs":
/*!************************!*\
  !*** external "dayjs" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("dayjs");

/***/ }),

/***/ "dayjs/plugin/weekday":
/*!***************************************!*\
  !*** external "dayjs/plugin/weekday" ***!
  \***************************************/
/***/ ((module) => {

"use strict";
module.exports = require("dayjs/plugin/weekday");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("dotenv");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("jsonwebtoken");

/***/ }),

/***/ "koa":
/*!**********************!*\
  !*** external "koa" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("koa");

/***/ }),

/***/ "koa-body":
/*!***************************!*\
  !*** external "koa-body" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-body");

/***/ }),

/***/ "koa-combine-routers":
/*!**************************************!*\
  !*** external "koa-combine-routers" ***!
  \**************************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-combine-routers");

/***/ }),

/***/ "koa-compose":
/*!******************************!*\
  !*** external "koa-compose" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-compose");

/***/ }),

/***/ "koa-compress":
/*!*******************************!*\
  !*** external "koa-compress" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-compress");

/***/ }),

/***/ "koa-helmet":
/*!*****************************!*\
  !*** external "koa-helmet" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-helmet");

/***/ }),

/***/ "koa-json":
/*!***************************!*\
  !*** external "koa-json" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-json");

/***/ }),

/***/ "koa-jwt":
/*!**************************!*\
  !*** external "koa-jwt" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-jwt");

/***/ }),

/***/ "koa-log4":
/*!***************************!*\
  !*** external "koa-log4" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-log4");

/***/ }),

/***/ "koa-router":
/*!*****************************!*\
  !*** external "koa-router" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-router");

/***/ }),

/***/ "koa-static":
/*!*****************************!*\
  !*** external "koa-static" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("koa-static");

/***/ }),

/***/ "make-dir":
/*!***************************!*\
  !*** external "make-dir" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("make-dir");

/***/ }),

/***/ "md5":
/*!**********************!*\
  !*** external "md5" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("md5");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongoose");

/***/ }),

/***/ "nodemailer":
/*!*****************************!*\
  !*** external "nodemailer" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("nodemailer");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "qs":
/*!*********************!*\
  !*** external "qs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("qs");

/***/ }),

/***/ "redis":
/*!************************!*\
  !*** external "redis" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("redis");

/***/ }),

/***/ "stream/web":
/*!*****************************!*\
  !*** external "stream/web" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream/web");

/***/ }),

/***/ "svg-captcha":
/*!******************************!*\
  !*** external "svg-captcha" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("svg-captcha");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("uuid");

/***/ }),

/***/ "ws":
/*!*********************!*\
  !*** external "ws" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("ws");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;